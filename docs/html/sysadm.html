<html><head><title>System administration</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" type="text/css" title="pod_stylesheet" href="mmdocs.css?view=co">

</head>
<body class='pod'>
<!--
  generated by Metamod::Pod::Simple::HTML vv2.0.1,
  using Pod::Simple::PullParser v3.30,
  under Perl v5.014002 at Mon Jun  1 15:09:47 2015 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Metamod::Pod::Simple::HTML, and/or subclassing Metamod::Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Metamod::Pod::Simple::HTML for advice.
   See 'perldoc Metamod::Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<div id='banner'>METAMOD Documentation | <a name='___top' href='index.html'>main menu</a></div>
<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#System_administration'>System administration</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Configuration'>Configuration</a>
    <li class='indexItem indexItem2'><a href='#Dataset_administration'>Dataset administration</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Debugging'>Debugging</a>
      <li class='indexItem indexItem3'><a href='#virtualenv'>virtualenv</a>
      <li class='indexItem indexItem3'><a href='#lsds'>lsds</a>
    </ul>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="System_administration"
>System administration</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Configuration"
>Configuration</a></h2>

<p>Keeping track of all necessary config variables in master_config.txt has often been the most time-consuming part of setting up a new installation.
The <code>lsconf</code> tool has been developed to assist with this.
Here are some examples (using virtualenv):</p>

<p>Checking if your configuration is valid:</p>

<pre>    $ lsconf --check
    # Testing config in /home/anton/metamod/mysite
    ok 1 - config directory found
    ok 2 - WEBRUN_DIRECTORY is writable: /home/anton/metamod/webrun
    [...]
    ok 37 - OPERATOR_EMAIL is a valid email address
    1..37</pre>

<p>How to get nice color output when using a pager:</p>

<pre>    $ lsconf --color | less -R</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Dataset_administration"
>Dataset administration</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Debugging"
>Debugging</a></h3>

<p>If you want to check dataset metadata like XML, WMS, WMC, OPeNDAP etc, you can enable debug functions in the web search interface by adding <i>&#38;debug=1</i> to the end of the query string (prefixed by &#34;?&#34; if not set):</p>

<pre>  http://example.com/metamod/search/page/1/result?debug=1</pre>

<p>You can also use the command line utility <code>lsds</code> (see below):</p>

<pre>  $ lsds --wms                              # list datasets with wmsinfo and test if valid
  $ lsds --projectioninfo                   # list datasets with projectioninfo
  $ lsds --xmlfile                          # list paths to xml files</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="virtualenv"
>virtualenv</a></h3>

<p>This handy utility, lifted from Ruby and Python, creates a small shell script which can be sourced to set all necessary environment variables like PERL5LIB and METAMOD_MASTER_CONFIG so you won&#39;t have to repeat that for every shell command. It also puts most METAMOD commands in your PATH for easy access.</p>

<pre>    $ /opt/metno-metamod-2.13/virtualenv.pl metamod/config
    $  . metamod/config/bin/activate
    (config)$ lsconf
    (config)$ lsds
    (config)$ metamodweb_server -dr</pre>

<p>If for some reason you don&#39;t have write permissions to the config directory, you can specify another path to write the files:</p>

<pre>    $ /opt/metno-metamod-2.13/virtualenv.pl metamod/config /home/anton</pre>

<p>To reset the environment:</p>

<pre>    $  deactivate</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="lsds"
>lsds</a></h3>

<p>A quick way to query the metadata database without using the web interface is to use the <code>lsds</code> command line tool. This will list datasets with as much info as can be found in the database. Some search facilities are available, but most parameters from the web interface has not been implemented yet.</p>

<p>Some examples of use:</p>

<pre>  $ lsds 828 829 830 831                    # list datasets by id
  $ lsds --full NORMAP/metno-sstana05-V2    # show metadata by name
  $ lsds -m dataref_OPENDAP                 # list datasets containing a keyword
  $ lsds -p freetext=ice_conc               # search by free text parameter
  $ lsds -c -p &#39;freetext=ice AND arctic&#39;    # boolean search, only show count
  $ lsds --wms                              # list datasets with wmsinfo and test if valid
  $ lsds --projectioninfo                   # list datasets with projectioninfo
  $ lsds --xmlfile                          # list paths to xml files</pre>

<!-- end doc -->

</body></html>
