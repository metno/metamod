<html><head><title>Upgrading to METAMOD 2.11 from 2.10</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" type="text/css" title="pod_stylesheet" href="../mmdocs.css?view=co">

</head>
<body class='pod'>
<!--
  generated by Metamod::Pod::Simple::HTML v,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010001 at Mon Jan 14 16:08:44 2013 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Metamod::Pod::Simple::HTML, and/or subclassing Metamod::Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Metamod::Pod::Simple::HTML for advice.
   See 'perldoc Metamod::Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#Upgrading_to_METAMOD_2.11_from_2.10'>Upgrading to METAMOD 2.11 from 2.10</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#WMSinfo_format'>WMSinfo format</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Old_version_2.10'>Old version 2.10</a>
      <li class='indexItem indexItem3'><a href='#New_version_2.11'>New version 2.11</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#baselayer'>baselayer</a>
        <li class='indexItem indexItem4'><a href='#thumbnail'>thumbnail</a>
      </ul>
    </ul>
    <li class='indexItem indexItem2'><a href='#Obsolete_directives'>Obsolete directives</a>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Upgrading_to_METAMOD_2.11_from_2.10"
>Upgrading to METAMOD 2.11 from 2.10</a></h1>

<p>Upgrading to 2.11 only consists of stopping all services,
installing the new version,
running the install_jobs script and restarting the services as described in <a href="./../deploying.html?view=co" class="podlinkpod"
>Deploying</a>.</p>

<p>No change in configuration is necessary since the only new features are in the WMS client.
To take advantage of these,
some changes to the wmsinfo entries could be desired.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="WMSinfo_format"
>WMSinfo format</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Old_version_2.10"
>Old version 2.10</a></h3>

<p>Previously,
the only elements available were <b>displayArea</b> and <b>layer</b>.
Also there was only a single url attribute which could be used for either parent or child datasets,
but not both:</p>

<pre>    &#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
    &#60;w:ncWmsSetup xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
        xmlns:w=&#34;http://www.met.no/schema/metamod/ncWmsSetup&#34;
        url=&#34;http://dev-vm188/thredds/wms/osisaf/met.no/%DATASET_PARENT%/%DATASET%.nc&#34;
        xsi:schemaLocation=&#34;http://www.met.no/schema/metamod/ncWmsSetup ncWmsSetup.xsd &#34;&#62;

        &#60;w:displayArea crs=&#34;EPSG:32661&#34; left=&#34;-3000000&#34; right=&#34;7000000&#34; bottom=&#34;-3000000&#34; top=&#34;7000000&#34;/&#62;
        &#60;w:layer name=&#34;ice_conc&#34; style=&#34;BOXFILL/occam&#34;/&#62;
        &#60;w:layer name=&#34;lat&#34;/&#62;

    &#60;/w:ncWmsSetup&#62;</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="New_version_2.11"
>New version 2.11</a></h3>

<p>The WMS URLs for parent and child datasets are now specified separately:</p>

<dl>
<dt><a name="url"
>url</a></dt>

<dd>
<p>WMS URL for level 2 datasets (children). The substitutions <code>%DATASET%</code>, <code>%DATASET_PARENT%</code>, <code>%THREDDS_DATASET%</code> and <code>%THREDDS_DATAREF%</code> (deprecated) are allowed. See wmsurl() in the API documentation on the Dataset class for further explanation:</p>

<pre>  perldoc Metamod::DBIxSchema::Userbase::Result::Dataset</pre>

<p><i>(Make sure your PERL5LIB contains the path to ./common/lib of your METAMOD installation.)</i></p>

<dt><a name="aggregate_url"
>aggregate_url</a></dt>

<dd>
<p>WMS URL for level 1 datasets (parents). Only %DATASET% can be substituted</p>
</dd>
</dl>

<p>Two more elements have been added:</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="baselayer"
>baselayer</a></h4>

<p>This works like <b>layer</b>, but specifies a non-transparent baselayer normally to be used for background maps.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="thumbnail"
>thumbnail</a></h4>

<p>This is used to specify how the thumbnail in the search result should be setup. Currently the same thumbnail element is used for both parent and children (subject to change).</p>

<p>All elements share a few common attributes:</p>

<dl>
<dt><a name="name"
>name</a></dt>

<dd>
<p>The Layer Name from WMS Capabilities</p>

<dt><a name="style"
>style</a></dt>

<dd>
<p>(Only for thumbnails) The preferred Layer Name from WMS Capabilities</p>

<dt><a name="url"
>url</a></dt>

<dd>
<p>WMS URL (if different from the one in the ncWmsSetup element). No %...% substitutions are allowed</p>

<dt><a name="time"
>time</a></dt>

<dd>
<p>ISO timestamp as given in Dimensions in WMS Capabilities (mandatory in timeseries unless the WMS server handles default time parameters)</p>
</dd>
</dl>

<pre>    &#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
    &#60;w:ncWmsSetup xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
        xmlns:w=&#34;http://www.met.no/schema/metamod/ncWmsSetup&#34;
        aggregate_url=&#34;http://thredds.met.no/thredds/wms/cryoclim/met.no/osisaf-sh-agg&#34;
        url=&#34;http://thredds.met.no/thredds/wcs/cryoclim/met.no/%DATASET_PARENT%/%DATASET%.nc&#34;
        xsi:schemaLocation=&#34;http://www.met.no/schema/metamod/ncWmsSetup ncWmsSetup.xsd &#34;&#62;

        &#60;w:displayArea crs=&#34;EPSG:432600&#34; left=&#34;0&#34; right=&#34;60&#34; bottom=&#34;30&#34; top=&#34;90&#34; units=&#34;degrees&#34;/&#62;
        &#60;w:baselayer name=&#34;kart&#34; style=&#34;default&#34;/&#62;
        &#60;w:thumbnail name=&#34;ec.Temperatur,kart&#34; style=&#34;,contour&#34; time=&#34;2012-08-20T12:00:00.000Z&#34;
          url=&#34;http://thredds.met.no/thredds/wms/sea_ice/SIW-OSISAF-GLO-SIT_SIE_SIC-OBS/ice_conc_north_aggregated&#34;/&#62;

    &#60;/w:ncWmsSetup&#62;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Obsolete_directives"
>Obsolete directives</a></h2>

<p>These no longer have any effect in Metamod 2.11:</p>

<pre>    WMS_BACKGROUND_ISBASELAYER</pre>

<!-- end doc -->

</body></html>
