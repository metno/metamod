<html><head><title>METAMOD Datamodel</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" type="text/css" title="pod_stylesheet" href="mmdocs.css?view=co">

</head>
<body class='pod'>
<!--
  generated by Metamod::Pod::Simple::HTML v,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010001 at Tue Feb 12 13:02:39 2013 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Metamod::Pod::Simple::HTML, and/or subclassing Metamod::Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Metamod::Pod::Simple::HTML for advice.
   See 'perldoc Metamod::Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#METAMOD_Datamodel'>METAMOD Datamodel</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#The_Metadata'>The Metadata</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#IO-Libraries'>IO-Libraries</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#The_Metadata_Store'>The Metadata Store</a>
    <li class='indexItem indexItem2'><a href='#The_(SQL)_Database'>The (SQL) Database</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Index-Database'>Index-Database</a>
      <li class='indexItem indexItem3'><a href='#User-Database'>User-Database</a>
    </ul>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METAMOD_Datamodel"
>METAMOD Datamodel</a></h1>

<p>Back to <a href="./index.html?view=co" class="podlinkpod"
>Index</a></p>

<p>This text describes the data-model and the data-flow within METAMOD2.
It is not about the real data files which are often handled by other applications,
i.e.
thredds.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_Metadata"
>The Metadata</a></h2>

<p>All metadata in METAMOD should consist of two files,
the .xml-files (META) and the .xmd-files (XMD).</p>

<p>The META files contain the discovery metadata as retrieved from an metadata-editor,
extracted from netcdf-files or harvested from external metadata- repositories.
The META files should be stored in the format they have been retrieved,
e.g.
DIF,
ISO19139 or MM2.
They will be converted on export from the <a href="#The Metadata Store" class="podlinkpod"
>&#34;The Metadata Store&#34;</a>.</p>

<p>The XMD files are metamod-related information of the metadata.
They contain the following information:</p>

<dl>
<dt><a 
><b>name</b>: the unique identifier,
consisting of 2 or 3 path arguments like APPLICATION_ID/PARENT_NAME/CHILD_NAME or APPLICATION_ID/NAME
<dt><a name="status:_indicate_if_the_metadata_is_in_use_(active)_or_expired_(deleted)"
><b>status</b>: indicate if the metadata is in use (active) or expired (deleted)
<dt><a 
><b>ownertag</b>: identifies the source of the metadata (usually one tag for uploaded data per APPLICATION_ID and one tag for each harvester source)
<dt><a name="creationDate:_when_the_metadata_whas_created/retrieved_by_metamod"
><b>creationDate</b>: when the metadata whas created/retrieved by metamod
<dt><a name="datestamp:_last_change_of_the_xmd-file"
><b>datestamp</b>: last change of the xmd-file
<dt><a name="metadataFormat:_The_format_of_the_metadata._This_is_only_a_best-effort_and_not_a_guarantee."
><b>metadataFormat</b>: The format of the metadata.
This is only a best-effort and not a guarantee.</a></dt>
</dl>

<p>The <code>creationDate</code> and <code>datestamp</code> are only accurate concerning METAMOD and XMD-files.
The META files might have own means to control the creationDate and datastamp and it is up to the metadata-creator to control those fields.</p>

<p>The XMD-files might also contain information which does not fit in discovery-metadata and is usable by METAMOD only.
That is currently:</p>

<dl>
<dt><a name="quadtree_nodes:_high_accuracy_geographical_region_(deprecated_since_Metamod_2.3)"
><b>quadtree_nodes</b>: high accuracy geographical region (deprecated since Metamod 2.3)
<dt><a name="datasetRegion:_high_accuracy_geographical_region"
><b>datasetRegion</b>: high accuracy geographical region
<dt><a name="projectionInfo:_control_of_data-reprojections_through_fimex"
><b>projectionInfo</b>: control of data-reprojections through fimex
<dt><a name="wmsInfo:_control_of_WMS-client_for_the_data-representation"
><b>wmsInfo</b>: control of WMS-client for the data-representation</a></dt>
</dl>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="IO-Libraries"
>IO-Libraries</a></h3>

<p>To access the XMD files only use <a href="./Metamod::ForeignDataset.html?view=co" class="podlinkpod"
>Metamod::ForeignDataset</a>.
To access the information in the META files,
too (converted to MM2),
use <a href="./Metamod::Dataset.html?view=co" class="podlinkpod"
>Metamod::Dataset</a>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_Metadata_Store"
>The Metadata Store</a></h2>

<p>The Metadata Store of METAMOD is file-based in the <code>webrun/XML</code> directory of the instanses.
It is the authoritative source of all information about Metadata and the way Metamod uses it (META and XMD files).
It has no information related to metamod-users,
though.</p>

<p>The XMD and META files are stored in directories named APPLICATION_ID.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_(SQL)_Database"
>The (SQL) Database</a></h2>

<p>The SQL Database consists of two parts,
called Index- and User-databse.
The database can be used by several instances of metamod.
Currently,
one instance will have the ownership of the database.
That intance is then responsible for database-creation and all metadata-indexing.
That instance will need the path to all instances <code>webrun/XML</code> directories.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Index-Database"
>Index-Database</a></h3>

<p>The Index-database is an excerpt of all Metadata Stores for faster (indexed) access.
All META files are converted to MM2 metadata to be searchable in an easy way.
Only the web-needed information from the META-files can be found in the database.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="User-Database"
>User-Database</a></h3>

<p>The User-database stores all information related directly to users of metamod.
That is:</p>

<dl>
<dt><a name="user,_user-names,_passwords,_...:_(might_be_externalized,_i.e._LDAP)_This_information_is_unique_among_all_instances."
><b>user,
user-names,
passwords,
...</b>: (might be externalized,
i.e.
LDAP) This information is unique among all instances.
<dt><a name="user-roles_in_instances:_roles_for_the_instances_are_prepended_by_the_&#39;APPLICATION_ID&#39;"
><b>user-roles in instances</b>: roles for the instances are prepended by the &#39;APPLICATION_ID&#39;
<dt><a name="datasets_ownerships_(owned_by_users)"
><b>datasets ownerships</b> (owned by users)
<dt><a name="access-keys_for_users_to_datasets_(dirkeys)"
><b>access-keys for users to datasets</b> (dirkeys)
<dt><a name="user-subscriptions_to_datasets"
><b>user-subscriptions to datasets</b>
<dt><a name="collection-baskets_of_users_(temporary?)"
><b>collection-baskets of users</b> (temporary?)
<dt><a 
><b>temporary information</b> i.e.
database-tables for queues and everything which is faster/simpler to store (medium temporary) in a database than in the file-system.</a></dt>
</dl>

<!-- end doc -->

</body></html>
