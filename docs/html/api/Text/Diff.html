<html><head><title>Text::Diff</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:28 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#Formatting_Classes'>Formatting Classes</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Text%3A%3ADiff%3A%3ABase'>Text::Diff::Base</a>
    <li class='indexItem indexItem2'><a href='#Text%3A%3ADiff%3A%3AUnified'>Text::Diff::Unified</a>
    <li class='indexItem indexItem2'><a href='#Text%3A%3ADiff%3A%3ATable'>Text::Diff::Table</a>
    <li class='indexItem indexItem2'><a href='#Text%3A%3ADiff%3A%3AContext'>Text::Diff::Context</a>
    <li class='indexItem indexItem2'><a href='#Text%3A%3ADiff%3A%3AOldStyle'>Text::Diff::OldStyle</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#LIMITATIONS'>LIMITATIONS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Text::Diff - Perform diffs on files and record sets</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use Text::Diff;

    ## Mix and match filenames, strings, file handles, producer subs,
    ## or arrays of records; returns diff in a string.
    ## WARNING: can return B&#60;large&#62; diffs for large files.
    my $diff = diff &#34;file1.txt&#34;, &#34;file2.txt&#34;, { STYLE =&#62; &#34;Context&#34; };
    my $diff = diff \$string1,   \$string2,   \%options;
    my $diff = diff \*FH1,       \*FH2;
    my $diff = diff \&#38;reader1,   \&#38;reader2;
    my $diff = diff \@records1,  \@records2;

    ## May also mix input types:
    my $diff = diff \@records1,  &#34;file_B.txt&#34;;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p><code>diff()</code> provides a basic set of services akin to the GNU <code>diff</code> utility. It is not anywhere near as feature complete as GNU <code>diff</code>, but it is better integrated with Perl and available on all platforms. It is often faster than shelling out to a system&#39;s <code>diff</code> executable for small files, and generally slower on larger files.</p>

<p>Relies on <a href="../Algorithm/Diff.html" class="podlinkpod"
>Algorithm::Diff</a> for, well, the algorithm. This may not produce the same exact diff as a system&#39;s local <code>diff</code> executable, but it will be a valid diff and comprehensible by <code>patch</code>. We haven&#39;t seen any differences between Algorithm::Diff&#39;s logic and GNU diff&#39;s, but we have not examined them to make sure they are indeed identical.</p>

<p><b>Note</b>: If you don&#39;t want to import the <code>diff</code> function, do one of the following:</p>

<pre>   use Text::Diff ();

   require Text::Diff;</pre>

<p>That&#39;s a pretty rare occurence, so <code>diff()</code> is exported by default. =head1 OPTIONS</p>

<p>diff() takes two parameters from which to draw input and a set of options to control it&#39;s output. The options are:</p>

<dl>
<dt><a name="FILENAME_A,_MTIME_A,_FILENAME_B,_MTIME_B"
>FILENAME_A, MTIME_A, FILENAME_B, MTIME_B</a></dt>

<dd>
<p>The name of the file and the modification time &#34;files&#34;</p>

<p>These are filled in automatically for each file when diff() is passed a filename, unless a defined value is passed in.</p>

<p>If a filename is not passed in and FILENAME_A and FILENAME_B are not provided or <code>undef</code>, the header will not be printed.</p>

<p>Unused on <code>OldStyle</code> diffs.</p>

<dt><a name="OFFSET_A,_OFFSET_B"
>OFFSET_A, OFFSET_B</a></dt>

<dd>
<p>The index of the first line / element. These default to 1 for all parameter types except ARRAY references, for which the default is 0. This is because ARRAY references are presumed to be data structures, while the others are line oriented text.</p>

<dt><a name="STYLE"
>STYLE</a></dt>

<dd>
<p>&#34;Unified&#34;, &#34;Context&#34;, &#34;OldStyle&#34;, or an object or class reference for a class providing <code>file_header()</code>, <code>hunk_header()</code>, <code>hunk()</code>, <code>hunk_footer()</code> and <code>file_footer()</code> methods. The two footer() methods are provided for overloading only; none of the formats provide them.</p>

<p>Defaults to &#34;Unified&#34; (unlike standard <code>diff</code>, but Unified is what&#39;s most often used in submitting patches and is the most human readable of the three.</p>

<p>If the package indicated by the STYLE has no hunk() method, c&#60;diff()&#62; will load it automatically (lazy loading). Since all such packages should inherit from Text::Diff::Base, this should be marvy.</p>

<p>Styles may be specified as class names (<code>STYLE =</code> &#34;Foo&#34;), in which case they will be <code>new()</code>ed with no parameters, or as objects (<code>STYLE =</code> Foo-&#62;new&#62;).</p>

<dt><a name="CONTEXT"
>CONTEXT</a></dt>

<dd>
<p>How many lines before and after each diff to display. Ignored on old-style diffs. Defaults to 3.</p>

<dt><a name="OUTPUT"
>OUTPUT</a></dt>

<dd>
<p>Examples and their equivalent subroutines:</p>

<pre>    OUTPUT   =&#62; \*FOOHANDLE,   # like: sub { print FOOHANDLE shift() }
    OUTPUT   =&#62; \$output,      # like: sub { $output .= shift }
    OUTPUT   =&#62; \@output,      # like: sub { push @output, shift }
    OUTPUT   =&#62; sub { $output .= shift },</pre>

<p>If no <code>OUTPUT</code> is supplied, returns the diffs in a string. If <code>OUTPUT</code> is a <code>CODE</code> ref, it will be called once with the (optional) file header, and once for each hunk body with the text to emit. If <code>OUTPUT</code> is an <a href="../IO/Handle.html" class="podlinkpod"
>IO::Handle</a>, output will be emitted to that handle.</p>

<dt><a name="FILENAME_PREFIX_A,_FILENAME_PREFIX_B"
>FILENAME_PREFIX_A, FILENAME_PREFIX_B</a></dt>

<dd>
<p>The string to print before the filename in the header. Unused on <code>OldStyle</code> diffs. Defaults are <code>&#34;---&#34;</code>, <code>&#34;+++&#34;</code> for Unified and <code>&#34;***&#34;</code>, <code>&#34;+++&#34;</code> for Context.</p>

<dt><a name="KEYGEN,_KEYGEN_ARGS"
>KEYGEN, KEYGEN_ARGS</a></dt>

<dd>
<p>These are passed to <a href="../Algorithm/Diff.html#traverse_sequences" class="podlinkpod"
>&#34;traverse_sequences&#34; in Algorithm::Diff</a>.</p>
</dd>
</dl>

<p><b>Note</b>: if neither <code>FILENAME_</code> option is defined, the header will not be printed. If at one is present, the other and both MTIME_ options must be present or &#34;Use of undefined variable&#34; warnings will be generated (except on <code>OldStyle</code> diffs, which ignores these options).</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Formatting_Classes"
>Formatting Classes</a></h1>

<p>These functions implement the output formats. They are grouped in to classes so diff() can use class names to call the correct set of output routines and so that you may inherit from them easily. There are no constructors or instance methods for these classes, though subclasses may provide them if need be.</p>

<p>Each class has file_header(), hunk_header(), hunk(), and footer() methods identical to those documented in the Text::Diff::Unified section. header() is called before the hunk() is first called, footer() afterwards. The default footer function is an empty method provided for overloading:</p>

<pre>    sub footer { return &#34;End of patch\n&#34; }</pre>

<p>Some output formats are provided by external modules (which are loaded automatically), such as <a href="../Text/Diff/Table.html" class="podlinkpod"
>Text::Diff::Table</a>. These are are documented here to keep the documentation simple.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Text::Diff::Base"
>Text::Diff::Base</a></h2>

<p>Returns &#34;&#34; for all methods (other than <code>new()</code>).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Text::Diff::Unified"
>Text::Diff::Unified</a></h2>

<pre>  --- A   Mon Nov 12 23:49:30 2001
  +++ B   Mon Nov 12 23:49:30 2001
  @@ -2,13 +2,13 @@
   2
   3
   4
  -5d
  +5a
   6
   7
   8
   9
  +9a
   10
   11
  -11d
   12
   13</pre>

<dl>
<dt><a name="file_header"
>file_header</a></dt>

<dd>
<pre>  $s = Text::Diff::Unified-&#62;file_header( $options );</pre>

<p>Returns a string containing a unified header. The sole parameter is the options hash passed in to diff(), containing at least:</p>

<pre>  FILENAME_A  =&#62; $fn1,
  MTIME_A     =&#62; $mtime1,
  FILENAME_B  =&#62; $fn2,
  MTIME_B     =&#62; $mtime2</pre>

<p>May also contain</p>

<pre>  FILENAME_PREFIX_A    =&#62; &#34;---&#34;,
  FILENAME_PREFIX_B    =&#62; &#34;+++&#34;,</pre>

<p>to override the default prefixes (default values shown).</p>

<dt><a name="hunk_header"
>hunk_header</a></dt>

<dd>
<pre>  Text::Diff::Unified-&#62;hunk_header( \@ops, $options );</pre>

<p>Returns a string containing the output of one hunk of unified diff.</p>

<dt><a name="Text::Diff::Unified::hunk"
>Text::Diff::Unified::hunk</a></dt>

<dd>
<pre>  Text::Diff::Unified-&#62;hunk( \@seq_a, \@seq_b, \@ops, $options );</pre>

<p>Returns a string containing the output of one hunk of unified diff.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Text::Diff::Table"
>Text::Diff::Table</a></h2>

<pre>  +--+----------------------------------+--+------------------------------+
  |  |../Test-Differences-0.2/MANIFEST  |  |../Test-Differences/MANIFEST  |
  |  |Thu Dec 13 15:38:49 2001          |  |Sat Dec 15 02:09:44 2001      |
  +--+----------------------------------+--+------------------------------+
  |  |                                  * 1|Changes                       *
  | 1|Differences.pm                    | 2|Differences.pm                |
  | 2|MANIFEST                          | 3|MANIFEST                      |
  |  |                                  * 4|MANIFEST.SKIP                 *
  | 3|Makefile.PL                       | 5|Makefile.PL                   |
  |  |                                  * 6|t/00escape.t                  *
  | 4|t/00flatten.t                     | 7|t/00flatten.t                 |
  | 5|t/01text_vs_data.t                | 8|t/01text_vs_data.t            |
  | 6|t/10test.t                        | 9|t/10test.t                    |
  +--+----------------------------------+--+------------------------------+</pre>

<p>This format also goes to some pains to highlight &#34;invisible&#34; characters on differing elements by selectively escaping whitespace:</p>

<pre>  +--+--------------------------+--------------------------+
  |  |demo_ws_A.txt             |demo_ws_B.txt             |
  |  |Fri Dec 21 08:36:32 2001  |Fri Dec 21 08:36:50 2001  |
  +--+--------------------------+--------------------------+
  | 1|identical                 |identical                 |
  * 2|        spaced in         |        also spaced in    *
  * 3|embedded space            |embedded        tab       *
  | 4|identical                 |identical                 |
  * 5|        spaced in         |\ttabbed in               *
  * 6|trailing spaces\s\s\n     |trailing tabs\t\t\n       *
  | 7|identical                 |identical                 |
  * 8|lf line\n                 |crlf line\r\n             *
  * 9|embedded ws               |embedded\tws              *
  +--+--------------------------+--------------------------+</pre>

<p>See <a href="#Text%3A%3ADiff%3A%3ATable" class="podlinkpod"
>&#34;Text::Diff::Table&#34;</a> for more details, including how the whitespace escaping works.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Text::Diff::Context"
>Text::Diff::Context</a></h2>

<pre>    *** A   Mon Nov 12 23:49:30 2001
    --- B   Mon Nov 12 23:49:30 2001
    ***************
    *** 2,14 ****
      2
      3
      4
    ! 5d
      6
      7
      8
      9
      10
      11
    - 11d
      12
      13
    --- 2,14 ----
      2
      3
      4
    ! 5a
      6
      7
      8
      9
    + 9a
      10
      11
      12
      13</pre>

<p>Note: hunk_header() returns only &#34;***************\n&#34;.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Text::Diff::OldStyle"
>Text::Diff::OldStyle</a></h2>

<pre>    5c5
    &#60; 5d
    ---
    &#62; 5a
    9a10
    &#62; 9a
    12d12
    &#60; 11d</pre>

<p>Note: no file_header().</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LIMITATIONS"
>LIMITATIONS</a></h1>

<p>Must suck both input files entirely in to memory and store them with a normal amount of Perlish overhead (one array location) per record. This is implied by the implementation of Algorithm::Diff, which takes two arrays. If Algorithm::Diff ever offers an incremental mode, this can be changed (contact the maintainers of Algorithm::Diff and Text::Diff if you need this; it shouldn&#39;t be too terribly hard to tie arrays in this fashion).</p>

<p>Does not provide most of the more refined GNU diff options: recursive directory tree scanning, ignoring blank lines / whitespace, etc., etc. These can all be added as time permits and need arises, many are rather easy; patches quite welcome.</p>

<p>Uses closures internally, this may lead to leaks on <code>perl</code> versions 5.6.1 and prior if used many times over a process&#39; life time.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Adam Kennedy &#60;adamk@cpan.org&#62;</p>

<p>Barrie Slaymaker &#60;barries@slaysys.com&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Some parts copyright 2009 Adam Kennedy.</p>

<p>Copyright 2001 Barrie Slaymaker. All Rights Reserved.</p>

<p>You may use this under the terms of either the Artistic License or GNU Public License v 2.0 or greater.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
