<html><head><title>POE::Filter::Block</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:25 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#PUBLIC_FILTER_METHODS'>PUBLIC FILTER METHODS</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
  <li class='indexItem indexItem1'><a href='#AUTHORS_%26_COPYRIGHTS'>AUTHORS &#38; COPYRIGHTS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>POE::Filter::Block - translate data between streams and blocks</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  #!perl

  use warnings;
  use strict;
  use POE::Filter::Block;

  my $filter = POE::Filter::Block-&#62;new( BlockSize =&#62; 8 );

  # Prints three lines: abcdefgh, ijklmnop, qrstuvwx.
  # Bytes &#34;y&#34; and &#34;z&#34; remain in the buffer and await completion of the
  # next 8-byte block.

  $filter-&#62;get_one_start([ &#34;abcdefghijklmnopqrstuvwxyz&#34; ]);
  while (1) {
    my $block = $filter-&#62;get_one();
    last unless @$block;
    print $block-&#62;[0], &#34;\n&#34;;
  }

  # Print one line: yz123456

  $filter-&#62;get_one_start([ &#34;123456&#34; ]);
  while (1) {
    my $block = $filter-&#62;get_one();
    last unless @$block;
    print $block-&#62;[0], &#34;\n&#34;;
  }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>POE::Filter::Block translates data between serial streams and blocks. It can handle fixed-length and length-prepended blocks, and it may be extended to handle other block types.</p>

<p>Fixed-length blocks are used when Block&#39;s constructor is called with a BlockSize value. Otherwise the Block filter uses length-prepended blocks.</p>

<p>Users who specify block sizes less than one deserve what they get.</p>

<p>In variable-length mode, a LengthCodec parameter may be specified. The LengthCodec value should be a reference to a list of two functions: the length encoder, and the length decoder:</p>

<pre>  LengthCodec =&#62; [ \&#38;encoder, \&#38;decoder ]</pre>

<p>The encoder takes a reference to a buffer and prepends the buffer&#39;s length to it. The default encoder prepends the ASCII representation of the buffer&#39;s length and a chr(0) byte to separate the length from the actual data:</p>

<pre>  sub _default_encoder {
    my $stuff = shift;
    substr($$stuff, 0, 0) = length($$stuff) . &#34;\0&#34;;
    return;
  }</pre>

<p>The corresponding decoder returns the block length after removing it and the separator from the buffer. It returns nothing if no length can be determined.</p>

<pre>  sub _default_decoder {
    my $stuff = shift;
    unless ($$stuff =~ s/^(\d+)\0//s) {
      warn length($1), &#34; strange bytes removed from stream&#34;
        if $$stuff =~ s/^(\D+)//s;
      return;
    }
    return $1;
  }</pre>

<p>This filter holds onto incomplete blocks until they are completed.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PUBLIC_FILTER_METHODS"
>PUBLIC FILTER METHODS</a></h1>

<p>POE::Filter::Block has no additional public methods.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>Please see <a href="../../POE/Filter.html" class="podlinkpod"
>POE::Filter</a> for documentation regarding the base interface.</p>

<p>The SEE ALSO section in <a href="../../POE.html" class="podlinkpod"
>POE</a> contains a table of contents covering the entire POE distribution.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h1>

<p>The put() method doesn&#39;t verify block sizes.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS_&#38;_COPYRIGHTS"
>AUTHORS &#38; COPYRIGHTS</a></h1>

<p>The Block filter was contributed by Dieter Pearcey, with changes by Rocco Caputo.</p>

<p>Please see <a href="../../POE.html" class="podlinkpod"
>POE</a> for more information about authors and contributors.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
