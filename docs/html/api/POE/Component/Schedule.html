<html><head><title>POE::Component::Schedule</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:25 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#POE%3A%3AComponent%3A%3ASchedule_METHODS'>POE::Component::Schedule METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#spawn(Alias_%3D%3E_name)'>spawn(Alias =&#62; name)</a>
    <li class='indexItem indexItem2'><a href='#add(%24session%2C_%24event_name%2C_%24iterator%2C_%40event_args)'>add($session, $event_name, $iterator, @event_args)</a>
    <li class='indexItem indexItem2'><a href='#new(%24session%2C_%24event_name%2C_%24iterator%2C_%40event_args)'>new($session, $event_name, $iterator, @event_args)</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#SCHEDULE_HANDLE_METHODS'>SCHEDULE HANDLE METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#delete()'>delete()</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#SUPPORT'>SUPPORT</a>
  <li class='indexItem indexItem1'><a href='#ACKNOWLEDGMENT_%26_HISTORY'>ACKNOWLEDGMENT &#38; HISTORY</a>
  <li class='indexItem indexItem1'><a href='#AUTHORS'>AUTHORS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>POE::Component::Schedule - Schedule POE events using DateTime::Set iterators</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use POE qw(Component::Schedule);
    use DateTime::Set;

    POE::Session-&#62;create(
        inline_states =&#62; {
            _start =&#62; sub {
                $_[HEAP]{sched} = POE::Component::Schedule-&#62;add(
                    $_[SESSION], Tick =&#62; DateTime::Set-&#62;from_recurrence(
                        after      =&#62; DateTime-&#62;now,
                        before     =&#62; DateTime-&#62;now-&#62;add(seconds =&#62; 3),
                        recurrence =&#62; sub {
                            return $_[0]-&#62;truncate( to =&#62; &#39;second&#39; )-&#62;add( seconds =&#62; 1 )
                        },
                    ),
                );
            },
            Tick =&#62; sub {
                print &#39;tick &#39;, scalar localtime, &#34;\n&#34;;
            },
            remove_sched =&#62; sub {
                # Three ways to remove a schedule
                # The first one is only for API compatibility with POE::Component::Cron
                $_[HEAP]{sched}-&#62;delete;
                $_[HEAP]{sched} = undef;
                delete $_[HEAP]{sched};
            },
            _stop =&#62; sub {
                print &#34;_stop\n&#34;;
            },
        },
    );

    POE::Kernel-&#62;run();</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This component encapsulates a session that sends events to client sessions on a schedule as defined by a DateTime::Set iterator.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="POE::Component::Schedule_METHODS"
>POE::Component::Schedule METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="spawn(Alias_=&#62;_name)"
>spawn(Alias =&#62; <i>name</i>)</a></h2>

<p>Start up the PoCo::Schedule background session with the given alias. Returns the back-end session handle.</p>

<p>No need to call this in normal use, <code>add()</code> and <code>new()</code> all crank one of these up if it is needed.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="add($session,_$event_name,_$iterator,_@event_args)"
>add(<i>$session</i>, <i>$event_name</i>, <i>$iterator</i>, <i>@event_args</i>)</a></h2>

<pre>    my $sched = POE::Component::Schedule-&#62;add(
        $session,
        $event_name,
        $DateTime_Set_iterator,
        @event_args
    );</pre>

<p>Add a set of events to the scheduler.</p>

<p>Returns a schedule handle. The event is automatically deleted when the handle is not referenced anymore.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new($session,_$event_name,_$iterator,_@event_args)"
>new(<i>$session</i>, <i>$event_name</i>, <i>$iterator</i>, <i>@event_args</i>)</a></h2>

<p><code>new()</code> is an alias for <code>add()</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SCHEDULE_HANDLE_METHODS"
>SCHEDULE HANDLE METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="delete()"
>delete()</a></h2>

<p>Removes a schedule using the handle returned from <code>add()</code> or <code>new()</code>.</p>

<p><b>DEPRECATED</b>: Schedules are now automatically deleted when they are not referenced anymore. So just setting the container variable to <code>undef</code> will delete the schedule.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../POE.html" class="podlinkpod"
>POE</a>, <a href="../../DateTime/Set.html" class="podlinkpod"
>DateTime::Set</a>, <a href="../../POE/Component/Cron.html" class="podlinkpod"
>POE::Component::Cron</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SUPPORT"
>SUPPORT</a></h1>

<p>You can look for information at:</p>

<ul>
<li>RT: CPAN&#39;s request tracker
<p><a href="http://rt.cpan.org/NoAuth/Bugs.html?Dist=POE-Component-Schedule" class="podlinkurl"
>http://rt.cpan.org/NoAuth/Bugs.html?Dist=POE-Component-Schedule</a>: post bug report there.</p>
</li>

<li>CPAN Ratings
<p><a href="http://cpanratings.perl.org/p/POE-Component-Schedule" class="podlinkurl"
>http://cpanratings.perl.org/p/POE-Component-Schedule</a>: if you use this distibution, please add comments on your experience for other users.</p>
</li>

<li>Search CPAN
<p><a href="http://search.cpan.org/dist/POE-Component-Schedule/" class="podlinkurl"
>http://search.cpan.org/dist/POE-Component-Schedule/</a></p>
</li>

<li>AnnoCPAN: Annotated CPAN documentation
<p><a href="http://annocpan.org/dist/POE-Component-Schedule" class="podlinkurl"
>http://annocpan.org/dist/POE-Component-Schedule</a></p>
</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ACKNOWLEDGMENT_&#38;_HISTORY"
>ACKNOWLEDGMENT &#38; HISTORY</a></h1>

<p>This module was a friendly fork of <a href="../../POE/Component/Cron.html" class="podlinkpod"
>POE::Component::Cron</a> to extract the generic parts and isolate the Cron specific code in order to reduce dependencies on other CPAN modules.</p>

<p>See <a href="https://rt.cpan.org/Ticket/Display.html?id=44442" class="podlinkurl"
>https://rt.cpan.org/Ticket/Display.html?id=44442</a>.</p>

<p>The orignal author of POE::Component::Cron is Chris Fedde.</p>

<p>POE::Component::Cron is now implemented as a class that inherits from POE::Component::Schedule.</p>

<p>Most of the POE::Component::Schedule internals have since been rewritten in 0.91_01 and we have now a complete test suite.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS"
>AUTHORS</a></h1>

<dl>
<dt><a name="Olivier_Mengu&#233;,_dolmen@cpan.org"
>Olivier Mengu&#233;, <code>dolmen@cpan.org</code></a></dt>

<dd>
<dt><a name="Chris_Fedde,_cfedde@cpan.org"
>Chris Fedde, <code>cfedde@cpan.org</code></a></dt>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<dl>
<dt><a name="Copyright_&#169;_2009-2010_Olivier_Mengu&#233;."
>Copyright &#169; 2009-2010 Olivier Mengu&#233;.</a></dt>

<dd>
<dt><a name="Copyright_&#169;_2007-2008_Chris_Fedde."
>Copyright &#169; 2007-2008 Chris Fedde.</a></dt>
</dl>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself, either Perl version 5.8.3 or, at your option, any later version of Perl 5 you may have available.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
