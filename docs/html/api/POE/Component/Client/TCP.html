<html><head><title>POE::Component::Client::TCP</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:25 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Performance_Considerations'>Performance Considerations</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#PUBLIC_METHODS'>PUBLIC METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new'>new</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Constructor_Parameters_Affecting_the_Session'>Constructor Parameters Affecting the Session</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#Alias'>Alias</a>
        <li class='indexItem indexItem4'><a href='#Args'>Args</a>
        <li class='indexItem indexItem4'><a href='#InlineStates'>InlineStates</a>
        <li class='indexItem indexItem4'><a href='#ObjectStates'>ObjectStates</a>
        <li class='indexItem indexItem4'><a href='#PackageStates'>PackageStates</a>
        <li class='indexItem indexItem4'><a href='#PreConnect'>PreConnect</a>
        <li class='indexItem indexItem4'><a href='#SessionType'>SessionType</a>
        <li class='indexItem indexItem4'><a href='#SessionParams'>SessionParams</a>
        <li class='indexItem indexItem4'><a href='#Started'>Started</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#POE%3A%3AWheel%3A%3ASocketFactory_Constructor_Parameters'>POE::Wheel::SocketFactory Constructor Parameters</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#BindAddress'>BindAddress</a>
        <li class='indexItem indexItem4'><a href='#BindPort'>BindPort</a>
        <li class='indexItem indexItem4'><a href='#ConnectError'>ConnectError</a>
        <li class='indexItem indexItem4'><a href='#Connected'>Connected</a>
        <li class='indexItem indexItem4'><a href='#ConnectTimeout'>ConnectTimeout</a>
        <li class='indexItem indexItem4'><a href='#Domain'>Domain</a>
        <li class='indexItem indexItem4'><a href='#RemoteAddress'>RemoteAddress</a>
        <li class='indexItem indexItem4'><a href='#RemotePort'>RemotePort</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#POE%3A%3AWheel%3A%3AReadWrite_Constructor_Parameters'>POE::Wheel::ReadWrite Constructor Parameters</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#Disconnected'>Disconnected</a>
        <li class='indexItem indexItem4'><a href='#Filter'>Filter</a>
        <li class='indexItem indexItem4'><a href='#ServerError'>ServerError</a>
        <li class='indexItem indexItem4'><a href='#ServerFlushed'>ServerFlushed</a>
        <li class='indexItem indexItem4'><a href='#ServerInput'>ServerInput</a>
      </ul>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#Public_Events'>Public Events</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#connect'>connect</a>
    <li class='indexItem indexItem2'><a href='#reconnect'>reconnect</a>
    <li class='indexItem indexItem2'><a href='#shutdown'>shutdown</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Reserved_Heap_Members'>Reserved Heap Members</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#server'>server</a>
    <li class='indexItem indexItem2'><a href='#shutdown'>shutdown</a>
    <li class='indexItem indexItem2'><a href='#connected'>connected</a>
    <li class='indexItem indexItem2'><a href='#shutdown_on_error'>shutdown_on_error</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#CAVEATS'>CAVEATS</a>
  <li class='indexItem indexItem1'><a href='#AUTHORS_%26_COPYRIGHTS'>AUTHORS &#38; COPYRIGHTS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>POE::Component::Client::TCP - a simplified TCP client</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  #!perl

  use warnings;
  use strict;

  use POE qw(Component::Client::TCP);

  POE::Component::Client::TCP-&#62;new(
    RemoteAddress =&#62; &#34;yahoo.com&#34;,
    RemotePort    =&#62; 80,
    Connected     =&#62; sub {
      $_[HEAP]{server}-&#62;put(&#34;HEAD /&#34;);
    },
    ServerInput   =&#62; sub {
      my $input = $_[ARG0];
      print &#34;from server: $input\n&#34;;
    },
  );

  POE::Kernel-&#62;run();
  exit;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>POE::Component::Client::TCP implements a generic single-Session client. Internally it uses POE::Wheel::SocketFactory to establish the connection and POE::Wheel::ReadWrite to interact with the server.</p>

<p>POE::Component::Client::TCP is customized by providing callbacks for common operations. Most operations have sensible default callbacks, so clients may be created with as little work as possible.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Performance_Considerations"
>Performance Considerations</a></h2>

<p>POE::Component::Client::TCP&#39;s ease of use comes at a price. The component is generic, so it&#39;s not tuned to perform well for any particular application.</p>

<p>If performance is your primary goal, POE::Kernel&#39;s select_read() and select_write() perform about the same as IO::Select, but your code will be portable across every event loop POE supports.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PUBLIC_METHODS"
>PUBLIC METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new"
>new</a></h2>

<p>new() starts a client based on POE::Component::Client::TCP and returns the ID of the session that will handle server interaction.</p>

<p>new() returns immediately, which may be before the client has established its connection. It is always reliable to wait for the <code>Connected</code> callback to fire before transmitting data to the server.</p>

<p>The client&#39;s constructor may seem to take a daunting number of parameters. As with most POE modules, POE::Component::Client::TCP tries to do as much work in its constructor so that the run-time code path is relatively light.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Constructor_Parameters_Affecting_the_Session"
>Constructor Parameters Affecting the Session</a></h3>

<p>The parameters in this section affect how the client&#39;s POE::Session object will be created.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="Alias"
>Alias</a></h4>

<p><code>Alias</code> is an optional symbolic name for the client&#39;s Session. It allows other sessions to post events to the client, such as &#34;shutdown&#34; and &#34;reconnect&#34;. The client itself may yield() these events, so an alias isn&#39;t usually needed.</p>

<pre>  Alias =&#62; &#34;client&#34;,</pre>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="Args"
>Args</a></h4>

<p><code>Args</code> is optional. When specified, it holds an ARRAYREF that will be passed to the <code>Started</code> callback via @_[ARG0..$#_]. This allows a program to pass extra information into the client session.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="InlineStates"
>InlineStates</a></h4>

<p><code>InlineStates</code> is optional. If specified, it must hold a hashref of named callbacks. Its syntax is that of POE:Session-&#62;create()&#39;s inline_states parameter.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="ObjectStates"
>ObjectStates</a></h4>

<p>If <code>ObjectStates</code> is specified, it must holde an arrayref of objects and the events they will handle. The arrayref must follow the syntax for POE::Session-&#62;create()&#39;s object_states parameter.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="PackageStates"
>PackageStates</a></h4>

<p>When the optional <code>PackageStates</code> is set, it must hold an arrayref of package names and the events they will handle The arrayref must follow the syntax for POE::Session-&#62;create()&#39;s package_states parameter.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="PreConnect"
>PreConnect</a></h4>

<p><code>PreConnect</code> is called before <code>Connected</code>, and it has different parameters: $_[ARG0] contains a copy of the socket before it&#39;s given to POE::Wheel::ReadWrite for management. Most HEAP members are set, except of course $_[HEAP]{server}, because the POE::Wheel::ReadWrite object has not been created yet. <code>PreConnect</code> may enable SSL on the socket using POE::Component::SSLify. <code>PreConnect</code> must return a valid socket to complete the connection; the client will disconnect if anything else is returned.</p>

<pre>  PreConnect =&#62; {
    # Convert the socket into an SSL socket.
    my $socket = eval { Client_SSLify($_[ARG0]) };

    # Disconnect if SSL failed.
    return if $@;

    # Return the SSL-ified socket.
    return $socket;
  }</pre>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="SessionType"
>SessionType</a></h4>

<p>Each client is created within its own Session. <code>SessionType</code> names the class that will be used to create the session.</p>

<pre>  SessionType =&#62; &#34;POE::Session::MultiDispatch&#34;,</pre>

<p><code>SessionType</code> is optional. The component will use &#34;POE::Session&#34; by default.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="SessionParams"
>SessionParams</a></h4>

<p><code>SessionParams</code> specifies additional parameters that will be passed to the <code>SessionType</code> constructor at creation time. It must be an array reference.</p>

<pre>  SessionParams =&#62; [ options =&#62; { debug =&#62; 1, trace =&#62; 1 } ],</pre>

<p>Note: POE::Component::Client::TCP supplies its own POE::Session constructor parameters. Conflicts between them and <code>SessionParams</code> may cause the component to behave erratically. To avoid such problems, please limit SessionParams to the <code>options</code> hash. See <a href="../../../POE/Session.html" class="podlinkpod"
>POE::Session</a> for an known options.</p>

<p>We may enable other options later. Please let us know if you need something.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="Started"
>Started</a></h4>

<p><code>Started</code> sets an optional callback that will be invoked within the client session has been started. The callback&#39;s parameters are the usual for the session&#39;s _start handler.</p>

<p><code>Args</code> may be used to pass additional parameters to <code>Started</code>. This can be used to bypass issues introduced by closures. The values from <code>Args</code> will be included in the @_[ARG0..$#_] parameters.</p>

<pre>  sub handle_started {
    my @args = @_[ARG0..$#_];
    # ...
  }</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="POE::Wheel::SocketFactory_Constructor_Parameters"
>POE::Wheel::SocketFactory Constructor Parameters</a></h3>

<p>The constructor parameters in this section affect how the client&#39;s POE::Wheel::SocketFactory object will be created.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="BindAddress"
>BindAddress</a></h4>

<p><code>BindAddress</code> specifies the local interface address to bind to before starting to connect. This allows the client to connect from a specific address when multiple interfaces are available.</p>

<p><code>BindAddress</code> is optional. If specified, its value will be passed directly to POE::Wheel::SocketFactory&#39;s BindAddress constructor parameter.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="BindPort"
>BindPort</a></h4>

<p><code>BindPort</code> sets the local socket port that the client will be bound to before starting to connect. This allows the client to connect from a specific port.</p>

<p>It&#39;s not usually necessary to bind to a particular port, so <code>BindPort</code> is optional and disabled by default.</p>

<p>If specified, the value in <code>BindPort</code> is passed directly to POE::Wheel::SocketFactory&#39;s own BindPort constructor parameter.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="ConnectError"
>ConnectError</a></h4>

<p><code>ConnectError</code> is an optional callback to handle errors from POE::Wheel::SocketFactory. These errors happen when a socket can&#39;t be created or has trouble connecting to the remote host.</p>

<p>The following parameters will be passed to the callback along with the usual POE event parameters: $_[ARG0] will describe what was happening at the time of failure. $_[ARG1] and $_[ARG2] will contain the numeric and string versions of $!, respectively.</p>

<p>Depending on the nature of the error and the type of client, it may be useful to reconnect from the ConnectError callback.</p>

<pre>  ConnectError =&#62; sub {
    my ($operation, $error_number, $error_string) = @_[ARG0..ARG2];
    warn &#34;$operation error $error_number occurred: $error_string&#34;;
    if (error_is_recoverable($error_number)) {
      $_[KERNEL]-&#62;delay( reconnect =&#62; 60 );
    }
    else {
      $_[KERNEL]-&#62;yield(&#34;shutdown&#34;);
    }
  },</pre>

<p>POE::Component::Client::TCP will shut down after ConnectError if a reconnect isn&#39;t requested.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="Connected"
>Connected</a></h4>

<p>Connections are asynchronously set up and may take some time to complete. <code>Connected</code> is an optional callback that notifies a program when the connection has finally been made.</p>

<p>This is an advisory callback that occurs after a POE::Wheel::ReadWrite object has already been created. Programs should not need to create their own.</p>

<p><code>Connected</code> is called in response to POE::Wheel::SocketFactory&#39;s SuccessEvent. In addition to the usual POE event parameters, it includes a copy of the established socket handle in $_[ARG0]. POE::Component::Client::TCP will manage the socket, so an application should rarely need to save a copy of it. $_[ARG1] and $_[ARG2] contain the remote address and port as returned from getpeername().</p>

<pre>  Connected =&#62; {
    my ($socket, $peer_addr, $peer_port) = @_[ARG0, ARG1, ARG2];
    # ...
  }</pre>

<p>See <a href="#PreConnect" class="podlinkpod"
>&#34;PreConnect&#34;</a> to modify the socket before it&#39;s given to POE::Wheel::ReadWrite.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="ConnectTimeout"
>ConnectTimeout</a></h4>

<p><code>ConnectTimeout</code> is the maximum number of seconds to wait for a connection to be established. If it is omitted, Client::TCP relies on the operating system to abort stalled connect() calls.</p>

<p>The application will be notified of a timeout via the ConnectError callback. In the case of a timeout, $_[ARG0] will contain &#34;connect&#34;, and $_[ARG1] and $_[ARG2] will contain the numeric and string representations of the ETIMEDOUT error.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="Domain"
>Domain</a></h4>

<p><code>Domain</code> sets the address or protocol family within which to operate. The <code>Domain</code> may be any value that POE::Wheel::SocketFactory supports. AF_INET (Internet address space) is used by default.</p>

<p>Use AF_INET6 for IPv6 support. This constant is exported by Socket. Also be sure to have Socket::GetAddrInfo installed, which is required by POE::Wheel::SocketFactory for IPv6 support.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="RemoteAddress"
>RemoteAddress</a></h4>

<p><code>RemoteAddress</code> contains the address of the server to connect to. It is required and may contain a host name (&#34;poe.perl.org&#34;), a dot- or colon-separated numeric address (depending on the Domain), or a packed socket address. Pretty much anything POE::Wheel::SocketFactory&#39;s RemoteAddress parameter does.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="RemotePort"
>RemotePort</a></h4>

<p><code>RemotePort</code> contains the port of the server to connect to. It is required and may be a service name (&#34;echo&#34;) or number (7).</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="POE::Wheel::ReadWrite_Constructor_Parameters"
>POE::Wheel::ReadWrite Constructor Parameters</a></h3>

<p>Parameters in this section control configuration of the client&#39;s POE::Wheel::ReadWrite object.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="Disconnected"
>Disconnected</a></h4>

<p><code>Disconnected</code> is an optional callback to notify a program that an established socket has been disconnected. It includes no special parameters.</p>

<p>It may be useful to reconnect from the Disconnected callback, in the case of MUD bots or long-running services. For example:</p>

<pre>  Disconnected =&#62; sub {
    $_[KERNEL]-&#62;delay( reconnect =&#62; 60 );
  },</pre>

<p>The component will shut down if the connection ceases without being reconnected.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="Filter"
>Filter</a></h4>

<p><code>Filter</code> specifies the type of POE::Filter object that will parse input from and serialize output to a server. It may either be a scalar, an array reference, or a POE::Filter object.</p>

<p>If <code>Filter</code> is a scalar, it will be expected to contain a POE::Filter class name:</p>

<pre>  Filter =&#62; &#34;POE::Filter::Line&#34;,</pre>

<p><code>Filter</code> is optional. In most cases, the default &#34;POE::Filter::Line&#34; is fine.</p>

<p>If <code>Filter</code> is an array reference, the first item in the array will be treated as a POE::Filter class name. The remaining items will be passed to the filter&#39;s constructor. In this example, the vertical bar will be used as POE::Filter::Line&#39;s record terminator:</p>

<pre>  Filter =&#62; [ &#34;POE::Filter::Line&#34;, Literal =&#62; &#34;|&#34; ],</pre>

<p>If it is an object, it will be cloned every time the client connects:</p>

<pre>  Filter =&#62; POE::Filter::Line-&#62;new(Literal =&#62; &#34;|&#34;),</pre>

<p>Be sure to <code>use</code> the appropriate POE::Filter subclass when specifying a <code>Filter</code> other than the default.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="ServerError"
>ServerError</a></h4>

<p><code>ServerError</code> is an optional callback that will be invoked when an established server connection has encountered some kind of error. It is triggered by POE::Wheel::ReadWrite&#39;s ErrorEvent. By default, the component will log any errors to STDERR. This may be suppressed by defining a quieter ServerError callback.</p>

<p>As with <code>ConnectError</code>, it is invoked with the customary error parameters: $_[ARG0] will contain the name of the operation that failed. $_[ARG1] and $_[ARG2] will hold the numeric and string forms of $!, respectively.</p>

<p>Components usually disconnect on error. POE::Component::Client::TCP will shut down if the socket disconnects without being reconnected.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="ServerFlushed"
>ServerFlushed</a></h4>

<p><code>ServerFlushed</code> is an optional callback to notify a program that ReadWrite&#39;s output buffers have completely flushed. It has no special parameters.</p>

<p>The component will shut down after a server flush if $heap-&#62;{shutdown} is set.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="ServerInput"
>ServerInput</a></h4>

<p><code>ServerInput</code> is a required callback. It is called for each fully parsed input record received by POE::Wheel::ReadWrite. $_[ARG0] contains the input record, the format of which is determined by the <code>Filter</code> constructor parameter.</p>

<p><code>SeverInput</code> will stop being called when $_[HEAP]{shutdown} is true. The most reliable way to set the &#34;shutdown&#34; member is to call $_[KERNEL]-&#62;yield(&#34;shutdown&#34;).</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Public_Events"
>Public Events</a></h1>

<p>POE::Component::Client::TCP handles a small number of public &#34;command&#34; messages. These may be posted into the client from an external session, or yielded from within the client.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="connect"
>connect</a></h2>

<p>The <code>connect</code> event causes POE::Component::Client::TCP to begin connecting to a server. It optionally includes a new RemoteHost and RemotePort, both of which will be used for subsequent reconnections.</p>

<pre>  $_[KERNEL]-&#62;post(alias =&#62; connect =&#62; &#34;127.0.0.1&#34;, 80);</pre>

<p>If the client is already connected to a server, it will disconnect immediately before beginning the new connection procedure. Buffered input and output will be lost.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="reconnect"
>reconnect</a></h2>

<p>The <code>reconnect</code> command causes POE::Component::Client::TCP to immediately disconnect its current connection and begin reconnecting to its most recently set RemoteHost and RemotePort. Any buffered input and output will be lost.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="shutdown"
>shutdown</a></h2>

<p>The <code>shutdown</code> command tells POE::Component::Client::TCP to flush its buffers, disconnect, and begin DESTROY procedures.</p>

<p>All input will be discarded after receipt of &#34;shutdown&#34;. All pending output will be written to the server socket before disconnecting and destructing.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Reserved_Heap_Members"
>Reserved Heap Members</a></h1>

<p>POE::Component::Client::TCP requires some heap space for its own bookkeeping. The following members are used and should be used as directed, or with care.</p>

<p>This sample input handler is an example of most reserved heap members:</p>

<pre>  sub handle_input {
    # Pending input from when we were connected.
    return unless $_[HEAP]{connected};

    # We&#39;ve been shut down.
    return if $_[HEAP]{shutdown};

    my $input = $_[ARG0];
    $_[HEAP]{server}-&#62;put(&#34;you sent: $input&#34;);
  }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="server"
>server</a></h2>

<p>The read-only <code>server</code> heap member contains the POE::Wheel object used to connect to or talk with the server. While the component is connecting, <code>server</code> will be a <a href="../../../POE/Wheel/SocketFactory.html" class="podlinkpod"
>POE::Wheel::SocketFactory</a> object. After the connection has been made, <code>server</code> is replaced with a <a href="../../../POE/Wheel/ReadWrite.html" class="podlinkpod"
>POE::Wheel::ReadWrite</a> object.</p>

<p>The most reliable way to avoid prematurely using <code>server</code> is to first check the <code>connected</code> reserved heap member. See the example above.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="shutdown"
>shutdown</a></h2>

<p><code>shutdown</code> is a read-only flag that tells the component it&#39;s shutting down. It should only be by the <code>shutdown</code> event, which does other cleanup.</p>

<p><code>shutdown</code> may be checked to avoid starting new work during a client&#39;s shutting-down procedure. See the example above.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="connected"
>connected</a></h2>

<p><code>connected</code> is a read-only flag that indicates whether the component is currently connected.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="shutdown_on_error"
>shutdown_on_error</a></h2>

<p><code>shutdown_on_error</code> is a read-only flag that governs the component&#39;s shutdown-on-error behavior. When true, POE::Component::Client::TCP will automatically shutdown when it encounters an error.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>The SEE ALSO section in <a href="../../../POE.html" class="podlinkpod"
>POE</a> contains a table of contents covering the entire POE distribution.</p>

<p><a href="../../../POE/Component/Server/TCP.html" class="podlinkpod"
>POE::Component::Server::TCP</a> is the server-side counterpart to this module.</p>

<p>This component uses and exposes features from <a href="../../../POE/Filter.html" class="podlinkpod"
>POE::Filter</a>, <a href="../../../POE/Wheel/SocketFactory.html" class="podlinkpod"
>POE::Wheel::SocketFactory</a>, and <a href="../../../POE/Wheel/ReadWrite.html" class="podlinkpod"
>POE::Wheel::ReadWrite</a>.</p>

<p>See <a href="../../../POE/Wheel/SocketFactory.html#SYNOPSIS" class="podlinkpod"
>&#34;SYNOPSIS&#34; in POE::Wheel::SocketFactory</a> for a more efficient but lower-level way to create clients and servers.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAVEATS"
>CAVEATS</a></h1>

<p>This looks nothing like what Ann envisioned.</p>

<p>POE::Component::Client::TCP is a generic client. As such, it&#39;s not tuned for any particular task. While it handles the common cases well and with a minimum of code, it may not be suitable for everything.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS_&#38;_COPYRIGHTS"
>AUTHORS &#38; COPYRIGHTS</a></h1>

<p>POE::Component::Client::TCP is Copyright 2001-2013 by Rocco Caputo. All rights are reserved. POE::Component::Client::TCP is free software, and it may be redistributed and/or modified under the same terms as Perl itself.</p>

<p>POE::Component::Client::TCP is based on code, used with permission, from Ann Barcomb &#60;kudra@domaintje.com&#62;.</p>

<p>POE::Component::Client::TCP is based on code, used with permission, from Jos Boumans &#60;kane@cpan.org&#62;.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
