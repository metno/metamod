<html><head><title>Metamod::DBIxSchema::Metabase::ResultSet::Dataset</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Fri Apr  4 12:00:05 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#%24self-%3Emetadata_search(%25PARAMS)'>$self-&#62;metadata_search(%PARAMS)</a>
    <li class='indexItem indexItem2'><a href='#%24self-%3Emetadata_search_params(%25PARAMS)'>$self-&#62;metadata_search_params(%PARAMS)</a>
    <li class='indexItem indexItem2'><a href='#%24self-%3Etwo_way_table(%24search_criteria%2C_%24ownertags%2C_%24vertical_col%2C_%24horisontal_col)'>$self-&#62;two_way_table($search_criteria, $ownertags, $vertical_col, $horisontal_col)</a>
    <li class='indexItem indexItem2'><a href='#%24self-%3Elevel1_datasets(%24ownertags)'>$self-&#62;level1_datasets($ownertags)</a>
    <li class='indexItem indexItem2'><a href='#%24self-%3Elevel2_datasets(%25PARAMS)'>$self-&#62;level2_datasets(%PARAMS)</a>
    <li class='indexItem indexItem2'><a href='#%24self-%3Edataset_location_search(%24srid%2C_%24x1%2C_%24y1%2C_%24x2%2C_%24y2)'>$self-&#62;dataset_location_search($srid, $x1, $y1, $x2, $y2)</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#LICENSE'>LICENSE</a>
</ul>
</div>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$self-&#62;metadata_search(%PARAMS)"
>$self-&#62;metadata_search(%PARAMS)</a></h2>

<p>Search for dataset by looking at the associated metadata for the datasets.</p>

<dl>
<dt><a name="curr_page_(optional,_default_=_1)"
>curr_page (optional,
default = 1)</a></dt>

<dd>
<p>The current page to view in the paged search result.</p>

<dt><a name="ownertags"
>ownertags</a></dt>

<dd>
<p>An array ref of owner tags to search for.</p>

<dt><a name="rows_per_page_(optional,_default_=_10)"
>rows_per_page (optional,
default = 10)</a></dt>

<dd>
<p>The number of rows to fetch.</p>

<dt><a name="search_criteria"
>search_criteria</a></dt>

<dd>
<p>See the corresponding parameter in <code>metadata_search_params</code></p>

<dt><a name="return"
>return</a></dt>

<dd>
<p>Returns a <code>DBIx::Class</code> result sets for the search.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$self-&#62;metadata_search_params(%PARAMS)"
>$self-&#62;metadata_search_params(%PARAMS)</a></h2>

<p>Create DBIx::Class compatible search parameters from a set of search critieria.</p>

<dl>
<dt><a name="ownertags"
>ownertags</a></dt>

<dd>
<p>An array ref of owner tags to search for.</p>

<dt><a name="search_criteria"
>search_criteria</a></dt>

<dd>
<p>The search criteria a hash reference.
The hash reference is best explained with an example as each type of meta data requires a slightly different structure.</p>

<pre>  $search_criteria = {
      basickey =&#62; [
        [ 1000, 1001, 1002 ], # basic keys for one search category
        [ 2000, 2001, ], # basic keys for another search category.
      ],
      dates =&#62; { 8 =&#62; { from =&#62; &#39;20100205&#39;, to =&#62; &#39;20100801&#39;, } },
      freetext =&#62; [ &#39;Some text&#39; ],
      coords =&#62; { srid =&#62; 93995, x1 =&#62; 1, x2 =&#62; 10, y1 =&#62; 1, y2 =&#62; 10 },
      topics =&#62; { bk_ids =&#62; [ 1, 2, 3 ], hk_ids =&#62; [ 10, 20, 30 ] },
  }</pre>

<dt><a name="return"
>return</a></dt>

<dd>
<p>Returns a list of two items. The first item is a hash reference with <code>DBIx::Class</code> search conditions. The second item contains a <code>DBIx::Class</code> compatible search attributes that are neccessary for the search specified in the condtions to work.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$self-&#62;two_way_table($search_criteria,_$ownertags,_$vertical_col,_$horisontal_col)"
>$self-&#62;two_way_table($search_criteria, $ownertags, $vertical_col, $horisontal_col)</a></h2>

<p>Search the database for matching datasets and create a two way table for the result.</p>

<dl>
<dt><a name="$search_criteria"
>$search_criteria</a></dt>

<dd>
<p>The search criteria used for selecting datasets. See <code>metadata_search()</code> for more details.</p>

<dt><a name="$ownertags"
>$ownertags</a></dt>

<dd>
<p>The owner tags that the datasets should match.</p>

<dt><a name="$vertical_col"
>$vertical_col</a></dt>

<dd>
<p>The <code>mt_name</code> for the vertical column.</p>

<dt><a name="$horisontal_col"
>$horisontal_col</a></dt>

<dd>
<p>The <code>mt_name</code> for the horisontal column.</p>

<dt><a name="return"
>return</a></dt>

<dd>
<p>Returns a hash reference where the values for the vertical column is used as the keys and the values are hash references where the values for the horisontal column is used as key and the value is the number of datasets that match the value of the horisontal and vertical key. This is simpler to understand with an example.</p>

<pre>  { model_run =&#62; { &#39;Baltic Sea&#39; =&#62; 4, &#39;Barents Sea&#39; =&#62; 0, &#39;Artic Ocean&#39; =&#62; 3 },
    observation =&#62; { &#39;Baltic Sea&#39; =&#62; 1, &#39;Barents Sea&#39; =&#62; 32, &#39;Artic Ocean&#39; =&#62; 5 },
  }</pre>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$self-&#62;level1_datasets($ownertags)"
>$self-&#62;level1_datasets($ownertags)</a></h2>

<dl>
<dt><a name="$ownertags"
>$ownertags</a></dt>

<dd>
<p>A list of owner tags that the datasets should match.</p>

<dt><a name="return"
>return</a></dt>

<dd>
<p>Return a <code>DBIx::Class</code> resultset for all active level 1 datasets that match the current owner tags.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$self-&#62;level2_datasets(%PARAMS)"
>$self-&#62;level2_datasets(%PARAMS)</a></h2>

<p>Fetch level 2 datasets for a specific level 1 dataset.</p>

<dl>
<dt><a name="$ds_id"
>$ds_id</a></dt>

<dd>
<p>The <code>ds_id</code> of the level 1 datasets to fetch level 2 datasets for.</p>

<dt><a name="max_files_(optional,_default_=_100)"
>max_files (optional, default = 100)</a></dt>

<dd>
<p>The maximum number of level 2 datasets to return.</p>

<dt><a name="max_age_(optional,_default_=_90)"
>max_age (optional, default = 90)</a></dt>

<dd>
<p>The maximum age of the level 2 datasets to return if more <code>max_files</code> are found in the catalogue. If the <code>max_files</code> limit is not reached, older datasets can be returned.</p>

<dt><a name="return"
>return</a></dt>

<dd>
<p>The datasets are returned as a list of <code>DBIx::Class</code> row objects.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$self-&#62;dataset_location_search($srid,_$x1,_$y1,_$x2,_$y2)"
>$self-&#62;dataset_location_search($srid, $x1, $y1, $x2, $y2)</a></h2>

<p>Create a condition that can be used for searching dataset locations.</p>

<dl>
<dt><a name="$srid"
>$srid</a></dt>

<dd>
<p>The SRID for the map that is used as the basis for the search.</p>

<dt><a name="$x1"
>$x1</a></dt>

<dd>
<p>The first x coordinate for the search.</p>

<dt><a name="$y1"
>$y1</a></dt>

<dd>
<p>The first y coordinate for the search.</p>

<dt><a name="$x2"
>$x2</a></dt>

<dd>
<p>The second x coordinate for the search.</p>

<dt><a name="$y2"
>$y2</a></dt>

<dd>
<p>The second y coordinate for the search.</p>

<dt><a name="return"
>return</a></dt>

<dd>
<p>A <code>DBIx::Class</code> search condition that can be used for doing a dataset location search.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENSE"
>LICENSE</a></h1>

<p>GPLv2 <a href="http://www.gnu.org/licenses/gpl-2.0.html" class="podlinkurl"
>http://www.gnu.org/licenses/gpl-2.0.html</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
