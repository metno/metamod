<html><head><title>Metamod::DatasetTransformer</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue May 27 09:39:30 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#VARIABLES'>VARIABLES</a>
    <li class='indexItem indexItem2'><a href='#FUNCTIONS'>FUNCTIONS</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Metamod::DatasetTransformer - interface to transform datasets to internal MM2 presentation</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use Metamod::DatasetTransfomer::Impl;
  my ($xmdStr, $xmlStr) = Metamod::DatasetTransfomer::getFileContent(&#34;filename&#34;);
  my $implX = new Metamod::DatasetTransfomer::ImplX($xmdStr, $xmlStr);
  my $datasetStr;
  if ($implX-&#62;test) {
      my ($dsDoc, $mm2Doc) = $implX-&#62;transform;
  }

  # or
  my $implX = Metamod::DatasetTransfomer::autodetect(&#34;filename&#34;);
  ...</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The DatasetTransformer transform datasets from different plugin formats to the internally used MM2 format.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="VARIABLES"
>VARIABLES</a></h2>

<dl>
<dt><a name="$XSLT_DIR"
>$XSLT_DIR</a></dt>

<dd>
<p>Default directory of XSLT files. Uses ENV{METAMOD_XSLT_DIR} or INSTALLATION_DIR/common/schema/. The ENV part is mainly thought for testing independently of config.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="FUNCTIONS"
>FUNCTIONS</a></h2>

<dl>
<dt><a name="XMLParser"
>XMLParser</a></dt>

<dd>
<p>Return: the xml parser as <a href="../XML/LibXML.html" class="podlinkpod"
>XML::LibXML</a> singleton. Use this parser to make sure, that the parser doesn&#39;t go out of scope. (To prevent XML::LibXML warnings when deregistering nodes from the parser.)</p>

<dt><a name="XSLTParser"
>XSLTParser</a></dt>

<dd>
<p>Return: the xml parser as <a href="../XML/LibXML.html" class="podlinkpod"
>XML::LibXML</a> singleton. Use this parser to make sure, that the parser doesn&#39;t go out of scope. (To prevent XML::LibXML warnings when deregistering nodes from the parser.)</p>

<dt><a name="getBasename($filename)"
>getBasename($filename)</a></dt>

<dd>
<p>return the filename without appendix</p>

<dt><a name="getFileContent(&#34;filename&#34;)"
>getFileContent(&#34;filename&#34;)</a></dt>

<dd>
<p>Read the content of filename.xmd and filename.xml. It is not considered a problem if one of the files doesn&#39;t exist. In that case, the content is undef. This function will die if other problems occur, i.e. filename is not readable (but exists) or flock fails.</p>

<p>Return: ($xmdContent, $xmlContent)</p>

<dt><a name="getPlugins"
>getPlugins</a></dt>

<dd>
<p>load and return list of plugins, that are packages below Metamod::DatasetTransformer, not starting with &#34;To&#34;</p>

<p>Return: @array = (Metamod::DatasetTransformer::Impl1, Metamod::DatasetTransformer::Impl2, ...)</p>

<dt><a name="autodetect($foreignDataset|$baseFileName)"
>autodetect($foreignDataset|$baseFileName)</a></dt>

<dd>
<p>Create a datasettransformer from a Metamod::ForeignDataset or from a file. Try to autodetect the plugin from all available plugins.</p>

<p>Return: $datasetTransformer</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<p>These methods need to be implemented by the extending modules.</p>

<dl>
<dt><a name="new($xmdStr,_$xmlStr)"
>new($xmdStr, $xmlStr)</a></dt>

<dd>
<p>Initialize the class with the appropriate data. $xmdStr and $xmlStr might be empty, but then the tests might fail.</p>

<dt><a name="test"
>test</a></dt>

<dd>
<p>Test if the data belongs to this transformer. Return 1 on success 0 on failure. This method should not die, except for severe programming errors.</p>

<dt><a name="transform"
>transform</a></dt>

<dd>
<p>Transform the file to the &#39;dataset&#39; and &#39;MM2&#39; format. This functions returns two XML::LibXML::Documents. This function should die if <a href="../test.html" class="podlinkpod"
>test</a> returns 0, or if the test wasn&#39;t sufficient.</p>

<p>return ($datasetDoc, $mm2Doc)</p>

<dt><a name="originalFormat"
>originalFormat</a></dt>

<dd>
<p>return a string describing the original format</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Heiko Klein, &#60;H.Klein@met.no&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../XML/LibXML.html" class="podlinkpod"
>XML::LibXML</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
