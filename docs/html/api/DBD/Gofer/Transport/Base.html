<html><head><title>DBD::Gofer::Transport::Base</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:14 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#ATTRIBUTES'>ATTRIBUTES</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#go_dsn'>go_dsn</a>
    <li class='indexItem indexItem2'><a href='#go_timeout'>go_timeout</a>
    <li class='indexItem indexItem2'><a href='#go_retry_limit'>go_retry_limit</a>
    <li class='indexItem indexItem2'><a href='#go_retry_hook'>go_retry_hook</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#RETRY_ON_ERROR'>RETRY ON ERROR</a>
  <li class='indexItem indexItem1'><a href='#TRACING'>TRACING</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#response_retry_preference'>response_retry_preference</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#LICENCE_AND_COPYRIGHT'>LICENCE AND COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>DBD::Gofer::Transport::Base - base class for DBD::Gofer client transports</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  my $remote_dsn = &#34;...&#34;
  DBI-&#62;connect(&#34;dbi:Gofer:transport=...;url=...;timeout=...;retry_limit=...;dsn=$remote_dsn&#34;,...)</pre>

<p>or, enable by setting the DBI_AUTOPROXY environment variable:</p>

<pre>  export DBI_AUTOPROXY=&#39;dbi:Gofer:transport=...;url=...&#39;</pre>

<p>which will force <i>all</i> DBI connections to be made via that Gofer server.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This is the base class for all DBD::Gofer client transports.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ATTRIBUTES"
>ATTRIBUTES</a></h1>

<p>Gofer transport attributes can be specified either in the attributes parameter of the connect() method call, or in the DSN string. When used in the DSN string, attribute names don&#39;t have the <code>go_</code> prefix.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="go_dsn"
>go_dsn</a></h2>

<p>The full DBI DSN that the Gofer server should connect to on your behalf.</p>

<p>When used in the DSN it must be the last element in the DSN string.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="go_timeout"
>go_timeout</a></h2>

<p>A time limit for sending a request and receiving a response. Some drivers may implement sending and receiving as separate steps, in which case (currently) the timeout applies to each separately.</p>

<p>If a request needs to be resent then the timeout is restarted for each sending of a request and receiving of a response.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="go_retry_limit"
>go_retry_limit</a></h2>

<p>The maximum number of times an request may be retried. The default is 2.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="go_retry_hook"
>go_retry_hook</a></h2>

<p>This subroutine reference is called, if defined, for each response received where $response-&#62;err is true.</p>

<p>The subroutine is pass three parameters: the request object, the response object, and the transport object.</p>

<p>If it returns an undefined value then the default retry behaviour is used. See <a href="#RETRY_ON_ERROR" class="podlinkpod"
>&#34;RETRY ON ERROR&#34;</a> below.</p>

<p>If it returns a defined but false value then the request is not resent.</p>

<p>If it returns true value then the request is resent, so long as the number of retries does not exceed <code>go_retry_limit</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="RETRY_ON_ERROR"
>RETRY ON ERROR</a></h1>

<p>The default retry on error behaviour is:</p>

<pre> - Retry if the error was due to DBI_GOFER_RANDOM. See L&#60;DBI::Gofer::Execute&#62;.

 - Retry if $request-&#62;is_idempotent returns true. See L&#60;DBI::Gofer::Request&#62;.</pre>

<p>A retry won&#39;t be allowed if the number of previous retries has reached <code>go_retry_limit</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TRACING"
>TRACING</a></h1>

<p>Tracing of gofer requests and responses can be enabled by setting the <code>DBD_GOFER_TRACE</code> environment variable. A value of 1 gives a reasonably compact summary of each request and response. A value of 2 or more gives a detailed, and voluminous, dump.</p>

<p>The trace is written using DBI-&#62;trace_msg() and so is written to the default DBI trace output, which is usually STDERR.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<p><i>This section is currently far from complete.</i></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="response_retry_preference"
>response_retry_preference</a></h2>

<pre>  $retry = $transport-&#62;response_retry_preference($request, $response);</pre>

<p>The response_retry_preference is called by DBD::Gofer when considering if a request should be retried after an error.</p>

<p>Returns true (would like to retry), false (must not retry), undef (no preference).</p>

<p>If a true value is returned in the form of a CODE ref then, if DBD::Gofer does decide to retry the request, it calls the code ref passing $retry_count, $retry_limit. Can be used for logging and/or to implement exponential backoff behaviour. Currently the called code must return using <code>return;</code> to allow for future extensions.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Tim Bunce, <a href="http://www.tim.bunce.name" class="podlinkurl"
>http://www.tim.bunce.name</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENCE_AND_COPYRIGHT"
>LICENCE AND COPYRIGHT</a></h1>

<p>Copyright (c) 2007-2008, Tim Bunce, Ireland. All rights reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself. See <a href="../../../perlartistic.html" class="podlinkpod"
>perlartistic</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../../DBD/Gofer.html" class="podlinkpod"
>DBD::Gofer</a>, <a href="../../../DBI/Gofer/Request.html" class="podlinkpod"
>DBI::Gofer::Request</a>, <a href="../../../DBI/Gofer/Response.html" class="podlinkpod"
>DBI::Gofer::Response</a>, <a href="../../../DBI/Gofer/Execute.html" class="podlinkpod"
>DBI::Gofer::Execute</a>.</p>

<p>and some example transports:</p>

<p><a href="../../../DBD/Gofer/Transport/stream.html" class="podlinkpod"
>DBD::Gofer::Transport::stream</a></p>

<p><a href="../../../DBD/Gofer/Transport/http.html" class="podlinkpod"
>DBD::Gofer::Transport::http</a></p>

<p><a href="../../../DBI/Gofer/Transport/mod_perl.html" class="podlinkpod"
>DBI::Gofer::Transport::mod_perl</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
