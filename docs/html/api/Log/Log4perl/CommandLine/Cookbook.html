<html><head><title>Log::Log4perl::CommandLine::Cookbook</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:19 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#SAMPLE_MODULE'>SAMPLE MODULE</a>
  <li class='indexItem indexItem1'><a href='#RECIPES'>RECIPES</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Log::Log4perl::CommandLine::Cookbook - Recipes for Log::Log4perl::CommandLine</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This cookbook has a series of example uses,
including sample code,
descriptions,
and some command line examples with their output.</p>

<p>These always use the <code>:easy</code> mode from <a href="../../../Log/Log4perl.html" class="podlinkpod"
>Log::Log4perl</a>,
since the purpose is to illustrate the use of <a href="../../../Log/Log4perl/CommandLine.html" class="podlinkpod"
>Log::Log4perl::CommandLine</a>,
not <a href="../../../Log/Log4perl.html" class="podlinkpod"
>Log::Log4perl</a>.
Go see it for more advanced usage.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SAMPLE_MODULE"
>SAMPLE MODULE</a></h1>

<p>The scripts,
modules and output can be found in the distribution&#39;s <code>eg</code> directory.</p>

<p>A sample module (<code>SampleModule.pm</code>) is used to illustrate the interaction with logging from a module:</p>

<pre> package SampleModule;
 
 use Log::Log4perl qw(:easy);
 
 sub test
 {
     TRACE &#34;test trace message&#34;;
     DEBUG &#34;test debug message&#34;;
     INFO  &#34;test info  message&#34;;
     WARN  &#34;test warn  message&#34;;
     ERROR &#34;test error message&#34;;
     FATAL &#34;test fatal message&#34;;
 }
 
 1;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="RECIPES"
>RECIPES</a></h1>

<dl>
<dt><a name="sample1"
>sample1</a></dt>

<dd>
<p><code>sample1.pl</code>:</p>

<pre> use Log::Log4perl qw(:easy);
 use Log::Log4perl::CommandLine qw(:all);
 
 TRACE &#34;trace message&#34;;
 DEBUG &#34;debug message&#34;;
 INFO  &#34;info  message&#34;;
 WARN  &#34;warn  message&#34;;
 ERROR &#34;error message&#34;;
 FATAL &#34;fatal message&#34;;</pre>

<p>Use the <code>:all</code> option to enable all the standard options. By default it will print only messages with ERROR or FATAL, other messages are suppressed. The various command line options affect the output as shown.</p>

<p>Sample Runs:</p>

<pre> % perl sample1.pl
 [ERROR] error message
 [FATAL] fatal message
 
 % perl sample1.pl -q
 
 % perl sample1.pl -v
 [INFO ] info  message
 [WARN ] warn  message
 [ERROR] error message
 [FATAL] fatal message
 
 % perl sample1.pl -d
 [DEBUG] debug message
 [INFO ] info  message
 [WARN ] warn  message
 [ERROR] error message
 [FATAL] fatal message
 
 % perl sample1.pl --quiet
 
 % perl sample1.pl --fatal
 [FATAL] fatal message
 
 % perl sample1.pl --error
 [ERROR] error message
 [FATAL] fatal message
 
 % perl sample1.pl --warn
 [WARN ] warn  message
 [ERROR] error message
 [FATAL] fatal message
 
 % perl sample1.pl --info
 [INFO ] info  message
 [WARN ] warn  message
 [ERROR] error message
 [FATAL] fatal message
 
 % perl sample1.pl --debug
 [DEBUG] debug message
 [INFO ] info  message
 [WARN ] warn  message
 [ERROR] error message
 [FATAL] fatal message
 
 % perl sample1.pl --trace
 [TRACE] trace message
 [DEBUG] debug message
 [INFO ] info  message
 [WARN ] warn  message
 [ERROR] error message
 [FATAL] fatal message</pre>

<dt><a name="sample2"
>sample2</a></dt>

<dd>
<p><code>sample2.pl</code>:</p>

<pre> use Log::Log4perl qw(:easy);
 use Log::Log4perl::CommandLine qw(:all);
 
 use SampleModule;
 
 SampleModule::test();
 
 TRACE &#34;trace message&#34;;
 DEBUG &#34;debug message&#34;;
 INFO  &#34;info  message&#34;;
 WARN  &#34;warn  message&#34;;
 ERROR &#34;error message&#34;;
 FATAL &#34;fatal message&#34;;</pre>

<p>This script illustrates the interaction with modules.</p>

<p>Sample Runs:</p>

<pre> % perl sample2.pl 
 [ERROR] test error message
 [FATAL] test fatal message
 [ERROR] error message
 [FATAL] fatal message
 
 % perl sample2.pl -q
 
 % perl sample2.pl -v
 [INFO ] test info  message
 [WARN ] test warn  message
 [ERROR] test error message
 [FATAL] test fatal message
 [INFO ] info  message
 [WARN ] warn  message
 [ERROR] error message
 [FATAL] fatal message
 
 % perl sample2.pl -q SampleModule
 [ERROR] error message
 [FATAL] fatal message
 
 % perl sample2.pl -q -v SampleModule
 [INFO ] test info  message
 [WARN ] test warn  message
 [ERROR] test error message
 [FATAL] test fatal message
 
 % perl sample2.pl -q -d SampleModule
 [DEBUG] test debug message
 [INFO ] test info  message
 [WARN ] test warn  message
 [ERROR] test error message
 [FATAL] test fatal message
 
 % perl sample2.pl -v -d SampleModule
 [DEBUG] test debug message
 [INFO ] test info  message
 [WARN ] test warn  message
 [ERROR] test error message
 [FATAL] test fatal message
 [INFO ] info  message
 [WARN ] warn  message
 [ERROR] error message
 [FATAL] fatal message</pre>

<dt><a name="sample3"
>sample3</a></dt>

<dd>
<p><code>sample3.pl</code>:</p>

<pre> use Log::Log4perl qw(:easy);
 use Log::Log4perl::CommandLine &#39;:all&#39;,
                                &#39;:loginit&#39; =&#62; { level =&#62; $INFO };
 
 TRACE &#34;trace message&#34;;
 DEBUG &#34;debug message&#34;;
 INFO  &#34;info  message&#34;;
 WARN  &#34;warn  message&#34;;
 ERROR &#34;error message&#34;;
 FATAL &#34;fatal message&#34;;</pre>

<p>This script overrides the default log level, setting it to INFO. It can still be overridden on the command line.</p>

<p>Sample Runs:</p>

<pre> % perl sample3.pl 
 [INFO ] info  message
 [WARN ] warn  message
 [ERROR] error message
 [FATAL] fatal message
 
 % perl sample3.pl -q
 
 % perl sample3.pl --error
 [ERROR] error message
 [FATAL] fatal message</pre>

<dt><a name="sample4"
>sample4</a></dt>

<dd>
<p><code>sample4.pl</code>:</p>

<pre> use Log::Log4perl qw(:easy);
 use Log::Log4perl::CommandLine &#39;:all&#39;,
                                &#39;:loginit&#39; =&#62; { layout =&#62; &#39;%c %m%n&#39; };
 
 TRACE &#34;trace message&#34;;
 DEBUG &#34;debug message&#34;;
 INFO  &#34;info  message&#34;;
 WARN  &#34;warn  message&#34;;
 ERROR &#34;error message&#34;;
 FATAL &#34;fatal message&#34;;</pre>

<p>This script overrides the default log layout. For more information on layouts, see <a href="../../../Log/Log4perl/Layout/PatternLayout.html" class="podlinkpod"
>Log::Log4perl::Layout::PatternLayout</a>.</p>

<p>Sample Runs:</p>

<pre> % perl sample4.pl
 main error message
 main fatal message
 
 % perl sample4.pl -q
 
 % perl sample4.pl -v
 main info  message
 main warn  message
 main error message
 main fatal message</pre>

<dt><a name="sample5"
>sample5</a></dt>

<dd>
<p><code>sample5.pl</code>:</p>

<pre> use Log::Log4perl qw(:easy);
 use Log::Log4perl::CommandLine qw(:all :logconfig log4perl.conf);
 
 TRACE &#34;trace message&#34;;
 DEBUG &#34;debug message&#34;;
 INFO  &#34;info  message&#34;;
 WARN  &#34;warn  message&#34;;
 ERROR &#34;error message&#34;;
 FATAL &#34;fatal message&#34;;</pre>

<p>This script specifies a log4perl style configuration file. If the file is present, it will be used, if it is absent, the defaults will be used.</p>

<p>Here is a sample configuration file:</p>

<pre> log4perl.logger = WARN,  screen
 log4perl.appender.screen=Log::Log4perl::Appender::Screen
 log4perl.appender.screen.layout=Log::Log4perl::Layout::PatternLayout
 log4perl.appender.screen.layout.ConversionPattern=%c %m%n</pre>

<p>Log4perl configurations are extremely flexible, you can build complex logging schemes, including logging to files, databases, sending to another machine, fine tuning the specific messages you want to see, etc. For more information, see <a href="../../../Log/Log4perl/Config.html" class="podlinkpod"
>Log::Log4perl::Config</a> and <a href="../../../Log/Log4perl.html" class="podlinkpod"
>Log::Log4perl</a>.</p>

<p>Sample Runs:</p>

<pre> % perl sample5.pl 
 main warn  message
 main error message
 main fatal message
 
 % perl sample5.pl -q
 
 % perl sample5.pl -v
 main info  message
 main warn  message
 main error message
 main fatal message</pre>

<dt><a name="sample6"
>sample6</a></dt>

<dd>
<p><code>sample6.pl</code>:</p>

<pre> use Log::Log4perl qw(:easy);
 use Log::Log4perl::CommandLine &#39;:all&#39;,
 &#39;:loginit&#39; =&#62; q(
     log4perl.logger = WARN,  screen
     log4perl.appender.screen=Log::Log4perl::Appender::Screen
     log4perl.appender.screen.layout=Log::Log4perl::Layout::PatternLayout
     log4perl.appender.screen.layout.ConversionPattern=[%-5p] %c %m%n
 );
 
 TRACE &#34;trace message&#34;;
 DEBUG &#34;debug message&#34;;
 INFO  &#34;info  message&#34;;
 WARN  &#34;warn  message&#34;;
 ERROR &#34;error message&#34;;
 FATAL &#34;fatal message&#34;;</pre>

<p>You can also specify a string with a fancy log4perl configuration inline.</p>

<p>Sample Runs:</p>

<pre> % perl sample6.pl 
 [WARN ] main warn  message
 [ERROR] main error message
 [FATAL] main fatal message
 
 % perl sample6.pl -v
 [INFO ] main info  message
 [WARN ] main warn  message
 [ERROR] main error message
 [FATAL] main fatal message</pre>

<dt><a name="sample7"
>sample7</a></dt>

<dd>
<p><code>sample7.pl</code>:</p>

<pre> use Log::Log4perl qw(:easy);
 use Log::Log4perl::CommandLine &#39;:all&#39;,
 &#39;:loginit&#39; =&#62; q(
     log4perl.logger = WARN,  screen
     log4perl.appender.screen=Log::Log4perl::Appender::Screen
     log4perl.appender.screen.layout=Log::Log4perl::Layout::PatternLayout
     log4perl.appender.screen.layout.ConversionPattern=[%-5p] %c %m%n
 );
 
 use SampleModule;
 
 SampleModule::test();
 
 TRACE &#34;trace message&#34;;
 DEBUG &#34;debug message&#34;;
 INFO  &#34;info  message&#34;;
 WARN  &#34;warn  message&#34;;
 ERROR &#34;error message&#34;;
 FATAL &#34;fatal message&#34;;</pre>

<p>This one is the same as sample6, but includes <code>SampleModule</code>. You can independendently turn up/down the logging on the main program (which gets inherited through the system), and the verbosity of any module in the system. (Actually any &#39;category&#39; in the system, which by default means module, but you can do fancier fine tuning of categories by specifying them manually, see <a href="../../../Log/Log4perl.html" class="podlinkpod"
>Log::Log4perl</a> for more information.)</p>

<p>Sample Runs:</p>

<pre> % perl sample7.pl 
 [WARN ] SampleModule test warn  message
 [ERROR] SampleModule test error message
 [FATAL] SampleModule test fatal message
 [WARN ] main warn  message
 [ERROR] main error message
 [FATAL] main fatal message
 
 % perl sample7.pl -q
 
 % perl sample7.pl -v
 [INFO ] SampleModule test info  message
 [WARN ] SampleModule test warn  message
 [ERROR] SampleModule test error message
 [FATAL] SampleModule test fatal message
 [INFO ] main info  message
 [WARN ] main warn  message
 [ERROR] main error message
 [FATAL] main fatal message
 
 % perl sample7.pl -q -v SampleModule
 [INFO ] SampleModule test info  message
 [WARN ] SampleModule test warn  message
 [ERROR] SampleModule test error message
 [FATAL] SampleModule test fatal message
 
 % perl sample7.pl -d -q SampleModule
 [DEBUG] main debug message
 [INFO ] main info  message
 [WARN ] main warn  message
 [ERROR] main error message
 [FATAL] main fatal message</pre>

<dt><a name="sample8"
>sample8</a></dt>

<dd>
<p><code>sample8.pl</code>:</p>

<pre> use Log::Log4perl qw(:easy);
 use Log::Log4perl::CommandLine &#39;:all&#39;,
                                &#39;:loginit&#39; =&#62; { layout =&#62; &#39;[%-5p] %c %m%n&#39; };
 
 use SampleModule;
 use SampleModule2;
 
 SampleModule::test();
 SampleModule2::test();
 
 TRACE &#34;trace message&#34;;
 DEBUG &#34;debug message&#34;;
 INFO  &#34;info  message&#34;;
 WARN  &#34;warn  message&#34;;
 ERROR &#34;error message&#34;;
 FATAL &#34;fatal message&#34;;</pre>

<p>This script uses two modules (identical except for name), to illustrate the independent verbosity control.</p>

<p>Sample Runs:</p>

<pre> % perl sample8.pl 
 [ERROR] SampleModule test error message
 [FATAL] SampleModule test fatal message
 [ERROR] SampleModule2 test error message
 [FATAL] SampleModule2 test fatal message
 [ERROR] main error message
 [FATAL] main fatal message
 
 % perl sample8.pl -d SampleModule
 [DEBUG] SampleModule test debug message
 [INFO ] SampleModule test info  message
 [WARN ] SampleModule test warn  message
 [ERROR] SampleModule test error message
 [FATAL] SampleModule test fatal message
 [ERROR] SampleModule2 test error message
 [FATAL] SampleModule2 test fatal message
 [ERROR] main error message
 [FATAL] main fatal message
 
 % perl sample8.pl -d SampleModule -q SampleModule2
 [DEBUG] SampleModule test debug message
 [INFO ] SampleModule test info  message
 [WARN ] SampleModule test warn  message
 [ERROR] SampleModule test error message
 [FATAL] SampleModule test fatal message
 [ERROR] main error message
 [FATAL] main fatal message
 
 % perl sample8.pl -q -d SampleModule
 [DEBUG] SampleModule test debug message
 [INFO ] SampleModule test info  message
 [WARN ] SampleModule test warn  message
 [ERROR] SampleModule test error message
 [FATAL] SampleModule test fatal message</pre>

<dt><a name="sample9"
>sample9</a></dt>

<dd>
<p>This script is identical to sample1, but the usages illustrates the <code>--logfile</code> command line option. You can specify a log filename on the command line and it will add a simple file appender (for more complex ones, make a real config file). You can optionally specify a pattern layout with the option.</p>

<p>Sample Runs:</p>

<pre> % perl sample9.pl
 [ERROR] error message
 [FATAL] fatal message
 
 % perl sample9.pl --logfile mylog.output
 [ERROR] error message
 [FATAL] fatal message
 
 % cat mylog.output &#38;&#38; rm mylog.output
 2008/08/06 13:37:24 main error message
 2008/08/06 13:37:24 main fatal message
 
 % perl sample9.pl --logfile &#39;mylog.output|%d %m%n&#39;
 [ERROR] error message
 [FATAL] fatal message
 
 % cat mylog.output &#38;&#38; rm mylog.output
 2008/08/06 13:41:50 error message
 2008/08/06 13:41:50 fatal message</pre>

<dt><a name="sample10"
>sample10</a></dt>

<dd>
<p>This script is identical to sample1, but the usage illustrates the <code>--logconfig</code> command line option. You can even specify a more complex log4perl configuration file if one isn&#39;t specified in the program. If one is specified on the <code>use</code> line, the one specified on the command line will override it.</p>

<p>Sample Runs:</p>

<pre> % perl sample10.pl 
 [ERROR] error message
 [FATAL] fatal message
 
 % perl sample10.pl --logconfig log4perl.conf
 main warn  message
 main error message
 main fatal message</pre>

<dt><a name="sample11"
>sample11</a></dt>

<dd>
<p><code>sample11.pl</code>:</p>

<pre> use Log::Log4perl qw(:easy);
 use Log::Log4perl::CommandLine qw(:all :noinit handlelogoptions);
 
 Log::Log4perl-&#62;easy_init($FATAL);
 
 handlelogoptions();
 
 TRACE &#34;trace message&#34;;
 DEBUG &#34;debug message&#34;;
 INFO  &#34;info  message&#34;;
 WARN  &#34;warn  message&#34;;
 ERROR &#34;error message&#34;;
 FATAL &#34;fatal message&#34;;
 
 Log::Log4perl::init(&#39;log4perl.conf&#39;);
 
 handlelogoptions();
 
 TRACE &#34;trace message 2&#34;;
 DEBUG &#34;debug message 2&#34;;
 INFO  &#34;info  message 2&#34;;
 WARN  &#34;warn  message 2&#34;;
 ERROR &#34;error message 2&#34;;
 FATAL &#34;fatal message 2&#34;;</pre>

<p>This script shows how to use <code>:noinit</code> to disable auto log configuration and explicitly call handlelogoptions() after manually configuring Log4perl.</p>

<p>Sample Runs:</p>

<pre> % perl sample11.pl
 2008/08/13 22:33:50 fatal message
 main warn  message 2
 main error message 2
 main fatal message 2
 
 % perl sample11.pl -v
 2008/08/13 22:33:52 info  message
 2008/08/13 22:33:52 warn  message
 2008/08/13 22:33:52 error message
 2008/08/13 22:33:52 fatal message
 main info  message 2
 main warn  message 2
 main error message 2
 main fatal message 2
 
 % perl sample11.pl -d
 2008/08/13 22:33:55 debug message
 2008/08/13 22:33:55 info  message
 2008/08/13 22:33:55 warn  message
 2008/08/13 22:33:55 error message
 2008/08/13 22:33:55 fatal message
 main debug message 2
 main info  message 2
 main warn  message 2
 main error message 2
 main fatal message 2</pre>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Curt Tilmes &#60;ctilmes@cpan.org&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>Copyright 2008 Curt Tilmes</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
