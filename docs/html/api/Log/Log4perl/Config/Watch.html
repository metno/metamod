<html><head><title>Log::Log4perl::Config::Watch</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:19 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#SIGNAL_MODE'>SIGNAL MODE</a>
    <li class='indexItem indexItem2'><a href='#TRIGGER_CHECKS'>TRIGGER CHECKS</a>
    <li class='indexItem indexItem2'><a href='#DETECT_MOVED_FILES'>DETECT MOVED FILES</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#LICENSE'>LICENSE</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Log::Log4perl::Config::Watch - Detect file changes</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use Log::Log4perl::Config::Watch;

    my $watcher = Log::Log4perl::Config::Watch-&#62;new(
                          file            =&#62; &#34;/data/my.conf&#34;,
                          check_interval  =&#62; 30,
                  );

    while(1) {
        if($watcher-&#62;change_detected()) {
            print &#34;Change detected!\n&#34;;
        }
        sleep(1);
    }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module helps detecting changes in files. Although it comes with the <code>Log::Log4perl</code> distribution, it can be used independently.</p>

<p>The constructor defines the file to be watched and the check interval in seconds. Subsequent calls to <code>change_detected()</code> will</p>

<ul>
<li>return a false value immediately without doing physical file checks if <code>check_interval</code> hasn&#39;t elapsed.</li>

<li>perform a physical test on the specified file if the number of seconds specified in <code>check_interval</code> have elapsed since the last physical check. If the file&#39;s modification date has changed since the last physical check, it will return a true value, otherwise a false value is returned.</li>
</ul>

<p>Bottom line: <code>check_interval</code> allows you to call the function <code>change_detected()</code> as often as you like, without paying the performing a significant performance penalty because file system operations are being performed (however, you pay the price of not knowing about file changes until <code>check_interval</code> seconds have elapsed).</p>

<p>The module clearly distinguishes system time from file system time. If your (e.g. NFS mounted) file system is off by a constant amount of time compared to the executing computer&#39;s clock, it&#39;ll just work fine.</p>

<p>To disable the resource-saving delay feature, just set <code>check_interval</code> to 0 and <code>change_detected()</code> will run a physical file test on every call.</p>

<p>If you already have the current time available, you can pass it on to <code>change_detected()</code> as an optional parameter, like in</p>

<pre>    change_detected($time)</pre>

<p>which then won&#39;t trigger a call to <code>time()</code>, but use the value provided.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="SIGNAL_MODE"
>SIGNAL MODE</a></h2>

<p>Instead of polling time and file changes, <code>new()</code> can be instructed to set up a signal handler. If you call the constructor like</p>

<pre>    my $watcher = Log::Log4perl::Config::Watch-&#62;new(
                          file    =&#62; &#34;/data/my.conf&#34;,
                          signal  =&#62; &#39;HUP&#39;
                  );</pre>

<p>then a signal handler will be installed, setting the object&#39;s variable <code>$self-&#62;{signal_caught}</code> to a true value when the signal arrives. Comes with all the problems that signal handlers go along with.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="TRIGGER_CHECKS"
>TRIGGER CHECKS</a></h2>

<p>To trigger a physical file check on the next call to <code>change_detected()</code> regardless if <code>check_interval</code> has expired or not, call</p>

<pre>    $watcher-&#62;force_next_check();</pre>

<p>on the watcher object.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DETECT_MOVED_FILES"
>DETECT MOVED FILES</a></h2>

<p>The watcher can also be used to detect files that have moved. It will not only detect if a watched file has disappeared, but also if it has been replaced by a new file in the meantime.</p>

<pre>    my $watcher = Log::Log4perl::Config::Watch-&#62;new(
        file           =&#62; &#34;/data/my.conf&#34;,
        check_interval =&#62; 30,
    );

    while(1) {
        if($watcher-&#62;file_has_moved()) {
            print &#34;File has moved!\n&#34;;
        }
        sleep(1);
    }</pre>

<p>The parameters <code>check_interval</code> and <code>signal</code> limit the number of physical file system checks, simililarily as with <code>change_detected()</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENSE"
>LICENSE</a></h1>

<p>Copyright 2002-2013 by Mike Schilli &#60;m@perlmeister.com&#62; and Kevin Goess &#60;cpan@goess.org&#62;.</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Please contribute patches to the project on Github:</p>

<pre>    http://github.com/mschilli/log4perl</pre>

<p>Send bug reports or requests for enhancements to the authors via our</p>

<p>MAILING LIST (questions, bug reports, suggestions/patches): log4perl-devel@lists.sourceforge.net</p>

<p>Authors (please contact them via the list above, not directly): Mike Schilli &#60;m@perlmeister.com&#62;, Kevin Goess &#60;cpan@goess.org&#62;</p>

<p>Contributors (in alphabetical order): Ateeq Altaf, Cory Bennett, Jens Berthold, Jeremy Bopp, Hutton Davidson, Chris R. Donnelly, Matisse Enzer, Hugh Esco, Anthony Foiani, James FitzGibbon, Carl Franks, Dennis Gregorovic, Andy Grundman, Paul Harrington, Alexander Hartmaier David Hull, Robert Jacobson, Jason Kohles, Jeff Macdonald, Markus Peter, Brett Rann, Peter Rabbitson, Erik Selberg, Aaron Straup Cope, Lars Thegler, David Viner, Mac Yang.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
