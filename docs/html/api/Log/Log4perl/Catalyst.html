<html><head><title>Log::Log4perl::Catalyst</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:19 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Using_%3Aeasy_Macros_with_Catalyst'>Using :easy Macros with Catalyst</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#LICENSE'>LICENSE</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Log::Log4perl::Catalyst - Log::Log4perl Catalyst Module</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>In your main Catalyst application module:</p>

<pre>  use Log::Log4perl::Catalyst;

    # Either make Log4perl act like the Catalyst default logger:
  __PACKAGE__-&#62;log(Log::Log4perl::Catalyst-&#62;new());

    # or use a Log4perl configuration file, utilizing the full 
    # functionality of Log4perl
  __PACKAGE__-&#62;log(Log::Log4perl::Catalyst-&#62;new(&#39;l4p.conf&#39;));</pre>

<p>... and then sprinkly logging statements all over any code executed by Catalyst:</p>

<pre>    $c-&#62;log-&#62;debug(&#34;This is using log4perl!&#34;);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module provides Log4perl functions to Catalyst applications. It was inspired by Catalyst::Log::Log4perl on CPAN, but has been completely rewritten and uses a different approach to unite Catalyst and Log4perl.</p>

<p>Log4perl provides loggers, usually associated with the current package, which can then be remote-controlled by a central configuration. This means that if you have a controller function like</p>

<pre>    package MyApp::Controller::User;

    sub add : Chained(&#39;base&#39;): PathPart(&#39;add&#39;): Args(0) {
        my ( $self, $c ) = @_;

        $c-&#62;log-&#62;info(&#34;Adding a user&#34;);
        # ...
    }</pre>

<p>Level-based control is available via the following methods:</p>

<pre>   $c-&#62;log-&#62;debug(&#34;Reading configuration&#34;);
   $c-&#62;log-&#62;info(&#34;Adding a user&#34;);
   $c-&#62;log-&#62;warn(&#34;Can&#39;t read configuration ($!)&#34;);
   $c-&#62;log-&#62;error(&#34;Can&#39;t add user &#34;, $user);
   $c-&#62;log-&#62;fatal(&#34;Database down, aborting request&#34;);</pre>

<p>But that&#39;s no all, Log4perl is much more powerful.</p>

<p>The logging statement can be suppressed or activated based on a Log4perl file that looks like</p>

<pre>      # All MyApp loggers opened up for DEBUG and above
    log4perl.logger.MyApp = DEBUG, Screen
    # ...</pre>

<p>or</p>

<pre>      # All loggers block messages below INFO
    log4perl.logger=INFO, Screen
    # ...</pre>

<p>respectively. See the Log4perl manpage on how to perform fine-grained log-level and location filtering, and how to forward messages not only to the screen or to log files, but also to databases, email appenders, and much more.</p>

<p>Also, you can vary the layout of each message. For example if you want to know where a particular statement was logged, turn on file names and line numbers:</p>

<pre>    # Log4perl configuration file
    # ...
    log4perl.appender.Screen.layout.ConversionPattern = \
          %F{1}-%L: %p %m%n</pre>

<p>Messages will then look like</p>

<pre>    MyApp.pm-1869: INFO Saving user profile for user &#34;wonko&#34;</pre>

<p>Or want to log a request&#39;s IP address with every log statement? No problem with Log4perl, just call</p>

<pre>    Log::Log4perl::MDC-&#62;put( &#34;ip&#34;, $c-&#62;req-&#62;address() );</pre>

<p>at the beginning of the request cycle and use</p>

<pre>    # Log4perl configuration file
    # ...
    log4perl.appender.Screen.layout.ConversionPattern = \
          [%d]-%X{ip} %F{1}-%L: %p %m%n</pre>

<p>as a Log4perl layout. Messages will look like</p>

<pre>    [2010/02/22 23:25:55]-123.122.108.10 MyApp.pm-1953: INFO Reading profile for user &#34;wonko&#34;</pre>

<p>Again, check the Log4perl manual page, there&#39;s a plethora of configuration options.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<dl>
<dt><a name="new($config,_[%options])"
>new($config, [%options])</a></dt>

<dd>
<p>If called without parameters, new() initializes Log4perl in a way so that messages are logged similiarly to Catalyst&#39;s default logging mechanism. If you provide configuration, either the name of a configuration file or a reference to scalar string containing the configuration, it will call Log4perl with these parameters.</p>

<p>The second (optional) parameter is a list of key/value pairs:</p>

<pre>  &#39;autoflush&#39;   =&#62;  1   # Log without buffering (&#39;abort&#39; not supported)
  &#39;watch_delay&#39; =&#62; 30   # If set, use L&#60;Log::Log4perl&#62;&#39;s init_and_watch</pre>

<dt><a name="_flush()"
>_flush()</a></dt>

<dd>
<p>Flushes the cache.</p>

<dt><a name="abort($abort)"
>abort($abort)</a></dt>

<dd>
<p>Clears the logging system&#39;s internal buffers without logging anything.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Using_:easy_Macros_with_Catalyst"
>Using :easy Macros with Catalyst</a></h2>

<p>If you&#39;re tired of typing</p>

<pre>    $c-&#62;log-&#62;debug(&#34;...&#34;);</pre>

<p>and would prefer to use Log4perl&#39;s convenient :easy mode macros like</p>

<pre>    DEBUG &#34;...&#34;;</pre>

<p>then just pull those macros in via Log::Log4perl&#39;s :easy mode and start cranking:</p>

<pre>    use Log::Log4perl qw(:easy);

      # ... use macros later on
    sub base :Chained(&#39;/&#39;) :PathPart(&#39;apples&#39;) :CaptureArgs(0) {
        my ( $self, $c ) = @_;

        DEBUG &#34;Handling apples&#34;;
    }</pre>

<p>Note the difference between Log4perl&#39;s initialization in Catalyst, which uses the Catalyst-specific Log::Log4perl::Catalyst module (top of this page), and making use of Log4perl&#39;s loggers with the standard Log::Log4perl loggers and macros. While initialization requires Log4perl to perform dark magic to conform to Catalyst&#39;s different logging strategy, obtaining Log4perl&#39;s logger objects or calling its macros are unchanged.</p>

<p>Instead of using Catalyst&#39;s way of referencing the &#34;context&#34; object $c to obtain logger references via its log() method, you can just as well use Log4perl&#39;s get_logger() or macros to access Log4perl&#39;s logger singletons. The result is the same.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENSE"
>LICENSE</a></h1>

<p>Copyright 2002-2013 by Mike Schilli &#60;m@perlmeister.com&#62; and Kevin Goess &#60;cpan@goess.org&#62;.</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Please contribute patches to the project on Github:</p>

<pre>    http://github.com/mschilli/log4perl</pre>

<p>Send bug reports or requests for enhancements to the authors via our</p>

<p>MAILING LIST (questions, bug reports, suggestions/patches): log4perl-devel@lists.sourceforge.net</p>

<p>Authors (please contact them via the list above, not directly): Mike Schilli &#60;m@perlmeister.com&#62;, Kevin Goess &#60;cpan@goess.org&#62;</p>

<p>Contributors (in alphabetical order): Ateeq Altaf, Cory Bennett, Jens Berthold, Jeremy Bopp, Hutton Davidson, Chris R. Donnelly, Matisse Enzer, Hugh Esco, Anthony Foiani, James FitzGibbon, Carl Franks, Dennis Gregorovic, Andy Grundman, Paul Harrington, Alexander Hartmaier David Hull, Robert Jacobson, Jason Kohles, Jeff Macdonald, Markus Peter, Brett Rann, Peter Rabbitson, Erik Selberg, Aaron Straup Cope, Lars Thegler, David Viner, Mac Yang.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
