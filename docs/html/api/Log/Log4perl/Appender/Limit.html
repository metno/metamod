<html><head><title>Log::Log4perl::Appender::Limit</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:19 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#DEVELOPMENT_NOTES'>DEVELOPMENT NOTES</a>
  <li class='indexItem indexItem1'><a href='#LICENSE'>LICENSE</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<pre>    Log::Log4perl::Appender::Limit - Limit message delivery via block period</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use Log::Log4perl qw(:easy);

    my $conf = qq(
      log4perl.category = WARN, Limiter
    
          # Email appender
      log4perl.appender.Mailer          = Log::Dispatch::Email::MailSend
      log4perl.appender.Mailer.to       = drone\@pageme.com
      log4perl.appender.Mailer.subject  = Something&#39;s broken!
      log4perl.appender.Mailer.buffered = 0
      log4perl.appender.Mailer.layout   = PatternLayout
      log4perl.appender.Mailer.layout.ConversionPattern=%d %m %n

          # Limiting appender, using the email appender above
      log4perl.appender.Limiter              = Log::Log4perl::Appender::Limit
      log4perl.appender.Limiter.appender     = Mailer
      log4perl.appender.Limiter.block_period = 3600
    );

    Log::Log4perl-&#62;init(\$conf);
    WARN(&#34;This message will be sent immediately.&#34;);
    WARN(&#34;This message will be delayed by one hour.&#34;);
    sleep(3601);
    WARN(&#34;This message plus the last one will be sent now, seperately.&#34;);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<dl>
<dt><a name="appender"
><code>appender</code></a></dt>

<dd>
<p>Specifies the name of the appender used by the limiter. The appender specified must be defined somewhere in the configuration file, not necessarily before the definition of <code>Log::Log4perl::Appender::Limit</code>.</p>

<dt><a name="block_period"
><code>block_period</code></a></dt>

<dd>
<p>Period in seconds between delivery of messages. If messages arrive in between, they will be either saved (if <code>accumulate</code> is set to a true value) or discarded (if <code>accumulate</code> isn&#39;t set).</p>

<dt><a name="persistent"
><code>persistent</code></a></dt>

<dd>
<p>File name in which <code>Log::Log4perl::Appender::Limit</code> persistently stores delivery times. If omitted, the appender will have no recollection of what happened when the program restarts.</p>

<dt><a name="max_until_flushed"
><code>max_until_flushed</code></a></dt>

<dd>
<p>Maximum number of accumulated messages. If exceeded, the appender flushes all messages, regardless if the interval set in <code>block_period</code> has passed or not. Don&#39;t mix with <code>max_until_discarded</code>.</p>

<dt><a name="max_until_discarded"
><code>max_until_discarded</code></a></dt>

<dd>
<p>Maximum number of accumulated messages. If exceeded, the appender will simply discard additional messages, waiting for <code>block_period</code> to expire to flush all accumulated messages. Don&#39;t mix with <code>max_until_flushed</code>.</p>

<dt><a name="appender_method_on_flush"
><code>appender_method_on_flush</code></a></dt>

<dd>
<p>Optional method name to be called on the appender attached to the limiter when messages are flushed. For example, to have the sample code in the SYNOPSIS section bundle buffered emails into one, change the mailer&#39;s <code>buffered</code> parameter to <code>1</code> and set the limiters <code>appender_method_on_flush</code> value to the string <code>&#34;flush&#34;</code>:</p>

<pre>      log4perl.category = WARN, Limiter
    
          # Email appender
      log4perl.appender.Mailer          = Log::Dispatch::Email::MailSend
      log4perl.appender.Mailer.to       = drone\@pageme.com
      log4perl.appender.Mailer.subject  = Something&#39;s broken!
      log4perl.appender.Mailer.buffered = 1
      log4perl.appender.Mailer.layout   = PatternLayout
      log4perl.appender.Mailer.layout.ConversionPattern=%d %m %n

          # Limiting appender, using the email appender above
      log4perl.appender.Limiter              = Log::Log4perl::Appender::Limit
      log4perl.appender.Limiter.appender     = Mailer
      log4perl.appender.Limiter.block_period = 3600
      log4perl.appender.Limiter.appender_method_on_flush = flush</pre>

<p>This will cause the mailer to buffer messages and wait for <code>flush()</code> to send out the whole batch. The limiter will then call the appender&#39;s <code>flush()</code> method when it&#39;s own buffer gets flushed out.</p>
</dd>
</dl>

<p>If the appender attached to <code>Limit</code> uses <code>PatternLayout</code> with a timestamp specifier, you will notice that the message timestamps are reflecting the original log event, not the time of the message rendering in the attached appender. Major trickery has been applied to accomplish this (Cough!).</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DEVELOPMENT_NOTES"
>DEVELOPMENT NOTES</a></h1>

<p><code>Log::Log4perl::Appender::Limit</code> is a <i>composite</i> appender. Unlike other appenders, it doesn&#39;t log any messages, it just passes them on to its attached sub-appender. For this reason, it doesn&#39;t need a layout (contrary to regular appenders). If it defines none, messages are passed on unaltered.</p>

<p>Custom filters are also applied to the composite appender only. They are <i>not</i> applied to the sub-appender. Same applies to appender thresholds. This behaviour might change in the future.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENSE"
>LICENSE</a></h1>

<p>Copyright 2002-2013 by Mike Schilli &#60;m@perlmeister.com&#62; and Kevin Goess &#60;cpan@goess.org&#62;.</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Please contribute patches to the project on Github:</p>

<pre>    http://github.com/mschilli/log4perl</pre>

<p>Send bug reports or requests for enhancements to the authors via our</p>

<p>MAILING LIST (questions, bug reports, suggestions/patches): log4perl-devel@lists.sourceforge.net</p>

<p>Authors (please contact them via the list above, not directly): Mike Schilli &#60;m@perlmeister.com&#62;, Kevin Goess &#60;cpan@goess.org&#62;</p>

<p>Contributors (in alphabetical order): Ateeq Altaf, Cory Bennett, Jens Berthold, Jeremy Bopp, Hutton Davidson, Chris R. Donnelly, Matisse Enzer, Hugh Esco, Anthony Foiani, James FitzGibbon, Carl Franks, Dennis Gregorovic, Andy Grundman, Paul Harrington, Alexander Hartmaier David Hull, Robert Jacobson, Jason Kohles, Jeff Macdonald, Markus Peter, Brett Rann, Peter Rabbitson, Erik Selberg, Aaron Straup Cope, Lars Thegler, David Viner, Mac Yang.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
