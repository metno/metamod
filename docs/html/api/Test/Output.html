<html><head><title>Test::Output</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:28 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#TESTS'>TESTS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#STDOUT'>STDOUT</a>
    <li class='indexItem indexItem2'><a href='#STDERR'>STDERR</a>
    <li class='indexItem indexItem2'><a href='#COMBINED_OUTPUT'>COMBINED OUTPUT</a>
    <li class='indexItem indexItem2'><a href='#OUTPUT'>OUTPUT</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#EXPORTS'>EXPORTS</a>
  <li class='indexItem indexItem1'><a href='#FUNCTIONS'>FUNCTIONS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#stdout_from'>stdout_from</a>
    <li class='indexItem indexItem2'><a href='#stderr_from'>stderr_from</a>
    <li class='indexItem indexItem2'><a href='#output_from'>output_from</a>
    <li class='indexItem indexItem2'><a href='#combined_from'>combined_from</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SOURCE_AVAILABILITY'>SOURCE AVAILABILITY</a>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
  <li class='indexItem indexItem1'><a href='#ACKNOWLEDGEMENTS'>ACKNOWLEDGEMENTS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_%26_LICENSE'>COPYRIGHT &#38; LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Test::Output - Utilities to test STDOUT and STDERR messages.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>Version 0.16</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use Test::More tests =&#62; 4;
    use Test::Output;

    sub writer {
      print &#34;Write out.\n&#34;;
      print STDERR &#34;Error out.\n&#34;;
    }

    stdout_is(\&#38;writer,&#34;Write out.\n&#34;,&#39;Test STDOUT&#39;);

    stderr_isnt(\&#38;writer,&#34;No error out.\n&#34;,&#39;Test STDERR&#39;);

    combined_is(
                \&#38;writer,
                &#34;Write out.\nError out.\n&#34;,
                &#39;Test STDOUT &#38; STDERR combined&#39;
               );

    output_is(
              \&#38;writer,
              &#34;Write out.\n&#34;,
              &#34;Error out.\n&#34;,
              &#39;Test STDOUT &#38; STDERR&#39;
            );

   # Use bare blocks.

   stdout_is { print &#34;test&#34; } &#34;test&#34;, &#34;Test STDOUT&#34;;
   stderr_isnt { print &#34;bad test&#34; } &#34;test&#34;, &#34;Test STDERR&#34;;
   output_is { print &#39;STDOUT&#39;; print STDERR &#39;STDERR&#39; }
     &#34;STDOUT&#34;, &#34;STDERR&#34;, &#34;Test output&#34;;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Test::Output provides a simple interface for testing output sent to STDOUT or STDERR. A number of different utilities are included to try and be as flexible as possible to the tester.</p>

<p>Originally this module was designed not to have external requirements, however, the features provided by <a href="../Sub/Exporter.html" class="podlinkpod"
>Sub::Exporter</a> over what <a href="../Exporter.html" class="podlinkpod"
>Exporter</a> provides is just to great to pass up.</p>

<p>Test::Output ties STDOUT and STDERR using Test::Output::Tie.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TESTS"
>TESTS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="STDOUT"
>STDOUT</a></h2>

<dl>
<dt><a name="stdout_is"
><b>stdout_is</b></a></dt>

<dd>
<dt><a name="stdout_isnt"
><b>stdout_isnt</b></a></dt>

<dd>
<pre>   stdout_is  ( $coderef, $expected, &#39;description&#39; );
   stdout_is    { ... } $expected, &#39;description&#39;;
   stdout_isnt( $coderef, $expected, &#39;description&#39; );
   stdout_isnt  { ... } $expected, &#39;description&#39;;</pre>

<p>stdout_is() captures output sent to STDOUT from $coderef and compares it against $expected. The test passes if equal.</p>

<p>stdout_isnt() passes if STDOUT is not equal to $expected.</p>

<dt><a name="stdout_like"
><b>stdout_like</b></a></dt>

<dd>
<dt><a name="stdout_unlike"
><b>stdout_unlike</b></a></dt>

<dd>
<pre>   stdout_like  ( $coderef, qr/$expected/, &#39;description&#39; );
   stdout_like    { ... } qr/$expected/, &#39;description&#39;;
   stdout_unlike( $coderef, qr/$expected/, &#39;description&#39; );
   stdout_unlike  { ... } qr/$expected/, &#39;description&#39;;</pre>

<p>stdout_like() captures the output sent to STDOUT from $coderef and compares it to the regex in $expected. The test passes if the regex matches.</p>

<p>stdout_unlike() passes if STDOUT does not match the regex.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="STDERR"
>STDERR</a></h2>

<dl>
<dt><a name="stderr_is"
><b>stderr_is</b></a></dt>

<dd>
<dt><a name="stderr_isnt"
><b>stderr_isnt</b></a></dt>

<dd>
<pre>   stderr_is  ( $coderef, $expected, &#39;description&#39; );
   stderr_is    {... } $expected, &#39;description&#39;;
   stderr_isnt( $coderef, $expected, &#39;description&#39; );
   stderr_isnt  {... } $expected, &#39;description&#39;;</pre>

<p>stderr_is() is similar to stdout_is, except that it captures STDERR. The test passes if STDERR from $coderef equals $expected.</p>

<p>stderr_isnt() passes if STDERR is not equal to $expected.</p>

<dt><a name="stderr_like"
><b>stderr_like</b></a></dt>

<dd>
<dt><a name="stderr_unlike"
><b>stderr_unlike</b></a></dt>

<dd>
<pre>   stderr_like  ( $coderef, qr/$expected/, &#39;description&#39; );
   stderr_like   { ...} qr/$expected/, &#39;description&#39;;
   stderr_unlike( $coderef, qr/$expected/, &#39;description&#39; );
   stderr_unlike  { ...} qr/$expected/, &#39;description&#39;;</pre>

<p>stderr_like() is similar to stdout_like() except that it compares the regex $expected to STDERR captured from $codref. The test passes if the regex matches.</p>

<p>stderr_unlike() passes if STDERR does not match the regex.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="COMBINED_OUTPUT"
>COMBINED OUTPUT</a></h2>

<dl>
<dt><a name="combined_is"
><b>combined_is</b></a></dt>

<dd>
<dt><a name="combined_isnt"
><b>combined_isnt</b></a></dt>

<dd>
<pre>   combined_is   ( $coderef, $expected, &#39;description&#39; );
   combined_is   {... } $expected, &#39;description&#39;;
   combined_isnt ( $coderef, $expected, &#39;description&#39; );
   combined_isnt {... } $expected, &#39;description&#39;;</pre>

<p>combined_is() directs STDERR to STDOUT then captures STDOUT. This is equivalent to UNIXs 2&#62;&#38;1. The test passes if the combined STDOUT and STDERR from $coderef equals $expected.</p>

<p>combined_isnt() passes if combined STDOUT and STDERR are not equal to $expected.</p>

<dt><a name="combined_like"
><b>combined_like</b></a></dt>

<dd>
<dt><a name="combined_unlike"
><b>combined_unlike</b></a></dt>

<dd>
<pre>   combined_like   ( $coderef, qr/$expected/, &#39;description&#39; );
   combined_like   { ...} qr/$expected/, &#39;description&#39;;
   combined_unlike ( $coderef, qr/$expected/, &#39;description&#39; );
   combined_unlike { ...} qr/$expected/, &#39;description&#39;;</pre>

<p>combined_like() is similar to combined_is() except that it compares a regex ($expected) to STDOUT and STDERR captured from $codref. The test passes if the regex matches.</p>

<p>combined_unlike() passes if the combined STDOUT and STDERR does not match the regex.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="OUTPUT"
>OUTPUT</a></h2>

<dl>
<dt><a name="output_is"
><b>output_is</b></a></dt>

<dd>
<dt><a name="output_isnt"
><b>output_isnt</b></a></dt>

<dd>
<pre>   output_is  ( $coderef, $expected_stdout, $expected_stderr, &#39;description&#39; );
   output_is    {... } $expected_stdout, $expected_stderr, &#39;description&#39;;
   output_isnt( $coderef, $expected_stdout, $expected_stderr, &#39;description&#39; );
   output_isnt  {... } $expected_stdout, $expected_stderr, &#39;description&#39;;</pre>

<p>The output_is() function is a combination of the stdout_is() and stderr_is() functions. For example:</p>

<pre>  output_is(sub {print &#34;foo&#34;; print STDERR &#34;bar&#34;;},&#39;foo&#39;,&#39;bar&#39;);</pre>

<p>is functionally equivalent to</p>

<pre>  stdout_is(sub {print &#34;foo&#34;;},&#39;foo&#39;) 
    &#38;&#38; stderr_is(sub {print STDERR &#34;bar&#34;;&#39;bar&#39;);</pre>

<p>except that $coderef is only executed once.</p>

<p>Unlike, stdout_is() and stderr_is() which ignore STDERR and STDOUT repectively, output_is() requires both STDOUT and STDERR to match in order to pass. Setting either $expected_stdout or $expected_stderr to <code>undef</code> ignores STDOUT or STDERR respectively.</p>

<pre>  output_is(sub {print &#34;foo&#34;; print STDERR &#34;bar&#34;;},&#39;foo&#39;,undef);</pre>

<p>is the same as</p>

<pre>  stdout_is(sub {print &#34;foo&#34;;},&#39;foo&#39;) </pre>

<p>output_isnt() provides the opposite function of output_is(). It is a combination of stdout_isnt() and stderr_isnt().</p>

<pre>  output_isnt(sub {print &#34;foo&#34;; print STDERR &#34;bar&#34;;},&#39;bar&#39;,&#39;foo&#39;);</pre>

<p>is functionally equivalent to</p>

<pre>  stdout_is(sub {print &#34;foo&#34;;},&#39;bar&#39;) 
    &#38;&#38; stderr_is(sub {print STDERR &#34;bar&#34;;&#39;foo&#39;);</pre>

<p>As with output_is(), setting either $expected_stdout or $expected_stderr to <code>undef</code> ignores the output to that facility.</p>

<pre>  output_isnt(sub {print &#34;foo&#34;; print STDERR &#34;bar&#34;;},undef,&#39;foo&#39;);</pre>

<p>is the same as</p>

<pre>  stderr_is(sub {print STDERR &#34;bar&#34;;},&#39;foo&#39;) </pre>

<dt><a name="output_like"
><b>output_like</b></a></dt>

<dd>
<dt><a name="output_unlike"
><b>output_unlike</b></a></dt>

<dd>
<pre>  output_like  ( $coderef, $regex_stdout, $regex_stderr, &#39;description&#39; );
  output_like  { ... } $regex_stdout, $regex_stderr, &#39;description&#39;;
  output_unlike( $coderef, $regex_stdout, $regex_stderr, &#39;description&#39; );
  output_unlike { ... } $regex_stdout, $regex_stderr, &#39;description&#39;;</pre>

<p>output_like() and output_unlike() follow the same principles as output_is() and output_isnt() except they use a regular expression for matching.</p>

<p>output_like() attempts to match $regex_stdout and $regex_stderr against STDOUT and STDERR produced by $coderef. The test passes if both match.</p>

<pre>  output_like(sub {print &#34;foo&#34;; print STDERR &#34;bar&#34;;},qr/foo/,qr/bar/);</pre>

<p>The above test is successful.</p>

<p>Like output_is(), setting either $regex_stdout or $regex_stderr to <code>undef</code> ignores the output to that facility.</p>

<pre>  output_like(sub {print &#34;foo&#34;; print STDERR &#34;bar&#34;;},qr/foo/,undef);</pre>

<p>is the same as</p>

<pre>  stdout_like(sub {print &#34;foo&#34;; print STDERR &#34;bar&#34;;},qr/foo/);</pre>

<p>output_unlike() test pass if output from $coderef doesn&#39;t match $regex_stdout and $regex_stderr.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXPORTS"
>EXPORTS</a></h1>

<p>By default, all tests are exported, however with the switch to <a href="../Sub/Exporter.html" class="podlinkpod"
>Sub::Exporter</a> export groups are now available to better limit imports.</p>

<p>To import tests for STDOUT:</p>

<pre>  use Test::Output qw(:stdout);</pre>

<p>To import tests STDERR:</p>

<pre>  use Test::Output qw(:stderr);</pre>

<p>To import just the functions:</p>

<pre>  use Test::Output qw(:functions);</pre>

<p>And to import all tests:</p>

<pre>  use Test::Output;</pre>

<p>The following is a list of group names and which functions are exported:</p>

<dl>
<dt><a name="stdout"
>stdout</a></dt>

<dd>
<p>stdout_is stdout_isnt stdout_like stdout_unlike</p>

<dt><a name="stderr"
>stderr</a></dt>

<dd>
<p>stderr_is stderr_isnt stderr_like stderr_unlike</p>

<dt><a name="output"
>output</a></dt>

<dd>
<p>output_is output_isnt output_like output_unlike</p>

<dt><a name="combined"
>combined</a></dt>

<dd>
<p>combined_is combined_isnt combined_like combined_unlike</p>

<dt><a name="tests"
>tests</a></dt>

<dd>
<p>All of the above, this is the default when no options are given.</p>
</dd>
</dl>

<p><a href="../Sub/Exporter.html" class="podlinkpod"
>Sub::Exporter</a> allows for many other options, I encourage reading its documentation.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FUNCTIONS"
>FUNCTIONS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="stdout_from"
>stdout_from</a></h2>

<pre>  my $stdout = stdout_from($coderef)
  my $stdout = stdout_from { ... };</pre>

<p>stdout_from() executes $coderef and captures STDOUT.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="stderr_from"
>stderr_from</a></h2>

<pre>  my $stderr = stderr_from($coderef)
  my $stderr = stderr_from { ... };</pre>

<p>stderr_from() executes $coderef and captures STDERR.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="output_from"
>output_from</a></h2>

<pre>  my ($stdout, $stderr) = output_from($coderef)
  my ($stdout, $stderr) = output_from {...};</pre>

<p>output_from() executes $coderef one time capturing both STDOUT and STDERR.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="combined_from"
>combined_from</a></h2>

<pre>  my $combined = combined_from($coderef);
  my $combined = combined_from {...};</pre>

<p>combined_from() executes $coderef one time combines STDOUT and STDERR, and captures them. combined_from() is equivalent to using 2&#62;&#38;1 in UNIX.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Currently maintained by brian d foy, <code>bdfoy@cpan.org</code>.</p>

<p>Shawn Sorichetti, <code>&#60;ssoriche@cpan.org&#62;</code></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SOURCE_AVAILABILITY"
>SOURCE AVAILABILITY</a></h1>

<p>This module is in Github:</p>

<pre>        http://github.com/briandfoy/test-output/tree/master</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h1>

<p>Please report any bugs or feature requests to <code>bug-test-output@rt.cpan.org</code>, or through the web interface at <a href="http://rt.cpan.org" class="podlinkurl"
>http://rt.cpan.org</a>. I will be notified, and then you&#39;ll automatically be notified of progress on your bug as I make changes.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ACKNOWLEDGEMENTS"
>ACKNOWLEDGEMENTS</a></h1>

<p>Thanks to chromatic whose TieOut.pm was the basis for capturing output.</p>

<p>Also thanks to rjbs for his help cleaning the documention, and pushing me to <a href="../Sub/Exporter.html" class="podlinkpod"
>Sub::Exporter</a>.</p>

<p>Thanks to David Wheeler for providing code block support and tests.</p>

<p>Thanks to Michael G Schwern for the solution to combining STDOUT and STDERR.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_&#38;_LICENSE"
>COPYRIGHT &#38; LICENSE</a></h1>

<p>Copyright 2005-2008 Shawn Sorichetti, All Rights Reserved.</p>

<p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
