<html><head><title>Devel::StackTrace</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:16 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#%27TOP%27_AND_%27BOTTOM%27_OF_THE_STACK'>&#39;TOP&#39; AND &#39;BOTTOM&#39; OF THE STACK</a>
  <li class='indexItem indexItem1'><a href='#Devel%3A%3AStackTrace_METHODS'>Devel::StackTrace METHODS</a>
  <li class='indexItem indexItem1'><a href='#SUPPORT'>SUPPORT</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Devel::StackTrace - An object representing a stack trace</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 1.30</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use Devel::StackTrace;

  my $trace = Devel::StackTrace-&#62;new;

  print $trace-&#62;as_string; # like carp

  # from top (most recent) of stack to bottom.
  while (my $frame = $trace-&#62;next_frame) {
      print &#34;Has args\n&#34; if $frame-&#62;hasargs;
  }

  # from bottom (least recent) of stack to top.
  while (my $frame = $trace-&#62;prev_frame) {
      print &#34;Sub: &#34;, $frame-&#62;subroutine, &#34;\n&#34;;
  }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The Devel::StackTrace module contains two classes, Devel::StackTrace and Devel::StackTrace::Frame. The goal of this object is to encapsulate the information that can found through using the caller() function, as well as providing a simple interface to this data.</p>

<p>The Devel::StackTrace object contains a set of Devel::StackTrace::Frame objects, one for each level of the stack. The frames contain all the data available from <code>caller()</code>.</p>

<p>This code was created to support my <a href="../Exception/Class/Base.html" class="podlinkpod"
>Exception::Class::Base</a> class (part of Exception::Class) but may be useful in other contexts.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="&#39;TOP&#39;_AND_&#39;BOTTOM&#39;_OF_THE_STACK"
>&#39;TOP&#39; AND &#39;BOTTOM&#39; OF THE STACK</a></h1>

<p>When describing the methods of the trace object, I use the words &#39;top&#39; and &#39;bottom&#39;. In this context, the &#39;top&#39; frame on the stack is the most recent frame and the &#39;bottom&#39; is the least recent.</p>

<p>Here&#39;s an example:</p>

<pre>  foo();  # bottom frame is here

  sub foo {
     bar();
  }

  sub bar {
     Devel::StackTrace-&#62;new;  # top frame is here.
  }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Devel::StackTrace_METHODS"
>Devel::StackTrace METHODS</a></h1>

<ul>
<li>Devel::StackTrace-&#62;new(%named_params)
<p>Returns a new Devel::StackTrace object.</p>

<p>Takes the following parameters:</p>

<ul>
<li>frame_filter =&#62; $sub
<p>By default, Devel::StackTrace will include all stack frames before the call to its its constructor.</p>

<p>However, you may want to filter out some frames with more granularity than &#39;ignore_package&#39; or &#39;ignore_class&#39; allow.</p>

<p>You can provide a subroutine which is called with the raw frame data for each frame. This is a hash reference with two keys, &#34;caller&#34;, and &#34;args&#34;, both of which are array references. The &#34;caller&#34; key is the raw data as returned by Perl&#39;s <code>caller()</code> function, and the &#34;args&#34; key are the subroutine arguments found in <code>@DB::args</code>.</p>

<p>The filter should return true if the frame should be included, or false if it should be skipped.</p>
</li>

<li>ignore_package =&#62; $package_name OR \@package_names
<p>Any frames where the package is one of these packages will not be on the stack.</p>
</li>

<li>ignore_class =&#62; $package_name OR \@package_names
<p>Any frames where the package is a subclass of one of these packages (or is the same package) will not be on the stack.</p>

<p>Devel::StackTrace internally adds itself to the &#39;ignore_package&#39; parameter, meaning that the Devel::StackTrace package is <b>ALWAYS</b> ignored. However, if you create a subclass of Devel::StackTrace it will not be ignored.</p>
</li>

<li>no_refs =&#62; $boolean
<p>If this parameter is true, then Devel::StackTrace will not store references internally when generating stacktrace frames. This lets your objects go out of scope.</p>

<p>Devel::StackTrace replaces any references with their stringified representation.</p>
</li>

<li>no_args =&#62; $boolean
<p>If this parameter is true, then Devel::StackTrace will not store caller arguments in stack trace frames at all.</p>
</li>

<li>respect_overload =&#62; $boolean
<p>By default, Devel::StackTrace will call <code>overload::AddrRef()</code> to get the underlying string representation of an object, instead of respecting the object&#39;s stringification overloading. If you would prefer to see the overloaded representation of objects in stack traces, then set this parameter to true.</p>
</li>

<li>max_arg_length =&#62; $integer
<p>By default, Devel::StackTrace will display the entire argument for each subroutine call. Setting this parameter causes truncates each subroutine argument&#39;s string representation if it is longer than this number of characters.</p>
</li>

<li>message =&#62; $string
<p>By default, Devel::StackTrace will use &#39;Trace begun&#39; as the message for the first stack frame when you call <code>as_string</code>. You can supply an alternative message using this option.</p>
</li>

<li>indent =&#62; $boolean
<p>If this parameter is true, each stack frame after the first will start with a tab character, just like <code>Carp::confess()</code>.</p>
</li>
</ul>
</li>

<li>$trace-&#62;next_frame
<p>Returns the next Devel::StackTrace::Frame object down on the stack. If it hasn&#39;t been called before it returns the first frame. It returns undef when it reaches the bottom of the stack and then resets its pointer so the next call to <code>next_frame</code> or <code>prev_frame</code> will work properly.</p>
</li>

<li>$trace-&#62;prev_frame
<p>Returns the next Devel::StackTrace::Frame object up on the stack. If it hasn&#39;t been called before it returns the last frame. It returns undef when it reaches the top of the stack and then resets its pointer so pointer so the next call to <code>next_frame</code> or <code>prev_frame</code> will work properly.</p>
</li>

<li>$trace-&#62;reset_pointer
<p>Resets the pointer so that the next call <code>next_frame</code> or <code>prev_frame</code> will start at the top or bottom of the stack, as appropriate.</p>
</li>

<li>$trace-&#62;frames
<p>When this method is called with no arguments, it returns a list of <a href="../Devel/StackTrace/Frame.html" class="podlinkpod"
>Devel::StackTrace::Frame</a> objects. They are returned in order from top (most recent) to bottom.</p>

<p>This method can also be used to set the object&#39;s frames if you pass it a list of <a href="../Devel/StackTrace/Frame.html" class="podlinkpod"
>Devel::StackTrace::Frame</a> objects objects.</p>

<p>This is useful if you want to filter the list of frames in ways that are more complex than can be handled by <code>filter_frames</code>:</p>

<pre>  $stacktrace-&#62;frames( my_filter( $stacktrace-&#62;frames() ) );</pre>
</li>

<li>$trace-&#62;frame ($index)
<p>Given an index, returns the relevant frame or undef if there is not frame at that index. The index is exactly like a Perl array. The first frame is 0 and negative indexes are allowed.</p>
</li>

<li>$trace-&#62;frame_count
<p>Returns the number of frames in the trace object.</p>
</li>

<li>$trace-&#62;as_string(\%p)
<p>Calls as_string on each frame from top to bottom, producing output quite similar to the Carp module&#39;s cluck/confess methods.</p>

<p>The optional <code>\%p</code> parameter only has one useful option. The <code>max_arg_length</code> parameter truncates each subroutine argument&#39;s string representation if it is longer than this number of characters.</p>
</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SUPPORT"
>SUPPORT</a></h1>

<p>Please submit bugs to the CPAN RT system at http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Devel%3A%3AStackTrace or via email at bug-devel-stacktrace@rt.cpan.org.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Dave Rolsky &#60;autarch@urth.org&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is Copyright (c) 2012 by Dave Rolsky.</p>

<p>This is free software, licensed under:</p>

<pre>  The Artistic License 2.0 (GPL Compatible)</pre>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
