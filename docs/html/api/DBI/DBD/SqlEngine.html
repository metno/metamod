<html><head><title>DBI::DBD::SqlEngine</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:15 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Metadata'>Metadata</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#The_following_DBI_attributes_are_handled_by_DBI%3A%3ADBD%3A%3ASqlEngine%3A'>The following DBI attributes are handled by DBI::DBD::SqlEngine:</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#AutoCommit'>AutoCommit</a>
        <li class='indexItem indexItem4'><a href='#ChopBlanks'>ChopBlanks</a>
        <li class='indexItem indexItem4'><a href='#NUM_OF_FIELDS'>NUM_OF_FIELDS</a>
        <li class='indexItem indexItem4'><a href='#NUM_OF_PARAMS'>NUM_OF_PARAMS</a>
        <li class='indexItem indexItem4'><a href='#NAME'>NAME</a>
        <li class='indexItem indexItem4'><a href='#NULLABLE'>NULLABLE</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#The_following_DBI_attributes_and_methods_are_not_supported%3A'>The following DBI attributes and methods are not supported:</a>
      <li class='indexItem indexItem3'><a href='#DBI%3A%3ADBD%3A%3ASqlEngine_specific_attributes'>DBI::DBD::SqlEngine specific attributes</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#sql_engine_version'>sql_engine_version</a>
        <li class='indexItem indexItem4'><a href='#sql_nano_version'>sql_nano_version</a>
        <li class='indexItem indexItem4'><a href='#sql_statement_version'>sql_statement_version</a>
        <li class='indexItem indexItem4'><a href='#sql_handler'>sql_handler</a>
        <li class='indexItem indexItem4'><a href='#sql_parser_object'>sql_parser_object</a>
        <li class='indexItem indexItem4'><a href='#sql_sponge_driver'>sql_sponge_driver</a>
        <li class='indexItem indexItem4'><a href='#sql_valid_attrs'>sql_valid_attrs</a>
        <li class='indexItem indexItem4'><a href='#sql_readonly_attrs'>sql_readonly_attrs</a>
        <li class='indexItem indexItem4'><a href='#sql_identifier_case'>sql_identifier_case</a>
        <li class='indexItem indexItem4'><a href='#sql_quoted_identifier_case'>sql_quoted_identifier_case</a>
        <li class='indexItem indexItem4'><a href='#sql_flags'>sql_flags</a>
        <li class='indexItem indexItem4'><a href='#sql_dialect'>sql_dialect</a>
        <li class='indexItem indexItem4'><a href='#sql_engine_in_gofer'>sql_engine_in_gofer</a>
        <li class='indexItem indexItem4'><a href='#sql_meta'>sql_meta</a>
        <li class='indexItem indexItem4'><a href='#sql_table_source'>sql_table_source</a>
        <li class='indexItem indexItem4'><a href='#sql_data_source'>sql_data_source</a>
      </ul>
    </ul>
    <li class='indexItem indexItem2'><a href='#Driver_private_methods'>Driver private methods</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Default_DBI_methods'>Default DBI methods</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#data_sources'>data_sources</a>
        <li class='indexItem indexItem4'><a href='#list_tables'>list_tables</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Additional_methods'>Additional methods</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#sql_versions'>sql_versions</a>
        <li class='indexItem indexItem4'><a href='#sql_get_meta'>sql_get_meta</a>
        <li class='indexItem indexItem4'><a href='#sql_set_meta'>sql_set_meta</a>
        <li class='indexItem indexItem4'><a href='#sql_clear_meta'>sql_clear_meta</a>
      </ul>
    </ul>
    <li class='indexItem indexItem2'><a href='#Extensibility'>Extensibility</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#DBI%3A%3ADBD%3A%3ASqlEngine%3A%3ATableSource'>DBI::DBD::SqlEngine::TableSource</a>
      <li class='indexItem indexItem3'><a href='#DBI%3A%3ADBD%3A%3ASqlEngine%3A%3ADataSource'>DBI::DBD::SqlEngine::DataSource</a>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#SQL_ENGINES'>SQL ENGINES</a>
  <li class='indexItem indexItem1'><a href='#SUPPORT'>SUPPORT</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Where_can_I_go_for_more_help%3F'>Where can I go for more help?</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#ACKNOWLEDGEMENTS'>ACKNOWLEDGEMENTS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>DBI::DBD::SqlEngine - Base class for DBI drivers without their own SQL engine</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    package DBD::myDriver;

    use base qw(DBI::DBD::SqlEngine);

    sub driver
    {
        ...
        my $drh = $proto-&#62;SUPER::driver($attr);
        ...
        return $drh-&#62;{class};
        }

    package DBD::myDriver::dr;

    @ISA = qw(DBI::DBD::SqlEngine::dr);

    sub data_sources { ... }
    ...

    package DBD::myDriver::db;

    @ISA = qw(DBI::DBD::SqlEngine::db);

    sub init_valid_attributes { ... }
    sub init_default_attributes { ... }
    sub set_versions { ... }
    sub validate_STORE_attr { my ($dbh, $attrib, $value) = @_; ... }
    sub validate_FETCH_attr { my ($dbh, $attrib) = @_; ... }
    sub get_myd_versions { ... }
    sub get_avail_tables { ... }

    package DBD::myDriver::st;

    @ISA = qw(DBI::DBD::SqlEngine::st);

    sub FETCH { ... }
    sub STORE { ... }

    package DBD::myDriver::Statement;

    @ISA = qw(DBI::DBD::SqlEngine::Statement);

    sub open_table { ... }

    package DBD::myDriver::Table;

    @ISA = qw(DBI::DBD::SqlEngine::Table);

    sub new { ... }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>DBI::DBD::SqlEngine abstracts the usage of SQL engines from the DBD. DBD authors can concentrate on the data retrieval they want to provide.</p>

<p>It is strongly recommended that you read <a href="../../DBD/File/Developers.html" class="podlinkpod"
>DBD::File::Developers</a> and <a href="../../DBD/File/Roadmap.html" class="podlinkpod"
>DBD::File::Roadmap</a>, because many of the DBD::File API is provided by DBI::DBD::SqlEngine.</p>

<p>Currently the API of DBI::DBD::SqlEngine is experimental and will likely change in the near future to provide the table meta data basics like DBD::File.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Metadata"
>Metadata</a></h2>

<p>The following attributes are handled by DBI itself and not by DBI::DBD::SqlEngine, thus they all work as expected:</p>

<pre>    Active
    ActiveKids
    CachedKids
    CompatMode             (Not used)
    InactiveDestroy
    AutoInactiveDestroy
    Kids
    PrintError
    RaiseError
    Warn                   (Not used)</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="The_following_DBI_attributes_are_handled_by_DBI::DBD::SqlEngine:"
>The following DBI attributes are handled by DBI::DBD::SqlEngine:</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="AutoCommit"
>AutoCommit</a></h4>

<p>Always on.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="ChopBlanks"
>ChopBlanks</a></h4>

<p>Works.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="NUM_OF_FIELDS"
>NUM_OF_FIELDS</a></h4>

<p>Valid after <code>$sth-&#62;execute</code>.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="NUM_OF_PARAMS"
>NUM_OF_PARAMS</a></h4>

<p>Valid after <code>$sth-&#62;prepare</code>.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h4>

<p>Valid after <code>$sth-&#62;execute</code>; probably undef for Non-Select statements.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="NULLABLE"
>NULLABLE</a></h4>

<p>Not really working, always returns an array ref of ones, as DBD::CSV does not verify input data. Valid after <code>$sth-&#62;execute</code>; undef for non-select statements.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="The_following_DBI_attributes_and_methods_are_not_supported:"
>The following DBI attributes and methods are not supported:</a></h3>

<dl>
<dt><a name="bind_param_inout"
>bind_param_inout</a></dt>

<dd>
<dt><a name="CursorName"
>CursorName</a></dt>

<dd>
<dt><a name="LongReadLen"
>LongReadLen</a></dt>

<dd>
<dt><a name="LongTruncOk"
>LongTruncOk</a></dt>
</dl>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="DBI::DBD::SqlEngine_specific_attributes"
>DBI::DBD::SqlEngine specific attributes</a></h3>

<p>In addition to the DBI attributes, you can use the following dbh attributes:</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_engine_version"
>sql_engine_version</a></h4>

<p>Contains the module version of this driver (<b>readonly</b>)</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_nano_version"
>sql_nano_version</a></h4>

<p>Contains the module version of DBI::SQL::Nano (<b>readonly</b>)</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_statement_version"
>sql_statement_version</a></h4>

<p>Contains the module version of SQL::Statement, if available (<b>readonly</b>)</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_handler"
>sql_handler</a></h4>

<p>Contains the SQL Statement engine, either DBI::SQL::Nano or SQL::Statement (<b>readonly</b>).</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_parser_object"
>sql_parser_object</a></h4>

<p>Contains an instantiated instance of SQL::Parser (<b>readonly</b>). This is filled when used first time (only when used with SQL::Statement).</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_sponge_driver"
>sql_sponge_driver</a></h4>

<p>Contains an internally used DBD::Sponge handle (<b>readonly</b>).</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_valid_attrs"
>sql_valid_attrs</a></h4>

<p>Contains the list of valid attributes for each DBI::DBD::SqlEngine based driver (<b>readonly</b>).</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_readonly_attrs"
>sql_readonly_attrs</a></h4>

<p>Contains the list of those attributes which are readonly (<b>readonly</b>).</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_identifier_case"
>sql_identifier_case</a></h4>

<p>Contains how DBI::DBD::SqlEngine deals with non-quoted SQL identifiers:</p>

<pre>  * SQL_IC_UPPER (1) means all identifiers are internally converted
    into upper-cased pendants
  * SQL_IC_LOWER (2) means all identifiers are internally converted
    into lower-cased pendants
  * SQL_IC_MIXED (4) means all identifiers are taken as they are</pre>

<p>These conversions happen if (and only if) no existing identifier matches. Once existing identifier is used as known.</p>

<p>The SQL statement execution classes doesn&#39;t have to care, so don&#39;t expect <code>sql_identifier_case</code> affects column names in statements like</p>

<pre>  SELECT * FROM foo</pre>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_quoted_identifier_case"
>sql_quoted_identifier_case</a></h4>

<p>Contains how DBI::DBD::SqlEngine deals with quoted SQL identifiers (<b>readonly</b>). It&#39;s fixated to SQL_IC_SENSITIVE (3), which is interpreted as SQL_IC_MIXED.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_flags"
>sql_flags</a></h4>

<p>Contains additional flags to instantiate an SQL::Parser. Because an SQL::Parser is instantiated only once, it&#39;s recommended to set this flag before any statement is executed.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_dialect"
>sql_dialect</a></h4>

<p>Controls the dialect understood by SQL::Parser. Possible values (delivery state of SQL::Statement):</p>

<pre>  * ANSI
  * CSV
  * AnyData</pre>

<p>Defaults to &#34;CSV&#34;. Because an SQL::Parser is instantiated only once and SQL::Parser doesn&#39;t allow to modify the dialect once instantiated, it&#39;s strongly recommended to set this flag before any statement is executed (best place is connect attribute hash).</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_engine_in_gofer"
>sql_engine_in_gofer</a></h4>

<p>This value has a true value in case of this driver is operated via <a href="../../DBD/Gofer.html" class="podlinkpod"
>DBD::Gofer</a>. The impact of being operated via Gofer is a read-only driver (not read-only databases!), so you cannot modify any attributes later - neither any table settings. <b>But</b> you won&#39;t get an error in cases you modify table attributes, so please carefully watch <code>sql_engine_in_gofer</code>.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_meta"
>sql_meta</a></h4>

<p>Private data area which contains information about the tables this module handles. Table meta data might not be available until the table has been accessed for the first time e.g., by issuing a select on it however it is possible to pre-initialize attributes for each table you use.</p>

<p>DBI::DBD::SqlEngine recognizes the (public) attributes <code>col_names</code>, <code>table_name</code>, <code>readonly</code>, <code>sql_data_source</code> and <code>sql_identifier_case</code>. Be very careful when modifying attributes you do not know, the consequence might be a destroyed or corrupted table.</p>

<p>While <code>sql_meta</code> is a private and readonly attribute (which means, you cannot modify it&#39;s values), derived drivers might provide restricted write access through another attribute. Well known accessors are <code>csv_tables</code> for <a href="../../DBD/CSV.html" class="podlinkpod"
>DBD::CSV</a>, <code>ad_tables</code> for <a href="../../DBD/AnyData.html" class="podlinkpod"
>DBD::AnyData</a> and <code>dbm_tables</code> for <a href="../../DBD/DBM.html" class="podlinkpod"
>DBD::DBM</a>.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_table_source"
>sql_table_source</a></h4>

<p>Controls the class which will be used for fetching available tables.</p>

<p>See <a href="#DBI%3A%3ADBD%3A%3ASqlEngine%3A%3ATableSource" class="podlinkpod"
>&#34;DBI::DBD::SqlEngine::TableSource&#34;</a> for details.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_data_source"
>sql_data_source</a></h4>

<p>Contains the class name to be used for opening tables.</p>

<p>See <a href="#DBI%3A%3ADBD%3A%3ASqlEngine%3A%3ADataSource" class="podlinkpod"
>&#34;DBI::DBD::SqlEngine::DataSource&#34;</a> for details.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Driver_private_methods"
>Driver private methods</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Default_DBI_methods"
>Default DBI methods</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="data_sources"
>data_sources</a></h4>

<p>The <code>data_sources</code> method returns a list of subdirectories of the current directory in the form &#34;dbi:CSV:f_dir=$dirname&#34;.</p>

<p>If you want to read the subdirectories of another directory, use</p>

<pre>    my ($drh)  = DBI-&#62;install_driver (&#34;CSV&#34;);
    my (@list) = $drh-&#62;data_sources (f_dir =&#62; &#34;/usr/local/csv_data&#34;);</pre>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="list_tables"
>list_tables</a></h4>

<p>This method returns a list of file names inside $dbh-&#62;{f_dir}. Example:</p>

<pre>    my ($dbh)  = DBI-&#62;connect (&#34;dbi:CSV:f_dir=/usr/local/csv_data&#34;);
    my (@list) = $dbh-&#62;func (&#34;list_tables&#34;);</pre>

<p>Note that the list includes all files contained in the directory, even those that have non-valid table names, from the view of SQL.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Additional_methods"
>Additional methods</a></h3>

<p>The following methods are only available via their documented name when DBI::DBD::SQlEngine is used directly. Because this is only reasonable for testing purposes, the real names must be used instead. Those names can be computed by replacing the <code>sql_</code> in the method name with the driver prefix.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_versions"
>sql_versions</a></h4>

<p>Signature:</p>

<pre>  sub sql_versions (;$) {
    my ($table_name) = @_;
    $table_name ||= &#34;.&#34;;
    ...
    }</pre>

<p>Returns the versions of the driver, including the DBI version, the Perl version, DBI::PurePerl version (if DBI::PurePerl is active) and the version of the SQL engine in use.</p>

<pre>    my $dbh = DBI-&#62;connect (&#34;dbi:File:&#34;);
    my $sql_versions = $dbh-&#62;func( &#34;sql_versions&#34; );
    print &#34;$sql_versions\n&#34;;
    __END__
    # DBI::DBD::SqlEngine  0.05 using SQL::Statement 1.402
    # DBI                  1.623
    # OS                   netbsd (6.99.12)
    # Perl                 5.016002 (x86_64-netbsd-thread-multi)</pre>

<p>Called in list context, sql_versions will return an array containing each line as single entry.</p>

<p>Some drivers might use the optional (table name) argument and modify version information related to the table (e.g. DBD::DBM provides storage backend information for the requested table, when it has a table name).</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_get_meta"
>sql_get_meta</a></h4>

<p>Signature:</p>

<pre>    sub sql_get_meta ($$)
    {
        my ($table_name, $attrib) = @_;
        ...
    }</pre>

<p>Returns the value of a meta attribute set for a specific table, if any. See <a href="../../sql_meta.html" class="podlinkpod"
>sql_meta</a> for the possible attributes.</p>

<p>A table name of <code>&#34;.&#34;</code> (single dot) is interpreted as the default table. This will retrieve the appropriate attribute globally from the dbh. This has the same restrictions as <code>$dbh-&#62;{$attrib}</code>.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_set_meta"
>sql_set_meta</a></h4>

<p>Signature:</p>

<pre>    sub sql_set_meta ($$$)
    {
        my ($table_name, $attrib, $value) = @_;
        ...
    }</pre>

<p>Sets the value of a meta attribute set for a specific table. See <a href="../../sql_meta.html" class="podlinkpod"
>sql_meta</a> for the possible attributes.</p>

<p>A table name of <code>&#34;.&#34;</code> (single dot) is interpreted as the default table which will set the specified attribute globally for the dbh. This has the same restrictions as <code>$dbh-&#62;{$attrib} = $value</code>.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="sql_clear_meta"
>sql_clear_meta</a></h4>

<p>Signature:</p>

<pre>    sub sql_clear_meta ($)
    {
        my ($table_name) = @_;
        ...
    }</pre>

<p>Clears the table specific meta information in the private storage of the dbh.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Extensibility"
>Extensibility</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="DBI::DBD::SqlEngine::TableSource"
>DBI::DBD::SqlEngine::TableSource</a></h3>

<p>Provides data sources and table information on database driver and database handle level.</p>

<pre>  package DBI::DBD::SqlEngine::TableSource;

  sub data_sources ($;$)
  {
    my ( $class, $drh, $attrs ) = @_;
    ...
  }

  sub avail_tables
  {
    my ( $class, $drh ) = @_;
    ...
  }</pre>

<p>The <code>data_sources</code> method is called when the user invokes any of the following:</p>

<pre>  @ary = DBI-&#62;data_sources($driver);
  @ary = DBI-&#62;data_sources($driver, \%attr);
  
  @ary = $dbh-&#62;data_sources();
  @ary = $dbh-&#62;data_sources(\%attr);</pre>

<p>The <code>avail_tables</code> method is called when the user invokes any of the following:</p>

<pre>  @names = $dbh-&#62;tables( $catalog, $schema, $table, $type );
  
  $sth = $dbh-&#62;table_info( $catalog, $schema, $table, $type );
  $sth = $dbh-&#62;table_info( $catalog, $schema, $table, $type, \%attr );

  $dbh-&#62;func( &#34;list_tables&#34; );</pre>

<p>Everytime where an <code>\%attr</code> argument can be specified, this <code>\%attr</code> object&#39;s <code>sql_table_source</code> attribute is preferred over the <code>$dbh</code> attribute or the driver default, eg.</p>

<pre>  @ary = DBI-&#62;data_sources(&#34;dbi:CSV:&#34;, {
    f_dir =&#62; &#34;/your/csv/tables&#34;,
    # note: this class doesn&#39;t comes with DBI
    sql_table_source =&#62; &#34;DBD::File::Archive::Tar::TableSource&#34;,
    # scan tarballs instead of directories
  });</pre>

<p>When you&#39;re going to implement such a DBD::File::Archive::Tar::TableSource class, remember to add correct attributes (including <code>sql_table_source</code> and <code>sql_data_source</code>) to the returned DSN&#39;s.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="DBI::DBD::SqlEngine::DataSource"
>DBI::DBD::SqlEngine::DataSource</a></h3>

<p>Provides base functionality for dealing with tables. It is primarily designed for allowing transparent access to files on disk or already opened (file-)streams (eg. for DBD::CSV).</p>

<p>Derived classes shall be restricted to similar functionality, too (eg. opening streams from an archive, transparently compress/uncompress log files before parsing them,</p>

<pre>  package DBI::DBD::SqlEngine::DataSource;

  sub complete_table_name ($$;$)
  {
    my ( $self, $meta, $table, $respect_case ) = @_;
    ...
  }</pre>

<p>The method <code>complete_table_name</code> is called when first setting up the <i>meta information</i> for a table:</p>

<pre>  &#34;SELECT user.id, user.name, user.shell FROM user WHERE ...&#34;</pre>

<p>results in opening the table <code>user</code>. First step of the table open process is completing the name. Let&#39;s imagine you&#39;re having a <a href="../../DBD/CSV.html" class="podlinkpod"
>DBD::CSV</a> handle with following settings:</p>

<pre>  $dbh-&#62;{sql_identifier_case} = SQL_IC_LOWER;
  $dbh-&#62;{f_ext} = &#39;.lst&#39;;
  $dbh-&#62;{f_dir} = &#39;/data/web/adrmgr&#39;;</pre>

<p>Those settings will result in looking for files matching <code>[Uu][Ss][Ee][Rr](\.lst)?$</code> in <code>/data/web/adrmgr/</code>. The scanning of the directory <code>/data/web/adrmgr/</code> and the pattern match check will be done in <code>DBD::File::DataSource::File</code> by the <code>complete_table_name</code> method.</p>

<p>If you intend to provide other sources of data streams than files, in addition to provide an appropriate <code>complete_table_name</code> method, a method to open the resource is required:</p>

<pre>  package DBI::DBD::SqlEngine::DataSource;

  sub open_data ($)
  {
    my ( $self, $meta, $attrs, $flags ) = @_;
    ...
  }</pre>

<p>After the method <code>open_data</code> has been run successfully, the table&#39;s meta information are in a state which allowes the table&#39;s data accessor methods will be able to fetch/store row information. Implementation details heavily depends on the table implementation, whereby the most famous is surely <a href="../../DBD/File/Table.html" class="podlinkpod"
>DBD::File/DBD::File::Table</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SQL_ENGINES"
>SQL ENGINES</a></h1>

<p>DBI::DBD::SqlEngine currently supports two SQL engines: <a href="../../SQL/Statement.html" class="podlinkpod"
>SQL::Statement</a> and <a href="../../DBI/SQL/Nano.html" class="podlinkpod"
>DBI::SQL::Nano::Statement_</a>. DBI::SQL::Nano supports a <i>very</i> limited subset of SQL statements, but it might be faster for some very simple tasks. SQL::Statement in contrast supports a much larger subset of ANSI SQL.</p>

<p>To use SQL::Statement, you need at least version 1.401 of SQL::Statement and the environment variable <code>DBI_SQL_NANO</code> must not be set to a true value.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SUPPORT"
>SUPPORT</a></h1>

<p>You can find documentation for this module with the perldoc command.</p>

<pre>    perldoc DBI::DBD::SqlEngine</pre>

<p>You can also look for information at:</p>

<ul>
<li>RT: CPAN&#39;s request tracker
<p><a href="http://rt.cpan.org/NoAuth/Bugs.html?Dist=DBI" class="podlinkurl"
>http://rt.cpan.org/NoAuth/Bugs.html?Dist=DBI</a> <a href="http://rt.cpan.org/NoAuth/Bugs.html?Dist=SQL-Statement" class="podlinkurl"
>http://rt.cpan.org/NoAuth/Bugs.html?Dist=SQL-Statement</a></p>
</li>

<li>AnnoCPAN: Annotated CPAN documentation
<p><a href="http://annocpan.org/dist/DBI" class="podlinkurl"
>http://annocpan.org/dist/DBI</a> <a href="http://annocpan.org/dist/SQL-Statement" class="podlinkurl"
>http://annocpan.org/dist/SQL-Statement</a></p>
</li>

<li>CPAN Ratings
<p><a href="http://cpanratings.perl.org/d/DBI" class="podlinkurl"
>http://cpanratings.perl.org/d/DBI</a></p>
</li>

<li>Search CPAN
<p><a href="http://search.cpan.org/dist/DBI/" class="podlinkurl"
>http://search.cpan.org/dist/DBI/</a></p>
</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Where_can_I_go_for_more_help?"
>Where can I go for more help?</a></h2>

<p>For questions about installation or usage, please ask on the dbi-dev@perl.org mailing list.</p>

<p>If you have a bug report, patch or suggestion, please open a new report ticket on CPAN, if there is not already one for the issue you want to report. Of course, you can mail any of the module maintainers, but it is less likely to be missed if it is reported on RT.</p>

<p>Report tickets should contain a detailed description of the bug or enhancement request you want to report and at least an easy way to verify/reproduce the issue and any supplied fix. Patches are always welcome, too.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ACKNOWLEDGEMENTS"
>ACKNOWLEDGEMENTS</a></h1>

<p>Thanks to Tim Bunce, Martin Evans and H.Merijn Brand for their continued support while developing DBD::File, DBD::DBM and DBD::AnyData. Their support, hints and feedback helped to design and implement this module.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>This module is currently maintained by</p>

<p>H.Merijn Brand &#60; h.m.brand at xs4all.nl &#62; and Jens Rehsack &#60; rehsack at googlemail.com &#62;</p>

<p>The original authors are Jochen Wiedmann and Jeff Zucker.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<pre> Copyright (C) 2009-2013 by H.Merijn Brand &#38; Jens Rehsack
 Copyright (C) 2004-2009 by Jeff Zucker
 Copyright (C) 1998-2004 by Jochen Wiedmann</pre>

<p>All rights reserved.</p>

<p>You may freely distribute and/or modify this module under the terms of either the GNU General Public License (GPL) or the Artistic License, as specified in the Perl README file.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../DBI.html" class="podlinkpod"
>DBI</a>, <a href="../../DBD/File.html" class="podlinkpod"
>DBD::File</a>, <a href="../../DBD/AnyData.html" class="podlinkpod"
>DBD::AnyData</a> and <a href="../../DBD/Sys.html" class="podlinkpod"
>DBD::Sys</a>.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
