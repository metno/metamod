<html><head><title>Catalyst::Plugin::Authorization::Roles</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:02 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_%26_LICENSE'>COPYRIGHT &#38; LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Catalyst::Plugin::Authorization::Roles - Role based authorization for Catalyst based on Catalyst::Plugin::Authentication</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use Catalyst qw/
        Authentication
        Authorization::Roles
    /;

    sub delete : Local {
        my ( $self, $c ) = @_;

        $c-&#62;assert_user_roles( qw/admin/ ); # only admins can delete

        $c-&#62;model(&#34;Foo&#34;)-&#62;delete_it();
    }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Role based access control is very simple: every user has a list of roles, which that user is allowed to assume, and every restricted part of the app makes an assertion about the necessary roles.</p>

<p>With <code>assert_user_roles</code>, if the user is a member in <b>all</b> of the required roles access is granted. Otherwise, access is denied. With <code>assert_any_user_role</code> it is enough that the user is a member in <b>one</b> role.</p>

<p>There are alternative approaches to do this on a per action basis, see <a href="../../../Catalyst/ActionRole/ACL.html" class="podlinkpod"
>Catalyst::ActionRole::ACL</a>.</p>

<p>For example, if you have a CRUD application, for every mutating action you probably want to check that the user is allowed to edit. To do this, create an editor role, and add that role to every user who is allowed to edit.</p>

<pre>    sub edit : Local {
        my ( $self, $c ) = @_;
        $c-&#62;assert_user_roles( qw/editor/ );
        $c-&#62;model(&#34;TheModel&#34;)-&#62;make_changes();
    }</pre>

<p>When this plugin checks the roles of a user it will first see if the user supports the self check method.</p>

<p>When this is not supported the list of roles is extracted from the user using the <code>roles</code> method.</p>

<p>When this is supported, the <code>check_roles</code> method will be used to delegate the role check to the user class. Classes like the one provided with <a href="../../../iCatalyst/Authentication/Store/DBIx/Class.html" class="podlinkpod"
>iCatalyst::Authentication::Store::DBIx::Class</a> optimize the check this way.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<dl>
<dt><a name="assert_user_roles_[_$user_],_@roles"
>assert_user_roles [ $user ], @roles</a></dt>

<dd>
<p>Checks that the user (as supplied by the first argument, or, if omitted, <code>$c-&#62;user</code>) has the specified roles.</p>

<p>If for any reason (<code>$c-&#62;user</code> is not defined, the user is missing a role, etc) the check fails, an error is thrown.</p>

<p>You can either catch these errors with an eval, or clean them up in your <code>end</code> action.</p>

<dt><a name="check_user_roles_[_$user_],_@roles"
>check_user_roles [ $user ], @roles</a></dt>

<dd>
<p>Takes the same args as <code>assert_user_roles</code>, and performs the same check, but instead of throwing errors returns a boolean value.</p>

<dt><a name="assert_any_user_role_[_$user_],_@roles"
>assert_any_user_role [ $user ], @roles</a></dt>

<dd>
<p>Checks that the user (as supplied by the first argument, or, if omitted, <code>$c-&#62;user</code>) has at least one of the specified roles.</p>

<p>Other than that, works like <code>assert_user_roles</code>.</p>

<dt><a name="check_any_user_role_[_$user_],_@roles"
>check_any_user_role [ $user ], @roles</a></dt>

<dd>
<p>Takes the same args as <code>assert_any_user_role</code>, and performs the same check, but instead of throwing errors returns a boolean value.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<dl>
<dt><a name="Catalyst::Plugin::Authentication"
><a href="../../../Catalyst/Plugin/Authentication.html" class="podlinkpod"
>Catalyst::Plugin::Authentication</a></a></dt>

<dd>
<dt><a name="Catalyst::ActionRole::ACL"
><a href="../../../Catalyst/ActionRole/ACL.html" class="podlinkpod"
>Catalyst::ActionRole::ACL</a></a></dt>

<dd>
<dt><a name="Catalyst::Manual::Tutorial::06_Authorization"
><a href="../../../Catalyst/Manual/Tutorial/06_Authorization.html" class="podlinkpod"
>Catalyst::Manual::Tutorial::06_Authorization</a></a></dt>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Yuval Kogman &#60;nothingmuch@woobling.org&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_&#38;_LICENSE"
>COPYRIGHT &#38; LICENSE</a></h1>

<p>Copyright (c) 2005-2011 the Catalyst::Plugin::Authorization::Roles <a href="#AUTHOR" class="podlinkpod"
>&#34;AUTHOR&#34;</a> as listed above.</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
