<html><head><title>Catalyst::Authentication::Realm::Progressive</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:02 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#EXAMPLE'>EXAMPLE</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#CONFIGURATION'>CONFIGURATION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new_(%24realmname%2C_%24config%2C_%24app)'>new ($realmname, $config, $app)</a>
    <li class='indexItem indexItem2'><a href='#authenticate'>authenticate</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHORS'>AUTHORS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_%26_LICENSE'>COPYRIGHT &#38; LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Catalyst::Authentication::Realm::Progressive - Authenticate against multiple realms</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>This Realm allows an application to use a single authenticate() call during which multiple realms are used and tried incrementally until one performs a successful authentication is accomplished.</p>

<p>A simple use case is a Temporary Password that looks and acts exactly as a regular password.
Without changing the authentication code,
you can authenticate against multiple realms.</p>

<p>Another use might be to support a legacy website authentication system,
trying the current auth system first,
and upon failure,
attempting authentication against the legacy system.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLE"
>EXAMPLE</a></h2>

<p>If your application has multiple realms to authenticate,
such as a temporary password realm and a normal realm,
you can configure the progressive realm as the default,
and configure it to iteratively call the temporary realm and then the normal realm.</p>

<pre> __PACKAGE__-&#62;config(
    &#39;Plugin::Authentication&#39; =&#62; {
        default_realm =&#62; &#39;progressive&#39;,
        realms =&#62; {
            progressive =&#62; {
                class =&#62; &#39;Progressive&#39;,
                realms =&#62; [ &#39;temp&#39;, &#39;normal&#39; ],
                # Modify the authinfo passed into authenticate by merging
                # these hashes into the realm&#39;s authenticate call:
                authinfo_munge =&#62; {
                    normal =&#62; { &#39;type&#39; =&#62; &#39;normal&#39; },
                    temp   =&#62; { &#39;type&#39; =&#62; &#39;temporary&#39; },
                }
            },
            normal =&#62; {
                credential =&#62; {
                    class =&#62; &#39;Password&#39;,
                    password_field =&#62; &#39;secret&#39;,
                    password_type  =&#62; &#39;hashed&#39;,
                    password_hash_type =&#62; &#39;SHA-1&#39;,
                },
                store =&#62; {
                    class      =&#62; &#39;DBIx::Class&#39;,
                    user_model =&#62; &#39;Schema::Person::Identity&#39;,
                    id_field   =&#62; &#39;id&#39;,
                }
            },
            temp =&#62; {
                credential =&#62; {
                    class =&#62; &#39;Password&#39;,
                    password_field =&#62; &#39;secret&#39;,
                    password_type  =&#62; &#39;hashed&#39;,
                    password_hash_type =&#62; &#39;SHA-1&#39;,
                },
                store =&#62; {
                    class    =&#62; &#39;DBIx::Class&#39;,
                    user_model =&#62; &#39;Schema::Person::Identity&#39;,
                    id_field   =&#62; &#39;id&#39;,
                }
            },
        }
    }
 );</pre>

<p>Then, in your controller code, to attempt authentication against both realms you just have to do a simple authenticate call:</p>

<pre> if ( $c-&#62;authenticate({ id =&#62; $username, password =&#62; $password }) ) {
     if ( $c-&#62;user-&#62;type eq &#39;temporary&#39; ) {
         # Force user to change password
     }
 }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONFIGURATION"
>CONFIGURATION</a></h1>

<dl>
<dt><a name="realms"
>realms</a></dt>

<dd>
<p>An array reference consisting of each realm to attempt authentication against, in the order listed. If the realm does not exist, calling authenticate will die.</p>

<dt><a name="authinfo_munge"
>authinfo_munge</a></dt>

<dd>
<p>A hash reference keyed by realm names, with values being hash references to merge into the authinfo call that is subsequently passed into the realm&#39;s authenticate method. This is useful if your store uses the same class for each realm, separated by some other token (in the <a href="../../../EXAMPLE.html" class="podlinkpod"
>EXAMPLE</a> authinfo_mungesection, the &#39;realm&#39; is a column on <code>Schema::Person::Identity</code> that will be either &#39;temp&#39; or &#39;local&#39;, to ensure the query to fetch the user finds the right Identity record for that realm.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new_($realmname,_$config,_$app)"
>new ($realmname, $config, $app)</a></h2>

<p>Constructs an instance of this realm.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="authenticate"
>authenticate</a></h2>

<p>This method iteratively calls each realm listed in the <code>realms</code> configuration key. It returns after the first successful authentication call is done.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS"
>AUTHORS</a></h1>

<p>J. Shirley <code>&#60;jshirley@cpan.org&#62;</code></p>

<p>Jay Kuri <code>&#60;jayk@cpan.org&#62;</code></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_&#38;_LICENSE"
>COPYRIGHT &#38; LICENSE</a></h1>

<p>Copyright (c) 2008 the aforementioned authors. All rights reserved. This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
