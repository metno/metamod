<html><head><title>Plack::Middleware::AccessLog</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:25 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CONFIGURATION'>CONFIGURATION</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Plack::Middleware::AccessLog - Logs requests like Apache&#39;s log format</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  # in app.psgi
  use Plack::Builder;

  builder {
      enable &#34;Plack::Middleware::AccessLog&#34;, format =&#62; &#34;combined&#34;;
      $app;
  };</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Plack::Middleware::AccessLog forwards the request to the given app and logs request and response details to the logger callback. The format can be specified using Apache-like format strings (or <code>combined</code> or <code>common</code> for the default formats). If none is specified <code>combined</code> is used.</p>

<p>This middleware uses calculable Content-Length by checking body type, and cannot log the time taken to serve requests. It also logs the request <b>before</b> the response is actually sent to the client. Use <a href="../../Plack/Middleware/AccessLog/Timed.html" class="podlinkpod"
>Plack::Middleware::AccessLog::Timed</a> if you want to log details <b>after</b> the response is transmitted (more like a real web server) to the client.</p>

<p>This middleware is enabled by default when you run <a href="../../plackup.html" class="podlinkpod"
>plackup</a> as a default <code>development</code> environment.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONFIGURATION"
>CONFIGURATION</a></h1>

<dl>
<dt><a name="format"
>format</a></dt>

<dd>
<pre>  enable &#34;Plack::Middleware::AccessLog&#34;,
      format =&#62; &#39;%h %l %u %t &#34;%r&#34; %&#62;s %b &#34;%{Referer}i&#34; &#34;%{User-agent}i&#34;&#39;;</pre>

<p>Takes a format string (or a preset template <code>combined</code> or <code>custom</code>) to specify the log format. This middleware implements a subset of <a href="http://httpd.apache.org/docs/2.0/mod/mod_log_config.html" class="podlinkurl"
>Apache&#39;s LogFormat templates</a>:</p>

<pre>   %%    a percent sign
   %h    REMOTE_ADDR from the PSGI environment, or -
   %l    remote logname not implemented (currently always -)
   %u    REMOTE_USER from the PSGI environment, or -
   %t    [local timestamp, in default format]
   %r    REQUEST_METHOD, REQUEST_URI and SERVER_PROTOCOL from the PSGI environment
   %s    the HTTP status code of the response
   %b    content length
   %T    custom field for handling times in subclasses
   %D    custom field for handling sub-second times in subclasses
   %v    SERVER_NAME from the PSGI environment, or -
   %V    HTTP_HOST or SERVER_NAME from the PSGI environment, or -
   %p    SERVER_PORT from the PSGI environment
   %P    the worker&#39;s process id</pre>

<p>Some of these format fields are only supported by middleware that subclasses <code>AccessLog</code>.</p>

<p>In addition, custom values can be referenced, using <code>%{name}</code>, with one of the mandatory modifier flags <code>i</code>, <code>o</code> or <code>t</code>:</p>

<pre>   %{variable-name}i    HTTP_VARIABLE_NAME value from the PSGI environment
   %{header-name}o      header-name header
   %{time-format]t      localtime in the specified strftime format</pre>

<dt><a name="logger"
>logger</a></dt>

<dd>
<pre>  my $logger = Log::Dispatch-&#62;new(...);
  enable &#34;Plack::Middleware::AccessLog&#34;,
      logger =&#62; sub { $logger-&#62;log(level =&#62; &#39;debug&#39;, message =&#62; @_) };</pre>

<p>Sets a callback to print log message to. It prints to the <code>psgi.errors</code> output stream by default.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="http://httpd.apache.org/docs/2.2/mod/mod_log_config.html" class="podlinkurl"
>http://httpd.apache.org/docs/2.2/mod/mod_log_config.html</a> Rack::CustomLogger</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
