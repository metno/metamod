<html><head><title>Plack::Response</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:25 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Plack::Response - Portable HTTP Response object for PSGI response</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use Plack::Response;

  sub psgi_handler {
      my $env = shift;

      my $res = Plack::Response-&#62;new(200);
      $res-&#62;content_type(&#39;text/html&#39;);
      $res-&#62;body(&#34;Hello World&#34;);

      return $res-&#62;finalize;
  }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Plack::Response allows you a way to create PSGI response array ref through a simple API.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<dl>
<dt><a name="new"
>new</a></dt>

<dd>
<pre>  $res = Plack::Response-&#62;new;
  $res = Plack::Response-&#62;new($status);
  $res = Plack::Response-&#62;new($status, $headers);
  $res = Plack::Response-&#62;new($status, $headers, $body);</pre>

<p>Creates a new Plack::Response object.</p>

<dt><a name="status"
>status</a></dt>

<dd>
<pre>  $res-&#62;status(200);
  $status = $res-&#62;status;</pre>

<p>Sets and gets HTTP status code. <code>code</code> is an alias.</p>

<dt><a name="headers"
>headers</a></dt>

<dd>
<pre>  $headers = $res-&#62;headers;
  $res-&#62;headers([ &#39;Content-Type&#39; =&#62; &#39;text/html&#39; ]);
  $res-&#62;headers({ &#39;Content-Type&#39; =&#62; &#39;text/html&#39; });
  $res-&#62;headers( HTTP::Headers-&#62;new );</pre>

<p>Sets and gets HTTP headers of the response. Setter can take either an array ref, a hash ref or <a href="../HTTP/Headers.html" class="podlinkpod"
>HTTP::Headers</a> object containing a list of headers.</p>

<dt><a name="body"
>body</a></dt>

<dd>
<pre>  $res-&#62;body($body_str);
  $res-&#62;body([ &#34;Hello&#34;, &#34;World&#34; ]);
  $res-&#62;body($io);</pre>

<p>Gets and sets HTTP response body. Setter can take either a string, an array ref, or an IO::Handle-like object. <code>content</code> is an alias.</p>

<p>Note that this method doesn&#39;t automatically set <i>Content-Length</i> for the response. You have to set it manually if you want, with the <code>content_length</code> method (see below).</p>

<dt><a name="header"
>header</a></dt>

<dd>
<pre>  $res-&#62;header(&#39;X-Foo&#39; =&#62; &#39;bar&#39;);
  my $val = $res-&#62;header(&#39;X-Foo&#39;);</pre>

<p>Shortcut for <code>$res-&#62;headers-&#62;header</code>.</p>

<dt><a name="content_type,_content_length,_content_encoding"
>content_type, content_length, content_encoding</a></dt>

<dd>
<pre>  $res-&#62;content_type(&#39;text/plain&#39;);
  $res-&#62;content_length(123);
  $res-&#62;content_encoding(&#39;gzip&#39;);</pre>

<p>Shortcut for the equivalent get/set methods in <code>$res-&#62;headers</code>.</p>

<dt><a name="redirect"
>redirect</a></dt>

<dd>
<pre>  $res-&#62;redirect($url);
  $res-&#62;redirect($url, 301);</pre>

<p>Sets redirect URL with an optional status code, which defaults to 302.</p>

<p>Note that this method doesn&#39;t normalize the given URI string. Users of this module have to be responsible about properly encoding URI paths and parameters.</p>

<dt><a name="location"
>location</a></dt>

<dd>
<p>Gets and sets <code>Location</code> header.</p>

<p>Note that this method doesn&#39;t normalize the given URI string in the setter. See above in <code>redirect</code> for details.</p>

<dt><a name="cookies"
>cookies</a></dt>

<dd>
<pre>  $res-&#62;cookies-&#62;{foo} = 123;
  $res-&#62;cookies-&#62;{foo} = { value =&#62; &#39;123&#39; };</pre>

<p>Returns a hash reference containing cookies to be set in the response. The keys of the hash are the cookies&#39; names, and their corresponding values are a plain string (for <code>value</code> with everything else defaults) or a hash reference that can contain keys such as <code>value</code>, <code>domain</code>, <code>expires</code>, <code>path</code>, <code>httponly</code>, <code>secure</code>, <code>max-age</code>.</p>

<p><code>expires</code> can take a string or an integer (as an epoch time) and <b>does not</b> convert string formats such as <code>+3M</code>.</p>

<pre>  $res-&#62;cookies-&#62;{foo} = {
      value =&#62; &#39;test&#39;,
      path  =&#62; &#34;/&#34;,
      domain =&#62; &#39;.example.com&#39;,
      expires =&#62; time + 24 * 60 * 60,
  };</pre>

<dt><a name="finalize"
>finalize</a></dt>

<dd>
<pre>  $res-&#62;finalize;</pre>

<p>Returns the status code, headers, and body of this response as a PSGI response array reference.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Tokuhiro Matsuno</p>

<p>Tatsuhiko Miyagawa</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../Plack/Request.html" class="podlinkpod"
>Plack::Request</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
