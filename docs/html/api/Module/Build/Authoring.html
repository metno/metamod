<html><head><title>Module::Build::Authoring</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:21 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#STRUCTURE'>STRUCTURE</a>
  <li class='indexItem indexItem1'><a href='#SUBCLASSING'>SUBCLASSING</a>
  <li class='indexItem indexItem1'><a href='#PREREQUISITES'>PREREQUISITES</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Types_of_prerequisites'>Types of prerequisites</a>
    <li class='indexItem indexItem2'><a href='#Format_of_prerequisites'>Format of prerequisites</a>
    <li class='indexItem indexItem2'><a href='#XS_Extensions'>XS Extensions</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#SAVING_CONFIGURATION_INFORMATION'>SAVING CONFIGURATION INFORMATION</a>
  <li class='indexItem indexItem1'><a href='#STARTING_MODULE_DEVELOPMENT'>STARTING MODULE DEVELOPMENT</a>
  <li class='indexItem indexItem1'><a href='#AUTOMATION'>AUTOMATION</a>
  <li class='indexItem indexItem1'><a href='#MIGRATION'>MIGRATION</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Module::Build::Authoring - Authoring Module::Build modules</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>When creating a <code>Build.PL</code> script for a module,
something like the following code will typically be used:</p>

<pre>  use Module::Build;
  my $build = Module::Build-&#62;new
    (
     module_name =&#62; &#39;Foo::Bar&#39;,
     license  =&#62; &#39;perl&#39;,
     requires =&#62; {
                  &#39;perl&#39;          =&#62; &#39;5.6.1&#39;,
                  &#39;Some::Module&#39;  =&#62; &#39;1.23&#39;,
                  &#39;Other::Module&#39; =&#62; &#39;&#62;= 1.2, != 1.5, &#60; 2.0&#39;,
                 },
    );
  $build-&#62;create_build_script;</pre>

<p>A simple module could get away with something as short as this for its <code>Build.PL</code> script:</p>

<pre>  use Module::Build;
  Module::Build-&#62;new(
    module_name =&#62; &#39;Foo::Bar&#39;,
    license     =&#62; &#39;perl&#39;,
  )-&#62;create_build_script;</pre>

<p>The model used by <code>Module::Build</code> is a lot like the <code>MakeMaker</code> metaphor, with the following correspondences:</p>

<pre>   In Module::Build                 In ExtUtils::MakeMaker
  ---------------------------      ------------------------
   Build.PL (initial script)        Makefile.PL (initial script)
   Build (a short perl script)      Makefile (a long Makefile)
   _build/ (saved state info)       various config text in the Makefile</pre>

<p>Any customization can be done simply by subclassing <code>Module::Build</code> and adding a method called (for example) <code>ACTION_test</code>, overriding the default &#39;test&#39; action. You could also add a method called <code>ACTION_whatever</code>, and then you could perform the action <code>Build whatever</code>.</p>

<p>For information on providing compatibility with <code>ExtUtils::MakeMaker</code>, see <a href="../../Module/Build/Compat.html" class="podlinkpod"
>Module::Build::Compat</a> and <a href="http://www.makemaker.org/wiki/index.cgi?ModuleBuildConversionGuide" class="podlinkurl"
>http://www.makemaker.org/wiki/index.cgi?ModuleBuildConversionGuide</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="STRUCTURE"
>STRUCTURE</a></h1>

<p>Module::Build creates a class hierarchy conducive to customization. Here is the parent-child class hierarchy in classy ASCII art:</p>

<pre>   /--------------------\
   |   Your::Parent     |  (If you subclass Module::Build)
   \--------------------/
            |
            |
   /--------------------\  (Doesn&#39;t define any functionality
   |   Module::Build    |   of its own - just figures out what
   \--------------------/   other modules to load.)
            |
            |
   /-----------------------------------\  (Some values of $^O may
   |   Module::Build::Platform::$^O    |   define specialized functionality.
   \-----------------------------------/   Otherwise it&#39;s ...::Default, a
            |                              pass-through class.)
            |
   /--------------------------\
   |   Module::Build::Base    |  (Most of the functionality of 
   \--------------------------/   Module::Build is defined here.)</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SUBCLASSING"
>SUBCLASSING</a></h1>

<p>Right now, there are two ways to subclass Module::Build. The first way is to create a regular module (in a <code>.pm</code> file) that inherits from Module::Build, and use that module&#39;s class instead of using Module::Build directly:</p>

<pre>  ------ in Build.PL: ----------
  #!/usr/bin/perl

  use lib q(/nonstandard/library/path);
  use My::Builder;  # Or whatever you want to call it

  my $build = My::Builder-&#62;new
    (
     module_name =&#62; &#39;Foo::Bar&#39;,  # All the regular args...
     license     =&#62; &#39;perl&#39;,
     dist_author =&#62; &#39;A N Other &#60;me@here.net.au&#62;&#39;,
     requires    =&#62; { Carp =&#62; 0 }
    );
  $build-&#62;create_build_script;</pre>

<p>This is relatively straightforward, and is the best way to do things if your My::Builder class contains lots of code. The <code>create_build_script()</code> method will ensure that the current value of <code>@INC</code> (including the <code>/nonstandard/library/path</code>) is propagated to the Build script, so that My::Builder can be found when running build actions. If you find that you need to <code>chdir</code> into a different directories in your subclass methods or actions, be sure to always return to the original directory (available via the <code>base_dir()</code> method) before returning control to the parent class. This is important to avoid data serialization problems.</p>

<p>For very small additions, Module::Build provides a <code>subclass()</code> method that lets you subclass Module::Build more conveniently, without creating a separate file for your module:</p>

<pre>  ------ in Build.PL: ----------
  #!/usr/bin/perl

  use Module::Build;
  my $class = Module::Build-&#62;subclass
    (
     class =&#62; &#39;My::Builder&#39;,
     code =&#62; q{
       sub ACTION_foo {
         print &#34;I&#39;m fooing to death!\n&#34;;
       }
     },
    );

  my $build = $class-&#62;new
    (
     module_name =&#62; &#39;Foo::Bar&#39;,  # All the regular args...
     license     =&#62; &#39;perl&#39;,
     dist_author =&#62; &#39;A N Other &#60;me@here.net.au&#62;&#39;,
     requires    =&#62; { Carp =&#62; 0 }
    );
  $build-&#62;create_build_script;</pre>

<p>Behind the scenes, this actually does create a <code>.pm</code> file, since the code you provide must persist after Build.PL is run if it is to be very useful.</p>

<p>See also the documentation for the <a href="../../Module/Build/API.html#subclass()" class="podlinkpod"
>&#34;subclass()&#34; in Module::Build::API</a> method.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PREREQUISITES"
>PREREQUISITES</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Types_of_prerequisites"
>Types of prerequisites</a></h2>

<p>To specify what versions of other modules are used by this distribution, several types of prerequisites can be defined with the following parameters:</p>

<dl>
<dt><a name="configure_requires"
>configure_requires</a></dt>

<dd>
<p>Items that must be installed <i>before</i> configuring this distribution (i.e. before running the <em>Build.PL</em> script). This might be a specific minimum version of <code>Module::Build</code> or any other module the <em>Build.PL</em> needs in order to do its stuff. Clients like <code>CPAN.pm</code> or <code>CPANPLUS</code> will be expected to pick <code>configure_requires</code> out of the <em>META.yml</em> file and install these items before running the <code>Build.PL</code>.</p>

<p>If no configure_requires is specified, the current version of Module::Build is automatically added to configure_requires.</p>

<dt><a name="build_requires"
>build_requires</a></dt>

<dd>
<p>Items that are necessary for building and testing this distribution, but aren&#39;t necessary after installation. This can help users who only want to install these items temporarily. It also helps reduce the size of the CPAN dependency graph if everything isn&#39;t smooshed into <code>requires</code>.</p>

<dt><a name="requires"
>requires</a></dt>

<dd>
<p>Items that are necessary for basic functioning.</p>

<dt><a name="recommends"
>recommends</a></dt>

<dd>
<p>Items that are recommended for enhanced functionality, but there are ways to use this distribution without having them installed. You might also think of this as &#34;can use&#34; or &#34;is aware of&#34; or &#34;changes behavior in the presence of&#34;.</p>

<dt><a name="test_requires"
>test_requires</a></dt>

<dd>
<p>Items that are necessary for testing.</p>

<dt><a name="conflicts"
>conflicts</a></dt>

<dd>
<p>Items that can cause problems with this distribution when installed. This is pretty rare.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Format_of_prerequisites"
>Format of prerequisites</a></h2>

<p>The prerequisites are given in a hash reference, where the keys are the module names and the values are version specifiers:</p>

<pre>  requires =&#62; {
               Foo::Module =&#62; &#39;2.4&#39;,
               Bar::Module =&#62; 0,
               Ken::Module =&#62; &#39;&#62;= 1.2, != 1.5, &#60; 2.0&#39;,
               perl =&#62; &#39;5.6.0&#39;
              },</pre>

<p>The above four version specifiers have different effects. The value <code>&#39;2.4&#39;</code> means that <b>at least</b> version 2.4 of <code>Foo::Module</code> must be installed. The value <code>0</code> means that <b>any</b> version of <code>Bar::Module</code> is acceptable, even if <code>Bar::Module</code> doesn&#39;t define a version. The more verbose value <code>&#39;&#62;= 1.2, != 1.5, &#60; 2.0&#39;</code> means that <code>Ken::Module</code>&#39;s version must be <b>at least</b> 1.2, <b>less than</b> 2.0, and <b>not equal to</b> 1.5. The list of criteria is separated by commas, and all criteria must be satisfied.</p>

<p>A special <code>perl</code> entry lets you specify the versions of the Perl interpreter that are supported by your module. The same version dependency-checking semantics are available, except that we also understand perl&#39;s new double-dotted version numbers.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="XS_Extensions"
>XS Extensions</a></h2>

<p>Modules which need to compile XS code should list <code>ExtUtils::CBuilder</code> as a <code>build_requires</code> element.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SAVING_CONFIGURATION_INFORMATION"
>SAVING CONFIGURATION INFORMATION</a></h1>

<p>Module::Build provides a very convenient way to save configuration information that your installed modules (or your regression tests) can access. If your Build process calls the <code>feature()</code> or <code>config_data()</code> methods, then a <code>Foo::Bar::ConfigData</code> module will automatically be created for you, where <code>Foo::Bar</code> is the <code>module_name</code> parameter as passed to <code>new()</code>. This module provides access to the data saved by these methods, and a way to update the values. There is also a utility script called <code>config_data</code> distributed with Module::Build that provides a command line interface to this same functionality. See also the generated <code>Foo::Bar::ConfigData</code> documentation, and the <code>config_data</code> script&#39;s documentation, for more information.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="STARTING_MODULE_DEVELOPMENT"
>STARTING MODULE DEVELOPMENT</a></h1>

<p>When starting development on a new module, it&#39;s rarely worth your time to create a tree of all the files by hand. Some automatic module-creators are available: the oldest is <code>h2xs</code>, which has shipped with perl itself for a long time. Its name reflects the fact that modules were originally conceived of as a way to wrap up a C library (thus the <code>h</code> part) into perl extensions (thus the <code>xs</code> part).</p>

<p>These days, <code>h2xs</code> has largely been superseded by modules like <code>ExtUtils::ModuleMaker</code>, and <code>Module::Starter</code>. They have varying degrees of support for <code>Module::Build</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTOMATION"
>AUTOMATION</a></h1>

<p>One advantage of Module::Build is that since it&#39;s implemented as Perl methods, you can invoke these methods directly if you want to install a module non-interactively. For instance, the following Perl script will invoke the entire build/install procedure:</p>

<pre>  my $build = Module::Build-&#62;new(module_name =&#62; &#39;MyModule&#39;);
  $build-&#62;dispatch(&#39;build&#39;);
  $build-&#62;dispatch(&#39;test&#39;);
  $build-&#62;dispatch(&#39;install&#39;);</pre>

<p>If any of these steps encounters an error, it will throw a fatal exception.</p>

<p>You can also pass arguments as part of the build process:</p>

<pre>  my $build = Module::Build-&#62;new(module_name =&#62; &#39;MyModule&#39;);
  $build-&#62;dispatch(&#39;build&#39;);
  $build-&#62;dispatch(&#39;test&#39;, verbose =&#62; 1);
  $build-&#62;dispatch(&#39;install&#39;, sitelib =&#62; &#39;/my/secret/place/&#39;);</pre>

<p>Building and installing modules in this way skips creating the <code>Build</code> script.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="MIGRATION"
>MIGRATION</a></h1>

<p>Note that if you want to provide both a <em>Makefile.PL</em> and a <em>Build.PL</em> for your distribution, you probably want to add the following to <code>WriteMakefile</code> in your <em>Makefile.PL</em> so that <code>MakeMaker</code> doesn&#39;t try to run your <em>Build.PL</em> as a normal <em>.PL</em> file:</p>

<pre>  PL_FILES =&#62; {},</pre>

<p>You may also be interested in looking at the <code>Module::Build::Compat</code> module, which can automatically create various kinds of <em>Makefile.PL</em> compatibility layers.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Ken Williams &#60;kwilliams@cpan.org&#62;</p>

<p>Development questions, bug reports, and patches should be sent to the Module-Build mailing list at &#60;module-build@perl.org&#62;.</p>

<p>Bug reports are also welcome at &#60;http://rt.cpan.org/NoAuth/Bugs.html?Dist=Module-Build&#62;.</p>

<p>The latest development version is available from the Git repository at &#60;https://github.com/Perl-Toolchain-Gang/Module-Build&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>perl(1), <a href="../../Module/Build.html" class="podlinkpod"
>Module::Build</a>(3), <a href="../../Module/Build/API.html" class="podlinkpod"
>Module::Build::API</a>(3), <a href="../../Module/Build/Cookbook.html" class="podlinkpod"
>Module::Build::Cookbook</a>(3), <a href="../../ExtUtils/MakeMaker.html" class="podlinkpod"
>ExtUtils::MakeMaker</a>(3), <a href="../../YAML.html" class="podlinkpod"
>YAML</a>(3)</p>

<p><em>META.yml</em> Specification: <a href="../../CPAN/META/Spec.html" class="podlinkpod"
>CPAN::META::Spec</a></p>

<p><a href="http://www.dsmit.com/cons/" class="podlinkurl"
>http://www.dsmit.com/cons/</a></p>

<p><a href="http://search.cpan.org/dist/PerlBuildSystem/" class="podlinkurl"
>http://search.cpan.org/dist/PerlBuildSystem/</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
