<html><head><title>Module::Build::Bundling</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:21 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#BUNDLING_OTHER_CONFIGURATION_DEPENDENCIES'>BUNDLING OTHER CONFIGURATION DEPENDENCIES</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#WARNING_--_How_to_Manage_Dependency_Chains'>WARNING -- How to Manage Dependency Chains</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Module::Build::Bundling - How to bundle Module::Build with a distribution</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  # Build.PL
  use inc::latest &#39;Module::Build&#39;;

  Module::Build-&#62;new(
    module_name =&#62; &#39;Foo::Bar&#39;,
    license =&#62; &#39;perl&#39;,
  )-&#62;create_build_script;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p><b>WARNING -- THIS IS AN EXPERIMENTAL FEATURE</b></p>

<p>In order to install a distribution using Module::Build, users must have Module::Build available on their systems. There are two ways to do this. The first way is to include Module::Build in the <code>configure_requires</code> metadata field. This field is supported by recent versions <a href="../../CPAN.html" class="podlinkpod"
>CPAN</a> and <a href="../../CPANPLUS.html" class="podlinkpod"
>CPANPLUS</a> and is a standard feature in the Perl core as of Perl 5.10.1. Module::Build now adds itself to <code>configure_requires</code> by default.</p>

<p>The second way supports older Perls that have not upgraded CPAN or CPANPLUS and involves bundling an entire copy of Module::Build into the distribution&#39;s <code>inc/</code> directory. This is the same approach used by <a href="../../Module/Install.html" class="podlinkpod"
>Module::Install</a>, a modern wrapper around ExtUtils::MakeMaker for Makefile.PL based distributions.</p>

<p>The &#34;trick&#34; to making this work for Module::Build is making sure the highest version Module::Build is used, whether this is in <code>inc/</code> or already installed on the user&#39;s system. This ensures that all necessary features are available as well as any new bug fixes. This is done using the new <a href="../../inc/latest.html" class="podlinkpod"
>inc::latest</a> module.</p>

<p>A &#34;normal&#34; Build.PL looks like this (with only the minimum required fields):</p>

<pre>  use Module::Build;

  Module::Build-&#62;new(
    module_name =&#62; &#39;Foo::Bar&#39;,
    license     =&#62; &#39;perl&#39;,
  )-&#62;create_build_script;</pre>

<p>A &#34;bundling&#34; Build.PL replaces the initial &#34;use&#34; line with a nearly transparent replacement:</p>

<pre>  use inc::latest &#39;Module::Build&#39;;

  Module::Build-&#62;new(
    module_name =&#62; &#39;Foo::Bar&#39;,
    license =&#62; &#39;perl&#39;,
  )-&#62;create_build_script;</pre>

<p>For <i>authors</i>, when &#34;Build dist&#34; is run, Module::Build will be automatically bundled into <code>inc</code> according to the rules for <a href="../../inc/latest.html" class="podlinkpod"
>inc::latest</a>.</p>

<p>For <i>users</i>, inc::latest will load the latest Module::Build, whether installed or bundled in <code>inc/</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUNDLING_OTHER_CONFIGURATION_DEPENDENCIES"
>BUNDLING OTHER CONFIGURATION DEPENDENCIES</a></h1>

<p>The same approach works for other configuration dependencies -- modules that <i>must</i> be available for Build.PL to run. All other dependencies can be specified as usual in the Build.PL and CPAN or CPANPLUS will install them after Build.PL finishes.</p>

<p>For example, to bundle the <a href="../../Devel/AssertOS/Unix.html" class="podlinkpod"
>Devel::AssertOS::Unix</a> module (which ensures a &#34;Unix-like&#34; operating system), one could do this:</p>

<pre>  use inc::latest &#39;Devel::AssertOS::Unix&#39;;
  use inc::latest &#39;Module::Build&#39;;

  Module::Build-&#62;new(
    module_name =&#62; &#39;Foo::Bar&#39;,
    license =&#62; &#39;perl&#39;,
  )-&#62;create_build_script;</pre>

<p>The <code>inc::latest</code> module creates bundled directories based on the packlist file of an installed distribution. Even though <code>inc::latest</code> takes module name arguments, it is better to think of it as bundling and making available entire <i>distributions</i>. When a module is loaded through <code>inc::latest</code>, it looks in all bundled distributions in <code>inc/</code> for a newer module than can be found in the existing <code>@INC</code> array.</p>

<p>Thus, the module-name provided should usually be the &#34;top-level&#34; module name of a distribution, though this is not strictly required. For example, <a href="../../Module/Build.html" class="podlinkpod"
>Module::Build</a> has a number of heuristics to map module names to packlists, allowing users to do things like this:</p>

<pre>  use inc::latest &#39;Devel::AssertOS::Unix&#39;;</pre>

<p>even though Devel::AssertOS::Unix is contained within the Devel-CheckOS distribution.</p>

<p>At the current time, packlists are required. Thus, bundling dual-core modules, <i>including Module::Build</i>, may require a &#39;forced install&#39; over versions in the latest version of perl in order to create the necessary packlist for bundling. This limitation will hopefully be addressed in a future version of Module::Build.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="WARNING_--_How_to_Manage_Dependency_Chains"
>WARNING -- How to Manage Dependency Chains</a></h2>

<p>Before bundling a distribution you must ensure that all prerequisites are also bundled and load in the correct order. For Module::Build itself, this should not be necessary, but it is necessary for any other distribution. (A future release of Module::Build will hopefully address this deficiency.)</p>

<p>For example, if you need <code>Wibble</code>, but <code>Wibble</code> depends on <code>Wobble</code>, your Build.PL might look like this:</p>

<pre>  use inc::latest &#39;Wobble&#39;;
  use inc::latest &#39;Wibble&#39;;
  use inc::latest &#39;Module::Build&#39;;

  Module::Build-&#62;new(
    module_name =&#62; &#39;Foo::Bar&#39;,
    license =&#62; &#39;perl&#39;,
  )-&#62;create_build_script;</pre>

<p>Authors are strongly suggested to limit the bundling of additional dependencies if at all possible and to carefully test their distribution tarballs on older versions of Perl before uploading to CPAN.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>David Golden &#60;dagolden@cpan.org&#62;</p>

<p>Development questions, bug reports, and patches should be sent to the Module-Build mailing list at &#60;module-build@perl.org&#62;.</p>

<p>Bug reports are also welcome at &#60;http://rt.cpan.org/NoAuth/Bugs.html?Dist=Module-Build&#62;.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>perl(1), <a href="../../inc/latest.html" class="podlinkpod"
>inc::latest</a>, <a href="../../Module/Build.html" class="podlinkpod"
>Module::Build</a>(3), <a href="../../Module/Build/API.html" class="podlinkpod"
>Module::Build::API</a>(3), <a href="../../Module/Build/Cookbook.html" class="podlinkpod"
>Module::Build::Cookbook</a>(3),</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
