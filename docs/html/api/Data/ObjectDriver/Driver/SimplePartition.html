<html><head><title>Data::ObjectDriver::Driver::SimplePartition</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:04 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#SUGGESTED_PRACTICES'>SUGGESTED PRACTICES</a>
  <li class='indexItem indexItem1'><a href='#USAGE'>USAGE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Data%3A%3AObjectDriver%3A%3ADriver%3A%3ASimplePartition-%3Enew(%25params)'>Data::ObjectDriver::Driver::SimplePartition-&#62;new(%params)</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#DIAGNOSTICS'>DIAGNOSTICS</a>
  <li class='indexItem indexItem1'><a href='#BUGS_AND_LIMITATIONS'>BUGS AND LIMITATIONS</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#LICENSE'>LICENSE</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR_%26_COPYRIGHT'>AUTHOR &#38; COPYRIGHT</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Data::ObjectDriver::Driver::SimplePartition - basic partitioned object driver</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    package ParentObject;
    use base qw( Data::ObjectDriver::BaseObject );

    __PACKAGE__-&#62;install_properties({
        columns     =&#62; [ &#39;parent_id&#39;, &#39;partition_id&#39;, ... ],
        ...
        driver      =&#62; Data::ObjectDriver::Driver::DBI-&#62;new( @$GLOBAL_DB_INFO ),
        primary_key =&#62; &#39;parent_id&#39;,
    });

    __PACKAGE__-&#62;has_partitions(
        number     =&#62; scalar @PARTITIONS,
        get_driver =&#62; \&#38;get_driver_by_partition,
    );

    package SomeObject;
    use base qw( Data::ObjectDriver::BaseObject );

    __PACKAGE__-&#62;install_properties({
        ...
        driver               =&#62; Data::ObjectDriver::Driver::SimplePartition-&#62;new(
                                    using =&#62; &#39;ParentObject&#39;
                                ),
        primary_key          =&#62; [&#39;parent_id&#39;, &#39;object_id&#39;],
    });</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p><i>Data::ObjectDriver::Driver::SimplePartition</i> is a basic driver for objects partitioned into separate databases. See <a href="../../../Data/ObjectDriver/Driver/Partition.html" class="podlinkpod"
>Data::ObjectDriver::Driver::Partition</a> for more about partitioning databases.</p>

<p><i>SimplePartition</i> helps you partition objects into databases based on their association with one record of a <i>parent</i> class. If your classes don&#39;t meet the requirements imposed by <i>SimplePartition</i>, you can still write your own partitioning driver. See <a href="../../../Data/ObjectDriver/Driver/Partition.html" class="podlinkpod"
>Data::ObjectDriver::Driver::Partition</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SUGGESTED_PRACTICES"
>SUGGESTED PRACTICES</a></h1>

<p>Often this is used for user partitioning, where the parent class is your user account class; all records of other classes that are &#34;owned&#34; by that user are partitioned into the same database. This allows you to scale horizontally with the number of users, at the cost of complicating querying multiple users&#39; data together.</p>

<p><i>SimplePartition</i> will load the related instance of the parent class every time it needs to find the partition for a related object. Consider using a minimal mapping class for the parent, keeping as much data as possible in other related classes. For example, if <code>User</code> were your parent class, you might keep <i>only</i> the user ID and other data used to find users (such as login name and email address) in <code>User</code>, keeping further profile data in another <code>UserProfile</code> class.</p>

<p>As all the partitioned classes related to a given parent class will share the same <code>partition_get_driver</code> logic to turn a partition ID into a driver, you might put the <code>partition_get_driver</code> function in the parent class, or use a custom subclass of <i>SimplePartition</i> that contains and automatically specifies the <code>partition_get_driver</code> function.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="USAGE"
>USAGE</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Data::ObjectDriver::Driver::SimplePartition-&#62;new(%params)"
>Data::ObjectDriver::Driver::SimplePartition-&#62;new(%params)</a></h2>

<p>Creates a new basic partitioning driver for a particular class. The required members of <code>%params</code> are:</p>

<ul>
<li><code>using</code>
<p>The name of the parent class on which the driven class is partitioned.</p>

<p>Using a class as a parent partitioned class requires these properties to be defined:</p>

<ul>
<li><code>columns</code>
<p>The parent class must have a <code>partition_id</code> column containing a partition identifier. This identifier is passed to the <code>partition_get_driver</code> function to identify a driver to return.</p>
</li>

<li><code>primary_key</code>
<p>The parent class&#39;s primary key must be a simple single-column key, and that column must be the same as the referencing column in the partitioned classes.</p>
</li>

<li><code>partition_get_driver</code>
<p>The <code>partition_get_driver</code> property must be a function that returns an object driver, given a partition ID and any extra parameters given to the <code>SimplePartition</code> constructor.</p>

<p>This property can also be defined as <code>get_driver</code> in a call to <code>Class-&#62;has_partitions()</code>. See <a href="../../../Data/ObjectDriver/BaseObject.html" class="podlinkpod"
>Data::ObjectDriver::BaseObject</a>.</p>
</li>
</ul>
</li>
</ul>

<p>You can also include any further optional parameters you like. They will be passed to the partitioned class&#39;s <code>partition_get_driver</code> function as given.</p>

<p>A <i>SimplePartition</i> driver will require these properties to be defined for partitioned classes:</p>

<ul>
<li><code>primary_key</code>
<p>Your primary key should be a complex primary key (arrayref) with the simple key of the parent object for the first field.</p>
</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DIAGNOSTICS"
>DIAGNOSTICS</a></h1>

<ul>
<li><code>using is required.</code>
<p>The <code>using</code> parameter to the <i>SimplePartition</i> constructor is required to create the partitioned class&#39;s <code>get_driver</code> function. Perhaps you omitted it, or your subclass of <i>SimplePartition</i> did not properly specify it to its parent&#39;s constructor.</p>
</li>

<li><code>Bogus classname.</code>
<p>The parent class name you specified in your <code>using</code> parameter does not appear to be a valid class name. If you are automatically generating parent class names, check that your method of converting strings to class names is correct.</p>
</li>

<li><code>Failed to load parent class: <i>error</i></code>
<p>The parent class you specified in your <code>using</code> parameter could not be loaded, for the given reason. Perhaps you didn&#39;t include its location in your library path.</p>
</li>

<li><code>Partitioning driver not defined for <i>partitioned class</i></code>
<p>The partitioned class named in the error is configured to use the <i>SimplePartition</i> driver but does not have a <code>partition_get_driver</code> set. Check that you intended to use <i>SimplePartition</i> with that class or, if you&#39;re automatically specifying the <code>partition_get_driver</code> function, that your technique is working correctly.</p>
</li>

<li><code>Cannot extract <i>column</i> from terms <i>search terms or primary key</i></code>
<p>The <i>SimplePartition</i> driver could not determine from the given search terms or object key what the ID of the related parent record was. Check that your columns in the partitioned and parent classes share the same name, and that your application includes the parent ID in all <code>search()</code> calls for the partitioned class and instances of partitioned objects before attempting to save them.</p>

<p>Optionaly you can enable a basic support of search accross multiple partition by passing the &#39;multi_partition&#39; arg (true value) to the search query.</p>
</li>

<li><code>Member of <i>class</i> with ID <i>parent ID</i> not found</code>
<p>The parent record associated with the partitioned object could not be loaded. Perhaps your application deleted the parent record without removing its associated partitioned objects first.</p>
</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS_AND_LIMITATIONS"
>BUGS AND LIMITATIONS</a></h1>

<p>There are no known bugs in this module.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../../Data/ObjectDriver/Driver/Partition.html" class="podlinkpod"
>Data::ObjectDriver::Driver::Partition</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENSE"
>LICENSE</a></h1>

<p><i>Data::ObjectDriver</i> is free software; you may redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR_&#38;_COPYRIGHT"
>AUTHOR &#38; COPYRIGHT</a></h1>

<p>Except where otherwise noted, <i>Data::ObjectDriver</i> is Copyright 2005-2006 Six Apart, cpan@sixapart.com. All rights reserved.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
