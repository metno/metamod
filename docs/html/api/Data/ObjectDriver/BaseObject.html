<html><head><title>Data::ObjectDriver::BaseObject</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:04 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CLASS_DEFINITION'>CLASS DEFINITION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Class-%3Einstall_properties(%5C%25params)'>Class-&#62;install_properties(\%params)</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Einstall_column(%24col%2C_%24def)'>Class-&#62;install_column($col, $def)</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Ehas_a(%40definitions)'>Class-&#62;has_a(@definitions)</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Ehas_partitions(%25param)'>Class-&#62;has_partitions(%param)</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#BASIC_USAGE'>BASIC USAGE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Class-%3Elookup(%24id)'>Class-&#62;lookup($id)</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Esearch(%5C%25terms%2C_%5B%5C%25args%5D)'>Class-&#62;search(\%terms, [\%args])</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Eresult(%5C%25terms%2C_%5B%5C%25args%5D)'>Class-&#62;result(\%terms, [\%args])</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Eexists()'>$obj-&#62;exists()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Esave()'>$obj-&#62;save()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Eupdate()'>$obj-&#62;update()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Einsert()'>$obj-&#62;insert()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Eremove()'>$obj-&#62;remove()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Ereplace()'>$obj-&#62;replace()</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#USAGE'>USAGE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Class-%3Enew(%25columns)'>Class-&#62;new(%columns)</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Einit(%25columns)'>$obj-&#62;init(%columns)</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Eproperties()'>Class-&#62;properties()</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Edriver()'>Class-&#62;driver()</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Eget_driver(%24get_driver_fn)'>Class-&#62;get_driver($get_driver_fn)</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Eis_pkless()'>Class-&#62;is_pkless()</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Eis_primary_key(%24column)'>Class-&#62;is_primary_key($column)</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Eprimary_key()'>$obj-&#62;primary_key()</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Eprimary_key_tuple()'>Class-&#62;primary_key_tuple()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Eis_same(%24other_obj)'>$obj-&#62;is_same($other_obj)</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Eobject_is_stored()'>$obj-&#62;object_is_stored()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Epk_str()'>$obj-&#62;pk_str()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Ehas_primary_key()'>$obj-&#62;has_primary_key()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Euncache_object()'>$obj-&#62;uncache_object()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Eprimary_key_to_terms(%5B%24id%5D)'>$obj-&#62;primary_key_to_terms([$id])</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Edatasource()'>Class-&#62;datasource()</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Ecolumns_of_type(%24type)'>Class-&#62;columns_of_type($type)</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Eset_values(%5C%25values)'>$obj-&#62;set_values(\%values)</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Eset_values_internal(%5C%25values)'>$obj-&#62;set_values_internal(\%values)</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Eclone()'>$obj-&#62;clone()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Eclone_all()'>$obj-&#62;clone_all()</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Ehas_column(%24column)'>Class-&#62;has_column($column)</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Ecolumn_names()'>Class-&#62;column_names()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Ecolumn_values()'>$obj-&#62;column_values()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Ecolumn(%24column%2C_%5B%24value%5D)'>$obj-&#62;column($column, [$value])</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Eis_changed(%5B%24column%5D)'>$obj-&#62;is_changed([$column])</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Echanged_cols_and_pk()'>$obj-&#62;changed_cols_and_pk()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Echanged_cols()'>$obj-&#62;changed_cols()</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Elookup_multi(%5C%40ids)'>Class-&#62;lookup_multi(\@ids)</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Ebulk_insert(%5C%40columns%2C_%5C%40data)'>Class-&#62;bulk_insert(\@columns, \@data)</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Efetch_data()'>$obj-&#62;fetch_data()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Erefresh()'>$obj-&#62;refresh()</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Ecolumn_func(%24column)'>$obj-&#62;column_func($column)</a>
    <li class='indexItem indexItem2'><a href='#%24obj-%3Edeflate()'>$obj-&#62;deflate()</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Einflate(%24deflated)'>Class-&#62;inflate($deflated)</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#TRANSACTION_SUPPORT_AND_METHODS'>TRANSACTION SUPPORT AND METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Introduction'>Introduction</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Ebegin_work'>Class-&#62;begin_work</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Erollback'>Class-&#62;rollback</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Ecommit'>Class-&#62;commit</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Etxn_debug'>Class-&#62;txn_debug</a>
    <li class='indexItem indexItem2'><a href='#Class-%3Etxn_active'>Class-&#62;txn_active</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#DIAGNOSTICS'>DIAGNOSTICS</a>
  <li class='indexItem indexItem1'><a href='#BUGS_AND_LIMITATIONS'>BUGS AND LIMITATIONS</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#LICENSE'>LICENSE</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR_%26_COPYRIGHT'>AUTHOR &#38; COPYRIGHT</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Data::ObjectDriver::BaseObject - base class for modeled objects</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    package Ingredient;
    use base qw( Data::ObjectDriver::BaseObject );

    __PACKAGE__-&#62;install_properties({
        columns     =&#62; [ &#39;ingredient_id&#39;, &#39;recipe_id&#39;, &#39;name&#39;, &#39;quantity&#39; ],
        datasource  =&#62; &#39;ingredient&#39;,
        primary_key =&#62; [ &#39;recipe_id&#39;, &#39;ingredient_id&#39; ],
        driver      =&#62; FoodDriver-&#62;driver,
    });

    __PACKAGE__-&#62;has_a(
        { class =&#62; &#39;Recipe&#39;, column =&#62; &#39;recipe_id&#39;, }
    );

    package main;

    my ($ingredient) = Ingredient-&#62;search({ recipe_id =&#62; 4, name =&#62; &#39;rutabaga&#39; });
    $ingredient-&#62;quantity(7);
    $ingredient-&#62;save();</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p><i>Data::ObjectDriver::BaseObject</i> provides services to data objects modeled with the <i>Data::ObjectDriver</i> object relational mapper.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CLASS_DEFINITION"
>CLASS DEFINITION</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;install_properties(\%params)"
><code>Class-&#62;install_properties(\%params)</code></a></h2>

<p>Defines all the properties of the specified object class. Generally you should call <code>install_properties()</code> in the body of your class definition, so the properties can be set when the class is <code>use</code>d or <code>require</code>d.</p>

<p>Required members of <code>%params</code> are:</p>

<ul>
<li><code>columns</code>
<p>All the columns in the object class. This property is an arrayref.</p>
</li>

<li><code>datasource</code>
<p>The identifier of the table in which the object class&#39;s data are stored. Usually the datasource is simply the table name, but the datasource can be decorated into the table name by the <code>Data::ObjectDriver::DBD</code> module if the database requires special formatting of table names.</p>
</li>

<li><code>driver</code> or <code>get_driver</code>
<p>The driver used to perform database operations (lookup, update, etc) for the object class.</p>

<p><code>driver</code> is the instance of <code>Data::ObjectDriver</code> to use. If your driver requires configuration options not available when the properties are initially set, specify a coderef as <code>get_driver</code> instead. It will be called the first time the driver is needed, storing the driver in the class&#39;s <code>driver</code> property for subsequent calls.</p>
</li>
</ul>

<p>The optional members of <code>%params</code> are:</p>

<ul>
<li><code>primary_key</code>
<p>The column or columns used to uniquely identify an instance of the object class. If one column (such as a simple numeric ID) identifies the class, <code>primary_key</code> should be a scalar. Otherwise, <code>primary_key</code> is an arrayref.</p>
</li>

<li><code>column_defs</code>
<p>Specifies types for specially typed columns, if any, as a hashref. For example, if a column holds a timestamp, name it in <code>column_defs</code> as a <code>date</code> for proper handling with some <code>Data::ObjectDriver::Driver::DBD</code> database drivers. Columns for which types aren&#39;t specified are handled as <code>char</code> columns.</p>

<p>Known <code>column_defs</code> types are:</p>

<ul>
<li><code>blob</code>
<p>A blob of binary data. <code>Data::ObjectDriver::Driver::DBD::Pg</code> maps this to <code>DBI::Pg::PG_BYTEA</code>, <code>DBD::SQLite</code> to <code>DBI::SQL_BLOB</code> and <code>DBD::Oracle</code> to <code>ORA_BLOB</code>.</p>
</li>

<li><code>bin_char</code>
<p>A non-blob string of binary data. <code>Data::ObjectDriver::Driver::DBD::SQLite</code> maps this to <code>DBI::SQL_BINARY</code>.</p>
</li>
</ul>

<p>Other types may be defined by custom database drivers as needed, so consult their documentation.</p>
</li>

<li><code>db</code>
<p>The name of the database. When used with <code>Data::ObjectDriver::Driver::DBI</code> type object drivers, this name is passed to the <code>init_db</code> method when the actual database handle is being created.</p>
</li>
</ul>

<p>Custom object drivers may define other properties for your object classes. Consult the documentation of those object drivers for more information.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;install_column($col,_$def)"
><code>Class-&#62;install_column($col, $def)</code></a></h2>

<p>Modify the Class definition to declare a new column <code>$col</code> of definition &#60;$def&#62; (see <a href="../../column_defs.html" class="podlinkpod"
>column_defs</a>).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;has_a(@definitions)"
><code>Class-&#62;has_a(@definitions)</code></a></h2>

<p><b>NOTE:</b> <code>has_a</code> is an experimental system, likely to both be buggy and change in future versions.</p>

<p>Defines a foreign key reference between two classes, creating accessor methods to retrieve objects both ways across the reference. For each defined reference, two methods are created: one for objects of class <code>Class</code> to load the objects they reference, and one for objects of the referenced class to load the set of <code>Class</code> objects that reference <i>them</i>.</p>

<p>For example, this definition:</p>

<pre>    package Ingredient;
    __PACKAGE__-&#62;has_a(
        { class =&#62; &#39;Recipe&#39;, column =&#62; &#39;recipe_id&#39; },
    );</pre>

<p>would create <code>Ingredient-&#62;recipe_obj</code> and <code>Recipe-&#62;ingredient_objs</code> instance methods.</p>

<p>Each member of <code>@definitions</code> is a hashref containing the parameters for creating one accessor method. The required members of these hashes are:</p>

<ul>
<li><code>class</code>
<p>The class to associate.</p>
</li>

<li><code>column</code>
<p>The column or columns in this class that identify the primary key of the associated object. As with primary keys, use a single scalar string for a single column or an arrayref for a composite key.</p>
</li>
</ul>

<p>The optional members of <code>has_a()</code> definitions are:</p>

<ul>
<li><code>method</code>
<p>The name of the accessor method to create.</p>

<p>By default, the method name is the concatenated set of column names with each <code>_id</code> suffix removed, and the suffix <code>_obj</code> appended at the end of the method name. For example, if <code>column</code> were <code>[&#39;recipe_id&#39;, &#39;ingredient_id&#39;]</code>, the resulting method would be called <code>recipe_ingredient_obj</code> by default.</p>
</li>

<li><code>cached</code>
<p>Whether to keep a reference to the foreign object once it&#39;s loaded. Subsequent calls to the accessor method would return that reference immediately.</p>
</li>

<li><code>parent_method</code>
<p>The name of the reciprocal method created in the referenced class named in <code>class</code>.</p>

<p>By default, that method is named with the lowercased name of the current class with the suffix <code>_objs</code>. For example, if in your <code>Ingredient</code> class you defined a relationship with <code>Recipe</code> on the column <code>recipe_id</code>, this would create a <code>$recipe-&#62;ingredient_objs</code> method.</p>

<p>Note that if you reference one class with multiple sets of fields, you can omit only one parent_method; otherwise the methods would be named the same thing. For instance, if you had a <code>Friend</code> class with two references to <code>User</code> objects in its <code>user_id</code> and <code>friend_id</code> columns, one of them would need a <code>parent_method</code>.</p>
</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;has_partitions(%param)"
><code>Class-&#62;has_partitions(%param)</code></a></h2>

<p>Defines that the given class is partitioned, configuring it for use with the <code>Data::ObjectDriver::Driver::SimplePartition</code> object driver. Required members of <code>%param</code> are:</p>

<ul>
<li><code>number</code>
<p>The number of partitions in which objects of this class may be stored.</p>
</li>

<li><code>get_driver</code>
<p>A function that returns an object driver, given a partition ID and any extra parameters specified when the class&#39;s <code>Data::ObjectDriver::Driver::SimplePartition</code> was instantiated.</p>
</li>
</ul>

<p>Note that only the parent object for use with the <code>SimplePartition</code> driver should use <code>has_partitions()</code>. See <code>Data::ObjectDriver::Driver::SimplePartition</code> for more about partitioning.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BASIC_USAGE"
>BASIC USAGE</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;lookup($id)"
><code>Class-&#62;lookup($id)</code></a></h2>

<p>Returns the instance of <code>Class</code> with the given value for its primary key. If <code>Class</code> has a complex primary key (more than one column), <code>$id</code> should be an arrayref specifying the column values in the same order as specified in the <code>primary_key</code> property.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;search(\%terms,_[\%args])"
><code>Class-&#62;search(\%terms, [\%args])</code></a></h2>

<p>Returns all instances of <code>Class</code> that match the values specified in <code>\%terms</code>, keyed on column names. In list context, <code>search</code> returns the objects containing those values. In scalar context, <code>search</code> returns an iterator function containing the same set of objects.</p>

<p>Your search can be customized with parameters specified in <code>\%args</code>. Commonly recognized parameters (those implemented by the standard <code>Data::ObjectDriver</code> object drivers) are:</p>

<ul>
<li><code>sort</code>
<p>A column by which to order the object results.</p>
</li>

<li><code>direction</code>
<p>If set to <code>descend</code>, the results (ordered by the <code>sort</code> column) are returned in descending order. Otherwise, results will be in ascending order.</p>
</li>

<li><code>limit</code>
<p>The number of results to return, at most. You can use this with <code>offset</code> to paginate your <code>search()</code> results.</p>
</li>

<li><code>offset</code>
<p>The number of results to skip before the first returned result. Use this with <code>limit</code> to paginate your <code>search()</code> results.</p>
</li>

<li><code>fetchonly</code>
<p>A list (arrayref) of columns that should be requested. If specified, only the specified columns of the resulting objects are guaranteed to be set to the correct values.</p>

<p>Note that any caching object drivers you use may opt to ignore <code>fetchonly</code> instructions, or decline to cache objects queried with <code>fetchonly</code>.</p>
</li>

<li><code>for_update</code>
<p>If true, instructs the object driver to indicate the query is a search, but the application may want to update the data after. That is, the generated SQL <code>SELECT</code> query will include a <code>FOR UPDATE</code> clause.</p>
</li>
</ul>

<p>All options are passed to the object driver, so your driver may support additional options.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;result(\%terms,_[\%args])"
><code>Class-&#62;result(\%terms, [\%args])</code></a></h2>

<p>Takes the same <i>%terms</i> and <i>%args</i> arguments that <i>search</i> takes, but instead of executing the query immediately, returns a <i>Data::ObjectDriver::ResultSet</i> object representing the set of results.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;exists()"
><code>$obj-&#62;exists()</code></a></h2>

<p>Returns true if <code>$obj</code> already exists in the database.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;save()"
><code>$obj-&#62;save()</code></a></h2>

<p>Saves <code>$obj</code> to the database, whether it is already there or not. That is, <code>save()</code> is functionally:</p>

<pre>    $obj-&#62;exists() ? $obj-&#62;update() : $obj-&#62;insert()</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;update()"
><code>$obj-&#62;update()</code></a></h2>

<p>Saves changes to <code>$obj</code>, an object that already exists in its database.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;insert()"
><code>$obj-&#62;insert()</code></a></h2>

<p>Adds <code>$obj</code> to the database in which it should exist, according to its object driver and configuration.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;remove()"
><code>$obj-&#62;remove()</code></a></h2>

<p>Deletes <code>$obj</code> from its database.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;replace()"
><code>$obj-&#62;replace()</code></a></h2>

<p>Replaces <code>$obj</code> in the database. Does the right thing if the driver knows how to REPLACE object, ala MySQL.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="USAGE"
>USAGE</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;new(%columns)"
><code>Class-&#62;new(%columns)</code></a></h2>

<p>Returns a new object of the given class, initializing its columns with the values in <code>%columns</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;init(%columns)"
><code>$obj-&#62;init(%columns)</code></a></h2>

<p>Initializes <code>$obj</code>i by initializing its columns with the values in <code>%columns</code>.</p>

<p>Override this method if you must do initial configuration to new instances of <code>$obj</code>&#39;s class that are not more appropriate as a <code>post_load</code> callback.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;properties()"
><code>Class-&#62;properties()</code></a></h2>

<p>Returns the named object class&#39;s properties as a hashref. Note that some of the standard object class properties, such as <code>primary_key</code>, have more convenient accessors than reading the properties directly.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;driver()"
><code>Class-&#62;driver()</code></a></h2>

<p>Returns the object driver for this class, invoking the class&#39;s <i>get_driver</i> function (and caching the result for future calls) if necessary.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;get_driver($get_driver_fn)"
><code>Class-&#62;get_driver($get_driver_fn)</code></a></h2>

<p>Sets the function used to find the object driver for <i>Class</i> objects (that is, the <code>get_driver</code> property).</p>

<p>Note that once <code>driver()</code> has been called, the <code>get_driver</code> function is not used. Usually you would specify your function as the <code>get_driver</code> parameter to <code>install_properties()</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;is_pkless()"
><code>Class-&#62;is_pkless()</code></a></h2>

<p>Returns whether the given object class has a primary key defined.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;is_primary_key($column)"
><code>Class-&#62;is_primary_key($column)</code></a></h2>

<p>Returns whether the given column is or is part of the primary key for <code>Class</code> objects.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;primary_key()"
><code>$obj-&#62;primary_key()</code></a></h2>

<p>Returns the <i>values</i> of the primary key fields of <code>$obj</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;primary_key_tuple()"
><code>Class-&#62;primary_key_tuple()</code></a></h2>

<p>Returns the <i>names</i> of the primary key fields of <code>Class</code> objects.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;is_same($other_obj)"
><code>$obj-&#62;is_same($other_obj)</code></a></h2>

<p>Do a primary key check on <code>$obj</code> and $&#60;other_obj&#62; and returns true only if they are identical.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;object_is_stored()"
><code>$obj-&#62;object_is_stored()</code></a></h2>

<p>Returns true if the object hasn&#39;t been stored in the database yet. This is particularily useful in triggers where you can then determine if the object is being INSERTED or just UPDATED.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;pk_str()"
><code>$obj-&#62;pk_str()</code></a></h2>

<p>returns the primay key has a printable string.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;has_primary_key()"
><code>$obj-&#62;has_primary_key()</code></a></h2>

<p>Returns whether the given object has values for all of its primary key fields.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;uncache_object()"
><code>$obj-&#62;uncache_object()</code></a></h2>

<p>If you use a Cache driver, returned object will be automatically cached as a result of common retrieve operations. In some rare cases you may want the cache to be cleared explicitely, and this method provides you with a way to do it.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;primary_key_to_terms([$id])"
><code>$obj-&#62;primary_key_to_terms([$id])</code></a></h2>

<p>Returns <code>$obj</code>&#39;s primary key as a hashref of values keyed on column names, suitable for passing as <code>search()</code> terms. If <code>$id</code> is specified, convert that primary key instead of <code>$obj</code>&#39;s.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;datasource()"
><code>Class-&#62;datasource()</code></a></h2>

<p>Returns the datasource for objects of class <code>Class</code>. That is, returns the <code>datasource</code> property of <code>Class</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;columns_of_type($type)"
><code>Class-&#62;columns_of_type($type)</code></a></h2>

<p>Returns the list of columns in <code>Class</code> objects that hold data of type <code>$type</code>, as an arrayref. Columns are of a certain type when they are set that way in <code>Class</code>&#39;s <code>column_defs</code> property.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;set_values(\%values)"
><code>$obj-&#62;set_values(\%values)</code></a></h2>

<p>Sets all the columns of <code>$obj</code> that are members of <code>\%values</code> to the values specified there.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;set_values_internal(\%values)"
><code>$obj-&#62;set_values_internal(\%values)</code></a></h2>

<p>Sets new specified values of <code>$obj</code>, without using any overridden mutator methods of <code>$obj</code> and without marking the changed columns changed.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;clone()"
><code>$obj-&#62;clone()</code></a></h2>

<p>Returns a new object of the same class as <i>$obj</i> containing the same data, except for primary keys, which are set to <code>undef</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;clone_all()"
><code>$obj-&#62;clone_all()</code></a></h2>

<p>Returns a new object of the same class as <i>$obj</i> containing the same data, including all key fields.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;has_column($column)"
><code>Class-&#62;has_column($column)</code></a></h2>

<p>Returns whether a column named <code>$column</code> exists in objects of class &#60;Class&#62;.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;column_names()"
><code>Class-&#62;column_names()</code></a></h2>

<p>Returns the list of columns in <code>Class</code> objects as an arrayref.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;column_values()"
><code>$obj-&#62;column_values()</code></a></h2>

<p>Returns the columns and values in the given object as a hashref.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;column($column,_[$value])"
><code>$obj-&#62;column($column, [$value])</code></a></h2>

<p>Returns the value of <code>$obj</code>&#39;s column <code>$column</code>. If <code>$value</code> is specified, <code>column()</code> sets the first.</p>

<p>Note the usual way of accessing and mutating column values is through the named accessors:</p>

<pre>    $obj-&#62;column(&#39;fred&#39;, &#39;barney&#39;);  # possible
    $obj-&#62;fred(&#39;barney&#39;);            # preferred</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;is_changed([$column])"
><code>$obj-&#62;is_changed([$column])</code></a></h2>

<p>Returns whether any values in <code>$obj</code> have changed. If <code>$column</code> is given, returns specifically whether that column has changed.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;changed_cols_and_pk()"
><code>$obj-&#62;changed_cols_and_pk()</code></a></h2>

<p>Returns the list of all columns that have changed in <code>$obj</code> since it was last loaded from or saved to the database, as a list.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;changed_cols()"
><code>$obj-&#62;changed_cols()</code></a></h2>

<p>Returns the list of changed columns in <code>$obj</code> as a list, except for any columns in <code>$obj</code>&#39;s primary key (even if they have changed).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;lookup_multi(\@ids)"
><code>Class-&#62;lookup_multi(\@ids)</code></a></h2>

<p>Returns a list (arrayref) of objects as specified by their primary keys.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;bulk_insert(\@columns,_\@data)"
><code>Class-&#62;bulk_insert(\@columns, \@data)</code></a></h2>

<p>Adds the given data, an arrayref of arrayrefs containing column values in the order of column names given in <code>\@columns</code>, as directly to the database as <code>Class</code> records.</p>

<p>Note that only some database drivers (for example, <code>Data::ObjectDriver::Driver::DBD::Pg</code>) implement the bulk insert operation.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;fetch_data()"
><code>$obj-&#62;fetch_data()</code></a></h2>

<p>Returns the current values from <code>$obj</code> as saved in the database, as a hashref.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;refresh()"
><code>$obj-&#62;refresh()</code></a></h2>

<p>Resets the values of <code>$obj</code> from the database. Any unsaved modifications to <code>$obj</code> will be lost, and any made meanwhile will be reflected in <code>$obj</code> afterward.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;column_func($column)"
><code>$obj-&#62;column_func($column)</code></a></h2>

<p>Creates an accessor/mutator method for column <code>$column</code>, returning it as a coderef.</p>

<p>Override this if you need special behavior in all accessor/mutator methods.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$obj-&#62;deflate()"
><code>$obj-&#62;deflate()</code></a></h2>

<p>Returns a minimal representation of the object, for use in caches where you might want to preserve space (like memcached). Can also be overridden by subclasses to store the optimal representation of an object in the cache. For example, if you have metadata attached to an object, you might want to store that in the cache, as well.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;inflate($deflated)"
><code>Class-&#62;inflate($deflated)</code></a></h2>

<p>Inflates the deflated representation of the object <i>$deflated</i> into a proper object in the class <i>Class</i>. That is, undoes the operation <code>$deflated = $obj-&#62;deflate()</code> by returning a new object equivalent to <code>$obj</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TRANSACTION_SUPPORT_AND_METHODS"
>TRANSACTION SUPPORT AND METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Introduction"
>Introduction</a></h2>

<p>When dealing with the methods on this class, the transactions are global, i.e: applied to all drivers. You can still enable transactions per driver if you directly use the driver API.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;begin_work"
><code>Class-&#62;begin_work</code></a></h2>

<p>This enable transactions globally for all drivers until the next <a href="../../rollback.html" class="podlinkpod"
>rollback</a> or <a href="../../commit.html" class="podlinkpod"
>commit</a> call on the class.</p>

<p>If begin_work is called while a transaction is still active (nested transaction) then the two transactions are merged. So inner transactions are ignored and a warning will be emitted.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;rollback"
><code>Class-&#62;rollback</code></a></h2>

<p>This rollbacks all the transactions since the last begin work, and exits from the active transaction state.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;commit"
><code>Class-&#62;commit</code></a></h2>

<p>Commits the transactions, and exits from the active transaction state.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;txn_debug"
><code>Class-&#62;txn_debug</code></a></h2>

<p>Just return the value of the global flag and the current working drivers in a hashref.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class-&#62;txn_active"
><code>Class-&#62;txn_active</code></a></h2>

<p>Returns true if a transaction is already active.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DIAGNOSTICS"
>DIAGNOSTICS</a></h1>

<ul>
<li><code>Please specify a valid column for <i>class</i></code>
<p>One of the class relationships you defined with <code>has_a()</code> was missing a <code>column</code> member.</p>
</li>

<li><code>Please define a valid method for <i>column</i></code>
<p>One of the class relationships you defined with <code>has_a()</code> was missing its <code>method</code> member and a method name could not be generated, or the class for which you specified the relationship already has a method by that name. Perhaps you specified an additional accessor by the same name for that class.</p>
</li>

<li><code>keys don&#39;t match with primary keys: <i>list</i></code>
<p>The hashref of values you passed as the ID to <code>primary_key_to_terms()</code> was missing or had extra members. Perhaps you used a full <code>column_values()</code> hash instead of only including that class&#39;s key fields.</p>
</li>

<li><code>You tried to set inexistent column <i>column name</i> to value <i>data</i> on <i>class name</i></code>
<p>The hashref you specified to <code>set_values()</code> contained keys that are not defined columns for that class of object. Perhaps you invoked it on the wrong class, or did not fully filter members of the hash out before using it.</p>
</li>

<li><code>Cannot find column &#39;<i>column</i>&#39; for class &#39;<i>class</i>&#39;</code>
<p>The column you specified to <code>column()</code> does not exist for that class, you attempted to use an automatically generated accessor/mutator for a column that doesn&#39;t exist, or attempted to use a column accessor as a class method instead of an instance method. Perhaps you performed your call on the wrong class or variable, or misspelled a method or column name.</p>
</li>

<li><code>Must specify column</code>
<p>You invoked the <code>column_func()</code> method without specifying a column name. Column names are required to create the accessor/mutator function, so it knows what data member of the object to use.</p>
</li>

<li><code>number (of partitions) is required</code>
<p>You attempted to define partitioning for a class without specifying the number of partitions for that class in the <code>number</code> member. Perhaps your logic for determining the number of partitions resulted in <code>undef</code> or 0.</p>
</li>

<li><code>get_driver is required</code>
<p>You attempted to define partitioning for a class without specifying the function to find the object driver for a partition ID as the <code>get_driver</code> member.</p>
</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS_AND_LIMITATIONS"
>BUGS AND LIMITATIONS</a></h1>

<p>There are no known bugs in this module.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../Data/ObjectDriver.html" class="podlinkpod"
>Data::ObjectDriver</a>, <a href="../../Data/ObjectDriver/Driver/DBI.html" class="podlinkpod"
>Data::ObjectDriver::Driver::DBI</a>, <a href="../../Data/ObjectDriver/Driver/SimplePartition.html" class="podlinkpod"
>Data::ObjectDriver::Driver::SimplePartition</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENSE"
>LICENSE</a></h1>

<p><i>Data::ObjectDriver</i> is free software; you may redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR_&#38;_COPYRIGHT"
>AUTHOR &#38; COPYRIGHT</a></h1>

<p>Except where otherwise noted, <i>Data::ObjectDriver</i> is Copyright 2005-2006 Six Apart, cpan@sixapart.com. All rights reserved.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
