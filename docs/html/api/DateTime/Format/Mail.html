<html><head><title>DateTime::Format::Mail</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:04 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CONSTRUCTORS'>CONSTRUCTORS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new'>new</a>
    <li class='indexItem indexItem2'><a href='#clone'>clone</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#PARSING_METHODS'>PARSING METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#loose%2C_strict'>loose, strict</a>
    <li class='indexItem indexItem2'><a href='#parse_datetime'>parse_datetime</a>
    <li class='indexItem indexItem2'><a href='#set_year_cutoff'>set_year_cutoff</a>
    <li class='indexItem indexItem2'><a href='#year_cutoff'>year_cutoff</a>
    <li class='indexItem indexItem2'><a href='#default_cutoff'>default_cutoff</a>
    <li class='indexItem indexItem2'><a href='#fix_year'>fix_year</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#FORMATTING_METHODS'>FORMATTING METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#format_datetime'>format_datetime</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#THANKS'>THANKS</a>
  <li class='indexItem indexItem1'><a href='#SUPPORT'>SUPPORT</a>
  <li class='indexItem indexItem1'><a href='#LICENCE_AND_COPYRIGHT'>LICENCE AND COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>DateTime::Format::Mail - Convert between DateTime and RFC2822/822 formats</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use DateTime::Format::Mail;

    # From RFC2822 via class method:

    my $datetime = DateTime::Format::Mail-&#62;parse_datetime(
        &#34;Sat, 29 Mar 2003 22:11:18 -0800&#34;
    );
    print $datetime-&#62;ymd(&#39;.&#39;); # &#34;2003.03.29&#34;

    #  or via an object
    
    my $pf = DateTime::Format::Mail-&#62;new();
    print $pf-&#62;parse_datetime(
        &#34;Fri, 23 Nov 2001 21:57:24 -0600&#34;
    )-&#62;ymd; # &#34;2001-11-23&#34;

    # Back to RFC2822 date
    
    use DateTime;
    my $dt = DateTime-&#62;new(
        year =&#62; 1979, month =&#62; 7, day =&#62; 16,
        hour =&#62; 16, minute =&#62; 45, second =&#62; 20,
        time_zone =&#62; &#34;Australia/Sydney&#34;
    );
    my $str = DateTime::Format::Mail-&#62;format_datetime( $dt );
    print $str; # &#34;Mon, 16 Jul 1979 16:45:20 +1000&#34;

    # or via an object
    $str = $pf-&#62;format_datetime( $dt );
    print $str; # &#34;Mon, 16 Jul 1979 16:45:20 +1000&#34;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>RFCs 2822 and 822 specify date formats to be used by email. This module parses and emits such dates.</p>

<p>RFC2822 (April 2001) introduces a slightly different format of date than that used by RFC822 (August 1982). The main correction is that the preferred format is more limited, and thus easier to parse programmatically.</p>

<p>Despite the ease of generating and parsing perfectly valid RFC822 and RFC2822 people still get it wrong. So this module provides four things for those handling mail dates:</p>

<ol>
<li>A strict parser that will only accept RFC2822 dates, so you can see where you&#39;re right.</li>

<li>A strict formatter, so you can generate the right stuff to begin with.</li>

<li>A <i>loose</i> parser, so you can take the misbegotten output from other programs and turn it into something useful. This includes various minor errors as well as some somewhat more bizarre mistakes. The file <em>t/sample_dates</em> in this module&#39;s distribution should give you an idea of what&#39;s valid, while <em>t/invalid.t</em> should do the same for what&#39;s not. Those regarded as invalid are just a bit <b>too</b> strange to allow.</li>

<li>Interoperation with the rest of the <a href="../../DateTime.html" class="podlinkpod"
>DateTime</a> suite. These are a collection of modules to handle dates in a modern and accurate fashion. In particular, they make it trivial to parse, manipulate and then format dates. Shifting timezones is a doddle, and converting between formats is a cinch.</li>
</ol>

<p>As a future direction, I&#39;m contemplating an even stricter parser that will only accept dates with no obsolete elements.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONSTRUCTORS"
>CONSTRUCTORS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new"
>new</a></h2>

<p>Creates a new <code>DateTime::Format::Mail</code> instance. This is generally not required for simple operations. If you wish to use a different parsing style from the default, strict, parser then you&#39;ll need to create an object.</p>

<pre>   my $parser = DateTime::Format::Mail-&#62;new()
   my $copy = $parser-&#62;new();</pre>

<p>If called on an existing object then it clones the object.</p>

<p>It has two optional named parameters.</p>

<ul>
<li><code>loose</code> should be a true value if you want a loose parser, else either don&#39;t specify it or give it a false value.</li>

<li><code>year_cutoff</code> should be an integer greater than or equal to zero specifying the cutoff year. See <a href="#set_year_cutoff" class="podlinkpod"
>&#34;set_year_cutoff&#34;</a> for details.</li>
</ul>

<pre>    my $loose = DateTime::Format::Mail-&#62;new( loose =&#62; 1 );

    my $post_2049 = DateTime::Format::Mail-&#62;new(
        year_cutoff =&#62; 60
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="clone"
>clone</a></h2>

<p>For those who prefer to explicitly clone via a method called <code>clone()</code>. If called as a class method it will die.</p>

<pre>   my $clone = $original-&#62;clone();</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PARSING_METHODS"
>PARSING METHODS</a></h1>

<p>These methods work on either our objects or as class methods.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="loose,_strict"
>loose, strict</a></h2>

<p>These methods set the parsing strictness.</p>

<pre>    my $parser = DateTime::Format::Mail-&#62;new;
    $parser-&#62;loose;
    $parser-&#62;strict; # (the default)

    my $p = DateTime::Format::Mail-&#62;new-&#62;loose;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="parse_datetime"
>parse_datetime</a></h2>

<p>Given an RFC2822 or 822 datetime string, return a <code>DateTime</code> object representing that date and time. Unparseable strings will cause the method to die.</p>

<p>See the <a href="#SYNOPSIS" class="podlinkpod"
>synopsis</a> for examples.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="set_year_cutoff"
>set_year_cutoff</a></h2>

<p>Two digit years are treated as valid in the loose translation and are translated up to a 19xx or 20xx figure. By default, following the specification of RFC2822, if the year is greater than &#39;49&#39;, it&#39;s treated as being in the 20th century (19xx). If lower, or equal, then the 21st (20xx). That is, 50 becomes 1950 while 49 is 2049.</p>

<p><code>set_year_cutoff()</code> allows you to modify this behaviour by specifying a different cutoff.</p>

<p>The return value is the object itself.</p>

<pre>    $parser-&#62;set_year_cutoff( 60 );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="year_cutoff"
>year_cutoff</a></h2>

<p>Returns the current cutoff. Can be used as either a class or object method.</p>

<pre>    my $cutoff = $parser-&#62;set_year_cutoff;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="default_cutoff"
>default_cutoff</a></h2>

<p>Returns the default cutoff. A useful method to override for subclasses.</p>

<pre>    my $default = $parser-&#62;default_cutoff;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="fix_year"
>fix_year</a></h2>

<p>Takes a year and returns it normalized.</p>

<pre>   my $fixed = $parser-&#62;fix_year( 3 );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FORMATTING_METHODS"
>FORMATTING METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="format_datetime"
>format_datetime</a></h2>

<p>Given a <code>DateTime</code> object, return it as an RFC2822 compliant string.</p>

<pre>    use DateTime;
    use DateTime::Format::Mail;
    my $dt = DateTime-&#62;new(
        year =&#62; 1979, month =&#62; 7, day =&#62; 16, time_zone =&#62; &#39;UTC&#39;
    );
    my $mail = DateTime::Format::Mail-&#62;format_datetime( $dt );
    print $mail, &#34;\n&#34;; 

    # or via an object
    my $formatter = DateTime::Format::Mail-&#62;new();
    my $rfcdate = $formatter-&#62;format_datetime( $dt );
    print $rfcdate, &#34;\n&#34;;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="THANKS"
>THANKS</a></h1>

<p>Dave Rolsky (DROLSKY) for kickstarting the DateTime project.</p>

<p>Roderick A. Anderson for noting where the documentation was incomplete in places.</p>

<p>Joshua Hoblitt (JHOBLITT) for inspiring me to check what the standard said about interpreting two digit years.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SUPPORT"
>SUPPORT</a></h1>

<p>Support for this module is provided via the datetime@perl.org email list. See <a href="http://datetime.perl.org/mailing_list.html" class="podlinkurl"
>http://datetime.perl.org/mailing_list.html</a> for more details.</p>

<p>Alternatively, log them via the CPAN RT system via the web or email:</p>

<pre>    http://rt.cpan.org/NoAuth/ReportBug.html?Queue=DateTime%3A%3AFormat%3A%3AMail
    bug-datetime-format-mail@rt.cpan.org</pre>

<p>This makes it much easier for me to track things and thus means your problem is less likely to be neglected.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENCE_AND_COPYRIGHT"
>LICENCE AND COPYRIGHT</a></h1>

<p>Copyright &#169; Iain Truskett, 2003. All rights reserved.</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<p>The full text of the licences can be found in the <em>Artistic</em> and <em>COPYING</em> files included with this module, or in <a href="../../perlartistic.html" class="podlinkpod"
>perlartistic</a> and <a href="../../perlgpl.html" class="podlinkpod"
>perlgpl</a> in Perl 5.8.1 or later.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Originally written by Iain Truskett &#60;spoon@cpan.org&#62;, who died on December 29, 2003.</p>

<p>Maintained by Dave Rolsky &#60;autarch@urth.org&#62;.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><code>datetime@perl.org</code> mailing list.</p>

<p><a href="http://datetime.perl.org/" class="podlinkurl"
>http://datetime.perl.org/</a></p>

<p><a href="../../perl.html" class="podlinkpod"
>perl</a>, <a href="../../DateTime.html" class="podlinkpod"
>DateTime</a></p>

<p>RFCs 2822 and 822.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
