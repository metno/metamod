<html><head><title>DateTime::Event::Random</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:04 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#USAGE'>USAGE</a>
  <li class='indexItem indexItem1'><a href='#INTERNALS'>INTERNALS</a>
  <li class='indexItem indexItem1'><a href='#COOKBOOK'>COOKBOOK</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>DateTime::Event::Random - DateTime extension for creating random datetimes.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre> use DateTime::Event::Random;

 # Creates a random DateTime
 $dt = DateTime::Event::Random-&#62;datetime;

 # Creates a random DateTime in the future
 $dt = DateTime::Event::Random-&#62;datetime( after =&#62; DateTime-&#62;now );

 # Creates a random DateTime::Duration between 0 and 15 days
 $dur = DateTime::Event::Random-&#62;duration( days =&#62; 15 );

 # Creates a DateTime::Set of random dates 
 # with an average density of 4 months, 
 # that is, 3 events per year, with a span 
 # of 2 years
 my $dt_set = DateTime::Event::Random-&#62;new(
                  months =&#62; 4,   # events occur about 3 times a year
                  start =&#62;  DateTime-&#62;new( year =&#62; 2003 ),
                  end =&#62;    DateTime-&#62;new( year =&#62; 2005 ) ); 

 print &#34;next is &#34;, $dt_set-&#62;next( DateTime-&#62;today )-&#62;datetime, &#34;\n&#34;;
 # output: next is 2004-02-29T22:00:51

 my @days = $dt_set-&#62;as_list;
 print join(&#39;; &#39;, map{ $_-&#62;datetime } @days ) . &#34;\n&#34;;
 # output: 2003-02-16T21:08:58; 2003-02-18T01:24:13; ...</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module provides convenience methods that let you easily create <code>DateTime::Set</code>, <code>DateTime</code>, or <code>DateTime::Duration</code> objects with random values.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="USAGE"
>USAGE</a></h1>

<ul>
<li>new
<p>Creates a <code>DateTime::Set</code> object that contains random events.</p>

<pre>  my $random_set = DateTime::Event::Random-&#62;new;</pre>

<p>The events occur at an average of once a day, forever.</p>

<p>You may give <i>density</i> parameters to change this. The density is specified as a duration:</p>

<pre>  my $two_daily_set = DateTime::Event::Random-&#62;new( days =&#62; 2 );

  my $three_weekly_set = DateTime::Event::Random-&#62;new( weeks =&#62; 3 );

  my $random_set = DateTime::Event::Random-&#62;new( duration =&#62; $dur );</pre>

<p>If <i>span</i> parameters are given, then the set is bounded:</p>

<pre>  my $rand = DateTime::Event::Random-&#62;new(
                 months =&#62; 4,   # events occur about 3 times a year
                 start =&#62;  DateTime-&#62;new( year =&#62; 2003 ),
                 end =&#62;    DateTime-&#62;new( year =&#62; 2005 ) );</pre>

<p>Note that the random values are generated on demand, which means that the values may not be repeateable between iterations. See the <code>new_cached</code> constructor for a solution.</p>

<p>A <code>DateTime::Set</code> object does not allow for the repetition of values. Each element in a set is different.</p>

<p>The <code>DateTime::Set</code> accessors (<code>as_list</code>, <code>iterator/next/previous</code>) always return <i>sorted</i> datetimes.</p>
</li>

<li>new_cached
<p>Creates a <code>DateTime::Set</code> object representing the set of random events.</p>

<pre>    my $random_set = DateTime::Event::Random-&#62;new_cached;</pre>

<p>If a set is created with <code>new_cached</code>, then once an value is <i>seen</i>, it is cached, such that all sequences extracted from the set are equal.</p>

<p>Cached sets are slower and take more memory than sets generated with the plain <code>new</code> constructor. They should only be used if you need unbounded sets that would be accessed many times and when you need repeatable results.</p>

<p>This method accepts the same parameters as the <code>new</code> method.</p>
</li>

<li>datetime
<p>Returns a random <code>DateTime</code> object.</p>

<pre>    $dt = DateTime::Event::Random-&#62;datetime;</pre>

<p>If a <code>span</code> is specified, then the returned value will be within the span:</p>

<pre>    $dt = DateTime::Event::Random-&#62;datetime( span =&#62; $span );

    $dt = DateTime::Event::Random-&#62;datetime( after =&#62; DateTime-&#62;now );</pre>

<p>You can also specify <code>locale</code> and <code>time_zone</code> parameters, just like in <code>DateTime-&#62;new()</code>.</p>
</li>

<li>duration
<p>Returns a random <code>DateTime::Duration</code> object.</p>

<pre>    $dur = DateTime::Event::Random-&#62;duration;</pre>

<p>If a <code>duration</code> is specified, then the returned value will be within the duration:</p>

<pre>    $dur = DateTime::Event::Random-&#62;duration( duration =&#62; $dur );

    $dur = DateTime::Event::Random-&#62;duration( days =&#62; 15 );</pre>
</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="INTERNALS"
>INTERNALS</a></h1>

<ul>
<li>_random_init</li>

<li>_random_duration
<p>These methods are called by <code>DateTime::Set</code> to generate the random datetime sequence.</p>

<p>You can override these methods in order to make different random distributions. The default random distribution is &#34;uniform&#34;.</p>

<p>The <i>internals</i> API is not stable.</p>
</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COOKBOOK"
>COOKBOOK</a></h1>

<ul>
<li>Make a random datetime
<pre>  use DateTime::Event::Random;

  my $dt = DateTime::Event::Random-&#62;datetime;

  print &#34;datetime &#34; .  $dt-&#62;datetime . &#34;\n&#34;;</pre>
</li>

<li>Make a random datetime, today
<pre>  use DateTime::Event::Random;

  my $dt = DateTime-&#62;today + DateTime::Event::Random-&#62;duration( days =&#62; 1 );

  print &#34;datetime &#34; .  $dt-&#62;datetime . &#34;\n&#34;;</pre>

<p>This is another way to do it. It takes care of length of day problems, such as DST changes and leap seconds:</p>

<pre>  use DateTime::Event::Random;

  my $dt_today = DateTime-&#62;today;
  my $dt_tomorrow = $dt_today + DateTime::Duration-&#62;new( days =&#62; 1 );

  my $dt = DateTime::Event::Random-&#62;datetime( 
               start =&#62;  $dt_today, 
               before =&#62; $dt_tomorrow );

  print &#34;datetime &#34; .  $dt-&#62;datetime . &#34;\n&#34;;</pre>
</li>

<li>Make a random sunday
<pre>  use DateTime::Event::Random;

  my $dt = DateTime::Event::Random-&#62;datetime;
  $dt-&#62;truncate( to =&#62; week );
  $dt-&#62;add( days =&#62; 6 );

  print &#34;datetime &#34; . $dt-&#62;datetime . &#34;\n&#34;;
  print &#34;weekday &#34; .  $dt-&#62;day_of_week . &#34;\n&#34;;</pre>
</li>

<li>Make a random friday-13th
<pre>  use DateTime::Event::Random;
  use DateTime::Event::Recurrence;

  my $day_13 = DateTime::Event::Recurrence-&#62;monthly( days =&#62; 13 );
  my $friday = DateTime::Event::Recurrence-&#62;weekly( days =&#62; 6 ); 
  my $friday_13 = $friday-&#62;intersection( $day_13 );

  my $dt = $friday_13-&#62;next( DateTime::Event::Random-&#62;datetime );

  print &#34;datetime &#34; .  $dt-&#62;datetime . &#34;\n&#34;;
  print &#34;weekday &#34; .   $dt-&#62;day_of_week . &#34;\n&#34;;
  print &#34;month day &#34; . $dt-&#62;day . &#34;\n&#34;;</pre>
</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Flavio Soibelmann Glock fglock@pucrs.br</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (c) 2004 Flavio Soibelmann Glock. All rights reserved. This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<p>The full text of the license can be found in the LICENSE file included with this module.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>datetime@perl.org mailing list</p>

<p>DateTime Web page at http://datetime.perl.org/</p>

<p>DateTime and DateTime::Duration - date and time.</p>

<p>DateTime::Set - &#34;sets&#34;</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
