<html><head><title>WWW::Mechanize::FAQ</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:28 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#How_to_get_help_with_WWW%3A%3AMechanize'>How to get help with WWW::Mechanize</a>
  <li class='indexItem indexItem1'><a href='#JavaScript'>JavaScript</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#I_have_this_web_page_that_has_JavaScript_on_it%2C_and_my_Mech_program_doesn%27t_work.'>I have this web page that has JavaScript on it, and my Mech program doesn&#39;t work.</a>
    <li class='indexItem indexItem2'><a href='#I_thought_Mech_was_supposed_to_work_like_a_web_browser.'>I thought Mech was supposed to work like a web browser.</a>
    <li class='indexItem indexItem2'><a href='#Which_modules_work_like_Mechanize_and_have_JavaScript_support%3F'>Which modules work like Mechanize and have JavaScript support?</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#How_do_I_do_X%3F'>How do I do X?</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Can_I_do_%5Bsuch-and-such%5D_with_WWW%3A%3AMechanize%3F'>Can I do [such-and-such] with WWW::Mechanize?</a>
    <li class='indexItem indexItem2'><a href='#How_do_I_use_WWW%3A%3AMechanize_through_a_proxy_server%3F'>How do I use WWW::Mechanize through a proxy server?</a>
    <li class='indexItem indexItem2'><a href='#How_can_I_see_what_fields_are_on_the_forms%3F'>How can I see what fields are on the forms?</a>
    <li class='indexItem indexItem2'><a href='#How_do_I_get_Mech_to_handle_authentication%3F'>How do I get Mech to handle authentication?</a>
    <li class='indexItem indexItem2'><a href='#How_can_I_get_WWW%3A%3AMechanize_to_execute_this_JavaScript%3F'>How can I get WWW::Mechanize to execute this JavaScript?</a>
    <li class='indexItem indexItem2'><a href='#How_do_I_check_a_checkbox_that_doesn%27t_have_a_value_defined%3F'>How do I check a checkbox that doesn&#39;t have a value defined?</a>
    <li class='indexItem indexItem2'><a href='#How_do_I_handle_frames%3F'>How do I handle frames?</a>
    <li class='indexItem indexItem2'><a href='#How_do_I_get_a_list_of_HTTP_headers_and_their_values%3F'>How do I get a list of HTTP headers and their values?</a>
    <li class='indexItem indexItem2'><a href='#How_do_I_enable_keep-alive%3F'>How do I enable keep-alive?</a>
    <li class='indexItem indexItem2'><a href='#How_can_I_change%2Fspecify_the_action_parameter_of_an_HTML_form%3F'>How can I change/specify the action parameter of an HTML form?</a>
    <li class='indexItem indexItem2'><a href='#How_do_I_save_an_image%3F_How_do_I_save_a_large_tarball%3F'>How do I save an image? How do I save a large tarball?</a>
    <li class='indexItem indexItem2'><a href='#How_do_I_pick_a_specific_value_from_a_%3Cselect%3E_list%3F'>How do I pick a specific value from a &#60;select&#62; list?</a>
    <li class='indexItem indexItem2'><a href='#How_do_I_get_Mech_to_not_follow_redirects%3F'>How do I get Mech to not follow redirects?</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Why_doesn%27t_this_work%3A_Debugging_your_Mechanize_program'>Why doesn&#39;t this work: Debugging your Mechanize program</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#My_Mech_program_doesn%27t_work%2C_but_it_works_in_the_browser.'>My Mech program doesn&#39;t work, but it works in the browser.</a>
    <li class='indexItem indexItem2'><a href='#My_Mech_program_gets_these_500_errors.'>My Mech program gets these 500 errors.</a>
    <li class='indexItem indexItem2'><a href='#Why_doesn%27t_my_program_handle_this_form_correctly%3F'>Why doesn&#39;t my program handle this form correctly?</a>
    <li class='indexItem indexItem2'><a href='#Why_don%27t_https%3A%2F%2F_URLs_work%3F'>Why don&#39;t https:// URLs work?</a>
    <li class='indexItem indexItem2'><a href='#Why_do_I_get_%22Input_%27fieldname%27_is_readonly%22%3F'>Why do I get &#34;Input &#39;fieldname&#39; is readonly&#34;?</a>
    <li class='indexItem indexItem2'><a href='#I_tried_to_%5Bsuch-and-such%5D_and_I_got_this_weird_error.'>I tried to [such-and-such] and I got this weird error.</a>
    <li class='indexItem indexItem2'><a href='#How_do_I_figure_out_why_%24mech-%3Eget(%24url)_doesn%27t_work%3F'>How do I figure out why $mech-&#62;get($url) doesn&#39;t work?</a>
    <li class='indexItem indexItem2'><a href='#I_submitted_a_form%2C_but_the_server_ignored_everything!_I_got_an_empty_form_back!'>I submitted a form, but the server ignored everything! I got an empty form back!</a>
    <li class='indexItem indexItem2'><a href='#I%27ve_logged_in_to_the_server%2C_but_I_get_500_errors_when_I_try_to_get_to_protected_content.'>I&#39;ve logged in to the server, but I get 500 errors when I try to get to protected content.</a>
    <li class='indexItem indexItem2'><a href='#Mech_is_a_big_memory_pig!_I%27m_running_out_of_RAM!'>Mech is a big memory pig! I&#39;m running out of RAM!</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>WWW::Mechanize::FAQ - Frequently Asked Questions about WWW::Mechanize</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="How_to_get_help_with_WWW::Mechanize"
>How to get help with WWW::Mechanize</a></h1>

<p>If your question isn&#39;t answered here in the FAQ,
please turn to the communities at:</p>

<ul>
<li><a href="http://perlmonks.org" class="podlinkurl"
>http://perlmonks.org</a></li>

<li>The libwww-perl mailing list at <a href="http://lists.perl.org" class="podlinkurl"
>http://lists.perl.org</a></li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="JavaScript"
>JavaScript</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="I_have_this_web_page_that_has_JavaScript_on_it,_and_my_Mech_program_doesn&#39;t_work."
>I have this web page that has JavaScript on it,
and my Mech program doesn&#39;t work.</a></h2>

<p>That&#39;s because WWW::Mechanize doesn&#39;t operate on the JavaScript.
It only understands the HTML parts of the page.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="I_thought_Mech_was_supposed_to_work_like_a_web_browser."
>I thought Mech was supposed to work like a web browser.</a></h2>

<p>It does pretty much,
but it doesn&#39;t support JavaScript.</p>

<p>I added some basic attempts at picking up URLs in <code>window.open()</code> calls and return them in <code>$mech-&#62;links</code>.
They work sometimes.</p>

<p>Since Javascript is completely visible to the client,
it cannot be used to prevent a scraper from following links.
But it can make life difficult.
If you want to scrape specific pages,
then a solution is always possible.</p>

<p>One typical use of Javascript is to perform argument checking before posting to the server.
The URL you want is probably just buried in the Javascript function.
Do a regular expression match on <code>$mech-&#62;content()</code> to find the link that you want and <code>$mech-&#62;get</code> it directly (this assumes that you know what you are looking for in advance).</p>

<p>In more difficult cases,
the Javascript is used for URL mangling to satisfy the needs of some middleware.
In this case you need to figure out what the Javascript is doing (why are these URLs always really long?).
There is probably some function with one or more arguments which calculates the new URL.
Step one: using your favorite browser,
get the before and after URLs and save them to files.
Edit each file,
converting the argument separators (&#39;?&#39;,
&#39;&#38;&#39; or &#39;;&#39;) into newlines.
Now it is easy to use diff or comm to find out what Javascript did to the URL.
Step 2 - find the function call which created the URL - you will need to parse and interpret its argument list.
The Javascript Debugger in the Firebug extension for Firefox helps with the analysis.
At this point,
it is fairly trivial to write your own function which emulates the Javascript for the pages you want to process.</p>

<p>Here&#39;s another approach that answers the question,
&#34;It works in Firefox,
but why not Mech?&#34; Everything the web server knows about the client is present in the HTTP request.
If two requests are identical,
the results should be identical.
So the real question is &#34;What is different between the mech request and the Firefox request?&#34;</p>

<p>The Firefox extension &#34;Tamper Data&#34; is an effective tool for examining the headers of the requests to the server.
Compare that with what LWP is sending.
Once the two are identical,
the action of the server should be the same as well.</p>

<p>I say &#34;should&#34;,
because this is an oversimplification - some values are naturally unique,
e.g.
a SessionID,
but if a SessionID is present,
that is probably sufficient,
even though the value will be different between the LWP request and the Firefox request.
The server could use the session to store information which is troublesome,
but that&#39;s not the first place to look (and highly unlikely to be relevant when you are requesting the login page of your site).</p>

<p>Generally the problem is to be found in missing or incorrect POSTDATA arguments,
Cookies,
User-Agents,
Accepts,
etc.
If you are using mech,
then redirects and cookies should not be a problem,
but are listed here for completeness.
If you are missing headers,
<code>$mech-&#62;add_header</code> can be used to add the headers that you need.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Which_modules_work_like_Mechanize_and_have_JavaScript_support?"
>Which modules work like Mechanize and have JavaScript support?</a></h2>

<p>In no particular order: <a href="../../Gtk2/WebKit/Mechanize.html" class="podlinkpod"
>Gtk2::WebKit::Mechanize</a>,
<a href="../../Win32/IE/Mechanize.html" class="podlinkpod"
>Win32::IE::Mechanize</a>,
<a href="../../WWW/Mechanize/Firefox.html" class="podlinkpod"
>WWW::Mechanize::Firefox</a>,
<a href="../../WWW/Scripter.html" class="podlinkpod"
>WWW::Scripter</a>,
<a href="../../WWW/Selenium.html" class="podlinkpod"
>WWW::Selenium</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_do_X?"
>How do I do X?</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Can_I_do_[such-and-such]_with_WWW::Mechanize?"
>Can I do [such-and-such] with WWW::Mechanize?</a></h2>

<p>If it&#39;s possible with LWP::UserAgent,
then yes.
WWW::Mechanize is a subclass of <a href="../../LWP/UserAgent.html" class="podlinkpod"
>LWP::UserAgent</a>,
so all the wondrous magic of that class is inherited.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_use_WWW::Mechanize_through_a_proxy_server?"
>How do I use WWW::Mechanize through a proxy server?</a></h2>

<p>See the docs in <a href="../../LWP/UserAgent.html" class="podlinkpod"
>LWP::UserAgent</a> on how to use the proxy.
Short version:</p>

<pre>    $mech-&#62;proxy([&#39;http&#39;, &#39;ftp&#39;], &#39;http://proxy.example.com:8000/&#39;);</pre>

<p>or get the specs from the environment:</p>

<pre>    $mech-&#62;env_proxy();

    # Environment set like so:
    gopher_proxy=http://proxy.my.place/
    wais_proxy=http://proxy.my.place/
    no_proxy=&#34;localhost,my.domain&#34;
    export gopher_proxy wais_proxy no_proxy</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_can_I_see_what_fields_are_on_the_forms?"
>How can I see what fields are on the forms?</a></h2>

<p>Use the mech-dump utility, optionally installed with Mechanize.</p>

<pre>    $ mech-dump --forms http://search.cpan.org
    Dumping forms
    GET http://search.cpan.org/search
      query=
      mode=all                        (option)  [*all|module|dist|author]
      &#60;NONAME&#62;=CPAN Search            (submit) </pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_get_Mech_to_handle_authentication?"
>How do I get Mech to handle authentication?</a></h2>

<pre>    use MIME::Base64;

    my $agent = WWW::Mechanize-&#62;new();
    my @args = (
        Authorization =&#62; &#34;Basic &#34; .
            MIME::Base64::encode( USER . &#39;:&#39; . PASS )
    );

    $agent-&#62;credentials( ADDRESS, REALM, USER, PASS );
    $agent-&#62;get( URL, @args );</pre>

<p>If you want to use the credentials for all future requests, you can also use the <a href="../../LWP/UserAgent.html" class="podlinkpod"
>LWP::UserAgent</a> <code>default_header()</code> method instead of the extra arguments to <code>get()</code></p>

<pre>    $mech-&#62;default_header(
        Authorization =&#62; &#39;Basic &#39; . encode_base64( USER . &#39;:&#39; . PASSWORD ) );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_can_I_get_WWW::Mechanize_to_execute_this_JavaScript?"
>How can I get WWW::Mechanize to execute this JavaScript?</a></h2>

<p>You can&#39;t. JavaScript is entirely client-based, and WWW::Mechanize is a client that doesn&#39;t understand JavaScript. See the top part of this FAQ.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_check_a_checkbox_that_doesn&#39;t_have_a_value_defined?"
>How do I check a checkbox that doesn&#39;t have a value defined?</a></h2>

<p>Set it to the value of &#34;on&#34;.</p>

<pre>    $mech-&#62;field( my_checkbox =&#62; &#39;on&#39; );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_handle_frames?"
>How do I handle frames?</a></h2>

<p>You don&#39;t deal with them as frames, per se, but as links. Extract them with</p>

<pre>    my @frame_links = $mech-&#62;find_link( tag =&#62; &#34;frame&#34; );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_get_a_list_of_HTTP_headers_and_their_values?"
>How do I get a list of HTTP headers and their values?</a></h2>

<p>All <a href="../../HTTP/Headers.html" class="podlinkpod"
>HTTP::Headers</a> methods work on a <a href="../../HTTP/Response.html" class="podlinkpod"
>HTTP::Response</a> object which is returned by the <i>get()</i>, <i>reload()</i>, <i>response()/res()</i>, <i>click()</i>, <i>submit_form()</i>, and <i>request()</i> methods.</p>

<pre>    my $mech = WWW::Mechanize-&#62;new( autocheck =&#62; 1 );
    $mech-&#62;get( &#39;http://my.site.com&#39; );
    my $response = $mech-&#62;response();
    for my $key ( $response-&#62;header_field_names() ) {
        print $key, &#34; : &#34;, $response-&#62;header( $key ), &#34;\n&#34;;
    }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_enable_keep-alive?"
>How do I enable keep-alive?</a></h2>

<p>Since <a href="../../WWW/Mechanize.html" class="podlinkpod"
>WWW::Mechanize</a> is a subclass of <a href="../../LWP/UserAgent.html" class="podlinkpod"
>LWP::UserAgent</a>, you can use the same mechanism to enable keep-alive:</p>

<pre>    use LWP::ConnCache;
    ...
    $mech-&#62;conn_cache(LWP::ConnCache-&#62;new);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_can_I_change/specify_the_action_parameter_of_an_HTML_form?"
>How can I change/specify the action parameter of an HTML form?</a></h2>

<p>You can access the action of the form by utilizing the <a href="../../HTML/Form.html" class="podlinkpod"
>HTML::Form</a> object returned from one of the specifying form methods.</p>

<p>Using <code>$mech-&#62;form_number($number)</code>:</p>

<pre>    my $mech = WWW::mechanize-&#62;new;
    $mech-&#62;get(&#39;http://someurlhere.com&#39;);
    # Access the form using its Zero-Based Index by DOM order
    $mech-&#62;form_number(0)-&#62;action(&#39;http://newAction&#39;); #ABS URL</pre>

<p>Using <code>$mech-&#62;form_name($number)</code>:</p>

<pre>    my $mech = WWW::mechanize-&#62;new;
    $mech-&#62;get(&#39;http://someurlhere.com&#39;);
    #Access the form using its Zero-Based Index by DOM order
    $mech-&#62;form_name(&#39;trgForm&#39;)-&#62;action(&#39;http://newAction&#39;); #ABS URL</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_save_an_image?_How_do_I_save_a_large_tarball?"
>How do I save an image? How do I save a large tarball?</a></h2>

<p>An image is just content. You get the image and save it.</p>

<pre>    $mech-&#62;get( &#39;photo.jpg&#39; );
    $mech-&#62;save_content( &#39;/path/to/my/directory/photo.jpg&#39; );</pre>

<p>You can also save any content directly to disk using the <code>:content_file</code> flag to <code>get()</code>, which is part of <a href="../../LWP/UserAgent.html" class="podlinkpod"
>LWP::UserAgent</a>.</p>

<pre>    $mech-&#62;get( &#39;http://www.cpan.org/src/stable.tar.gz&#39;,
                &#39;:content_file&#39; =&#62; &#39;stable.tar.gz&#39; );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_pick_a_specific_value_from_a_&#60;select&#62;_list?"
>How do I pick a specific value from a <code>&#60;select&#62;</code> list?</a></h2>

<p>Find the <code>HTML::Form::ListInput</code> in the page.</p>

<pre>    my ($listbox) = $mech-&#62;find_all_inputs( name =&#62; &#39;listbox&#39; );</pre>

<p>Then create a hash for the lookup:</p>

<pre>    my %name_lookup;
    @name_lookup{ $listbox-&#62;value_names } = $listbox-&#62;possible_values;
    my $value = $name_lookup{ &#39;Name I want&#39; };</pre>

<p>If you have duplicate names, this method won&#39;t work, and you&#39;ll have to loop over <code>$listbox-&#62;value_names</code> and <code>$listbox-&#62;possible_values</code> in parallel until you find a matching name.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_get_Mech_to_not_follow_redirects?"
>How do I get Mech to not follow redirects?</a></h2>

<p>You use functionality in LWP::UserAgent, not Mech itself.</p>

<pre>    $mech-&#62;requests_redirectable( [] );</pre>

<p>Or you can set <code>max_redirect</code>:</p>

<pre>    $mech-&#62;max_redirect( 0 );</pre>

<p>Both these options can also be set in the constructor. Mech doesn&#39;t understand them, so will pass them through to the LWP::UserAgent constructor.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Why_doesn&#39;t_this_work:_Debugging_your_Mechanize_program"
>Why doesn&#39;t this work: Debugging your Mechanize program</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="My_Mech_program_doesn&#39;t_work,_but_it_works_in_the_browser."
>My Mech program doesn&#39;t work, but it works in the browser.</a></h2>

<p>Mechanize acts like a browser, but apparently something you&#39;re doing is not matching the browser&#39;s behavior. Maybe it&#39;s expecting a certain web client, or maybe you&#39;ve not handling a field properly. For some reason, your Mech problem isn&#39;t doing exactly what the browser is doing, and when you find that, you&#39;ll have the answer.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="My_Mech_program_gets_these_500_errors."
>My Mech program gets these 500 errors.</a></h2>

<p>A 500 error from the web server says that the program on the server side died. Probably the web server program was expecting certain inputs that you didn&#39;t supply, and instead of handling it nicely, the program died.</p>

<p>Whatever the cause of the 500 error, if it works in the browser, but not in your Mech program, you&#39;re not acting like the browser. See the previous question.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Why_doesn&#39;t_my_program_handle_this_form_correctly?"
>Why doesn&#39;t my program handle this form correctly?</a></h2>

<p>Run <em>mech-dump</em> on your page and see what it says.</p>

<p><em>mech-dump</em> is a marvelous diagnostic tool for figuring out what forms and fields are on the page. Say you&#39;re scraping CNN.com, you&#39;d get this:</p>

<pre>    $ mech-dump http://www.cnn.com/
    GET http://search.cnn.com/cnn/search
      source=cnn                     (hidden readonly)
      invocationType=search/top      (hidden readonly)
      sites=web                      (radio)    [*web/The Web ??|cnn/CNN.com ??]
      query=                         (text)
      &#60;NONAME&#62;=Search                (submit)

    POST http://cgi.money.cnn.com/servlets/quote_redirect
      query=                         (text)
      &#60;NONAME&#62;=GET                   (submit)

    POST http://polls.cnn.com/poll
      poll_id=2112                   (hidden readonly)
      question_1=&#60;UNDEF&#62;             (radio)    [1/Simplistic option|2/VIEW RESULTS]
      &#60;NONAME&#62;=VOTE                  (submit)

    GET http://search.cnn.com/cnn/search
      source=cnn                     (hidden readonly)
      invocationType=search/bottom   (hidden readonly)
      sites=web                      (radio)    [*web/??CNN.com|cnn/??]
      query=                         (text)
      &#60;NONAME&#62;=Search                (submit)</pre>

<p>Four forms, including the first one duplicated at the end. All the fields, all their defaults, lovingly generated by HTML::Form&#39;s <code>dump</code> method.</p>

<p>If you want to run <em>mech-dump</em> on something that doesn&#39;t lend itself to a quick URL fetch, then use the <code>save_content()</code> method to write the HTML to a file, and run <em>mech-dump</em> on the file.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Why_don&#39;t_https://_URLs_work?"
>Why don&#39;t https:// URLs work?</a></h2>

<p>You need either <a href="../../IO/Socket/SSL.html" class="podlinkpod"
>IO::Socket::SSL</a> or <a href="../../Crypt/SSLeay.html" class="podlinkpod"
>Crypt::SSLeay</a> installed.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Why_do_I_get_&#34;Input_&#39;fieldname&#39;_is_readonly&#34;?"
>Why do I get &#34;Input &#39;fieldname&#39; is readonly&#34;?</a></h2>

<p>You&#39;re trying to change the value of a hidden field and you have warnings on.</p>

<p>First, make sure that you actually mean to change the field that you&#39;re changing, and that you don&#39;t have a typo. Usually, hidden variables are set by the site you&#39;re working on for a reason. If you change the value, you might be breaking some functionality by faking it out.</p>

<p>If you really do want to change a hidden value, make the changes in a scope that has warnings turned off:</p>

<pre>    {
    local $^W = 0;
    $agent-&#62;field( name =&#62; $value );
    }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="I_tried_to_[such-and-such]_and_I_got_this_weird_error."
>I tried to [such-and-such] and I got this weird error.</a></h2>

<p>Are you checking your errors?</p>

<p>Are you sure?</p>

<p>Are you checking that your action succeeded after every action?</p>

<p>Are you sure?</p>

<p>For example, if you try this:</p>

<pre>    $mech-&#62;get( &#34;http://my.site.com&#34; );
    $mech-&#62;follow_link( &#34;foo&#34; );</pre>

<p>and the <code>get</code> call fails for some reason, then the Mech internals will be unusable for the <code>follow_link</code> and you&#39;ll get a weird error. You <b>must</b>, after every action that GETs or POSTs a page, check that Mech succeeded, or all bets are off.</p>

<pre>    $mech-&#62;get( &#34;http://my.site.com&#34; );
    die &#34;Can&#39;t even get the home page: &#34;, $mech-&#62;response-&#62;status_line
        unless $mech-&#62;success;

    $mech-&#62;follow_link( &#34;foo&#34; );
    die &#34;Foo link failed: &#34;, $mech-&#62;response-&#62;status_line
        unless $mech-&#62;success;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_figure_out_why_$mech-&#62;get($url)_doesn&#39;t_work?"
>How do I figure out why <code>$mech-&#62;get($url)</code> doesn&#39;t work?</a></h2>

<p>There are many reasons why a <code>get()</code> can fail. The server can take you to someplace you didn&#39;t expect. It can generate redirects which are not properly handled. You can get time-outs. Servers are down more often than you think! etc, etc, etc. A couple of places to start:</p>

<dl>
<dt><a name="1_Check_$mech-&#62;status()_after_each_call"
>1 Check <code>$mech-&#62;status()</code> after each call</a></dt>

<dd>
<dt><a name="2_Check_the_URL_with_$mech-&#62;uri()_to_see_where_you_ended_up"
>2 Check the URL with <code>$mech-&#62;uri()</code> to see where you ended up</a></dt>

<dd>
<dt><a name="3_Try_debugging_with_LWP::Debug."
>3 Try debugging with <code>LWP::Debug</code>.</a></dt>
</dl>

<p>If things are really strange, turn on debugging with <code>use LWP::Debug qw(+);</code> Just put this in the main program. This causes LWP to print out a trace of the HTTP traffic between client and server and can be used to figure out what is happening at the protocol level.</p>

<p>It is also useful to set many traps to verify that processing is proceeding as expected. A Mech program should always have an &#34;I didn&#39;t expect to get here&#34; or &#34;I don&#39;t recognize the page that I am processing&#34; case and bail out.</p>

<p>Since errors can be transient, by the time you notice that the error has occurred, it might not be possible to reproduce it manually. So for automated processing it is useful to email yourself the following information:</p>

<ul>
<li>where processing is taking place</li>

<li>An Error Message</li>

<li>$mech-&#62;uri</li>

<li>$mech-&#62;content</li>
</ul>

<p>You can also save the content of the page with <code>$mech-&#62;save_content( &#39;filename.html&#39; );</code></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="I_submitted_a_form,_but_the_server_ignored_everything!_I_got_an_empty_form_back!"
>I submitted a form, but the server ignored everything! I got an empty form back!</a></h2>

<p>The post is handled by application software. It is common for PHP programmers to use the same file both to display a form and to process the arguments returned. So the first task of the application programmer is to decide whether there are arguments to processes. The program can check whether a particular parameter has been set, whether a hidden parameter has been set, or whether the submit button has been clicked. (There are probably other ways that I haven&#39;t thought of).</p>

<p>In any case, if your form is not setting the parameter (e.g. the submit button) which the web application is keying on (and as an outsider there is no way to know what it is keying on), it will not notice that the form has been submitted. Try using <code>$mech-&#62;click()</code> instead of <code>$mech-&#62;submit()</code> or vice-versa.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="I&#39;ve_logged_in_to_the_server,_but_I_get_500_errors_when_I_try_to_get_to_protected_content."
>I&#39;ve logged in to the server, but I get 500 errors when I try to get to protected content.</a></h2>

<p>Some web sites use distributed databases for their processing. It can take a few seconds for the login/session information to percolate through to all the servers. For human users with their slow reaction times, this is not a problem, but a Perl script can outrun the server. So try adding a <code>sleep(5)</code> between logging in and actually doing anything (the optimal delay must be determined experimentally).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Mech_is_a_big_memory_pig!_I&#39;m_running_out_of_RAM!"
>Mech is a big memory pig! I&#39;m running out of RAM!</a></h2>

<p>Mech keeps a history of every page, and the state it was in. It actually keeps a clone of the full Mech object at every step along the way.</p>

<p>You can limit this stack size with the <code>stack_depth</code> parm in the <code>new()</code> constructor. If you set stack_size to 0, Mech will not keep any history.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Copyright 2005-2009 Andy Lester <code>&#60;andy at petdance.com&#62;</code></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
