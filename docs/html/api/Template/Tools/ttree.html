<html><head><title>Template::Tools::ttree</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:27 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#The_.ttreerc_Configuration_File'>The .ttreerc Configuration File</a>
    <li class='indexItem indexItem2'><a href='#Directory_Options'>Directory Options</a>
    <li class='indexItem indexItem2'><a href='#File_Options'>File Options</a>
    <li class='indexItem indexItem2'><a href='#Template_Dependencies'>Template Dependencies</a>
    <li class='indexItem indexItem2'><a href='#Template_Toolkit_Options'>Template Toolkit Options</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHORS'>AUTHORS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Template::Tools::ttree - Process entire directory trees of templates</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    ttree [options] [files]</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <em>ttree</em> script is used to process entire directory trees containing template files. The resulting output from processing each file is then written to a corresponding file in a destination directory. The script compares the modification times of source and destination files (where they already exist) and processes only those files that have been modified. In other words, it is the equivalent of &#39;make&#39; for the Template Toolkit.</p>

<p>It supports a number of options which can be used to configure behaviour, define locations and set Template Toolkit options. The script first reads the <em>.ttreerc</em> configuration file in the HOME directory, or an alternative file specified in the TTREERC environment variable. Then, it processes any command line arguments, including any additional configuration files specified via the <code>-f</code> (file) option.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_.ttreerc_Configuration_File"
>The <em>.ttreerc</em> Configuration File</a></h2>

<p>When you run <em>ttree</em> for the first time it will ask you if you want it to create a <em>.ttreerc</em> file for you. This will be created in your home directory.</p>

<pre>    $ ttree
    Do you want me to create a sample &#39;.ttreerc&#39; file for you?
    (file: /home/abw/.ttreerc)   [y/n]: y
    /home/abw/.ttreerc created.  Please edit accordingly and re-run ttree</pre>

<p>The purpose of this file is to set any <i>global</i> configuration options that you want applied <i>every</i> time <em>ttree</em> is run. For example, you can use the <code>ignore</code> and <code>copy</code> option to provide regular expressions that specify which files should be ignored and which should be copied rather than being processed as templates. You may also want to set flags like <code>verbose</code> and <code>recurse</code> according to your preference.</p>

<p>A minimal <em>.ttreerc</em>:</p>

<pre>    # ignore these files
    ignore = \b(CVS|RCS)\b
    ignore = ^#
    ignore = ~$

    # copy these files
    copy   = \.(gif|png|jpg|pdf)$ 

    # recurse into directories
    recurse

    # provide info about what&#39;s going on
    verbose</pre>

<p>In most cases, you&#39;ll want to create a different <em>ttree</em> configuration file for each project you&#39;re working on. The <code>cfg</code> option allows you to specify a directory where <em>ttree</em> can find further configuration files.</p>

<pre>    cfg = /home/abw/.ttree</pre>

<p>The <code>-f</code> command line option can be used to specify which configuration file should be used. You can specify a filename using an absolute or relative path:</p>

<pre>    $ ttree -f /home/abw/web/example/etc/ttree.cfg
    $ ttree -f ./etc/ttree.cfg
    $ ttree -f ../etc/ttree.cfg</pre>

<p>If the configuration file does not begin with <code>/</code> or <code>.</code> or something that looks like a MS-DOS absolute path (e.g. <code>C:\\etc\\ttree.cfg</code>) then <em>ttree</em> will look for it in the directory specified by the <code>cfg</code> option.</p>

<pre>    $ ttree -f test1          # /home/abw/.ttree/test1</pre>

<p>The <code>cfg</code> option can only be used in the <em>.ttreerc</em> file. All the other options can be used in the <em>.ttreerc</em> or any other <em>ttree</em> configuration file. They can all also be specified as command line options.</p>

<p>Remember that <em>.ttreerc</em> is always processed <i>before</i> any configuration file specified with the <code>-f</code> option. Certain options like <code>lib</code> can be used any number of times and accumulate their values.</p>

<p>For example, consider the following configuration files:</p>

<p><em>/home/abw/.ttreerc</em>:</p>

<pre>    cfg = /home/abw/.ttree
    lib = /usr/local/tt2/templates</pre>

<p><em>/home/abw/.ttree/myconfig</em>:</p>

<pre>    lib = /home/abw/web/example/templates/lib</pre>

<p>When <em>ttree</em> is invoked as follows:</p>

<pre>    $ ttree -f myconfig</pre>

<p>the <code>lib</code> option will be set to the following directories:</p>

<pre>    /usr/local/tt2/templates
    /home/abw/web/example/templates/lib</pre>

<p>Any templates located under <em>/usr/local/tt2/templates</em> will be used in preference to those located under <em>/home/abw/web/example/templates/lib</em>. This may be what you want, but then again, it might not. For this reason, it is good practice to keep the <em>.ttreerc</em> as simple as possible and use different configuration files for each <em>ttree</em> project.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Directory_Options"
>Directory Options</a></h2>

<p>The <code>src</code> option is used to define the directory containing the source templates to be processed. It can be provided as a command line option or in a configuration file as shown here:</p>

<pre>    src = /home/abw/web/example/templates/src</pre>

<p>Each template in this directory typically corresponds to a single web page or other document.</p>

<p>The <code>dest</code> option is used to specify the destination directory for the generated output.</p>

<pre>    dest = /home/abw/web/example/html</pre>

<p>The <code>lib</code> option is used to define one or more directories containing additional library templates. These templates are not documents in their own right and typically comprise of smaller, modular components like headers, footers and menus that are incorporated into pages templates.</p>

<pre>    lib = /home/abw/web/example/templates/lib
    lib = /usr/local/tt2/templates</pre>

<p>The <code>lib</code> option can be used repeatedly to add further directories to the search path.</p>

<p>A list of templates can be passed to <em>ttree</em> as command line arguments.</p>

<pre>    $ ttree foo.html bar.html</pre>

<p>It looks for these templates in the <code>src</code> directory and processes them through the Template Toolkit, using any additional template components from the <code>lib</code> directories. The generated output is then written to the corresponding file in the <code>dest</code> directory.</p>

<p>If <em>ttree</em> is invoked without explicitly specifying any templates to be processed then it will process every file in the <code>src</code> directory. If the <code>-r</code> (recurse) option is set then it will additionally iterate down through sub-directories and process and other template files it finds therein.</p>

<pre>    $ ttree -r</pre>

<p>If a template has been processed previously, <em>ttree</em> will compare the modification times of the source and destination files. If the source template (or one it is dependant on) has not been modified more recently than the generated output file then <em>ttree</em> will not process it. The <em>-a</em> (all) option can be used to force <em>ttree</em> to process all files regardless of modification time.</p>

<pre>    $ tree -a</pre>

<p>Any templates explicitly named as command line argument are always processed and the modification time checking is bypassed.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="File_Options"
>File Options</a></h2>

<p>The <code>ignore</code>, <code>copy</code> and <code>accept</code> options are used to specify Perl regexen to filter file names. Files that match any of the <code>ignore</code> options will not be processed. Remaining files that match any of the <code>copy</code> regexen will be copied to the destination directory. Remaining files that then match any of the <code>accept</code> criteria are then processed via the Template Toolkit. If no <code>accept</code> parameter is specified then all files will be accepted for processing if not already copied or ignored.</p>

<pre>    # ignore these files
    ignore = \b(CVS|RCS)\b
    ignore = ^#
    ignore = ~$

    # copy these files
    copy   = \.(gif|png|jpg|pdf)$ 

    # accept only .tt2 templates
    accept = \.tt2$</pre>

<p>The <code>suffix</code> option is used to define mappings between the file extensions for source templates and the generated output files. The following example specifies that source templates with a <code>.tt2</code> suffix should be output as <code>.html</code> files:</p>

<pre>    suffix tt2=html</pre>

<p>Or on the command line,</p>

<pre>    --suffix tt2=html</pre>

<p>You can provide any number of different suffix mappings by repeating this option.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Template_Dependencies"
>Template Dependencies</a></h2>

<p>The <code>depend</code> and <code>depend_file</code> options allow you to specify how any given template file depends on another file or group of files. The <code>depend</code> option is used to express a single dependency.</p>

<pre>  $ ttree --depend foo=bar,baz</pre>

<p>This command line example shows the <code>--depend</code> option being used to specify that the <em>foo</em> file is dependant on the <em>bar</em> and <em>baz</em> templates. This option can be used many time on the command line:</p>

<pre>  $ ttree --depend foo=bar,baz --depend crash=bang,wallop</pre>

<p>or in a configuration file:</p>

<pre>  depend foo=bar,baz
  depend crash=bang,wallop</pre>

<p>The file appearing on the left of the <code>=</code> is specified relative to the <code>src</code> or <code>lib</code> directories. The file(s) appearing on the right can be specified relative to any of these directories or as absolute file paths.</p>

<p>For example:</p>

<pre>  $ ttree --depend foo=bar,/tmp/baz</pre>

<p>To define a dependency that applies to all files, use <code>*</code> on the left of the <code>=</code>.</p>

<pre>  $ ttree --depend *=header,footer</pre>

<p>or in a configuration file:</p>

<pre>  depend *=header,footer</pre>

<p>Any templates that are defined in the <code>pre_process</code>, <code>post_process</code>, <code>process</code> or <code>wrapper</code> options will automatically be added to the list of global dependencies that apply to all templates.</p>

<p>The <code>depend_file</code> option can be used to specify a file that contains dependency information.</p>

<pre>    $ ttree --depend_file=/home/abw/web/example/etc/ttree.dep</pre>

<p>Here is an example of a dependency file:</p>

<pre>   # This is a comment. It is ignored.
  
   index.html: header footer menubar 
  
   header: titlebar hotlinks
  
   menubar: menuitem
  
   # spanning multiple lines with the backslash
   another.html: header footer menubar \
   sidebar searchform</pre>

<p>Lines beginning with the <code>#</code> character are comments and are ignored. Blank lines are also ignored. All other lines should provide a filename followed by a colon and then a list of dependant files separated by whitespace, commas or both. Whitespace around the colon is also optional. Lines ending in the <code>\</code> character are continued onto the following line.</p>

<p>Files that contain spaces can be quoted. That is only necessary for files after the colon (&#39;:&#39;). The file before the colon may be quoted if it contains a colon.</p>

<p>As with the command line options, the <code>*</code> character can be used as a wildcard to specify a dependency for all templates.</p>

<pre>    * : config,header</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Template_Toolkit_Options"
>Template Toolkit Options</a></h2>

<p><em>ttree</em> also provides access to the usual range of Template Toolkit options. For example, the <code>--pre_chomp</code> and <code>--post_chomp</code> <em>ttree</em> options correspond to the <code>PRE_CHOMP</code> and <code>POST_CHOMP</code> options.</p>

<p>Run <code>ttree -h</code> for a summary of the options available.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS"
>AUTHORS</a></h1>

<p>Andy Wardley &#60;abw@wardley.org&#62;</p>

<p><a href="http://www.wardley.org" class="podlinkurl"
>http://www.wardley.org</a></p>

<p>With contributions from Dylan William Hardison (support for dependencies), Bryce Harrington (<code>absolute</code> and <code>relative</code> options), Mark Anderson (<code>suffix</code> and <code>debug</code> options), Harald Joerg and Leon Brocard who gets everywhere, it seems.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (C) 1996-2007 Andy Wardley. All Rights Reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../tpage.html" class="podlinkpod"
>Template::Tools::tpage</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
