<html><head><title>Template::Context</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:27 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new(%5C%25params)'>new(\%params)</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#VARIABLES'>VARIABLES</a>
      <li class='indexItem indexItem3'><a href='#BLOCKS'>BLOCKS</a>
      <li class='indexItem indexItem3'><a href='#VIEWS'>VIEWS</a>
      <li class='indexItem indexItem3'><a href='#TRIM'>TRIM</a>
      <li class='indexItem indexItem3'><a href='#EVAL_PERL'>EVAL_PERL</a>
      <li class='indexItem indexItem3'><a href='#RECURSION'>RECURSION</a>
      <li class='indexItem indexItem3'><a href='#LOAD_TEMPLATES'>LOAD_TEMPLATES</a>
      <li class='indexItem indexItem3'><a href='#LOAD_PLUGINS'>LOAD_PLUGINS</a>
      <li class='indexItem indexItem3'><a href='#LOAD_FILTERS'>LOAD_FILTERS</a>
      <li class='indexItem indexItem3'><a href='#STASH'>STASH</a>
      <li class='indexItem indexItem3'><a href='#DEBUG'>DEBUG</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#template(%24name)'>template($name)</a>
    <li class='indexItem indexItem2'><a href='#plugin(%24name%2C_%5C%40args)'>plugin($name, \@args)</a>
    <li class='indexItem indexItem2'><a href='#filter(%24name%2C_%5C%40args%2C_%24alias)'>filter($name, \@args, $alias)</a>
    <li class='indexItem indexItem2'><a href='#process(%24template%2C_%5C%25vars)'>process($template, \%vars)</a>
    <li class='indexItem indexItem2'><a href='#include(%24template%2C_%5C%25vars)'>include($template, \%vars)</a>
    <li class='indexItem indexItem2'><a href='#insert(%24template)'>insert($template)</a>
    <li class='indexItem indexItem2'><a href='#throw(%24error_type%2C_%24error_message%2C_%5C%24output)'>throw($error_type, $error_message, \$output)</a>
    <li class='indexItem indexItem2'><a href='#catch(%24exception%2C_%5C%24output)'>catch($exception, \$output)</a>
    <li class='indexItem indexItem2'><a href='#define_block(%24name%2C_%24block)'>define_block($name, $block)</a>
    <li class='indexItem indexItem2'><a href='#define_filter(%24name%2C_%5C%26filter%2C_%24is_dynamic)'>define_filter($name, \&#38;filter, $is_dynamic)</a>
    <li class='indexItem indexItem2'><a href='#define_vmethod(%24type%2C_%24name%2C_%24code)'>define_vmethod($type, $name, $code)</a>
    <li class='indexItem indexItem2'><a href='#define_view(%24name%2C_%5C%25params)'>define_view($name, \%params)</a>
    <li class='indexItem indexItem2'><a href='#define_views(%24views)'>define_views($views)</a>
    <li class='indexItem indexItem2'><a href='#stash()'>stash()</a>
    <li class='indexItem indexItem2'><a href='#localise(%5C%25vars)'>localise(\%vars)</a>
    <li class='indexItem indexItem2'><a href='#delocalise()'>delocalise()</a>
    <li class='indexItem indexItem2'><a href='#visit(%5C%25blocks)'>visit(\%blocks)</a>
    <li class='indexItem indexItem2'><a href='#leave()'>leave()</a>
    <li class='indexItem indexItem2'><a href='#view()'>view()</a>
    <li class='indexItem indexItem2'><a href='#reset()'>reset()</a>
    <li class='indexItem indexItem2'><a href='#debugging(%24flag%2C_%40args)'>debugging($flag, @args)</a>
    <li class='indexItem indexItem2'><a href='#AUTOLOAD'>AUTOLOAD</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Template::Context - Runtime context in which templates are processed</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use Template::Context;
    
    # constructor
    $context = Template::Context-&#62;new(\%config)
        || die $Template::Context::ERROR;
    
    # fetch (load and compile) a template
    $template = $context-&#62;template($template_name);
    
    # fetch (load and instantiate) a plugin object
    $plugin = $context-&#62;plugin($name, \@args);
    
    # fetch (return or create) a filter subroutine
    $filter = $context-&#62;filter($name, \@args, $alias);
    
    # process/include a template, errors are thrown via die()
    $output = $context-&#62;process($template, \%vars);
    $output = $context-&#62;include($template, \%vars);
    
    # raise an exception via die()
    $context-&#62;throw($error_type, $error_message, \$output_buffer);
    
    # catch an exception, clean it up and fix output buffer
    $exception = $context-&#62;catch($exception, \$output_buffer);
    
    # save/restore the stash to effect variable localisation
    $new_stash = $context-&#62;localise(\%vars);
    $old_stash = $context-&#62;delocalise();
    
    # add new BLOCK or FILTER definitions
    $context-&#62;define_block($name, $block);
    $context-&#62;define_filter($name, \&#38;filtersub, $is_dynamic);
    
    # reset context, clearing any imported BLOCK definitions
    $context-&#62;reset();
    
    # methods for accessing internal items
    $stash     = $context-&#62;stash();
    $tflag     = $context-&#62;trim();
    $epflag    = $context-&#62;eval_perl();
    $providers = $context-&#62;templates();
    $providers = $context-&#62;plugins();
    $providers = $context-&#62;filters();
    ...</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <code>Template::Context</code> module defines an object class for representing a runtime context in which templates are processed. It provides an interface to the fundamental operations of the Template Toolkit processing engine through which compiled templates (i.e. Perl code constructed from the template source) can process templates, load plugins and filters, raise exceptions and so on.</p>

<p>A default <code>Template::Context</code> object is created by the <a href="../Template.html" class="podlinkpod"
>Template</a> module. Any <code>Template::Context</code> options may be passed to the <a href="../Template.html" class="podlinkpod"
>Template</a> <a href="../Template%23new().html" class="podlinkpod"
>new()</a> constructor method and will be forwarded to the <code>Template::Context</code> constructor.</p>

<pre>    use Template;
    
    my $template = Template-&#62;new({
        TRIM      =&#62; 1,
        EVAL_PERL =&#62; 1,
        BLOCKS    =&#62; {
            header =&#62; &#39;This is the header&#39;,
            footer =&#62; &#39;This is the footer&#39;,
        },
    });</pre>

<p>Similarly, the <code>Template::Context</code> constructor will forward all configuration parameters onto other default objects (e.g. <a href="../Template/Provider.html" class="podlinkpod"
>Template::Provider</a>, <a href="../Template/Plugins.html" class="podlinkpod"
>Template::Plugins</a>, <a href="../Template/Filters.html" class="podlinkpod"
>Template::Filters</a>, etc.) that it may need to instantiate.</p>

<pre>    $context = Template::Context-&#62;new({
        INCLUDE_PATH =&#62; &#39;/home/abw/templates&#39;, # provider option
        TAG_STYLE    =&#62; &#39;html&#39;,                # parser option
    });</pre>

<p>A <code>Template::Context</code> object (or subclass) can be explicitly instantiated and passed to the <a href="../Template.html" class="podlinkpod"
>Template</a> <a href="../Template%23new().html" class="podlinkpod"
>new()</a> constructor method as the <code>CONTEXT</code> configuration item.</p>

<pre>    use Template;
    use Template::Context;
    
    my $context  = Template::Context-&#62;new({ TRIM =&#62; 1 });
    my $template = Template-&#62;new({ CONTEXT =&#62; $context });</pre>

<p>The <a href="../Template.html" class="podlinkpod"
>Template</a> module uses the <a href="../Template/Config.html" class="podlinkpod"
>Template::Config</a> <a href="../Template/Config%23context().html" class="podlinkpod"
>context()</a> factory method to create a default context object when required. The <code>$Template::Config::CONTEXT</code> package variable may be set to specify an alternate context module. This will be loaded automatically and its <a href="../new().html" class="podlinkpod"
>new()</a> constructor method called by the <a href="../Template/Config%23context().html" class="podlinkpod"
>context()</a> factory method when a default context object is required.</p>

<pre>    use Template;
    
    $Template::Config::CONTEXT = &#39;MyOrg::Template::Context&#39;;
    
    my $template = Template-&#62;new({
        EVAL_PERL   =&#62; 1,
        EXTRA_MAGIC =&#62; &#39;red hot&#39;,  # your extra config items
        ...
    });</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new(\%params)"
>new(\%params)</a></h2>

<p>The <code>new()</code> constructor method is called to instantiate a <code>Template::Context</code> object. Configuration parameters may be specified as a HASH reference or as a list of <code>name =&#62; value</code> pairs.</p>

<pre>    my $context = Template::Context-&#62;new({
        INCLUDE_PATH =&#62; &#39;header&#39;,
        POST_PROCESS =&#62; &#39;footer&#39;,
    });
    
    my $context = Template::Context-&#62;new( EVAL_PERL =&#62; 1 );</pre>

<p>The <code>new()</code> method returns a <code>Template::Context</code> object or <code>undef</code> on error. In the latter case, a relevant error message can be retrieved by the <a href="../Template/Base%23error().html" class="podlinkpod"
>error()</a> class method or directly from the <code>$Template::Context::ERROR</code> package variable.</p>

<pre>    my $context = Template::Context-&#62;new(\%config)
        || die Template::Context-&#62;error();
    
    my $context = Template::Context-&#62;new(\%config)
        || die $Template::Context::ERROR;</pre>

<p>The following configuration items may be specified. Please see <a href="../Template/Manual/Config.html" class="podlinkpod"
>Template::Manual::Config</a> for further details.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="VARIABLES"
>VARIABLES</a></h3>

<p>The <a href="../Template/Manual/Config%23VARIABLES.html" class="podlinkpod"
>VARIABLES</a> option can be used to specify a hash array of template variables.</p>

<pre>    my $context = Template::Context-&#62;new({
        VARIABLES =&#62; {
            title   =&#62; &#39;A Demo Page&#39;,
            author  =&#62; &#39;Joe Random Hacker&#39;,
            version =&#62; 3.14,
        },
    };</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="BLOCKS"
>BLOCKS</a></h3>

<p>The <a href="../Template/Manual/Config%23BLOCKS.html" class="podlinkpod"
>BLOCKS</a> option can be used to pre-define a default set of template blocks.</p>

<pre>    my $context = Template::Context-&#62;new({
        BLOCKS =&#62; {
            header  =&#62; &#39;The Header.  [% title %]&#39;,
            footer  =&#62; sub { return $some_output_text },
            another =&#62; Template::Document-&#62;new({ ... }),
        },
    }); </pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="VIEWS"
>VIEWS</a></h3>

<p>The <a href="../Template/Manual/Config%23VIEWS.html" class="podlinkpod"
>VIEWS</a> option can be used to pre-define one or more <a href="../Template/View.html" class="podlinkpod"
>Template::View</a> objects.</p>

<pre>    my $context = Template::Context-&#62;new({
        VIEWS =&#62; [
            bottom =&#62; { prefix =&#62; &#39;bottom/&#39; },
            middle =&#62; { prefix =&#62; &#39;middle/&#39;, base =&#62; &#39;bottom&#39; },
            top    =&#62; { prefix =&#62; &#39;top/&#39;,    base =&#62; &#39;middle&#39; },
        ],
    });</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="TRIM"
>TRIM</a></h3>

<p>The <a href="../Template/Manual/Config%23TRIM.html" class="podlinkpod"
>TRIM</a> option can be set to have any leading and trailing whitespace automatically removed from the output of all template files and <code>BLOCK</code>s.</p>

<p>example:</p>

<pre>    [% BLOCK foo %]
    
    Line 1 of foo
    
    [% END %]
    
    before 
    [% INCLUDE foo %]
    after</pre>

<p>output:</p>

<pre>    before
    Line 1 of foo
    after</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="EVAL_PERL"
>EVAL_PERL</a></h3>

<p>The <a href="../Template/Manual/Config%23EVAL_PERL.html" class="podlinkpod"
>EVAL_PERL</a> is used to indicate if <code>PERL</code> and/or <code>RAWPERL</code> blocks should be evaluated. It is disabled by default.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="RECURSION"
>RECURSION</a></h3>

<p>The <a href="../Template/Manual/Config%23RECURSION.html" class="podlinkpod"
>RECURSION</a> can be set to allow templates to recursively process themselves, either directly (e.g. template <code>foo</code> calls <code>INCLUDE foo</code>) or indirectly (e.g. <code>foo</code> calls <code>INCLUDE bar</code> which calls <code>INCLUDE foo</code>).</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="LOAD_TEMPLATES"
>LOAD_TEMPLATES</a></h3>

<p>The <a href="../Template/Manual/Config%23LOAD_TEMPLATES.html" class="podlinkpod"
>LOAD_TEMPLATES</a> option can be used to provide a reference to a list of <a href="../Template/Provider.html" class="podlinkpod"
>Template::Provider</a> objects or sub-classes thereof which will take responsibility for loading and compiling templates.</p>

<pre>    my $context = Template::Context-&#62;new({
        LOAD_TEMPLATES =&#62; [
            MyOrg::Template::Provider-&#62;new({ ... }),
            Template::Provider-&#62;new({ ... }),
        ],
    });</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="LOAD_PLUGINS"
>LOAD_PLUGINS</a></h3>

<p>The <a href="../Template/Manual/Config%23LOAD_PLUGINS.html" class="podlinkpod"
>LOAD_PLUGINS</a> options can be used to specify a list of provider objects responsible for loading and instantiating template plugin objects.</p>

<pre>    my $context = Template::Context-&#62;new({
        LOAD_PLUGINS =&#62; [
            MyOrg::Template::Plugins-&#62;new({ ... }),
            Template::Plugins-&#62;new({ ... }),
        ],
    });</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="LOAD_FILTERS"
>LOAD_FILTERS</a></h3>

<p>The <a href="../Template/Manual/Config%23LOAD_FILTERS.html" class="podlinkpod"
>LOAD_FILTERS</a> option can be used to specify a list of provider objects for returning and/or creating filter subroutines.</p>

<pre>    my $context = Template::Context-&#62;new({
        LOAD_FILTERS =&#62; [
            MyTemplate::Filters-&#62;new(),
            Template::Filters-&#62;new(),
        ],
    });</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="STASH"
>STASH</a></h3>

<p>The <a href="../Template/Manual/Config%23STASH.html" class="podlinkpod"
>STASH</a> option can be used to specify a <a href="../Template/Stash.html" class="podlinkpod"
>Template::Stash</a> object or sub-class which will take responsibility for managing template variables.</p>

<pre>    my $stash = MyOrg::Template::Stash-&#62;new({ ... });
    my $context = Template::Context-&#62;new({
        STASH =&#62; $stash,
    });</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="DEBUG"
>DEBUG</a></h3>

<p>The <a href="../Template/Manual/Config%23DEBUG.html" class="podlinkpod"
>DEBUG</a> option can be used to enable various debugging features of the <a href="../Template/Context.html" class="podlinkpod"
>Template::Context</a> module.</p>

<pre>    use Template::Constants qw( :debug );
    
    my $template = Template-&#62;new({
        DEBUG =&#62; DEBUG_CONTEXT | DEBUG_DIRS,
    });</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="template($name)"
>template($name)</a></h2>

<p>Returns a compiled template by querying each of the <a href="../LOAD_TEMPLATES.html" class="podlinkpod"
>LOAD_TEMPLATES</a> providers (instances of <a href="../Template/Provider.html" class="podlinkpod"
>Template::Provider</a>, or sub-class) in turn.</p>

<pre>    $template = $context-&#62;template(&#39;header&#39;);</pre>

<p>On error, a <a href="../Template/Exception.html" class="podlinkpod"
>Template::Exception</a> object of type &#39;<code>file</code>&#39; is thrown via <code>die()</code>. This can be caught by enclosing the call to <code>template()</code> in an <code>eval</code> block and examining <code>$@</code>.</p>

<pre>    eval { $template = $context-&#62;template(&#39;header&#39;) };
    if ($@) {
        print &#34;failed to fetch template: $@\n&#34;;
    }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="plugin($name,_\@args)"
>plugin($name, \@args)</a></h2>

<p>Instantiates a plugin object by querying each of the <a href="../LOAD_PLUGINS.html" class="podlinkpod"
>LOAD_PLUGINS</a> providers. The default <a href="../LOAD_PLUGINS.html" class="podlinkpod"
>LOAD_PLUGINS</a> provider is a <a href="../Template/Plugins.html" class="podlinkpod"
>Template::Plugins</a> object which attempts to load plugin modules, according the various configuration items such as <a href="../Template/Plugins%23PLUGIN_BASE.html" class="podlinkpod"
>PLUGIN_BASE</a>, <a href="../Template/Plugins%23LOAD_PERL.html" class="podlinkpod"
>LOAD_PERL</a>, etc., and then instantiate an object via <a href="../Template/Plugin%23new().html" class="podlinkpod"
>new()</a>. A reference to a list of constructor arguments may be passed as the second parameter. These are forwarded to the plugin constructor.</p>

<p>Returns a reference to a plugin (which is generally an object, but doesn&#39;t have to be). Errors are thrown as <a href="../Template/Exception.html" class="podlinkpod"
>Template::Exception</a> objects with the type set to &#39;<code>plugin</code>&#39;.</p>

<pre>    $plugin = $context-&#62;plugin(&#39;DBI&#39;, &#39;dbi:msql:mydbname&#39;);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="filter($name,_\@args,_$alias)"
>filter($name, \@args, $alias)</a></h2>

<p>Instantiates a filter subroutine by querying the <a href="../LOAD_FILTERS.html" class="podlinkpod"
>LOAD_FILTERS</a> providers. The default <a href="../LOAD_FILTERS.html" class="podlinkpod"
>LOAD_FILTERS</a> provider is a <a href="../Template/Filters.html" class="podlinkpod"
>Template::Filters</a> object.</p>

<p>Additional arguments may be passed by list reference along with an optional alias under which the filter will be cached for subsequent use. The filter is cached under its own <code>$name</code> if <code>$alias</code> is undefined. Subsequent calls to <code>filter($name)</code> will return the cached entry, if defined. Specifying arguments bypasses the caching mechanism and always creates a new filter. Errors are thrown as <a href="../Template/Exception.html" class="podlinkpod"
>Template::Exception</a> objects with the type set to &#39;<code>filter</code>&#39;.</p>

<pre>    # static filter (no args)
    $filter = $context-&#62;filter(&#39;html&#39;);
    
    # dynamic filter (args) aliased to &#39;padright&#39;
    $filter = $context-&#62;filter(&#39;format&#39;, &#39;%60s&#39;, &#39;padright&#39;);
    
    # retrieve previous filter via &#39;padright&#39; alias
    $filter = $context-&#62;filter(&#39;padright&#39;);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="process($template,_\%vars)"
>process($template, \%vars)</a></h2>

<p>Processes a template named or referenced by the first parameter and returns the output generated. An optional reference to a hash array may be passed as the second parameter, containing variable definitions which will be set before the template is processed. The template is processed in the current context, with no localisation of variables performed. Errors are thrown as <a href="../Template/Exception.html" class="podlinkpod"
>Template::Exception</a> objects via <code>die()</code>.</p>

<pre>    $output = $context-&#62;process(&#39;header&#39;, { title =&#62; &#39;Hello World&#39; });</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="include($template,_\%vars)"
>include($template, \%vars)</a></h2>

<p>Similar to <a href="../process().html" class="podlinkpod"
>process()</a>, but using localised variables. Changes made to any variables will only persist until the <code>include()</code> method completes.</p>

<pre>    $output = $context-&#62;include(&#39;header&#39;, { title =&#62; &#39;Hello World&#39; });</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="insert($template)"
>insert($template)</a></h2>

<p>This method returns the source content of a template file without performing any evaluation. It is used to implement the <code>INSERT</code> directive.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="throw($error_type,_$error_message,_\$output)"
>throw($error_type, $error_message, \$output)</a></h2>

<p>Raises an exception in the form of a <a href="../Template/Exception.html" class="podlinkpod"
>Template::Exception</a> object by calling <code>die()</code>. This method may be passed a reference to an existing <a href="../Template/Exception.html" class="podlinkpod"
>Template::Exception</a> object; a single value containing an error message which is used to instantiate a <a href="../Template/Exception.html" class="podlinkpod"
>Template::Exception</a> of type &#39;<code>undef</code>&#39;; or a pair of values representing the exception <code>type</code> and <code>info</code> from which a <a href="../Template/Exception.html" class="podlinkpod"
>Template::Exception</a> object is instantiated. e.g.</p>

<pre>    $context-&#62;throw($exception);
    $context-&#62;throw(&#34;I&#39;m sorry Dave, I can&#39;t do that&#34;);
    $context-&#62;throw(&#39;denied&#39;, &#34;I&#39;m sorry Dave, I can&#39;t do that&#34;);</pre>

<p>The optional third parameter may be a reference to the current output buffer. This is then stored in the exception object when created, allowing the catcher to examine and use the output up to the point at which the exception was raised.</p>

<pre>    $output .= &#39;blah blah blah&#39;;
    $output .= &#39;more rhubarb&#39;;
    $context-&#62;throw(&#39;yack&#39;, &#39;Too much yacking&#39;, \$output);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="catch($exception,_\$output)"
>catch($exception, \$output)</a></h2>

<p>Catches an exception thrown, either as a reference to a <a href="../Template/Exception.html" class="podlinkpod"
>Template::Exception</a> object or some other value. In the latter case, the error string is promoted to a <a href="../Template/Exception.html" class="podlinkpod"
>Template::Exception</a> object of &#39;<code>undef</code>&#39; type. This method also accepts a reference to the current output buffer which is passed to the <a href="../Template/Exception.html" class="podlinkpod"
>Template::Exception</a> constructor, or is appended to the output buffer stored in an existing <a href="../Template/Exception.html" class="podlinkpod"
>Template::Exception</a> object, if unique (i.e. not the same reference). By this process, the correct state of the output buffer can be reconstructed for simple or nested throws.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="define_block($name,_$block)"
>define_block($name, $block)</a></h2>

<p>Adds a new block definition to the internal <a href="../BLOCKS.html" class="podlinkpod"
>BLOCKS</a> cache. The first argument should contain the name of the block and the second a reference to a <a href="../Template/Document.html" class="podlinkpod"
>Template::Document</a> object or template sub-routine, or template text which is automatically compiled into a template sub-routine.</p>

<p>Returns a true value (the sub-routine or <a href="../Template/Document.html" class="podlinkpod"
>Template::Document</a> reference) on success or undef on failure. The relevant error message can be retrieved by calling the <a href="../Template/Base%23error().html" class="podlinkpod"
>error()</a> method.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="define_filter($name,_\&#38;filter,_$is_dynamic)"
>define_filter($name, \&#38;filter, $is_dynamic)</a></h2>

<p>Adds a new filter definition by calling the <a href="../Template/Filters%23store().html" class="podlinkpod"
>store()</a> method on each of the <a href="../LOAD_FILTERS.html" class="podlinkpod"
>LOAD_FILTERS</a> providers until accepted (in the usual case, this is accepted straight away by the one and only <a href="../Template/Filters.html" class="podlinkpod"
>Template::Filters</a> provider). The first argument should contain the name of the filter and the second a reference to a filter subroutine. The optional third argument can be set to any true value to indicate that the subroutine is a dynamic filter factory.</p>

<p>Returns a true value or throws a &#39;<code>filter</code>&#39; exception on error.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="define_vmethod($type,_$name,_$code)"
>define_vmethod($type, $name, $code)</a></h2>

<p>This method is a wrapper around the <a href="../Template/Stash.html" class="podlinkpod"
>Template::Stash</a> <a href="../Template/Stash%23define_vmethod().html" class="podlinkpod"
>define_vmethod()</a> method. It can be used to define new virtual methods.</p>

<pre>    # define a new scalar (item) virtual method
    $context-&#62;define_vmethod(
        item =&#62; ucfirst =&#62; sub {
            my $text = shift;
            return ucfirst $text;
        }
    )</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="define_view($name,_\%params)"
>define_view($name, \%params)</a></h2>

<p>This method allows you to define a named <a href="../Template/View.html" class="podlinkpod"
>view</a>.</p>

<pre>    $context-&#62;define_view( 
        my_view =&#62; { 
            prefix =&#62; &#39;my_templates/&#39; 
        } 
    );</pre>

<p>The view is then accessible as a template variable.</p>

<pre>    [% my_view.print(some_data) %]</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="define_views($views)"
>define_views($views)</a></h2>

<p>This method allows you to define multiple named <a href="../Template/View.html" class="podlinkpod"
>views</a>. A reference to a hash array or list reference should be passed as an argument.</p>

<pre>    $context-&#62;define_view({     # hash reference
        my_view_one =&#62; { 
            prefix =&#62; &#39;my_templates_one/&#39; 
        },
        my_view_two =&#62; { 
            prefix =&#62; &#39;my_templates_two/&#39; 
        } 
    });</pre>

<p>If you&#39;re defining multiple views of which one or more are based on other views in the same definition then you should pass them as a list reference. This ensures that they get created in the right order (Perl does not preserve the order of items defined in a hash reference so you can&#39;t guarantee that your base class view will be defined before your subclass view).</p>

<pre>    $context-&#62;define_view([     # list referenence
        my_view_one =&#62; {
            prefix =&#62; &#39;my_templates_one/&#39; 
        },
        my_view_two =&#62; { 
            prefix =&#62; &#39;my_templates_two/&#39; ,
            base   =&#62; &#39;my_view_one&#39;,
        } 
    ]);</pre>

<p>The views are then accessible as template variables.</p>

<pre>    [% my_view_one.print(some_data) %]
    [% my_view_two.print(some_data) %]</pre>

<p>See also the <a href="../VIEWS.html" class="podlinkpod"
>VIEWS</a> option.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="stash()"
>stash()</a></h2>

<p>This method returns the <a href="../Template/Stash.html" class="podlinkpod"
>Template::Stash</a> object used internally to manage template variables.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="localise(\%vars)"
>localise(\%vars)</a></h2>

<p>Clones the stash to create a context with localised variables. Returns a reference to the newly cloned stash object which is also stored internally.</p>

<pre>    $stash = $context-&#62;localise();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="delocalise()"
>delocalise()</a></h2>

<p>Restore the stash to its state prior to localisation.</p>

<pre>    $stash = $context-&#62;delocalise();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="visit(\%blocks)"
>visit(\%blocks)</a></h2>

<p>This method is called by <a href="../Template/Document.html" class="podlinkpod"
>Template::Document</a> objects immediately before they process their content. It is called to register any local <code>BLOCK</code> definitions with the context object so that they may be subsequently delivered on request.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="leave()"
>leave()</a></h2>

<p>Compliment to the <a href="../visit().html" class="podlinkpod"
>visit()</a> method. Called by <a href="../Template/Document.html" class="podlinkpod"
>Template::Document</a> objects immediately after they process their content.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="view()"
>view()</a></h2>

<p>This method creates a <a href="../Template/View.html" class="podlinkpod"
>Template::View</a> object bound to the context.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="reset()"
>reset()</a></h2>

<p>Clears the local <a href="../BLOCKS.html" class="podlinkpod"
>BLOCKS</a> cache of any <code>BLOCK</code> definitions. Any initial set of <a href="../BLOCKS.html" class="podlinkpod"
>BLOCKS</a> specified as a configuration item to the constructor will be reinstated.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="debugging($flag,_@args)"
>debugging($flag, @args)</a></h2>

<p>This method is used to control debugging output. It is used to implement the <a href="../Template/Manual/Directives%23DEBUG.html" class="podlinkpod"
>DEBUG</a> directive.</p>

<p>The first argument can be <code>on</code> or <code>off</code> to enable or disable debugging respectively. The numerical values <code>0</code> and <code>1</code> can also be used if you prefer.</p>

<pre>    $context-&#62;debugging(&#39;on&#39;);</pre>

<p>Alternately, the first argument can be <code>format</code> to define a new debug message format. The second argument should be the format string which can contain any of the <code>$file</code>, <code>$line</code> or <code>$text</code> symbols to indicate where the relevant values should be inserted.</p>

<pre>    # note single quotes to prevent interpolated of variables
    $context-&#62;debugging( format =&#62; &#39;## $file line $line: $text&#39; );</pre>

<p>The final use of this method is to generate debugging messages themselves. The first argument should be <code>msg</code>, followed by a reference to a hash array of value to insert into the debugging format string.</p>

<pre>    $context-&#62;debugging( 
        msg =&#62; {
            line =&#62; 20,
            file =&#62; &#39;example.tt&#39;,
            text =&#62; &#39;Trampoline! Trampoline!&#39;,
        }
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="AUTOLOAD"
>AUTOLOAD</a></h2>

<p>An <code>AUTOLOAD</code> method provides access to context configuration items.</p>

<pre>    $stash     = $context-&#62;stash();
    $tflag     = $context-&#62;trim();
    $epflag    = $context-&#62;eval_perl();
    ...</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Andy Wardley &#60;abw@wardley.org&#62; <a href="http://wardley.org/" class="podlinkurl"
>http://wardley.org/</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (C) 1996-2012 Andy Wardley. All Rights Reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../Template.html" class="podlinkpod"
>Template</a>, <a href="../Template/Document.html" class="podlinkpod"
>Template::Document</a>, <a href="../Template/Exception.html" class="podlinkpod"
>Template::Exception</a>, <a href="../Template/Filters.html" class="podlinkpod"
>Template::Filters</a>, <a href="../Template/Plugins.html" class="podlinkpod"
>Template::Plugins</a>, <a href="../Template/Provider.html" class="podlinkpod"
>Template::Provider</a>, <a href="../Template/Service.html" class="podlinkpod"
>Template::Service</a>, <a href="../Template/Stash.html" class="podlinkpod"
>Template::Stash</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
