<html><head><title>Template::View</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:27 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new(%24context%2C_%5C%25config)'>new($context, \%config)</a>
    <li class='indexItem indexItem2'><a href='#print(_%24obj1%2C_%24obj2%2C_..._%5C%25config)'>print( $obj1, $obj2, ... \%config)</a>
    <li class='indexItem indexItem2'><a href='#view(_%24template%2C_%5C%25vars%2C_%5C%25config_)%3B'>view( $template, \%vars, \%config );</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Template::View - customised view of a template processing context</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    # define a view
    [% VIEW view
            # some standard args
            prefix        =&#62; &#39;my_&#39;, 
            suffix        =&#62; &#39;.tt2&#39;,
            notfound      =&#62; &#39;no_such_file&#39;
            ...

            # any other data
            title         =&#62; &#39;My View title&#39;
            other_item    =&#62; &#39;Joe Random Data&#39;
            ...
    %]
       # add new data definitions, via &#39;my&#39; self reference
       [% my.author = &#34;$abw.name &#60;$abw.email&#62;&#34; %]
       [% my.copy   = &#34;&#38;copy; Copyright 2000 $my.author&#34; %]

       # define a local block
       [% BLOCK header %]
       This is the header block, title: [% title or my.title %]
       [% END %]

    [% END %]

    # access data items for view
    [% view.title %]
    [% view.other_item %]

    # access blocks directly (&#39;include_naked&#39; option, set by default)
    [% view.header %]
    [% view.header(title =&#62; &#39;New Title&#39;) %]

    # non-local templates have prefix/suffix attached
    [% view.footer %]           # =&#62; [% INCLUDE my_footer.tt2 %]

    # more verbose form of block access
    [% view.include( &#39;header&#39;, title =&#62; &#39;The Header Title&#39; ) %]
    [% view.include_header( title =&#62; &#39;The Header Title&#39; ) %]

    # very short form of above (&#39;include_naked&#39; option, set by default)
    [% view.header( title =&#62; &#39;The Header Title&#39; ) %]

    # non-local templates have prefix/suffix attached
    [% view.footer %]           # =&#62; [% INCLUDE my_footer.tt2 %]

    # fallback on the &#39;notfound&#39; template (&#39;my_no_such_file.tt2&#39;)
    # if template not found 
    [% view.include(&#39;missing&#39;) %]
    [% view.include_missing %]
    [% view.missing %]

    # print() includes a template relevant to argument type
    [% view.print(&#34;some text&#34;) %]     # type=TEXT, template=&#39;text&#39;

    [% BLOCK my_text.tt2 %]           # &#39;text&#39; with prefix/suffix
       Text: [% item %]
    [% END %]

    # now print() a hash ref, mapped to &#39;hash&#39; template
    [% view.print(some_hash_ref) %]   # type=HASH, template=&#39;hash&#39;

    [% BLOCK my_hash.tt2 %]           # &#39;hash&#39; with prefix/suffix
       hash keys: [% item.keys.sort.join(&#39;, &#39;)
    [% END %]

    # now print() a list ref, mapped to &#39;list&#39; template
    [% view.print(my_list_ref) %]     # type=ARRAY, template=&#39;list&#39;

    [% BLOCK my_list.tt2 %]           # &#39;list&#39; with prefix/suffix
       list: [% item.join(&#39;, &#39;) %]
    [% END %]

    # print() maps &#39;My::Object&#39; to &#39;My_Object&#39;
    [% view.print(myobj) %]

    [% BLOCK my_My_Object.tt2 %]
       [% item.this %], [% item.that %]
    [% END %]

    # update mapping table
    [% view.map.ARRAY = &#39;my_list_template&#39; %]
    [% view.map.TEXT  = &#39;my_text_block&#39;    %]


    # change prefix, suffix, item name, etc.
    [% view.prefix = &#39;your_&#39; %]
    [% view.default = &#39;anyobj&#39; %]
    ...</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>TODO</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new($context,_\%config)"
>new($context, \%config)</a></h2>

<p>Creates a new Template::View presenting a custom view of the specified $context object.</p>

<p>A reference to a hash array of configuration options may be passed as the second argument.</p>

<dl>
<dt><a name="prefix"
>prefix</a></dt>

<dd>
<p>Prefix added to all template names.</p>

<pre>    [% USE view(prefix =&#62; &#39;my_&#39;) %]
    [% view.view(&#39;foo&#39;, a =&#62; 20) %]     # =&#62; my_foo</pre>

<dt><a name="suffix"
>suffix</a></dt>

<dd>
<p>Suffix added to all template names.</p>

<pre>    [% USE view(suffix =&#62; &#39;.tt2&#39;) %]
    [% view.view(&#39;foo&#39;, a =&#62; 20) %]     # =&#62; foo.tt2</pre>

<dt><a name="map"
>map</a></dt>

<dd>
<p>Hash array mapping reference types to template names. The print() method uses this to determine which template to use to present any particular item. The TEXT, HASH and ARRAY items default to &#39;test&#39;, &#39;hash&#39; and &#39;list&#39; appropriately.</p>

<pre>    [% USE view(map =&#62; { ARRAY   =&#62; &#39;my_list&#39;, 
                         HASH    =&#62; &#39;your_hash&#39;,
                         My::Foo =&#62; &#39;my_foo&#39;, } ) %]

    [% view.print(some_text) %]         # =&#62; text
    [% view.print(a_list) %]            # =&#62; my_list
    [% view.print(a_hash) %]            # =&#62; your_hash
    [% view.print(a_foo) %]             # =&#62; my_foo

    [% BLOCK text %]
       Text: [% item %]
    [% END %]

    [% BLOCK my_list %]
       list: [% item.join(&#39;, &#39;) %]
    [% END %]

    [% BLOCK your_hash %]
       hash keys: [% item.keys.sort.join(&#39;, &#39;)
    [% END %]

    [% BLOCK my_foo %] 
       Foo: [% item.this %], [% item.that %]
    [% END %]</pre>

<dt><a name="method"
>method</a></dt>

<dd>
<p>Name of a method which objects passed to print() may provide for presenting themselves to the view. If a specific map entry can&#39;t be found for an object reference and it supports the method (default: &#39;present&#39;) then the method will be called, passing the view as an argument. The object can then make callbacks against the view to present itself.</p>

<pre>    package Foo;

    sub present {
        my ($self, $view) = @_;
        return &#34;a regular view of a Foo\n&#34;;
    }

    sub debug {
        my ($self, $view) = @_;
        return &#34;a debug view of a Foo\n&#34;;
    }</pre>

<p>In a template:</p>

<pre>    [% USE view %]
    [% view.print(my_foo_object) %]     # a regular view of a Foo

    [% USE view(method =&#62; &#39;debug&#39;) %]
    [% view.print(my_foo_object) %]     # a debug view of a Foo</pre>

<dt><a name="default"
>default</a></dt>

<dd>
<p>Default template to use if no specific map entry is found for an item.</p>

<pre>    [% USE view(default =&#62; &#39;my_object&#39;) %]

    [% view.print(objref) %]            # =&#62; my_object</pre>

<p>If no map entry or default is provided then the view will attempt to construct a template name from the object class, substituting any sequence of non-word characters to single underscores, e.g.</p>

<pre>    # &#39;fubar&#39; is an object of class Foo::Bar
    [% view.print(fubar) %]             # =&#62; Foo_Bar</pre>

<p>Any current prefix and suffix will be added to both the default template name and any name constructed from the object class.</p>

<dt><a name="notfound"
>notfound</a></dt>

<dd>
<p>Fallback template to use if any other isn&#39;t found.</p>

<dt><a name="item"
>item</a></dt>

<dd>
<p>Name of the template variable to which the print() method assigns the current item. Defaults to &#39;item&#39;.</p>

<pre>    [% USE view %]
    [% BLOCK list %] 
       [% item.join(&#39;, &#39;) %] 
    [% END %]
    [% view.print(a_list) %]

    [% USE view(item =&#62; &#39;thing&#39;) %]
    [% BLOCK list %] 
       [% thing.join(&#39;, &#39;) %] 
    [% END %]
    [% view.print(a_list) %]</pre>

<dt><a name="view_prefix"
>view_prefix</a></dt>

<dd>
<p>Prefix of methods which should be mapped to view() by AUTOLOAD. Defaults to &#39;view_&#39;.</p>

<pre>    [% USE view %]
    [% view.view_header() %]                    # =&#62; view(&#39;header&#39;)

    [% USE view(view_prefix =&#62; &#39;show_me_the_&#39; %]
    [% view.show_me_the_header() %]             # =&#62; view(&#39;header&#39;)</pre>

<dt><a name="view_naked"
>view_naked</a></dt>

<dd>
<p>Flag to indcate if any attempt should be made to map method names to template names where they don&#39;t match the view_prefix. Defaults to 0.</p>

<pre>    [% USE view(view_naked =&#62; 1) %]

    [% view.header() %]                 # =&#62; view(&#39;header&#39;)</pre>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="print(_$obj1,_$obj2,_..._\%config)"
>print( $obj1, $obj2, ... \%config)</a></h2>

<p>TODO</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="view(_$template,_\%vars,_\%config_);"
>view( $template, \%vars, \%config );</a></h2>

<p>TODO</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Andy Wardley &#60;abw@wardley.org&#62; <a href="http://wardley.org/" class="podlinkurl"
>http://wardley.org/</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (C) 2000-2007 Andy Wardley. All Rights Reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../Template/Plugin.html" class="podlinkpod"
>Template::Plugin</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
