<html><head><title>Template::FAQ</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:27 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#Template_Toolkit_Language'>Template Toolkit Language</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Why_doesn%27t_%5B%25_a_%3D_b_IF_c_%25%5D_work_as_expected%3F'>Why doesn&#39;t [% a = b IF c %] work as expected?</a>
    <li class='indexItem indexItem2'><a href='#If_I%27m_using_TT_to_write_out_a_TT_template%2C_is_there_a_good_way_to_escape_%5B%25_and_%25%5D%3F'>If I&#39;m using TT to write out a TT template, is there a good way to escape [% and %]?</a>
    <li class='indexItem indexItem2'><a href='#How_do_I_iterate_over_a_hash%3F'>How do I iterate over a hash?</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Plugins'>Plugins</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#How_do_I_get_the_Table_plugin_to_order_data_across_rather_than_down%3F'>How do I get the Table plugin to order data across rather than down?</a>
    <li class='indexItem indexItem2'><a href='#Accessing_Cookies'>Accessing Cookies</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Extending_the_Template_Toolkit'>Extending the Template Toolkit</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Can_I_serve_templates_from_a_database%3F'>Can I serve templates from a database?</a>
    <li class='indexItem indexItem2'><a href='#Can_I_fetch_templates_via_http%3F'>Can I fetch templates via http?</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Miscellaneous'>Miscellaneous</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#How_can_I_find_out_the_name_of_the_main_template_being_processed%3F'>How can I find out the name of the main template being processed?</a>
    <li class='indexItem indexItem2'><a href='#How_can_I_find_out_the_name_of_the_current_template_being_processed%3F'>How can I find out the name of the current template being processed?</a>
    <li class='indexItem indexItem2'><a href='#How_do_I_print_the_modification_time_of_the_template_or_component%3F'>How do I print the modification time of the template or component?</a>
    <li class='indexItem indexItem2'><a href='#How_can_I_configure_variables_on_a_per-request_basis%3F'>How can I configure variables on a per-request basis?</a>
    <li class='indexItem indexItem2'><a href='#Why_do_I_get_rubbish_for_my_utf-8_templates%3F'>Why do I get rubbish for my utf-8 templates?</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Questions_About_This_FAQ'>Questions About This FAQ</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Why_is_this_FAQ_so_short%3F'>Why is this FAQ so short?</a>
    <li class='indexItem indexItem2'><a href='#Can_I_help%3F'>Can I help?</a>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Template::FAQ - Frequently Asked Questions about the Template Toolkit</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Template_Toolkit_Language"
>Template Toolkit Language</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Why_doesn&#39;t_[%_a_=_b_IF_c_%]_work_as_expected?"
>Why doesn&#39;t [% a = b IF c %] work as expected?</a></h2>

<p>There&#39;s a limitation in the TT2 parser which means that the following code doesn&#39;t work as you might expect:</p>

<pre>    [% a = b IF c %]</pre>

<p>The parser interprets it as an attempt to set <code>a</code> to the result of <code>b IF c</code>, like this:</p>

<pre>    [% a = (b IF c) %]</pre>

<p>If you want to set <code>a = b</code> only if <code>c</code> is true, then do this instead:</p>

<pre>    [% SET a = b IF c %]</pre>

<p>The explicit <code>SET</code> keyword gives the parser the clue it needs to do the right thing.</p>

<p>NOTE: this will be fixed in TT3</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="If_I&#39;m_using_TT_to_write_out_a_TT_template,_is_there_a_good_way_to_escape_[%_and_%]?"
>If I&#39;m using TT to write out a TT template, is there a good way to escape [% and %]?</a></h2>

<p>You can do something like this:</p>

<pre>    [% stag = &#34;[\%&#34;
       etag = &#34;%\]&#34;
    %]</pre>

<p>and then:</p>

<pre>    [% stag; &#39;hello&#39;; etag %]</pre>

<p>Or you can use the <code>TAGS</code> directive, like so:</p>

<pre>    [% TAGS [- -] %]
    [- INCLUDE foo -]   # is a directive
    [% INCLUDE foo %]   # not a directive</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_iterate_over_a_hash?"
>How do I iterate over a hash?</a></h2>

<p>This is covered in the <a href="../Template/Manual/VMethods.html" class="podlinkpod"
>Template::Manual::VMethods</a> section of the manual. A list of all the keys that are in the hash can be obtained with the <code>keys</code> virtual method. You can then iterate over that list and by looking up each key in turn get the value.</p>

<pre>    [% FOREACH key = product.keys %]
       [% key %] =&#62; [% product.$key %]
    [% END %]</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Plugins"
>Plugins</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_get_the_Table_plugin_to_order_data_across_rather_than_down?"
>How do I get the Table plugin to order data across rather than down?</a></h2>

<p>Order the data into rows:</p>

<pre>    Steve     Karen     Jeff
    Brooklyn  Nantucket Fairfax
    NY        MA        VA
    
    [% USE table(data, rows=3) %]</pre>

<p>Then ask for each column</p>

<pre>    [% FOREACH column = table.cols %]</pre>

<p>And then print each item in the column going across the output rows</p>

<pre>    [% FOREACH item = column %]
        &#60;td&#62;[% item %]&#60;/td&#62;
    [% END %]</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Accessing_Cookies"
>Accessing Cookies</a></h2>

<p>Jeff Boes &#60;jboes@nexcerpt.com&#62; asks:</p>

<pre>    Does anyone have a quick-n-dirty approach to accessing 
    cookies from templates? </pre>

<p>Jonas Liljegren answers:</p>

<pre>    [% USE CGI %]
    
    &#60;p&#62;The value is [% CGI.cookie(&#39;cookie_name&#39;) | html %]</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Extending_the_Template_Toolkit"
>Extending the Template Toolkit</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Can_I_serve_templates_from_a_database?"
>Can I serve templates from a database?</a></h2>

<p>Short answer: yes, Chris Nandor has done this for Slash. You need to subclass <a href="../Template/Provider.html" class="podlinkpod"
>Template::Provider</a>. See the mailing list archives for further info.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Can_I_fetch_templates_via_http?"
>Can I fetch templates via http?</a></h2>

<p>To do the job properly, you should subclass <a href="../Template/Provider.html" class="podlinkpod"
>Template::Provider</a> to <code>Template::Provider::HTTP</code> and use a <code>PREFIX_MAP</code> option to bind the <code>http</code> template prefix to that particular provider (you may want to go digging around in the <em>Changes</em> file around version 2.01 for more info on <code>PREFIX_MAP</code> - it may not be properly documented anywhere else...yet!). e.g.</p>

<pre>    use Template::Provider::HTTP;
    
    my $file = Template::Provider( INCLUDE_PATH =&#62; [...] );
    my $http = Template::Provider::HTTP-&#62;new(...);
    my $tt2  = Template-&#62;new({
        LOAD_TEMPLATES =&#62; [ $file, $http ],
        PREFIX_MAP =&#62; {
            file    =&#62; &#39;0&#39;,     # file:foo.html
            http    =&#62; &#39;1&#39;,     # http:foo.html
            default =&#62; &#39;0&#39;,     # foo.html =&#62; file:foo.html
        }
    });</pre>

<p>Now a template specified as:</p>

<pre>    [% INCLUDE foo %]</pre>

<p>will be served by the &#39;file&#39; provider (the default). Otherwise you can explicitly add a prefix:</p>

<pre>    [% INCLUDE file:foo.html %]
    [% INCLUDE http:foo.html %]
    [% INCLUDE http://www.xyz.com/tt2/header.tt2 %]</pre>

<p>This same principal can be used to create a DBI template provider. e.g.</p>

<pre>    [% INCLUDE dbi:foo.html %]</pre>

<p>Alas, we don&#39;t yet have a DBI provider as part of the Template Toolkit. There has been some talk on the mailing list about efforts to develop DBI and/or HTTP providers but as yet no-one has stepped forward to take up the challenge...</p>

<p>In the mean time, Craig Barrat&#39;s post from the mailing list has some useful pointers on how to achieve this using existing modules. See <a href="http://tt2.org/pipermail/templates/2001-May/000954.html" class="podlinkurl"
>http://tt2.org/pipermail/templates/2001-May/000954.html</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Miscellaneous"
>Miscellaneous</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_can_I_find_out_the_name_of_the_main_template_being_processed?"
>How can I find out the name of the main template being processed?</a></h2>

<p>The <code>template</code> variable contains a reference to the Template::Document object for the main template you&#39;re processing (i.e. the one provided as the first argument to the Template process() method). The <code>name</code> method returns its name.</p>

<pre>    [% template.name %]     # e.g. index.html</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_can_I_find_out_the_name_of_the_current_template_being_processed?"
>How can I find out the name of the current template being processed?</a></h2>

<p>The <code>template</code> variable always references the <i>main</i> template being processed. So even if you call [% INCLUDE header %], and that calls [% INCLUDE menu %], the <code>template</code> variable will be unchanged.</p>

<p>index.html:</p>

<pre>    [% template.name  %]     # index.html
    [% INCLUDE header %]</pre>

<p>header:</p>

<pre>    [% template.name  %]     # index.html
    [% INCLUDE menu   %]</pre>

<p>menu:</p>

<pre>    [% template.name  %]     # index.html</pre>

<p>In constrast, the <code>component</code> variable always references the <i>current</i> template being processed.</p>

<p>index.html</p>

<pre>    [% component.name %]     # index.html
    [% INCLUDE header %]</pre>

<p>header:</p>

<pre>    [% component.name %]     # header
    [% INCLUDE menu   %]</pre>

<p>menu:</p>

<pre>    [% component.name  %]     # menu</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_do_I_print_the_modification_time_of_the_template_or_component?"
>How do I print the modification time of the template or component?</a></h2>

<p>The <code>template</code> and <code>component</code> variables reference the main template and the current template being processed (see previous questions). The <code>modtime</code> method returns the modification time of the corresponding template file as a number of seconds since the Unix epoch (00:00:00 GMT 1st January 1970).</p>

<p>This number doesn&#39;t mean much to anyone (except perhaps serious Unix geeks) so you&#39;ll probably want to use the Date plugin to format it for human consumption.</p>

<pre>    [% USE Date %]
    [% template.name %] last modified [% Date.format(template.modtime) %]</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_can_I_configure_variables_on_a_per-request_basis?"
>How can I configure variables on a per-request basis?</a></h2>

<p>One easy way to achieve this is to define a single <code>PRE_PROCESS</code> template which loads in other configuration files based on variables defined or other conditions.</p>

<p>For example, my setup usually looks something like this:</p>

<pre>    PRE_PROCESS =&#62; &#39;config/main&#39;</pre>

<p>config/main:</p>

<pre>    [%  DEFAULT  style   = &#39;text&#39;
                 section =  template.section or &#39;home&#39;;
                 
        PROCESS  config/site
              +  config/urls
              +  config/macros
              + &#34;config/style/$style&#34;
              + &#34;config/section/$section&#34;
              + ...
    %]</pre>

<p>This allows me to set a single &#39;style&#39; variable to control which config file gets pre-processed to set my various style options (colours, img paths, etc). For example:</p>

<p>config/style/basic:</p>

<pre>    [%  style = {
            name = style    # save existing &#39;style&#39; var as &#39;style.name&#39;

            # define various other style variables....
            col = {
                back =&#62; &#39;#ffffff&#39;
                text =&#62; &#39;#000000&#39;
                    # ...etc...
            }

            logo = {
                    # ...etc...
            }

            # ...etc...
        }
    %]</pre>

<p>Each source template can declare which section it&#39;s in via a META directive:</p>

<pre>  [% META
       title   = &#39;General Information&#39;
       section = &#39;info&#39;
  %]
  ...</pre>

<p>This controls which section configuration file gets loaded to set various other variables for defining the section title, menu, etc.</p>

<p>config/section/info:</p>

<pre>    [%  section = {
            name   = section  # save &#39;section&#39; var as &#39;section.name&#39;
            title  = &#39;Information&#39;
            menu   = [ ... ]
            # ...etc...
        }
    %]</pre>

<p>This illustrates the basic principal but you can extend it to perform pretty much any kind of per-document initialisation that you require.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Why_do_I_get_rubbish_for_my_utf-8_templates?"
>Why do I get rubbish for my utf-8 templates?</a></h2>

<p>First of all, make sure that your template files define a Byte Order Mark <a href="http://en.wikipedia.org/wiki/Byte_Order_Mark" class="podlinkurl"
>http://en.wikipedia.org/wiki/Byte_Order_Mark</a></p>

<p>If you for some reason don&#39;t want to add BOM to your templates, you can force Template to use a particular encoding (e.g. <code>utf8</code>) for your templates with the <code>ENCODING</code> option.</p>

<pre>    my $template = Template-&#62;new({ 
        ENCODING =&#62; &#39;utf8&#39; 
    });</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Questions_About_This_FAQ"
>Questions About This FAQ</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Why_is_this_FAQ_so_short?"
>Why is this FAQ so short?</a></h2>

<p>Because we don&#39;t have anyone maintaining it.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Can_I_help?"
>Can I help?</a></h2>

<p>Yes please :-)</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
