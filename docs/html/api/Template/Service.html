<html><head><title>Template::Service</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:27 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new(%5C%25config)'>new(\%config)</a>
    <li class='indexItem indexItem2'><a href='#process(%24input%2C_%5C%25replace)'>process($input, \%replace)</a>
    <li class='indexItem indexItem2'><a href='#context()'>context()</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#CONFIGURATION_OPTIONS'>CONFIGURATION OPTIONS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#PRE_PROCESS%2C_POST_PROCESS'>PRE_PROCESS, POST_PROCESS</a>
    <li class='indexItem indexItem2'><a href='#PROCESS'>PROCESS</a>
    <li class='indexItem indexItem2'><a href='#ERROR'>ERROR</a>
    <li class='indexItem indexItem2'><a href='#AUTO_RESET'>AUTO_RESET</a>
    <li class='indexItem indexItem2'><a href='#DEBUG'>DEBUG</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Template::Service - General purpose template processing service</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use Template::Service;
    
    my $service = Template::Service-&#62;new({
        PRE_PROCESS  =&#62; [ &#39;config&#39;, &#39;header&#39; ],
        POST_PROCESS =&#62; &#39;footer&#39;,
        ERROR        =&#62; {
            user     =&#62; &#39;user/index.html&#39;, 
            dbi      =&#62; &#39;error/database&#39;,
            default  =&#62; &#39;error/default&#39;,
        },
    });
    
    my $output = $service-&#62;process($template_name, \%replace)
        || die $service-&#62;error(), &#34;\n&#34;;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <code>Template::Service</code> module implements an object class for providing a consistent template processing service.</p>

<p>Standard header (<a href="../PRE_PROCESS_POST_PROCESS.html" class="podlinkpod"
>PRE_PROCESS</a>) and footer (<a href="../PRE_PROCESS_POST_PROCESS.html" class="podlinkpod"
>POST_PROCESS</a>) templates may be specified which are prepended and appended to all templates processed by the service (but not any other templates or blocks <code>INCLUDE</code>d or <code>PROCESS</code>ed from within). An <a href="../ERROR.html" class="podlinkpod"
>ERROR</a> hash may be specified which redirects the service to an alternate template file in the case of uncaught exceptions being thrown. This allows errors to be automatically handled by the service and a guaranteed valid response to be generated regardless of any processing problems encountered.</p>

<p>A default <code>Template::Service</code> object is created by the <a href="../Template.html" class="podlinkpod"
>Template</a> module. Any <code>Template::Service</code> options may be passed to the <a href="../Template.html" class="podlinkpod"
>Template</a> <a href="../Template%23new().html" class="podlinkpod"
>new()</a> constructor method and will be forwarded to the <a href="../Template/Service.html" class="podlinkpod"
>Template::Service</a> constructor.</p>

<pre>    use Template;
    
    my $template = Template-&#62;new({
        PRE_PROCESS  =&#62; &#39;header&#39;,
        POST_PROCESS =&#62; &#39;footer&#39;,
    });</pre>

<p>Similarly, the <code>Template::Service</code> constructor will forward all configuration parameters onto other default objects (e.g. <a href="../Template/Context.html" class="podlinkpod"
>Template::Context</a>) that it may need to instantiate.</p>

<p>A <code>Template::Service</code> object (or subclass) can be explicitly instantiated and passed to the <a href="../Template.html" class="podlinkpod"
>Template</a> <a href="../Template%23new().html" class="podlinkpod"
>new()</a> constructor method as the <a href="../SERVICE.html" class="podlinkpod"
>SERVICE</a> item.</p>

<pre>    use Template;
    use Template::Service;
    
    my $service = Template::Service-&#62;new({
        PRE_PROCESS  =&#62; &#39;header&#39;,
        POST_PROCESS =&#62; &#39;footer&#39;,
    });
    
    my $template = Template-&#62;new({
        SERVICE =&#62; $service,
    });</pre>

<p>The <code>Template::Service</code> module can be sub-classed to create custom service handlers.</p>

<pre>    use Template;
    use MyOrg::Template::Service;
    
    my $service = MyOrg::Template::Service-&#62;new({
        PRE_PROCESS  =&#62; &#39;header&#39;,
        POST_PROCESS =&#62; &#39;footer&#39;,
        COOL_OPTION  =&#62; &#39;enabled in spades&#39;,
    });
    
    my $template = Template-&#62;new({
        SERVICE =&#62; $service,
    });</pre>

<p>The <a href="../Template.html" class="podlinkpod"
>Template</a> module uses the <a href="../Template/Config.html" class="podlinkpod"
>Template::Config</a> <a href="../Template/Config%23service().html" class="podlinkpod"
>service()</a> factory method to create a default service object when required. The <code>$Template::Config::SERVICE</code> package variable may be set to specify an alternate service module. This will be loaded automatically and its <a href="../new().html" class="podlinkpod"
>new()</a> constructor method called by the <a href="../Template/Config%23service().html" class="podlinkpod"
>service()</a> factory method when a default service object is required. Thus the previous example could be written as:</p>

<pre>    use Template;
    
    $Template::Config::SERVICE = &#39;MyOrg::Template::Service&#39;;
    
    my $template = Template-&#62;new({
        PRE_PROCESS  =&#62; &#39;header&#39;,
        POST_PROCESS =&#62; &#39;footer&#39;,
        COOL_OPTION  =&#62; &#39;enabled in spades&#39;,
    });</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new(\%config)"
>new(\%config)</a></h2>

<p>The <code>new()</code> constructor method is called to instantiate a <code>Template::Service</code> object. Configuration parameters may be specified as a HASH reference or as a list of <code>name =&#62; value</code> pairs.</p>

<pre>    my $service1 = Template::Service-&#62;new({
        PRE_PROCESS  =&#62; &#39;header&#39;,
        POST_PROCESS =&#62; &#39;footer&#39;,
    });
    
    my $service2 = Template::Service-&#62;new( ERROR =&#62; &#39;error.html&#39; );</pre>

<p>The <code>new()</code> method returns a <code>Template::Service</code> object or <code>undef</code> on error. In the latter case, a relevant error message can be retrieved by the <a href="../Template/Base%23error().html" class="podlinkpod"
>error()</a> class method or directly from the <code>$Template::Service::ERROR</code> package variable.</p>

<pre>    my $service = Template::Service-&#62;new(\%config)
        || die Template::Service-&#62;error();
        
    my $service = Template::Service-&#62;new(\%config)
        || die $Template::Service::ERROR;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="process($input,_\%replace)"
>process($input, \%replace)</a></h2>

<p>The <code>process()</code> method is called to process a template specified as the first parameter, <code>$input</code>. This may be a file name, file handle (e.g. <code>GLOB</code> or <code>IO::Handle</code>) or a reference to a text string containing the template text. An additional hash reference may be passed containing template variable definitions.</p>

<p>The method processes the template, adding any <a href="../PRE_PROCESS_POST_PROCESS.html" class="podlinkpod"
>PRE_PROCESS</a> or <a href="../PRE_PROCESS_POST_PROCESS.html" class="podlinkpod"
>POST_PROCESS</a> templates defined, and returns the output text. An uncaught exception thrown by the template will be handled by a relevant <a href="../ERROR.html" class="podlinkpod"
>ERROR</a> handler if defined. Errors that occur in the <a href="../PRE_PROCESS_POST_PROCESS.html" class="podlinkpod"
>PRE_PROCESS</a> or <a href="../PRE_PROCESS_POST_PROCESS.html" class="podlinkpod"
>POST_PROCESS</a> templates, or those that occur in the main input template and aren&#39;t handled, cause the method to return <code>undef</code> to indicate failure. The appropriate error message can be retrieved via the <a href="../Template/Base%23error().html" class="podlinkpod"
>error()</a> method.</p>

<pre>    $service-&#62;process(&#39;myfile.html&#39;, { title =&#62; &#39;My Test File&#39; })
        || die $service-&#62;error();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="context()"
>context()</a></h2>

<p>Returns a reference to the internal context object which is, by default, an instance of the <a href="../Template/Context.html" class="podlinkpod"
>Template::Context</a> class.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONFIGURATION_OPTIONS"
>CONFIGURATION OPTIONS</a></h1>

<p>The following list summarises the configuration options that can be provided to the <code>Template::Service</code> <a href="../new().html" class="podlinkpod"
>new()</a> constructor. Please consult <a href="../Template/Manual/Config.html" class="podlinkpod"
>Template::Manual::Config</a> for further details and examples of each configuration option in use.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PRE_PROCESS,_POST_PROCESS"
>PRE_PROCESS, POST_PROCESS</a></h2>

<p>The <a href="../Template/Manual/Config%23PRE_PROCESS_POST_PROCESS.html" class="podlinkpod"
>PRE_PROCESS</a> and <a href="../Template/Manual/Config%23PRE_PROCESS_POST_PROCESS.html" class="podlinkpod"
>POST_PROCESS</a> options may be set to contain the name(s) of template files which should be processed immediately before and/or after each template. These do not get added to templates processed into a document via directives such as <code>INCLUDE</code> <code>PROCESS</code>, <code>WRAPPER</code>, etc.</p>

<pre>    my $service = Template::Service-&#62;new({
        PRE_PROCESS  =&#62; &#39;header&#39;,
        POST_PROCESS =&#62; &#39;footer&#39;,
    };</pre>

<p>Multiple templates may be specified as a reference to a list. Each is processed in the order defined.</p>

<pre>    my $service = Template::Service-&#62;new({
        PRE_PROCESS  =&#62; [ &#39;config&#39;, &#39;header&#39; ],
        POST_PROCESS =&#62; &#39;footer&#39;,
    };</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PROCESS"
>PROCESS</a></h2>

<p>The <a href="../Template/Manual/Config%23PROCESS.html" class="podlinkpod"
>PROCESS</a> option may be set to contain the name(s) of template files which should be processed instead of the main template passed to the <code>Template::Service</code> <a href="../process().html" class="podlinkpod"
>process()</a> method. This can be used to apply consistent wrappers around all templates, similar to the use of <a href="../PRE_PROCESS_POST_PROCESS.html" class="podlinkpod"
>PRE_PROCESS</a> and <a href="../PRE_PROCESS_POST_PROCESS.html" class="podlinkpod"
>POST_PROCESS</a> templates.</p>

<pre>    my $service = Template::Service-&#62;new({
        PROCESS  =&#62; &#39;content&#39;,
    };
    
    # processes &#39;content&#39; instead of &#39;foo.html&#39;
    $service-&#62;process(&#39;foo.html&#39;);</pre>

<p>A reference to the original template is available in the <code>template</code> variable. Metadata items can be inspected and the template can be processed by specifying it as a variable reference (i.e. prefixed by &#39;<code>$</code>&#39;) to an <code>INCLUDE</code>, <code>PROCESS</code> or <code>WRAPPER</code> directive.</p>

<p>Example <code>PROCESS</code> template:</p>

<pre>    &#60;html&#62;
      &#60;head&#62;
        &#60;title&#62;[% template.title %]&#60;/title&#62;
      &#60;/head&#62;
      &#60;body&#62;
      [% PROCESS $template %]
      &#60;/body&#62;
    &#60;/html&#62;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ERROR"
>ERROR</a></h2>

<p>The <a href="../Template/Manual/Config%23ERROR.html" class="podlinkpod"
>ERROR</a> (or <code>ERRORS</code> if you prefer) configuration item can be used to name a single template or specify a hash array mapping exception types to templates which should be used for error handling. If an uncaught exception is raised from within a template then the appropriate error template will instead be processed.</p>

<p>If specified as a single value then that template will be processed for all uncaught exceptions.</p>

<pre>    my $service = Template::Service-&#62;new({
        ERROR =&#62; &#39;error.html&#39;
    });</pre>

<p>If the <a href="../Template/Manual/Config%23ERROR.html" class="podlinkpod"
>ERROR/ERRORS</a> item is a hash reference the keys are assumed to be exception types and the relevant template for a given exception will be selected. A <code>default</code> template may be provided for the general case.</p>

<pre>    my $service = Template::Service-&#62;new({
        ERRORS =&#62; {
            user     =&#62; &#39;user/index.html&#39;,
            dbi      =&#62; &#39;error/database&#39;,
            default  =&#62; &#39;error/default&#39;,
        },
    });</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="AUTO_RESET"
>AUTO_RESET</a></h2>

<p>The <a href="../Template/Manual/Config%23AUTO_RESET.html" class="podlinkpod"
>AUTO_RESET</a> option is set by default and causes the local <code>BLOCKS</code> cache for the <a href="../Template/Context.html" class="podlinkpod"
>Template::Context</a> object to be reset on each call to the <a href="../Template.html" class="podlinkpod"
>Template</a> <a href="../Template%23process().html" class="podlinkpod"
>process()</a> method. This ensures that any <code>BLOCK</code>s defined within a template will only persist until that template is finished processing.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DEBUG"
>DEBUG</a></h2>

<p>The <a href="../Template/Manual/Config%23DEBUG.html" class="podlinkpod"
>DEBUG</a> option can be used to enable debugging messages from the <code>Template::Service</code> module by setting it to include the <code>DEBUG_SERVICE</code> value.</p>

<pre>    use Template::Constants qw( :debug );
    
    my $template = Template-&#62;new({
        DEBUG =&#62; DEBUG_SERVICE,
    });</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Andy Wardley &#60;abw@wardley.org&#62; <a href="http://wardley.org/" class="podlinkurl"
>http://wardley.org/</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (C) 1996-2007 Andy Wardley. All Rights Reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../Template.html" class="podlinkpod"
>Template</a>, <a href="../Template/Context.html" class="podlinkpod"
>Template::Context</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
