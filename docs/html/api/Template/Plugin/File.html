<html><head><title>Template::Plugin::File</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:27 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#path'>path</a>
    <li class='indexItem indexItem2'><a href='#name'>name</a>
    <li class='indexItem indexItem2'><a href='#dir'>dir</a>
    <li class='indexItem indexItem2'><a href='#ext'>ext</a>
    <li class='indexItem indexItem2'><a href='#home'>home</a>
    <li class='indexItem indexItem2'><a href='#root'>root</a>
    <li class='indexItem indexItem2'><a href='#abs'>abs</a>
    <li class='indexItem indexItem2'><a href='#rel(path)'>rel(path)</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#EXAMPLES'>EXAMPLES</a>
  <li class='indexItem indexItem1'><a href='#AUTHORS'>AUTHORS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Template::Plugin::File - Plugin providing information about files</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    [% USE File(filepath) %]
    [% File.path %]         # full path
    [% File.name %]         # filename
    [% File.dir %]          # directory</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This plugin provides an abstraction of a file. It can be used to fetch details about files from the file system, or to represent abstract files (e.g. when creating an index page) that may or may not exist on a file system.</p>

<p>A file name or path should be specified as a constructor argument. e.g.</p>

<pre>    [% USE File(&#39;foo.html&#39;) %]
    [% USE File(&#39;foo/bar/baz.html&#39;) %]
    [% USE File(&#39;/foo/bar/baz.html&#39;) %]</pre>

<p>The file should exist on the current file system (unless <code>nostat</code> option set, see below) as an absolute file when specified with as leading &#39;<code>/</code>&#39; as per &#39;<code>/foo/bar/baz.html</code>&#39;, or otherwise as one relative to the current working directory. The constructor performs a <code>stat()</code> on the file and makes the 13 elements returned available as the plugin items:</p>

<pre>    dev ino mode nlink uid gid rdev size 
    atime mtime ctime blksize blocks</pre>

<p>e.g.</p>

<pre>    [% USE File(&#39;/foo/bar/baz.html&#39;) %]
    
    [% File.mtime %]
    [% File.mode %]
    ...</pre>

<p>In addition, the <code>user</code> and <code>group</code> items are set to contain the user and group names as returned by calls to <code>getpwuid()</code> and <code>getgrgid()</code> for the file <code>uid</code> and <code>gid</code> elements, respectively. On Win32 platforms on which <code>getpwuid()</code> and <code>getgrid()</code> are not available, these values are undefined.</p>

<pre>    [% USE File(&#39;/tmp/foo.html&#39;) %]
    [% File.uid %]      # e.g. 500
    [% File.user %]     # e.g. abw</pre>

<p>This user/group lookup can be disabled by setting the <code>noid</code> option.</p>

<pre>    [% USE File(&#39;/tmp/foo.html&#39;, noid=1) %]
    [% File.uid %]      # e.g. 500
    [% File.user %]     # nothing</pre>

<p>The <code>isdir</code> flag will be set if the file is a directory.</p>

<pre>    [% USE File(&#39;/tmp&#39;) %]
    [% File.isdir %]    # 1</pre>

<p>If the <code>stat()</code> on the file fails (e.g. file doesn&#39;t exists, bad permission, etc) then the constructor will throw a <code>File</code> exception. This can be caught within a <code>TRY...CATCH</code> block.</p>

<pre>    [% TRY %]
       [% USE File(&#39;/tmp/myfile&#39;) %]
       File exists!
    [% CATCH File %]
       File error: [% error.info %]
    [% END %]</pre>

<p>Note the capitalisation of the exception type, &#39;<code>File</code>&#39;, to indicate an error thrown by the <code>File</code> plugin, to distinguish it from a regular <code>file</code> exception thrown by the Template Toolkit.</p>

<p>Note that the <code>File</code> plugin can also be referenced by the lower case name &#39;<code>file</code>&#39;. However, exceptions are always thrown of the <code>File</code> type, regardless of the capitalisation of the plugin named used.</p>

<pre>    [% USE file(&#39;foo.html&#39;) %]
    [% file.mtime %]</pre>

<p>As with any other Template Toolkit plugin, an alternate name can be specified for the object created.</p>

<pre>    [% USE foo = file(&#39;foo.html&#39;) %]
    [% foo.mtime %]</pre>

<p>The <code>nostat</code> option can be specified to prevent the plugin constructor from performing a <code>stat()</code> on the file specified. In this case, the file does not have to exist in the file system, no attempt will be made to verify that it does, and no error will be thrown if it doesn&#39;t. The entries for the items usually returned by <code>stat()</code> will be set empty.</p>

<pre>    [% USE file(&#39;/some/where/over/the/rainbow.html&#39;, nostat=1) 
    [% file.mtime %]     # nothing</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<p>All <code>File</code> plugins, regardless of the <code>nostat</code> option, have set a number of items relating to the original path specified.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="path"
>path</a></h2>

<p>The full, original file path specified to the constructor.</p>

<pre>    [% USE file(&#39;/foo/bar.html&#39;) %]
    [% file.path %]     # /foo/bar.html</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="name"
>name</a></h2>

<p>The name of the file without any leading directories.</p>

<pre>    [% USE file(&#39;/foo/bar.html&#39;) %]
    [% file.name %]     # bar.html</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="dir"
>dir</a></h2>

<p>The directory element of the path with the filename removed.</p>

<pre>    [% USE file(&#39;/foo/bar.html&#39;) %]
    [% file.name %]     # /foo</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ext"
>ext</a></h2>

<p>The file extension, if any, appearing at the end of the path following a &#39;<code>.</code>&#39; (not included in the extension).</p>

<pre>    [% USE file(&#39;/foo/bar.html&#39;) %]
    [% file.ext %]      # html</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="home"
>home</a></h2>

<p>This contains a string of the form &#39;<code>../..</code>&#39; to represent the upward path from a file to its root directory.</p>

<pre>    [% USE file(&#39;bar.html&#39;) %]
    [% file.home %]     # nothing
    
    [% USE file(&#39;foo/bar.html&#39;) %]
    [% file.home %]     # ..
    
    [% USE file(&#39;foo/bar/baz.html&#39;) %]
    [% file.home %]     # ../..</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="root"
>root</a></h2>

<p>The <code>root</code> item can be specified as a constructor argument, indicating a root directory in which the named file resides. This is otherwise set empty.</p>

<pre>    [% USE file(&#39;foo/bar.html&#39;, root=&#39;/tmp&#39;) %]
    [% file.root %]     # /tmp</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="abs"
>abs</a></h2>

<p>This returns the absolute file path by constructing a path from the <code>root</code> and <code>path</code> options.</p>

<pre>    [% USE file(&#39;foo/bar.html&#39;, root=&#39;/tmp&#39;) %]
    [% file.path %]     # foo/bar.html
    [% file.root %]     # /tmp
    [% file.abs %]      # /tmp/foo/bar.html</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="rel(path)"
>rel(path)</a></h2>

<p>This returns a relative path from the current file to another path specified as an argument. It is constructed by appending the path to the &#39;<code>home</code>&#39; item.</p>

<pre>    [% USE file(&#39;foo/bar/baz.html&#39;) %]
    [% file.rel(&#39;wiz/waz.html&#39;) %]      # ../../wiz/waz.html</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<pre>    [% USE file(&#39;/foo/bar/baz.html&#39;) %]
    
    [% file.path  %]      # /foo/bar/baz.html
    [% file.dir   %]      # /foo/bar
    [% file.name  %]      # baz.html
    [% file.home  %]      # ../..
    [% file.root  %]      # &#39;&#39;
    [% file.abs   %]      # /foo/bar/baz.html
    [% file.ext   %]      # html
    [% file.mtime %]      # 987654321
    [% file.atime %]      # 987654321
    [% file.uid   %]      # 500
    [% file.user  %]      # abw

    [% USE file(&#39;foo.html&#39;) %]
    
    [% file.path %]           # foo.html
    [% file.dir  %]       # &#39;&#39;
    [% file.name %]           # foo.html
    [% file.root %]       # &#39;&#39;
    [% file.home %]       # &#39;&#39;
    [% file.abs  %]       # foo.html

    [% USE file(&#39;foo/bar/baz.html&#39;) %]
    
    [% file.path %]           # foo/bar/baz.html
    [% file.dir  %]       # foo/bar
    [% file.name %]           # baz.html
    [% file.root %]       # &#39;&#39;
    [% file.home %]       # ../..
    [% file.abs  %]       # foo/bar/baz.html

    [% USE file(&#39;foo/bar/baz.html&#39;, root=&#39;/tmp&#39;) %]
    
    [% file.path %]           # foo/bar/baz.html
    [% file.dir  %]       # foo/bar
    [% file.name %]           # baz.html
    [% file.root %]       # /tmp
    [% file.home %]       # ../..
    [% file.abs  %]       # /tmp/foo/bar/baz.html

    # calculate other file paths relative to this file and its root
    [% USE file(&#39;foo/bar/baz.html&#39;, root =&#62; &#39;/tmp/tt2&#39;) %]
    
    [% file.path(&#39;baz/qux.html&#39;) %]         # ../../baz/qux.html
    [% file.dir(&#39;wiz/woz.html&#39;)  %]     # ../../wiz/woz.html</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS"
>AUTHORS</a></h1>

<p>Michael Stevens wrote the original <code>Directory</code> plugin on which this is based. Andy Wardley split it into separate <code>File</code> and <code>Directory</code> plugins, added some extra code and documentation for <code>VIEW</code> support, and made a few other minor tweaks.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright 2000-2007 Michael Stevens, Andy Wardley.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../Template/Plugin.html" class="podlinkpod"
>Template::Plugin</a>, <a href="../../Template/Plugin/Directory.html" class="podlinkpod"
>Template::Plugin::Directory</a>, <a href="../../Template/View.html" class="podlinkpod"
>Template::View</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
