<html><head><title>Template::Plugin::URL</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:27 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Template::Plugin::URL - Plugin to construct complex URLs</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    [% USE url(&#39;/cgi-bin/foo.pl&#39;) %]
    
    [% url(debug = 1, id = 123) %]
       # ==&#62; /cgi/bin/foo.pl?debug=1&#38;amp;id=123

    [% USE mycgi = url(&#39;/cgi-bin/bar.pl&#39;, mode=&#39;browse&#39;, debug=1) %]
    
    [% mycgi %]
       # ==&#62; /cgi/bin/bar.pl?mode=browse&#38;amp;debug=1
    
    [% mycgi(mode=&#39;submit&#39;) %]
       # ==&#62; /cgi/bin/bar.pl?mode=submit&#38;amp;debug=1
    
    [% mycgi(debug=&#39;d2 p0&#39;, id=&#39;D4-2k[4]&#39;) %]
       # ==&#62; /cgi-bin/bar.pl?mode=browse&#38;amp;debug=d2%20p0&#38;amp;id=D4-2k%5B4%5D</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <code>URL</code> plugin can be used to construct complex URLs from a base stem and a hash array of additional query parameters.</p>

<p>The constructor should be passed a base URL and optionally, a hash array reference of default parameters and values. Used from with a template, it would look something like the following:</p>

<pre>    [% USE url(&#39;http://www.somewhere.com/cgi-bin/foo.pl&#39;) %]
    [% USE url(&#39;/cgi-bin/bar.pl&#39;, mode=&#39;browse&#39;) %]
    [% USE url(&#39;/cgi-bin/baz.pl&#39;, mode=&#39;browse&#39;, debug=1) %]</pre>

<p>When the plugin is then called without any arguments, the default base and parameters are returned as a formatted query string.</p>

<pre>    [% url %]</pre>

<p>For the above three examples, these will produce the following outputs:</p>

<pre>    http://www.somewhere.com/cgi-bin/foo.pl
    /cgi-bin/bar.pl?mode=browse
    /cgi-bin/baz.pl?mode=browse&#38;amp;debug=1</pre>

<p>Note that additional parameters are separated by &#39;<code>&#38;amp;</code>&#39; rather than simply &#39;<code>&#38;</code>&#39;. This is the correct behaviour for HTML pages but is, unfortunately, incorrect when creating URLs that do not need to be encoded safely for HTML. This is likely to be corrected in a future version of the plugin (most probably with TT3). In the mean time, you can set <code>$Template::Plugin::URL::JOINT</code> to <code>&#38;</code> to get the correct behaviour.</p>

<p>Additional parameters may be also be specified to the URL:</p>

<pre>    [% url(mode=&#39;submit&#39;, id=&#39;wiz&#39;) %]</pre>

<p>Which, for the same three examples, produces:</p>

<pre>    http://www.somewhere.com/cgi-bin/foo.pl?mode=submit&#38;amp;id=wiz
    /cgi-bin/bar.pl?mode=browse&#38;amp;id=wiz
    /cgi-bin/baz.pl?mode=browse&#38;amp;debug=1&#38;amp;id=wiz</pre>

<p>A new base URL may also be specified as the first option:</p>

<pre>    [% url(&#39;/cgi-bin/waz.pl&#39;, test=1) %]</pre>

<p>producing</p>

<pre>    /cgi-bin/waz.pl?test=1
    /cgi-bin/waz.pl?mode=browse&#38;amp;test=1
    /cgi-bin/waz.pl?mode=browse&#38;amp;debug=1&#38;amp;test=1</pre>

<p>The ordering of the parameters is non-deterministic due to fact that Perl&#39;s hashes themselves are unordered. This isn&#39;t a problem as the ordering of CGI parameters is insignificant (to the best of my knowledge). All values will be properly escaped thanks to some code borrowed from Lincoln Stein&#39;s <code>CGI</code> module. e.g.</p>

<pre>    [% USE url(&#39;/cgi-bin/woz.pl&#39;) %]
    [% url(name=&#34;Elrich von Benjy d&#39;Weiro&#34;) %]</pre>

<p>Here the spaces and &#34;<code>&#39;</code>&#34; character are escaped in the output:</p>

<pre>    /cgi-bin/woz.pl?name=Elrich%20von%20Benjy%20d%27Weiro</pre>

<p>An alternate name may be provided for the plugin at construction time as per regular Template Toolkit syntax.</p>

<pre>    [% USE mycgi = url(&#39;cgi-bin/min.pl&#39;) %]
    [% mycgi(debug=1) %]</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Andy Wardley &#60;abw@wardley.org&#62; <a href="http://wardley.org/" class="podlinkurl"
>http://wardley.org/</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (C) 1996-2007 Andy Wardley. All Rights Reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../Template/Plugin.html" class="podlinkpod"
>Template::Plugin</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
