<html><head><title>Template::Manual::Filters</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:27 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#format(format)'>format(format)</a>
  <li class='indexItem indexItem1'><a href='#upper'>upper</a>
  <li class='indexItem indexItem1'><a href='#lower'>lower</a>
  <li class='indexItem indexItem1'><a href='#ucfirst'>ucfirst</a>
  <li class='indexItem indexItem1'><a href='#lcfirst'>lcfirst</a>
  <li class='indexItem indexItem1'><a href='#trim'>trim</a>
  <li class='indexItem indexItem1'><a href='#collapse'>collapse</a>
  <li class='indexItem indexItem1'><a href='#html'>html</a>
  <li class='indexItem indexItem1'><a href='#html_entity'>html_entity</a>
  <li class='indexItem indexItem1'><a href='#xml'>xml</a>
  <li class='indexItem indexItem1'><a href='#html_para'>html_para</a>
  <li class='indexItem indexItem1'><a href='#html_break_%2F_html_para_break'>html_break / html_para_break</a>
  <li class='indexItem indexItem1'><a href='#html_line_break'>html_line_break</a>
  <li class='indexItem indexItem1'><a href='#uri'>uri</a>
  <li class='indexItem indexItem1'><a href='#url'>url</a>
  <li class='indexItem indexItem1'><a href='#indent(pad)'>indent(pad)</a>
  <li class='indexItem indexItem1'><a href='#truncate(length%2Cdots)'>truncate(length,dots)</a>
  <li class='indexItem indexItem1'><a href='#repeat(iterations)'>repeat(iterations)</a>
  <li class='indexItem indexItem1'><a href='#remove(string)'>remove(string)</a>
  <li class='indexItem indexItem1'><a href='#replace(search%2C_replace)'>replace(search, replace)</a>
  <li class='indexItem indexItem1'><a href='#redirect(file%2C_options)'>redirect(file, options)</a>
  <li class='indexItem indexItem1'><a href='#eval_%2F_evaltt'>eval / evaltt</a>
  <li class='indexItem indexItem1'><a href='#perl_%2F_evalperl'>perl / evalperl</a>
  <li class='indexItem indexItem1'><a href='#stdout(options)'>stdout(options)</a>
  <li class='indexItem indexItem1'><a href='#stderr'>stderr</a>
  <li class='indexItem indexItem1'><a href='#null'>null</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Template::Manual::Filters - Standard filters</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="format(format)"
>format(format)</a></h1>

<p>The <code>format</code> filter takes a format string as a parameter (as per <code>printf()</code>) and formats each line of text accordingly.</p>

<pre>    [% FILTER format(&#39;&#60;!-- %-40s --&#62;&#39;) %]
    This is a block of text filtered 
    through the above format.
    [% END %]</pre>

<p>Output:</p>

<pre>    &#60;!-- This is a block of text filtered        --&#62;
    &#60;!-- through the above format.               --&#62;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="upper"
>upper</a></h1>

<p>Folds the input to UPPER CASE.</p>

<pre>    [% &#34;hello world&#34; FILTER upper %]</pre>

<p>Output:</p>

<pre>    HELLO WORLD</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="lower"
>lower</a></h1>

<p>Folds the input to lower case.</p>

<pre>    [% &#34;Hello World&#34; FILTER lower %]</pre>

<p>Output:</p>

<pre>    hello world</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ucfirst"
>ucfirst</a></h1>

<p>Folds the first character of the input to UPPER CASE.</p>

<pre>    [% &#34;hello&#34; FILTER ucfirst %]</pre>

<p>Output:</p>

<pre>    Hello</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="lcfirst"
>lcfirst</a></h1>

<p>Folds the first character of the input to lower case.</p>

<pre>    [% &#34;HELLO&#34; FILTER lcfirst %]</pre>

<p>Output:</p>

<pre>    hELLO</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="trim"
>trim</a></h1>

<p>Trims any leading or trailing whitespace from the input text. Particularly useful in conjunction with <code>INCLUDE</code>, <code>PROCESS</code>, etc., having the same effect as the <code>TRIM</code> configuration option.</p>

<pre>    [% INCLUDE myfile | trim %]</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="collapse"
>collapse</a></h1>

<p>Collapse any whitespace sequences in the input text into a single space. Leading and trailing whitespace (which would be reduced to a single space) is removed, as per trim.</p>

<pre>    [% FILTER collapse %]
    
       The   cat
       
       sat    on
       
       the   mat
       
    [% END %]</pre>

<p>Output:</p>

<pre>    The cat sat on the mat</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="html"
>html</a></h1>

<p>Converts the characters <code>&#60;</code>, <code>&#62;</code>, <code>&#38;</code> and <code>&#34;</code> to <code>&#38;lt;</code>, <code>&#38;gt;</code>, <code>&#38;amp;</code>, and <code>&#38;quot;</code> respectively, protecting them from being interpreted as representing HTML tags or entities.</p>

<pre>    [% FILTER html %]
    Binary &#34;&#60;=&#62;&#34; returns -1, 0, or 1 depending on...
    [% END %]</pre>

<p>Output:</p>

<pre>    Binary &#34;&#38;lt;=&#38;gt;&#34; returns -1, 0, or 1 depending on...</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="html_entity"
>html_entity</a></h1>

<p>The <code>html</code> filter is fast and simple but it doesn&#39;t encode the full range of HTML entities that your text may contain. The <code>html_entity</code> filter uses either the <code>Apache::Util</code> module (which is written in C and is therefore faster) or the <code>HTML::Entities</code> module (written in Perl but equally as comprehensive) to perform the encoding.</p>

<p>If one or other of these modules are installed on your system then the text will be encoded (via the <code>escape_html()</code> or <code>encode_entities()</code> subroutines respectively) to convert all extended characters into their appropriate HTML entities (e.g. converting &#39;<code>&#233;</code>&#39; to &#39;<code>&#38;eacute;</code>&#39;). If neither module is available on your system then an &#39;<code>html_entity</code>&#39; exception will be thrown reporting an appropriate message.</p>

<p>If you want to force TT to use one of the above modules in preference to the other, then call either of the <a href="../../Template/Filters.html" class="podlinkpod"
>Template::Filters</a> class methods: <a href="../../Template/Filters.html#use_html_entities()" class="podlinkpod"
>use_html_entities()</a> or <a href="../../Template/Filters.html#use_apache_util()" class="podlinkpod"
>use_apache_util()</a>.</p>

<pre>    use Template::Filters;
    Template::Filters-&#62;use_html_entities;</pre>

<p>For further information on HTML entity encoding, see <a href="http://www.w3.org/TR/REC-html40/sgml/entities.html" class="podlinkurl"
>http://www.w3.org/TR/REC-html40/sgml/entities.html</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="xml"
>xml</a></h1>

<p>Same as the <code>html</code> filter, but adds <code>&#38;apos;</code> which is the fifth XML built-in entity.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="html_para"
>html_para</a></h1>

<p>This filter formats a block of text into HTML paragraphs. A sequence of two or more newlines is used as the delimiter for paragraphs which are then wrapped in HTML <code>&#60;p&#62;</code>...<code>&#60;/p&#62;</code> tags.</p>

<pre>    [% FILTER html_para %]
    The cat sat on the mat.
    
    Mary had a little lamb.
    [% END %]</pre>

<p>Output:</p>

<pre>    &#60;p&#62;
    The cat sat on the mat.
    &#60;/p&#62;
    
    &#60;p&#62;
    Mary had a little lamb.
    &#60;/p&#62;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="html_break_/_html_para_break"
>html_break / html_para_break</a></h1>

<p>Similar to the html_para filter described above, but uses the HTML tag sequence <code>&#60;br&#62;&#60;br&#62;</code> to join paragraphs.</p>

<pre>    [% FILTER html_break %]
    The cat sat on the mat.
    
    Mary had a little lamb.
    [% END %]</pre>

<p>Output:</p>

<pre>    The cat sat on the mat.
    &#60;br&#62;
    &#60;br&#62;
    Mary had a little lamb.</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="html_line_break"
>html_line_break</a></h1>

<p>This filter replaces any newlines with <code>&#60;br&#62;</code> HTML tags, thus preserving the line breaks of the original text in the HTML output.</p>

<pre>    [% FILTER html_line_break %]
    The cat sat on the mat.
    Mary had a little lamb.
    [% END %]</pre>

<p>Output:</p>

<pre>    The cat sat on the mat.&#60;br&#62;
    Mary had a little lamb.&#60;br&#62;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="uri"
>uri</a></h1>

<p>This filter URI escapes the input text, converting any characters outside of the permitted URI character set (as defined by RFC 2396) into a <code>%nn</code> hex escape.</p>

<pre>    [% &#39;my file.html&#39; | uri %]</pre>

<p>Output:</p>

<pre>    my%20file.html</pre>

<p>The uri filter correctly encodes all reserved characters, including <code>&#38;</code>, <code>@</code>, <code>/</code>, <code>;</code>, <code>:</code>, <code>=</code>, <code>+</code>, <code>?</code> and <code>$</code>. This filter is typically used to encode parameters in a URL that could otherwise be interpreted as part of the URL. Here&#39;s an example:</p>

<pre>    [% path  = &#39;http://tt2.org/example&#39;
       back  = &#39;/other?foo=bar&#38;baz=bam&#39; 
       title = &#39;Earth: &#34;Mostly Harmless&#34;&#39;
    %]
    &#60;a href=&#34;[% path %]?back=[% back | uri %]&#38;title=[% title | uri %]&#34;&#62;</pre>

<p>The output generated is rather long so we&#39;ll show it split across two lines:</p>

<pre>    &#60;a href=&#34;http://tt2.org/example?back=%2Fother%3Ffoo%3Dbar%26
    baz%3Dbam&#38;title=Earth%3A%20%22Mostly%20Harmless%22&#34;&#62;</pre>

<p>Without the uri filter the output would look like this (also split across two lines).</p>

<pre>    &#60;a href=&#34;http://tt2.org/example?back=/other?foo=bar
    &#38;baz=bam&#38;title=Earth: &#34;Mostly Harmless&#34;&#34;&#62;</pre>

<p>In this rather contrived example we&#39;ve manage to generate both a broken URL (the repeated <code>?</code> is not allowed) and a broken HTML element (the href attribute is terminated by the first <code>&#34;</code> after <code>Earth: </code> leaving <code>Mostly Harmless&#34;</code> dangling on the end of the tag in precisely the way that harmless things shouldn&#39;t dangle). So don&#39;t do that. Always use the uri filter to encode your URL parameters.</p>

<p>However, you should <b>not</b> use the uri filter to encode an entire URL.</p>

<pre>   &#60;a href=&#34;[% page_url | uri %]&#34;&#62;   # WRONG!</pre>

<p>This will incorrectly encode any reserved characters like <code>:</code> and <code>/</code> and that&#39;s almost certainly not what you want in this case. Instead you should use the <b>url</b> (note spelling) filter for this purpose.</p>

<pre>   &#60;a href=&#34;[% page_url | url %]&#34;&#62;   # CORRECT</pre>

<p>Please note that this behaviour was changed in version 2.16 of the Template Toolkit. Prior to that, the uri filter did not encode the reserved characters, making it technically incorrect according to the RFC 2396 specification. So we fixed it in 2.16 and provided the url filter to implement the old behaviour of not encoding reserved characters.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="url"
>url</a></h1>

<p>The url filter is a less aggressive version of the uri filter. It encodes any characters outside of the permitted URI character set (as defined by RFC 2396) into <code>%nn</code> hex escapes. However, unlike the uri filter, the url filter does <b>not</b> encode the reserved characters <code>&#38;</code>, <code>@</code>, <code>/</code>, <code>;</code>, <code>:</code>, <code>=</code>, <code>+</code>, <code>?</code> and <code>$</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="indent(pad)"
>indent(pad)</a></h1>

<p>Indents the text block by a fixed pad string or width. The &#39;<code>pad</code>&#39; argument can be specified as a string, or as a numerical value to indicate a pad width (spaces). Defaults to 4 spaces if unspecified.</p>

<pre>    [% FILTER indent(&#39;ME&#62; &#39;) %]
    blah blah blah
    cabbages, rhubard, onions 
    [% END %]</pre>

<p>Output:</p>

<pre>    ME&#62; blah blah blah
    ME&#62; cabbages, rhubard, onions</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="truncate(length,dots)"
>truncate(length,dots)</a></h1>

<p>Truncates the text block to the length specified, or a default length of 32. Truncated text will be terminated with &#39;<code>...</code>&#39; (i.e. the &#39;<code>...</code>&#39; falls inside the required length, rather than appending to it).</p>

<pre>    [% FILTER truncate(21) %]
    I have much to say on this matter that has previously 
    been said on more than one occasion.
    [% END %]</pre>

<p>Output:</p>

<pre>    I have much to say...</pre>

<p>If you want to use something other than &#39;<code>...</code>&#39; you can pass that as a second argument.</p>

<pre>    [% FILTER truncate(26, &#39;&#38;hellip;&#39;) %]
    I have much to say on this matter that has previously 
    been said on more than one occasion.
    [% END %]</pre>

<p>Output:</p>

<pre>    I have much to say&#38;hellip;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="repeat(iterations)"
>repeat(iterations)</a></h1>

<p>Repeats the text block for as many iterations as are specified (default: 1).</p>

<pre>    [% FILTER repeat(3) %]
    We want more beer and we want more beer,
    [% END %]
    We are the more beer wanters!</pre>

<p>Output:</p>

<pre>    We want more beer and we want more beer,
    We want more beer and we want more beer,
    We want more beer and we want more beer,
    We are the more beer wanters!</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="remove(string)"
>remove(string)</a></h1>

<p>Searches the input text for any occurrences of the specified string and removes them. A Perl regular expression may be specified as the search string.</p>

<pre>    [% &#34;The  cat  sat  on  the  mat&#34; FILTER remove(&#39;\s+&#39;) %]</pre>

<p>Output:</p>

<pre>    Thecatsatonthemat</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="replace(search,_replace)"
>replace(search, replace)</a></h1>

<p>Similar to the remove filter described above, but taking a second parameter which is used as a replacement string for instances of the search string.</p>

<pre>    [% &#34;The  cat  sat  on  the  mat&#34; | replace(&#39;\s+&#39;, &#39;_&#39;) %]</pre>

<p>Output:</p>

<pre>    The_cat_sat_on_the_mat</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="redirect(file,_options)"
>redirect(file, options)</a></h1>

<p>The <code>redirect</code> filter redirects the output of the block into a separate file, specified relative to the <code>OUTPUT_PATH</code> configuration item.</p>

<pre>    [% FOREACH user IN myorg.userlist %]
       [% FILTER redirect(&#34;users/${user.id}.html&#34;) %]
          [% INCLUDE userinfo %]
       [% END %]
    [% END %]</pre>

<p>or more succinctly, using side-effect notation:</p>

<pre>    [%  FOREACH user IN myorg.userlist;
          INCLUDE userinfo 
            FILTER redirect(&#34;users/${user.id}.html&#34;);
        END
    %]</pre>

<p>A <code>file</code> exception will be thrown if the <code>OUTPUT_PATH</code> option is undefined.</p>

<p>An optional <code>binmode</code> argument can follow the filename to explicitly set the output file to binary mode.</p>

<pre>    [% PROCESS my/png/generator 
         FILTER redirect(&#34;images/logo.png&#34;, binmode=1) %]</pre>

<p>For backwards compatibility with earlier versions, a single true/false value can be used to set binary mode.</p>

<pre>    [% PROCESS my/png/generator 
         FILTER redirect(&#34;images/logo.png&#34;, 1) %]</pre>

<p>For the sake of future compatibility and clarity, if nothing else, we would strongly recommend you explicitly use the named <code>binmode</code> option as shown in the first example.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="eval_/_evaltt"
>eval / evaltt</a></h1>

<p>The <code>eval</code> filter evaluates the block as template text, processing any directives embedded within it. This allows template variables to contain template fragments, or for some method to be provided for returning template fragments from an external source such as a database, which can then be processed in the template as required.</p>

<pre>    my $vars  = {
        fragment =&#62; &#34;The cat sat on the [% place %]&#34;,
    };
    $template-&#62;process($file, $vars);</pre>

<p>The following example:</p>

<pre>    [% fragment | eval %]</pre>

<p>is therefore equivalent to</p>

<pre>    The cat sat on the [% place %]</pre>

<p>The <code>evaltt</code> filter is provided as an alias for <code>eval</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="perl_/_evalperl"
>perl / evalperl</a></h1>

<p>The <code>perl</code> filter evaluates the block as Perl code. The <code>EVAL_PERL</code> option must be set to a true value or a <code>perl</code> exception will be thrown.</p>

<pre>    [% my_perl_code | perl %]</pre>

<p>In most cases, the <code>[% PERL %]</code> ... <code>[% END %]</code> block should suffice for evaluating Perl code, given that template directives are processed before being evaluate as Perl. Thus, the previous example could have been written in the more verbose form:</p>

<pre>    [% PERL %]
    [% my_perl_code %]
    [% END %]</pre>

<p>as well as</p>

<pre>    [% FILTER perl %]
    [% my_perl_code %]
    [% END %]</pre>

<p>The <code>evalperl</code> filter is provided as an alias for <code>perl</code> for backwards compatibility.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="stdout(options)"
>stdout(options)</a></h1>

<p>The stdout filter prints the output generated by the enclosing block to <code>STDOUT</code>. The <code>binmode</code> option can be passed as either a named parameter or a single argument to set <code>STDOUT</code> to binary mode (see the binmode perl function).</p>

<pre>    [% PROCESS something/cool
           FILTER stdout(binmode=1) # recommended %]
    
    [% PROCESS something/cool
           FILTER stdout(1)         # alternate %]</pre>

<p>The <code>stdout</code> filter can be used to force <code>binmode</code> on <code>STDOUT</code>, or also inside <code>redirect</code>, <code>null</code> or <code>stderr</code> blocks to make sure that particular output goes to <code>STDOUT</code>. See the <code>null</code> filter below for an example.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="stderr"
>stderr</a></h1>

<p>The stderr filter prints the output generated by the enclosing block to <code>STDERR</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="null"
>null</a></h1>

<p>The <code>null</code> filter prints nothing. This is useful for plugins whose methods return values that you don&#39;t want to appear in the output. Rather than assigning every plugin method call to a dummy variable to silence it, you can wrap the block in a null filter:</p>

<pre>    [% FILTER null;
        USE im = GD.Image(100,100);
        black = im.colorAllocate(0,   0, 0);
        red   = im.colorAllocate(255,0,  0);
        blue  = im.colorAllocate(0,  0,  255);
        im.arc(50,50,95,75,0,360,blue);
        im.fill(50,50,red);
        im.png | stdout(1);
       END;
    -%]</pre>

<p>Notice the use of the <code>stdout</code> filter to ensure that a particular expression generates output to <code>STDOUT</code> (in this case in binary mode).</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
