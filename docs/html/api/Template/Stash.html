<html><head><title>Template::Stash</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:27 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#PUBLIC_METHODS'>PUBLIC METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new(%5C%25params)'>new(\%params)</a>
    <li class='indexItem indexItem2'><a href='#get(%24variable)'>get($variable)</a>
    <li class='indexItem indexItem2'><a href='#set(%24variable%2C_%24value%2C_%24default)'>set($variable, $value, $default)</a>
    <li class='indexItem indexItem2'><a href='#update(%24variables)'>update($variables)</a>
    <li class='indexItem indexItem2'><a href='#getref(%24variable)'>getref($variable)</a>
    <li class='indexItem indexItem2'><a href='#clone(%5C%25params)'>clone(\%params)</a>
    <li class='indexItem indexItem2'><a href='#declone()'>declone()</a>
    <li class='indexItem indexItem2'><a href='#define_vmethod(%24type%2C_%24name%2C_%24code)'>define_vmethod($type, $name, $code)</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#INTERNAL_METHODS'>INTERNAL METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#dotop(%24root%2C_%24item%2C_%5C%40args%2C_%24lvalue)'>dotop($root, $item, \@args, $lvalue)</a>
    <li class='indexItem indexItem2'><a href='#undefined(%24ident%2C_%24args)'>undefined($ident, $args)</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Template::Stash - Magical storage for template variables</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use Template::Stash;
    
    my $stash = Template::Stash-&#62;new(\%vars);
    
    # get variable values
    $value = $stash-&#62;get($variable);
    $value = $stash-&#62;get(\@compound);
    
    # set variable value
    $stash-&#62;set($variable, $value);
    $stash-&#62;set(\@compound, $value);
    
    # default variable value
    $stash-&#62;set($variable, $value, 1);
    $stash-&#62;set(\@compound, $value, 1);
    
    # set variable values en masse
    $stash-&#62;update(\%new_vars)
    
    # methods for (de-)localising variables
    $stash = $stash-&#62;clone(\%new_vars);
    $stash = $stash-&#62;declone();</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <code>Template::Stash</code> module defines an object class which is used to store variable values for the runtime use of the template processor. Variable values are stored internally in a hash reference (which itself is blessed to create the object) and are accessible via the <a href="../get().html" class="podlinkpod"
>get()</a> and <a href="../set().html" class="podlinkpod"
>set()</a> methods.</p>

<p>Variables may reference hash arrays, lists, subroutines and objects as well as simple values. The stash automatically performs the right magic when dealing with variables, calling code or object methods, indexing into lists, hashes, etc.</p>

<p>The stash has <a href="../clone().html" class="podlinkpod"
>clone()</a> and <a href="../declone().html" class="podlinkpod"
>declone()</a> methods which are used by the template processor to make temporary copies of the stash for localising changes made to variables.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PUBLIC_METHODS"
>PUBLIC METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new(\%params)"
>new(\%params)</a></h2>

<p>The <code>new()</code> constructor method creates and returns a reference to a new <code>Template::Stash</code> object.</p>

<pre>    my $stash = Template::Stash-&#62;new();</pre>

<p>A hash reference may be passed to provide variables and values which should be used to initialise the stash.</p>

<pre>    my $stash = Template::Stash-&#62;new({ var1 =&#62; &#39;value1&#39;, 
                                       var2 =&#62; &#39;value2&#39; });</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get($variable)"
>get($variable)</a></h2>

<p>The <code>get()</code> method retrieves the variable named by the first parameter.</p>

<pre>    $value = $stash-&#62;get(&#39;var1&#39;);</pre>

<p>Dotted compound variables can be retrieved by specifying the variable elements by reference to a list. Each node in the variable occupies two entries in the list. The first gives the name of the variable element, the second is a reference to a list of arguments for that element, or <code>0</code> if none.</p>

<pre>    [% foo.bar(10).baz(20) %]
    
    $stash-&#62;get([ &#39;foo&#39;, 0, &#39;bar&#39;, [ 10 ], &#39;baz&#39;, [ 20 ] ]);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="set($variable,_$value,_$default)"
>set($variable, $value, $default)</a></h2>

<p>The <code>set()</code> method sets the variable name in the first parameter to the value specified in the second.</p>

<pre>    $stash-&#62;set(&#39;var1&#39;, &#39;value1&#39;);</pre>

<p>If the third parameter evaluates to a true value, the variable is set only if it did not have a true value before.</p>

<pre>    $stash-&#62;set(&#39;var2&#39;, &#39;default_value&#39;, 1);</pre>

<p>Dotted compound variables may be specified as per <a href="../get().html" class="podlinkpod"
>get()</a> above.</p>

<pre>    [% foo.bar = 30 %]
    
    $stash-&#62;set([ &#39;foo&#39;, 0, &#39;bar&#39;, 0 ], 30);</pre>

<p>The magical variable &#39;<code>IMPORT</code>&#39; can be specified whose corresponding value should be a hash reference. The contents of the hash array are copied (i.e. imported) into the current namespace.</p>

<pre>    # foo.bar = baz, foo.wiz = waz
    $stash-&#62;set(&#39;foo&#39;, { &#39;bar&#39; =&#62; &#39;baz&#39;, &#39;wiz&#39; =&#62; &#39;waz&#39; });
    
    # import &#39;foo&#39; into main namespace: bar = baz, wiz = waz
    $stash-&#62;set(&#39;IMPORT&#39;, $stash-&#62;get(&#39;foo&#39;));</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="update($variables)"
>update($variables)</a></h2>

<p>This method can be used to set or update several variables in one go.</p>

<pre>    $stash-&#62;update({
        foo =&#62; 10,
        bar =&#62; 20,
    });</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getref($variable)"
>getref($variable)</a></h2>

<p>This undocumented feature returns a closure which can be called to get the value of a variable. It is used to implement variable references which are evlauted lazily.</p>

<pre>    [% x = \foo.bar.baz %]          # x is a reference to foo.bar.baz
    [% x %]                         # evalautes foo.bar.baz</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="clone(\%params)"
>clone(\%params)</a></h2>

<p>The <code>clone()</code> method creates and returns a new <code>Template::Stash</code> object which represents a localised copy of the parent stash. Variables can be freely updated in the cloned stash and when <a href="../declone().html" class="podlinkpod"
>declone()</a> is called, the original stash is returned with all its members intact and in the same state as they were before <code>clone()</code> was called.</p>

<p>For convenience, a hash of parameters may be passed into <code>clone()</code> which is used to update any simple variable (i.e. those that don&#39;t contain any namespace elements like <code>foo</code> and <code>bar</code> but not <code>foo.bar</code>) variables while cloning the stash. For adding and updating complex variables, the <a href="../set().html" class="podlinkpod"
>set()</a> method should be used after calling <code>clone().</code> This will correctly resolve and/or create any necessary namespace hashes.</p>

<p>A cloned stash maintains a reference to the stash that it was copied from in its <code>_PARENT</code> member.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="declone()"
>declone()</a></h2>

<p>The <code>declone()</code> method returns the <code>_PARENT</code> reference and can be used to restore the state of a stash as described above.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="define_vmethod($type,_$name,_$code)"
>define_vmethod($type, $name, $code)</a></h2>

<p>This method can be used to define new virtual methods. The first argument should be either <code>scalar</code> or <code>item</code> to define scalar virtual method, <code>hash</code> to define hash virtual methods, or either <code>array</code> or <code>list</code> for list virtual methods. The second argument should be the name of the new method. The third argument should be a reference to a subroutine implementing the method. The data item on which the virtual method is called is passed to the subroutine as the first argument.</p>

<pre>    $stash-&#62;define_vmethod(
        item =&#62; ucfirst =&#62; sub {
            my $text = shift;
            return ucfirst $text
        }
    );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="INTERNAL_METHODS"
>INTERNAL METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="dotop($root,_$item,_\@args,_$lvalue)"
>dotop($root, $item, \@args, $lvalue)</a></h2>

<p>This is the core <code>dot</code> operation method which evaluates elements of variables against their root.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="undefined($ident,_$args)"
>undefined($ident, $args)</a></h2>

<p>This method is called when <a href="../get().html" class="podlinkpod"
>get()</a> encounters an undefined value. If the <code>STRICT|Template::Manual::Config#STRICT</code> option is in effect then it will throw an exception indicating the use of an undefined value. Otherwise it will silently return an empty string.</p>

<p>The method can be redefined in a subclass to implement alternate handling of undefined values.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Andy Wardley &#60;abw@wardley.org&#62; <a href="http://wardley.org/" class="podlinkurl"
>http://wardley.org/</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (C) 1996-2012 Andy Wardley. All Rights Reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../Template.html" class="podlinkpod"
>Template</a>, <a href="../Template/Context.html" class="podlinkpod"
>Template::Context</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
