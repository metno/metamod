<html><head><title>PDL::Func</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:23 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#INTERPOLATION_AND_MORE'>INTERPOLATION AND MORE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Boundary_conditions_for_the_Hermite_routines'>Boundary conditions for the Hermite routines</a>
    <li class='indexItem indexItem2'><a href='#Errors'>Errors</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#FUNCTIONS'>FUNCTIONS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#PDL%3A%3AFunc%3A%3Ainit'>PDL::Func::init</a>
    <li class='indexItem indexItem2'><a href='#PDL%3A%3AFunc%3A%3Aset'>PDL::Func::set</a>
    <li class='indexItem indexItem2'><a href='#PDL%3A%3AFunc%3A%3Aget'>PDL::Func::get</a>
    <li class='indexItem indexItem2'><a href='#PDL%3A%3AFunc%3A%3Ascheme'>PDL::Func::scheme</a>
    <li class='indexItem indexItem2'><a href='#PDL%3A%3AFunc%3A%3Astatus'>PDL::Func::status</a>
    <li class='indexItem indexItem2'><a href='#PDL%3A%3AFunc%3A%3Aroutine'>PDL::Func::routine</a>
    <li class='indexItem indexItem2'><a href='#PDL%3A%3AFunc%3A%3Aattributes'>PDL::Func::attributes</a>
    <li class='indexItem indexItem2'><a href='#PDL%3A%3AFunc%3A%3Ainterpolate'>PDL::Func::interpolate</a>
    <li class='indexItem indexItem2'><a href='#PDL%3A%3AFunc%3A%3Agradient'>PDL::Func::gradient</a>
    <li class='indexItem indexItem2'><a href='#PDL%3A%3AFunc%3A%3Aintegrate'>PDL::Func::integrate</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#TODO'>TODO</a>
  <li class='indexItem indexItem1'><a href='#HISTORY'>HISTORY</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>PDL::Func - interpolation,
integration,
&#38; gradient estimation (differentiation) of functions</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre> use PDL::Func;
 use PDL::Math;

 # somewhat pointless way to estimate cos and sin,
 # but is shows that you can thread if you want to
 # (and the library lets you)
 #
 my $obj = PDL::Func-&#62;init( Interpolate =&#62; &#34;Hermite&#34; );
 # 
 my $x = pdl( 0 .. 45 ) * 4 * 3.14159 / 180;
 my $y = cat( sin($x), cos($x) );
 $obj-&#62;set( x =&#62; $x, y =&#62; $y, bc =&#62; &#34;simple&#34; );
 #
 my $xi = pdl( 0.5, 1.5, 2.5 );
 my $yi = $obj-&#62;interpolate( $xi );
 #
 print &#34;sin( $xi ) equals &#34;, $yi-&#62;slice(&#39;:,(0)&#39;), &#34;\n&#34;;
 sin( [0.5 1.5 2.5] ) equals  [0.87759844 0.070737667 -0.80115622]
 #
 print &#34;cos( $xi ) equals &#34;, $yi-&#62;slice(&#39;:,(1)&#39;), &#34;\n&#34;;
 cos( [0.5 1.5 2.5] ) equals  [ 0.4794191 0.99768655 0.59846449]
 #
 print sin($xi), &#34;\n&#34;, cos($xi), &#34;\n&#34;;
 [0.47942554 0.99749499 0.59847214]
 [0.87758256 0.070737202 -0.80114362]</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module aims to contain useful functions. Honest.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="INTERPOLATION_AND_MORE"
>INTERPOLATION AND MORE</a></h1>

<p>This module aims to provide a relatively-uniform interface to the various interpolation methods available to PDL. The idea is that a different interpolation scheme can be used just by changing an attribute of a <code>PDL::Func</code> object. Some interpolation schemes (as exemplified by the SLATEC library) also provide additional functionality, such as integration and gradient estimation.</p>

<p>Throughout this documentation, <code>$x</code> and <code>$y</code> refer to the function to be interpolated whilst <code>$xi</code> and <code>$yi</code> are the interpolated values.</p>

<p>The avaliable types, or <i>schemes</i>, of interpolation are listed below. Also given are the valid attributes for each scheme: the flag value indicates whether it can be set (s), got (g), and if it is required (r) for the method to work.</p>

<dl>
<dt><a name="Interpolate_=&#62;_Linear"
>Interpolate =&#62; Linear</a></dt>

<dd>
<p>An extravagent way of calling the linear interpolation routine <a href="../PDL/Primitive.html#interpolate" class="podlinkpod"
>PDL::Primitive::interpolate</a>.</p>

<p>The valid attributes are:</p>

<pre> Attribute    Flag  Description
 x            sgr   x positions of data
 y            sgr   function values at x positions
 err          g     error flag</pre>

<dt><a name="Interpolate_=&#62;_Hermite"
>Interpolate =&#62; Hermite</a></dt>

<dd>
<p>Use the piecewice cubic Hermite interpolation routines from the SLATEC library. Only available if <a href="../PDL/Slatec.html" class="podlinkpod"
>PDL::Slatec</a> is installed.</p>

<p>The valid attributes are:</p>

<pre> Attribute    Flag  Description
 x            sgr   x positions of data
 y            sgr   function values at x positions
 bc           sgr   boundary conditions
 g            g     estimated gradient at x positions
 err          g     error flag</pre>

<p>Given the initial set of points <code>(x,y)</code>, an estimate of the gradient is made at these points, using the given boundary conditions. The gradients are stored in the <code>g</code> attribute, accessible via:</p>

<pre> $gradient = $obj-&#62;get( &#39;g&#39; );</pre>

<p>However, as this gradient is only calculated &#39;at the last moment&#39;, <code>g</code> will only contain data <i>after</i> one of <code>interpolate</code>, <code>gradient</code>, or <code>integrate</code> is used.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Boundary_conditions_for_the_Hermite_routines"
>Boundary conditions for the Hermite routines</a></h2>

<p>If your data is monotonic, and you are not too bothered about edge effects, then the default value of <code>bc</code> of <code>simple</code> is for you. Otherwise, take a look at the description of <a href="../PDL/Slatec.html#chic" class="podlinkpod"
>PDL::Slatec::chic</a> and use a hash reference for the <code>bc</code> attribute, with the following keys:</p>

<dl>
<dt><a name="monotonic"
>monotonic</a></dt>

<dd>
<p>0 if the interpolant is to be monotonic in each interval (so the gradient will be 0 at each switch point), otherwise the gradient is calculated using a 3-point difference formula at switch points. If &#62; 0 then the interpolant is forced to lie close to the data, if &#60; 0 no such control is imposed. Default = <b>0</b>.</p>

<dt><a name="start"
>start</a></dt>

<dd>
<p>A perl list of one or two elements. The first element defines how the boundary condition for the start of the array is to be calculated; it has a range of <code>-5 .. 5</code>, as given for the <code>ic</code> parameter of <a href="../PDL/Slatec.html#chic" class="podlinkpod"
>chic</a>. The second element, only used if options 2, 1, -1, or 2 are chosen, contains the value of the <code>vc</code> parameter. Default = <b>[ 0 ]</b>.</p>

<dt><a name="end"
>end</a></dt>

<dd>
<p>As for <code>start</code>, but for the end of the data.</p>
</dd>
</dl>

<p>An example would be</p>

<pre> $obj-&#62;set( bc =&#62; { start =&#62; [ 1, 0 ], end =&#62; [ 1, -1 ] } )</pre>

<p>which sets the first derivative at the first point to 0, and at the last point to -1.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Errors"
>Errors</a></h2>

<p>The <code>status</code> method provides a simple mechanism to check if the previous method was successful. If the function returns an error flag, then it is stored in the <code>err</code> attribute. To find out which routine was used, use the <code>routine</code> method.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FUNCTIONS"
>FUNCTIONS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PDL::Func::init"
>PDL::Func::init</a></h2>

<pre> $obj = PDL::Func-&#62;init( Interpolate =&#62; &#34;Hermite&#34;, x =&#62; $x, y =&#62; $y );
 $obj = PDL::Func-&#62;init( { x =&#62; $x, y =&#62; $y } );</pre>

<p>Create a PDL::Func object, which can interpolate, and possibly integrate and calculate gradients of a dataset.</p>

<p>If not specified, the value of Interpolate is taken to be <code>Linear</code>, which means the interpolation is performed by <a href="../PDL/Primitive.html#interpolate" class="podlinkpod"
>PDL::Primitive::interpolate</a>. A value of <code>Hermite</code> uses piecewise cubic Hermite functions, which also allows the integral and gradient of the data to be estimated.</p>

<p>Options can either be provided directly to the method, as in the first example, or within a hash reference, as shown in the second example.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PDL::Func::set"
>PDL::Func::set</a></h2>

<pre> my $nset = $obj-&#62;set( x =&#62; $newx, y =&#62; $newy );
 my $nset = $obj-&#62;set( { x =&#62; $newx, y =&#62; $newy } );</pre>

<p>Set attributes for a PDL::Func object.</p>

<p>The return value gives the number of the supplied attributes which were actually set.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PDL::Func::get"
>PDL::Func::get</a></h2>

<pre> my $x         = $obj-&#62;get( x );
 my ( $x, $y ) = $obj-&#62;get( qw( x y ) );</pre>

<p>Get attributes from a PDL::Func object.</p>

<p>Given a list of attribute names, return a list of their values; in scalar mode return a scalar value. If the supplied list contains an unknown attribute, <code>get</code> returns a value of <code>undef</code> for that attribute.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PDL::Func::scheme"
>PDL::Func::scheme</a></h2>

<pre> my $scheme = $obj-&#62;scheme;</pre>

<p>Return the type of interpolation of a PDL::Func object.</p>

<p>Returns either <code>Linear</code> or <code>Hermite</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PDL::Func::status"
>PDL::Func::status</a></h2>

<pre> my $status = $obj-&#62;status;</pre>

<p>Returns the status of a PDL::Func object.</p>

<p>This method provides a high-level indication of the success of the last method called (except for <code>get</code> which is ignored). Returns <b>1</b> if everything is okay, <b>0</b> if there has been a serious error, and <b>-1</b> if there was a problem which was not serious. In the latter case, <code>$obj-&#62;get(&#34;err&#34;)</code> may provide more information, depending on the particular scheme in use.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PDL::Func::routine"
>PDL::Func::routine</a></h2>

<pre> my $name = $obj-&#62;routine;</pre>

<p>Returns the name of the last routine called by a PDL::Func object.</p>

<p>This is mainly useful for decoding the value stored in the <code>err</code> attribute.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PDL::Func::attributes"
>PDL::Func::attributes</a></h2>

<pre> $obj-&#62;attributes;
 PDL::Func-&#62;attributes;</pre>

<p>Print out the flags for the attributes of a PDL::Func object.</p>

<p>Useful in case the documentation is just too opaque!</p>

<pre> PDL::Func-&#62;attributes;
 Flags  Attribute
  SGR    x
  SGR    y
  G      err</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PDL::Func::interpolate"
>PDL::Func::interpolate</a></h2>

<pre> my $yi = $obj-&#62;interpolate( $xi );</pre>

<p>Returns the interpolated function at a given set of points (PDL::Func).</p>

<p>A status value of -1, as returned by the <code>status</code> method, means that some of the <code>$xi</code> points lay outside the range of the data. The values for these points were calculated by extrapolation (the details depend on the scheme being used).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PDL::Func::gradient"
>PDL::Func::gradient</a></h2>

<pre> my $gi          = $obj-&#62;gradient( $xi );
 my ( $yi, $gi ) = $obj-&#62;gradient( $xi );</pre>

<p>Returns the derivative and, optionally, the interpolated function for the <code>Hermite</code> scheme (PDL::Func).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PDL::Func::integrate"
>PDL::Func::integrate</a></h2>

<pre> my $ans = $obj-&#62;integrate( index =&#62; pdl( 2, 5 ) );
 my $ans = $obj-&#62;integrate( x =&#62; pdl( 2.3, 4.5 ) );</pre>

<p>Integrate the function stored in the PDL::Func object, if the scheme is <code>Hermite</code>.</p>

<p>The integration can either be between points of the original <code>x</code> array (<code>index</code>), or arbitrary x values (<code>x</code>). For both cases, a two element piddle should be given, to specify the start and end points of the integration.</p>

<dl>
<dt><a name="index"
>index</a></dt>

<dd>
<p>The values given refer to the indices of the points in the <code>x</code> array.</p>

<dt><a name="x"
>x</a></dt>

<dd>
<p>The array contains the actual values to integrate between.</p>
</dd>
</dl>

<p>If the <code>status</code> method returns a value of -1, then one or both of the integration limits did not lie inside the <code>x</code> array. <i>Caveat emptor</i> with the result in such a case.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TODO"
>TODO</a></h1>

<p>It should be relatively easy to provide an interface to other interpolation routines, such as those provided by the Gnu Scientific Library (GSL), or the B-spline routines in the SLATEC library.</p>

<p>In the documentation, the methods are preceeded by <code>PDL::Func::</code> to avoid clashes with functions such as <code>set</code> when using the <code>help</code> or <code>apropos</code> commands within <i>perldl</i> or <i>pdl2</i>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="HISTORY"
>HISTORY</a></h1>

<p>Amalgamated <code>PDL::Interpolate</code> and <code>PDL::Interpolate::Slatec</code> to form <code>PDL::Func</code>. Comments greatly appreciated on the current implementation, as it is not too sensible.</p>

<p>Thanks to Robin Williams, Halld&#243;r Olafsson, and Vince McIntyre.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Copyright (C) 2000,2001 Doug Burke (dburke@cfa.harvard.edu). All rights reserved. There is no warranty. You are allowed to redistribute this software / documentation as described in the file COPYING in the PDL distribution.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
