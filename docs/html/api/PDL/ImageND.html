<html><head><title>PDL::ImageND</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:24 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#FUNCTIONS'>FUNCTIONS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#convolve'>convolve</a>
    <li class='indexItem indexItem2'><a href='#ninterpol()'>ninterpol()</a>
    <li class='indexItem indexItem2'><a href='#rebin'>rebin</a>
    <li class='indexItem indexItem2'><a href='#circ_mean_p'>circ_mean_p</a>
    <li class='indexItem indexItem2'><a href='#circ_mean'>circ_mean</a>
    <li class='indexItem indexItem2'><a href='#kernctr'>kernctr</a>
    <li class='indexItem indexItem2'><a href='#convolveND'>convolveND</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHORS'>AUTHORS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>PDL::ImageND - useful image processing in N dimensions</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>These routines act on PDLs as N-dimensional objects,
not as threaded sets of 0-D or 1-D objects.
The file is sort of a catch-all for broadly functional routines,
most of which could legitimately be filed elsewhere (and probably will,
one day).</p>

<p>ImageND is not a part of the PDL core (v2.4) and hence must be explicitly loaded.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre> use PDL::ImageND;

 $b = $a-&#62;convolveND($kernel,{bound=&#62;&#39;periodic&#39;});
 $b = $a-&#62;rebin(50,30,10);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FUNCTIONS"
>FUNCTIONS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="convolve"
>convolve</a></h2>

<pre>  Signature: (a(m); b(n); int adims(p); int bdims(q); [o]c(m))</pre>

<p>N-dimensional convolution (Deprecated; use convolveND)</p>

<p>$new = convolve $a, $kernel</p>

<p>Convolve an array with a kernel, both of which are N-dimensional. This routine does direct convolution (by copying) but uses quasi-periodic boundary conditions: each dim &#34;wraps around&#34; to the next higher row in the next dim.</p>

<p>This routine is kept for backwards compatibility with earlier scripts; for most purposes you want <a href="../PDL/ImageND.html#convolveND" class="podlinkpod"
>convolveND</a> instead: it runs faster and handles a variety of boundary conditions.</p>

<p>convolve does not process bad values. It will set the bad-value flag of all output piddles if the flag is set for any of the input piddles.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ninterpol()"
>ninterpol()</a></h2>

<p>N-dimensional interpolation routine</p>

<pre> Signature: ninterpol(point(),data(n),[o]value())</pre>

<pre>      $value = ninterpol($point, $data);</pre>

<p><code>ninterpol</code> uses <code>interpol</code> to find a linearly interpolated value in N dimensions, assuming the data is spread on a uniform grid. To use an arbitrary grid distribution, need to find the grid-space point from the indexing scheme, then call <code>ninterpol</code> -- this is far from trivial (and ill-defined in general).</p>

<p>See also <a href="../PDL/Primitive.html#interpND" class="podlinkpod"
>interpND</a>, which includes boundary conditions and allows you to switch the method of interpolation, but which runs somewhat slower.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="rebin"
>rebin</a></h2>

<pre>  Signature: (a(m); [o]b(n); int ns =&#62; n)</pre>

<p>N-dimensional rebinning algorithm</p>

<p>$new = rebin $a, $dim1, $dim2,..;. $new = rebin $a, $template; $new = rebin $a, $template, {Norm =&#62; 1};</p>

<p>Rebin an N-dimensional array to newly specified dimensions. Specifying `Norm&#39; keeps the sum constant, otherwise the intensities are kept constant. If more template dimensions are given than for the input pdl, these dimensions are created; if less, the final dimensions are maintained as they were.</p>

<p>So if <code>$a</code> is a 10 x 10 pdl, then <code>rebin($a,15)</code> is a 15 x 10 pdl, while <code>rebin($a,15,16,17)</code> is a 15 x 16 x 17 pdl (where the values along the final dimension are all identical).</p>

<p>Expansion is performed by sampling; reduction is performed by averaging. If you want different behavior, use <a href="../PDL/Transform.html#map" class="podlinkpod"
>PDL::Transform::map</a> instead. PDL::Transform::map runs slower but is more flexible.</p>

<p>rebin does not process bad values. It will set the bad-value flag of all output piddles if the flag is set for any of the input piddles.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="circ_mean_p"
>circ_mean_p</a></h2>

<p>Calculates the circular mean of an n-dim image and returns the projection. Optionally takes the center to be used.</p>

<pre>   $cmean=circ_mean_p($im);
   $cmean=circ_mean_p($im,{Center =&#62; [10,10]});</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="circ_mean"
>circ_mean</a></h2>

<p>Smooths an image by applying circular mean. Optionally takes the center to be used.</p>

<pre>   circ_mean($im);
   circ_mean($im,{Center =&#62; [10,10]});</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="kernctr"
>kernctr</a></h2>

<p>`centre&#39; a kernel (auxiliary routine to fftconvolve)</p>

<pre>        $kernel = kernctr($image,$smallk);
        fftconvolve($image,$kernel);</pre>

<p>kernctr centres a small kernel to emulate the behaviour of the direct convolution routines.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="convolveND"
>convolveND</a></h2>

<pre>  Signature: (k0(); SV *k; SV *aa; SV *a)</pre>

<p>Speed-optimized convolution with selectable boundary conditions</p>

<p>$new = convolveND($a, $kernel, [ {options} ]);</p>

<p>Conolve an array with a kernel, both of which are N-dimensional.</p>

<p>If the kernel has fewer dimensions than the array, then the extra array dimensions are threaded over. There are options that control the boundary conditions and method used.</p>

<p>The kernel&#39;s origin is taken to be at the kernel&#39;s center. If your kernel has a dimension of even order then the origin&#39;s coordinates get rounded up to the next higher pixel (e.g. (1,2) for a 3x4 kernel). This mimics the behavior of the earlier <a href="../convolve.html" class="podlinkpod"
>convolve</a> and <a href="../PDL/FFT.html#fftconvolve()" class="podlinkpod"
>fftconvolve</a> routines, so convolveND is a drop-in replacement for them.</p>

<p>The kernel may be any size compared to the image, in any dimension.</p>

<p>The kernel and the array are not quite interchangeable (as in mathematical convolution): the code is inplace-aware only for the array itself, and the only allowed boundary condition on the kernel is truncation.</p>

<p>convolveND is inplace-aware: say <code>convolveND(inplace $a ,$k)</code> to modify a variable in-place. You don&#39;t reduce the working memory that way -- only the final memory.</p>

<p>OPTIONS</p>

<p>Options are parsed by PDL::Options, so unique abbreviations are accepted.</p>

<dl>
<dt><a name="boundary_(default:_&#39;truncate&#39;)"
>boundary (default: &#39;truncate&#39;)</a></dt>

<dd>
<p>The boundary condition on the array, which affects any pixel closer to the edge than the half-width of the kernel.</p>

<p>The boundary conditions are the same as those accepted by <a href="../PDL/Slices.html#range" class="podlinkpod"
>range</a>, because this option is passed directly into <a href="../PDL/Slices.html#range" class="podlinkpod"
>range</a>. Useful options are &#39;truncate&#39; (the default), &#39;extend&#39;, and &#39;periodic&#39;. You can select different boundary conditions for different axes -- see <a href="../PDL/Slices.html#range" class="podlinkpod"
>range</a> for more detail.</p>

<p>The (default) truncate option marks all the near-boundary pixels as BAD if you have bad values compiled into your PDL and the array&#39;s badflag is set.</p>

<dt><a name="method_(default:_&#39;auto&#39;)"
>method (default: &#39;auto&#39;)</a></dt>

<dd>
<p>The method to use for the convolution. Acceptable alternatives are &#39;direct&#39;, &#39;fft&#39;, or &#39;auto&#39;. The direct method is an explicit copy-and-multiply operation; the fft method takes the Fourier transform of the input and output kernels. The two methods give the same answer to within double-precision numerical roundoff. The fft method is much faster for large kernels; the direct method is faster for tiny kernels. The tradeoff occurs when the array has about 400x more pixels than the kernel.</p>

<p>The default method is &#39;auto&#39;, which chooses direct or fft convolution based on the size of the input arrays.</p>
</dd>
</dl>

<p>NOTES</p>

<p>At the moment there&#39;s no way to thread over kernels. That could/should be fixed.</p>

<p>The threading over input is cheesy and should probably be fixed: currently the kernel just gets dummy dimensions added to it to match the input dims. That does the right thing tersely but probably runs slower than a dedicated threadloop.</p>

<p>The direct copying code uses PP primarily for the generic typing: it includes its own threadloops.</p>

<p>convolveND does not process bad values. It will set the bad-value flag of all output piddles if the flag is set for any of the input piddles.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS"
>AUTHORS</a></h1>

<p>Copyright (C) Karl Glazebrook and Craig DeForest, 1997, 2003 All rights reserved. There is no warranty. You are allowed to redistribute this software / documentation under certain conditions. For details, see the file COPYING in the PDL distribution. If this file is separated from the PDL distribution, the copyright notice should be included in the file.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
