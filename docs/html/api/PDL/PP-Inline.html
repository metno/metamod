<html><head><title>PDL::PP-Inline</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:24 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#Usage'>Usage</a>
  <li class='indexItem indexItem1'><a href='#Examples'>Examples</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#A_simple_example'>A simple example</a>
    <li class='indexItem indexItem2'><a href='#Code_that_uses_external_libraries%2C_etc'>Code that uses external libraries, etc</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Pdlpp_Configuration_Options'>Pdlpp Configuration Options</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#AUTO_INCLUDE'>AUTO_INCLUDE</a>
    <li class='indexItem indexItem2'><a href='#BLESS'>BLESS</a>
    <li class='indexItem indexItem2'><a href='#BOOT'>BOOT</a>
    <li class='indexItem indexItem2'><a href='#CC'>CC</a>
    <li class='indexItem indexItem2'><a href='#CCFLAGS'>CCFLAGS</a>
    <li class='indexItem indexItem2'><a href='#INC'>INC</a>
    <li class='indexItem indexItem2'><a href='#LD'>LD</a>
    <li class='indexItem indexItem2'><a href='#LDDLFLAGS'>LDDLFLAGS</a>
    <li class='indexItem indexItem2'><a href='#LIBS'>LIBS</a>
    <li class='indexItem indexItem2'><a href='#MAKE'>MAKE</a>
    <li class='indexItem indexItem2'><a href='#MYEXTLIB'>MYEXTLIB</a>
    <li class='indexItem indexItem2'><a href='#OPTIMIZE'>OPTIMIZE</a>
    <li class='indexItem indexItem2'><a href='#TYPEMAPS'>TYPEMAPS</a>
    <li class='indexItem indexItem2'><a href='#NOISY'>NOISY</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#doing_inline_scripts'>doing inline scripts</a>
    <li class='indexItem indexItem2'><a href='#PDL%3A%3ANiceSlice_and_Inline%3A%3APdlpp'>PDL::NiceSlice and Inline::Pdlpp</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#ACKNOWLEDGEMENTS'>ACKNOWLEDGEMENTS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<pre>  Inline::Pdlpp - Write PDL Subroutines inline with PDL::PP</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p><code>Inline::Pdlpp</code> is a module that allows you to write PDL subroutines in the PDL::PP style. The big benefit compared to plain <code>PDL::PP</code> is that you can write these definitions inline in any old perl script (without the normal hassle of creating Makefiles, building, etc). Since version 0.30 the Inline module supports multiple programming languages and each language has its own support module. This document describes how to use Inline with PDL::PP (or rather, it will once these docs are complete <code>;)</code>.</p>

<p>For more information on Inline in general, see <a href="../Inline.html" class="podlinkpod"
>Inline</a>.</p>

<p>Some example scripts demonstrating <code>Inline::Pdlpp</code> usage can be found in the <em>Example/InlinePdlpp</em> directory.</p>

<p><code>Inline::Pdlpp</code> is mostly a shameless rip-off of <code>Inline::C</code>. Most Kudos goes to Brian I.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Usage"
>Usage</a></h1>

<p>You never actually use <code>Inline::Pdlpp</code> directly. It is just a support module for using <code>Inline.pm</code> with <code>PDL::PP</code>. So the usage is always:</p>

<pre>    use Inline Pdlpp =&#62; ...;</pre>

<p>or</p>

<pre>    bind Inline Pdlpp =&#62; ...;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Examples"
>Examples</a></h1>

<p>Pending availability of full docs a few quick examples that illustrate typical usage.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="A_simple_example"
>A simple example</a></h2>

<pre>   # example script inlpp.pl
   use PDL; # must be called before (!) &#39;use Inline Pdlpp&#39; calls

   use Inline Pdlpp; # the actual code is in the __Pdlpp__ block below

   $a = sequence 10;
   print $a-&#62;inc,&#34;\n&#34;;
   print $a-&#62;inc-&#62;dummy(1,10)-&#62;tcumul,&#34;\n&#34;;

   __DATA__

   __Pdlpp__

   pp_def(&#39;inc&#39;,
          Pars =&#62; &#39;i();[o] o()&#39;,
          Code =&#62; &#39;$o() = $i() + 1;&#39;,
         );

   pp_def(&#39;tcumul&#39;,
          Pars =&#62; &#39;in(n);[o] mul()&#39;,
          Code =&#62; &#39;$mul() = 1;
                   loop(n) %{
                     $mul() *= $in();
                   %}&#39;,
   );
   # end example script</pre>

<p>If you call this script it should generate output similar to this:</p>

<pre>   prompt&#62; perl inlpp.pl
   Inline running PDL::PP version 2.2...
   [1 2 3 4 5 6 7 8 9 10]
   [3628800 3628800 3628800 3628800 3628800 3628800 3628800 3628800 3628800 3628800]</pre>

<p>Usage of <code>Inline::Pdlpp</code> in general is similar to <code>Inline::C</code>. In the absence of full docs for <code>Inline::Pdlpp</code> you might want to compare <a href="../Inline/C.html" class="podlinkpod"
>Inline::C</a>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Code_that_uses_external_libraries,_etc"
>Code that uses external libraries, etc</a></h2>

<p>The script below is somewhat more complicated in that it uses code from an external library (here from Numerical Recipes). All the relevant information regarding include files, libraries and boot code is specified in a config call to <code>Inline</code>. For more experienced Perl hackers it might be helpful to know that the format is similar to that used with <a href="../ExtUtils/MakeMaker.html" class="podlinkpod"
>ExtUtils::MakeMaker</a>. The keywords are largely equivalent to those used with <code>Inline::C</code>. Please see below for further details on the usage of <code>INC</code>, <code>LIBS</code>, <code>AUTO_INCLUDE</code> and <code>BOOT</code>.</p>

<pre>   use PDL; # this must be called before (!) &#39;use Inline Pdlpp&#39; calls

   use Inline Pdlpp =&#62; Config =&#62;
     INC =&#62; &#34;-I$ENV{HOME}/include&#34;,
     LIBS =&#62; &#34;-L$ENV{HOME}/lib -lnr -lm&#34;,
     # code to be included in the generated XS
     AUTO_INCLUDE =&#62; &#60;&#60;&#39;EOINC&#39;,
   #include &#60;math.h&#62;
   #include &#34;nr.h&#34;    /* for poidev */
   #include &#34;nrutil.h&#34;  /* for err_handler */

   static void nr_barf(char *err_txt)
   {
     fprintf(stderr,&#34;Now calling croak...\n&#34;);
     croak(&#34;NR runtime error: %s&#34;,err_txt);
   }
   EOINC
   # install our error handler when loading the Inline::Pdlpp code
   BOOT =&#62; &#39;set_nr_err_handler(nr_barf);&#39;;

   use Inline Pdlpp; # the actual code is in the __Pdlpp__ block below

   $a = zeroes(10) + 30;;
   print $a-&#62;poidev(5),&#34;\n&#34;;

   __DATA__

   __Pdlpp__

   pp_def(&#39;poidev&#39;,
           Pars =&#62; &#39;xm(); [o] pd()&#39;,
           GenericTypes =&#62; [L,F,D],
           OtherPars =&#62; &#39;long idum&#39;,
           Code =&#62; &#39;$pd() = poidev((float) $xm(), &#38;$COMP(idum));&#39;,
   );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Pdlpp_Configuration_Options"
>Pdlpp Configuration Options</a></h1>

<p>For information on how to specify Inline configuration options, see <a href="../Inline.html" class="podlinkpod"
>Inline</a>. This section describes each of the configuration options available for Pdlpp. Most of the options correspond either to MakeMaker or XS options of the same name. See <a href="../ExtUtils/MakeMaker.html" class="podlinkpod"
>ExtUtils::MakeMaker</a> and <a href="../perlxs.html" class="podlinkpod"
>perlxs</a>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="AUTO_INCLUDE"
>AUTO_INCLUDE</a></h2>

<p>Specifies extra statements to automatically included. They will be added onto the defaults. A newline char will be automatically added. Does essentially the same as a call to <code>pp_addhdr</code>. For short bits of code <code>AUTO_INCLUDE</code> is probably syntactically nicer.</p>

<pre>    use Inline Pdlpp =&#62; Config =&#62; AUTO_INCLUDE =&#62; &#39;#include &#34;yourheader.h&#34;&#39;;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="BLESS"
>BLESS</a></h2>

<p>Same as <code>pp_bless</code> command. Specifies the package (i.e. class) to which your new <i>pp_def</i>ed methods will be added. Defaults to <code>PDL</code> if omitted.</p>

<pre>    use Inline Pdlpp =&#62; Config =&#62; BLESS =&#62; &#39;PDL::Complex&#39;;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="BOOT"
>BOOT</a></h2>

<p>Specifies C code to be executed in the XS BOOT section. Corresponds to the XS parameter. Does the same as the <code>pp_add_boot</code> command. Often used to execute code only once at load time of the module, e.g. a library initialization call.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="CC"
>CC</a></h2>

<p>Specify which compiler to use.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="CCFLAGS"
>CCFLAGS</a></h2>

<p>Specify extra compiler flags.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="INC"
>INC</a></h2>

<p>Specifies an include path to use. Corresponds to the MakeMaker parameter.</p>

<pre>    use Inline Pdlpp =&#62; Config =&#62; INC =&#62; &#39;-I/inc/path&#39;;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="LD"
>LD</a></h2>

<p>Specify which linker to use.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="LDDLFLAGS"
>LDDLFLAGS</a></h2>

<p>Specify which linker flags to use.</p>

<p>NOTE: These flags will completely override the existing flags, instead of just adding to them. So if you need to use those too, you must respecify them here.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="LIBS"
>LIBS</a></h2>

<p>Specifies external libraries that should be linked into your code. Corresponds to the MakeMaker parameter.</p>

<pre>    use Inline Pdlpp =&#62; Config =&#62; LIBS =&#62; &#39;-lyourlib&#39;;</pre>

<p>or</p>

<pre>    use Inline Pdlpp =&#62; Config =&#62; LIBS =&#62; &#39;-L/your/path -lyourlib&#39;;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="MAKE"
>MAKE</a></h2>

<p>Specify the name of the &#39;make&#39; utility to use.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="MYEXTLIB"
>MYEXTLIB</a></h2>

<p>Specifies a user compiled object that should be linked in. Corresponds to the MakeMaker parameter.</p>

<pre>    use Inline Pdlpp =&#62; Config =&#62; MYEXTLIB =&#62; &#39;/your/path/yourmodule.so&#39;;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="OPTIMIZE"
>OPTIMIZE</a></h2>

<p>This controls the MakeMaker OPTIMIZE setting. By setting this value to &#39;-g&#39;, you can turn on debugging support for your Inline extensions. This will allow you to be able to set breakpoints in your C code using a debugger like gdb.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="TYPEMAPS"
>TYPEMAPS</a></h2>

<p>Specifies extra typemap files to use. Corresponds to the MakeMaker parameter.</p>

<pre>    use Inline Pdlpp =&#62; Config =&#62; TYPEMAPS =&#62; &#39;/your/path/typemap&#39;;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="NOISY"
>NOISY</a></h2>

<p>Show the output of any compilations going on behind the scenes. Uses <code>tee</code> which must be available on your computer. Default is off.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="doing_inline_scripts"
><code>do</code>ing inline scripts</a></h2>

<p>Beware that there is a problem when you use the __DATA__ keyword style of Inline definition and want to <code>do</code> your script containing inlined code. For example</p>

<pre>   # myscript.pl contains inlined code
   # in the __DATA__ section
   perl -e &#39;do &#34;myscript.pl&#34;;&#39;
 One or more DATA sections were not processed by Inline.</pre>

<p>According to Brian Ingerson (of Inline fame) the workaround is to include an <code>Inline-&#62;init</code> call in your script, e.g.</p>

<pre>  use PDL;
  use Inline Pdlpp;
  Inline-&#62;init;

  # perl code

  __DATA__
  __Pdlpp__

  # pp code</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PDL::NiceSlice_and_Inline::Pdlpp"
><code>PDL::NiceSlice</code> and <code>Inline::Pdlpp</code></a></h2>

<p>There is currently an undesired interaction between <a href="../PDL/NiceSlice.html" class="podlinkpod"
>PDL::NiceSlice</a> and <code>Inline::Pdlpp</code>. Since PP code generally contains expressions of the type <code>$var()</code> (to access piddles, etc) <a href="../PDL/NiceSlice.html" class="podlinkpod"
>PDL::NiceSlice</a> recognizes those incorrectly as slice expressions and does its substitutions. For the moment (until hopefully the parser can deal with that) it is best to explicitly switch <a href="../PDL/NiceSlice.html" class="podlinkpod"
>PDL::NiceSlice</a> off before the section of inlined Pdlpp code. For example:</p>

<pre>  use PDL::NiceSlice;
  use Inline::Pdlpp;

  $a = sequence 10;
  $a(0:3)++;
  $a-&#62;inc;

  no PDL::NiceSlice;

  __DATA__

  __C__

  ppdef (...); # your full pp definition here</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ACKNOWLEDGEMENTS"
>ACKNOWLEDGEMENTS</a></h1>

<p>Brian Ingerson for creating the Inline infrastructure.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Christian Soeller &#60;soellermail@excite.com&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../PDL.html" class="podlinkpod"
>PDL</a></p>

<p><a href="../PDL/PP.html" class="podlinkpod"
>PDL::PP</a></p>

<p><a href="../Inline.html" class="podlinkpod"
>Inline</a></p>

<p><a href="../Inline/C.html" class="podlinkpod"
>Inline::C</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (c) 2001. Christian Soeller. All rights reserved.</p>

<p>This program is free software; you can redistribute it and/or modify it under the same terms as PDL itself.</p>

<p>See http://pdl.perl.org</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
