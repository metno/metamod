<html><head><title>PDL::Objects</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:24 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Inheritance'>Inheritance</a>
    <li class='indexItem indexItem2'><a href='#Examples'>Examples</a>
    <li class='indexItem indexItem2'><a href='#Output_Auto-Creation_and_Subclassed_Objects'>Output Auto-Creation and Subclassed Objects</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>PDL::Objects -- Object-Orientation,
what is it and how to exploit it</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This still needs to be written properly.
[Also,
is there a good reason we don&#39;t recommend storing extra object data in the header hash?]</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Inheritance"
>Inheritance</a></h2>

<p>There are basically two reasons for subclassing piddles.
The first is simply that you want to be able to use your own routines like</p>

<pre>        $piddle-&#62;something()</pre>

<p>but don&#39;t want to mess up the PDL namespace (a worthy goal, indeed!). The other is that you wish to provide special handling of some functions or more information about the data the piddle contains. In the first case, you can do with</p>

<pre>        package BAR;
        @ISA=qw/PDL/;
        sub foo {my($this) = @_; fiddle;}

        package main;
        $a = PDL::pdl(BAR,5);
        $a-&#62;foo();</pre>

<p>However, because a PDL object is an opaque reference to a C struct, it is not possible to extend the PDL class by e.g. extra data via subclassing. To circumvent this problem PerlDL has built-in support to extent the PDL class via the <i>has-a</i> relation for blessed hashes. You can get the <i>HAS-A</i> behave like <i>IS-A</i> simply in that you assign the <code>PDL</code> object to the attribute named PDL and redefine the method initialize().</p>

<pre>    package FOO;

    @FOO::ISA = qw(PDL);
    sub initialize {
        my $class = shift;
        my $self = {
                creation_time =&#62; time(),  # necessary extension :-)
                PDL =&#62; null,             # used to store PDL object
                };
        bless $self, $class;
    }</pre>

<p>All PDL constructors will call initialize() to make sure that your extensions are added by <i>all</i> PDL constructors automatically. The <code>PDL</code> attribute is used by perlDL to store the PDL object and all PDL methods use this attribute automatically if they are called with a blessed hash reference instead of a PDL object (a blessed scalar).</p>

<p>Do remember that if you subclass a class that is subclassed from a piddle, you need to call SUPER::initialize.</p>

<p>NEED STUFF ABOUT CODE REFs!!</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Examples"
>Examples</a></h2>

<p>You can find some simple examples of PDL subclassing in the PDL distribution test-case files. Look in <code>t/subclass2.t</code>, <code>t/subclass3.t</code>, etc.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Output_Auto-Creation_and_Subclassed_Objects"
>Output Auto-Creation and Subclassed Objects</a></h2>

<p>For PDL Functions where the output is created and returned, PDL will either call the subclassed object&#39;s <code>initialize</code> or <code>copy</code> method to create the output object. (See <a href="../PDL/Indexing.html#Output_auto-creation_and_PP-function_calling_conventions" class="podlinkpod"
>PDL::Indexing</a> for a discussion on Output Auto-Creation.) This behavior is summarized as follows:</p>

<ul>
<li>For <i>Simple</i> functions, defined as having a signature of
<pre> func( a(), [o]b() )</pre>

<p>PDL will call $a-&#62;copy to create the output object.</p>

<p>In the spirit of the Perl philosophy of making <i>Easy Things Easy</i>, This behavior enables PDL-subclassed objects to be written without having to overload the many simple PDL functions in this category.</p>

<p>The file t/subclass4.t in the PDL Distribution tests for this behavior. See that file for an example.</p>
</li>

<li>For other functions, PDL will call $class-&#62;initialize to create the output object. Where $class is the class name of the first argument supplied to the function.
<p>For these more complex cases, it is difficult to second-guess the subclassed object&#39;s designer to know if a <code>copy</code> or a <code>initialize</code> is appropriate. So for these cases, $class-&#62;initialize is called by default. If this is not appropriate for you, overload the function in your subclass and do whatever is appropriate is the overloaded function&#39;s code.</p>
</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Copyright (C) Karl Glazebrook (kgb@aaoepp.aao.gov.au), Tuomas J. Lukka, (lukka@husc.harvard.edu) and Christian Soeller (c.soeller@auckland.ac.nz) 2000. Commercial reproduction of this documentation in a different format is forbidden.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
