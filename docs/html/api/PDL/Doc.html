<html><head><title>PDL::Doc</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:23 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#Using_PDL_documentation'>Using PDL documentation</a>
  <li class='indexItem indexItem1'><a href='#PDL_documentation_conventions'>PDL documentation conventions</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Which_directives_should_be_contained_in_the_documentation'>Which directives should be contained in the documentation</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#INSTANCE_METHODS'>INSTANCE METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new'>new</a>
    <li class='indexItem indexItem2'><a href='#addfiles'>addfiles</a>
    <li class='indexItem indexItem2'><a href='#outfile'>outfile</a>
    <li class='indexItem indexItem2'><a href='#ensuredb'>ensuredb</a>
    <li class='indexItem indexItem2'><a href='#savedb'>savedb</a>
    <li class='indexItem indexItem2'><a href='#gethash'>gethash</a>
    <li class='indexItem indexItem2'><a href='#search'>search</a>
    <li class='indexItem indexItem2'><a href='#scan'>scan</a>
    <li class='indexItem indexItem2'><a href='#scantree'>scantree</a>
    <li class='indexItem indexItem2'><a href='#funcdocs'>funcdocs</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#FUNCTIONS'>FUNCTIONS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#add_module'>add_module</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#PDL%3A%3ADOC_EXAMPLE'>PDL::DOC EXAMPLE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Finding_Modules'>Finding Modules</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>PDL::Doc - support for PDL online documentation</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use PDL::Doc;
  $onlinedc = new PDL::Doc ($docfile);
  @match = $onlinedc-&#62;search(&#39;m/slice|clump/&#39;);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>An implementation of online docs for PDL.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Using_PDL_documentation"
>Using PDL documentation</a></h1>

<p>PDL::Doc&#39;s main use is in the &#34;help&#34; (synonym &#34;?&#34;) and &#34;apropos&#34; (synonym &#34;??&#34;) commands in the perldl shell. PDL:Doc provides the infrastrucure to index and access PDL&#39;s documentation throguh these commands. There is also an API for direct access to the documentation database (see below).</p>

<p>The PDL doc system is built on Perl&#39;s pod (Plain Old Documentation), included inline with each module. The PDL core modules are automatically indexed when PDL is built and installed, and there is provision for indexing external modules as well.</p>

<p>To include your module&#39;s pod into the Perl::Doc index, you should follow the documentation conventions below.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PDL_documentation_conventions"
>PDL documentation conventions</a></h1>

<p>For a package like PDL that has <i>a lot</i> of functions it is very desirable to have some form of online help to make it easy for the user to remind himself of names, calling conventions and typical usage of the multitude of functions at his disposal. To make it straightforward to extract the relevant information from the POD documentation in source files that make up the PDL distribution certain conventions have been adopted in formatting this documentation.</p>

<p>The first convention says that all documentation for PDL functions appears in the POD section introduced by one of the following:</p>

<pre>  =head1 FUNCTIONS
  =head1 OPERATORS
  =head1 METHODS
  =head1 CONSTRUCTORS</pre>

<p>If you&#39;re documenting an object-oriented interface to a class that your module defines, you should use METHODS and CONSTRUCTORS as appropriate. If you are simply adding functions to PDL, use FUNCTIONS and OPERATORS as appropriate.</p>

<p>Individual functions or methods in these section are introduced by</p>

<pre>  =head2 funcname</pre>

<p>where signature is the argumentlist for a PP defined function as explained in <a href="../PDL/PP.html" class="podlinkpod"
>PDL::PP</a>. Generally, PDL documentation is in valid POD format (see <a href="../perlpod.html" class="podlinkpod"
>perlpod</a>) but uses the <code>=for</code> directive in a special way. The <code>=for</code> directive is used to flag to the PDL Pod parser that information is following that will be used to generate online help.</p>

<p>The PDL Pod parser recognises the following <code>=for</code> directives:</p>

<dl>
<dt><a name="Ref"
>Ref</a></dt>

<dd>
<p>indicates that the one line reference for this function follows, e.g.,</p>

<pre>   =for ref

   Returns a piddle of lags to parent.</pre>

<dt><a name="Sig"
>Sig</a></dt>

<dd>
<p>the signature for the current function follows, e.g.,</p>

<pre>   =for sig

      Signature: (a(n), [o]b(), [t]tmp(n))</pre>

<dt><a name="Usage"
>Usage</a></dt>

<dd>
<p>an indication of the possible calling conventions for the current function, e.g.,</p>

<pre>   =for usage

      wpic($pdl,$filename[,{ options... }])</pre>

<dt><a name="Opt"
>Opt</a></dt>

<dd>
<p>lists options for the current function, e.g.,</p>

<pre>   =for options

      CONVERTER  =&#62; &#39;ppmtogif&#39;,   # explicitly specify pbm converter
      FLAGS      =&#62; &#39;-interlaced -transparent 0&#39;,  # flags for converter
      IFORM      =&#62; &#39;PGM&#39;,        # explicitly specify intermediate format
      XTRAFLAGS  =&#62; &#39;-imagename iris&#39;, # additional flags to defaultflags
      FORMAT     =&#62; &#39;PCX&#39;,        # explicitly specify output image format
      COLOR      =&#62; &#39;bw&#39;,         # specify color conversion
      LUT        =&#62; $lut,         # use color table information</pre>

<dt><a name="Example"
>Example</a></dt>

<dd>
<p>gives examples of typical usage for the current function:</p>

<pre>   =for example

       wpic $pdl, $file;
       $im-&#62;wpic(&#39;web.gif&#39;,{LUT =&#62; $lut});
       for (@images) {
         $_-&#62;wpic($name[0],{CONVERTER =&#62; &#39;ppmtogif&#39;})
       }</pre>

<dt><a name="Bad"
>Bad</a></dt>

<dd>
<p>provides information on how the function handles bad values (if <code>$PDL:Config{WITH_BADVAL}</code> is set to 1). The documentation under this directive should indicate if this function accepts piddles with bad values and under what circumstances this function might return piddles with bad values.</p>
</dd>
</dl>

<p>The PDL podparser is implemented as a simple state machine. Any of the above <code>=for</code> statements switches the podparser into a state where the following paragraph is accepted as information for the respective field (<code>Ref</code>, <code>Usage</code>, <code>Opt</code>, <code>Example</code> or <code>Bad</code>). Only the text up to the end of the current paragraph is accepted, for example:</p>

<pre>  =for example

         ($x,$y) = $a-&#62;func(1,3);  # this is part of the accepted info
         $x = func($a,0,1);        # this as well

         $x = func($a,$b);         # but this isn&#39;t</pre>

<p>To make the resulting pod documentation also easily digestible for the existing pod filters (pod2man, pod2text, pod2html, etc) the actual textblock of information must be separated from the <code>=for</code> directive by at least one blank line. Otherwise, the textblock will be lost in the translation process when the &#34;normal&#34; podformatters are used. The general idea behind this format is that it should be easy to extract the information for online documentation, automatic generation of a reference card, etc but at the same time the documentation should be translated by the standard podformatters without loss of contents (and without requiring any changes in the existing POD format).</p>

<p>The preceding explanations should be further explained by the following example (extracted from PDL/IO/Misc/misc.pd):</p>

<pre>   =head2 rcols()

   =for ref

   Read ASCII whitespaced cols from file into piddles efficiently.

   If no columns are specified all are assumed
   Will optionally only process lines matching a pattern.
   Can take file name or *HANDLE.

   =for usage

    Usage: ($x,$y,...) = rcols(*HANDLE|&#34;filename&#34;, [&#34;/pattern/&#34;,$col1, $col2,] ...)

   e.g.,

   =for example

     ($x,$y)    = rcols &#39;file1&#39;
     ($x,$y,$z) = rcols &#39;file2&#39;, &#34;/foo/&#34;,3,4
     $x = PDL-&#62;rcols &#39;file1&#39;;

   Note: currently quotes are required on the pattern.</pre>

<p>which is translated by, e.g, the standard <code>pod2text</code> converter into:</p>

<pre>  rcols()

    Read ASCII whitespaced cols from file into piddles efficiently.

    If no columns are specified all are assumed Will optionally only
    process lines matching a pattern. Can take file name or *HANDLE.

      Usage: ($x,$y,...) = rcols(*HANDLE|&#34;filename&#34;, [&#34;/pattern/&#34;,$col1, $col2,] ...)

    e.g.,

      ($x,$y)    = rcols &#39;file1&#39;
      ($x,$y,$z) = rcols &#39;file2&#39;, &#34;/foo/&#34;,3,4
      $x = PDL-&#62;rcols &#39;file1&#39;;

    Note: currently quotes are required on the pattern.</pre>

<p>It should be clear from the preceding example that readable output can be obtained from this format using the standard converters and the reader will hopefully get a feeling how he can easily intersperse the special <code>=for</code> directives with the normal POD documentation.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Which_directives_should_be_contained_in_the_documentation"
>Which directives should be contained in the documentation</a></h2>

<p>The module documentation should start with the</p>

<pre>  =head1 NAME

  PDL::Modulename -- do something with piddles</pre>

<p>section (as anyway required by <code>pod2man</code>) since the PDL podparser extracts the name of the module this function belongs to from that section.</p>

<p>Each function that is <i>not</i> only for internal use by the module should be documented, introduced with the <code>=head2</code> directive in the <code>=head1 FUNCTIONS</code> section. The only field that every function documented along these lines should have is the <i>Ref</i> field preceding a one line description of its intended functionality (suitable for inclusion in a concise reference card). PP defined functions (see <a href="../PDL/PP.html" class="podlinkpod"
>PDL::PP</a>) should have a <i>Sig</i> field stating their signature. To facilitate maintainance of this documentation for such functions the &#39;Doc&#39; field has been introduced into the definition of <code>pp_def</code> (see again <a href="../PDL/PP.html" class="podlinkpod"
>PDL::PP</a>) which will take care that name and signature of the so defined function are documented in this way (for examples of this usage see, for example, the PDL::Slices module, especially <em>slices.pd</em> and the resulting <em>Slices.pm</em>). Similarly, the &#39;BadDoc&#39; field provides a means of specifying information on how the routine handles the presence of bad values: this will be autpmatically created if <code>BadDoc</code> is not supplied, or set to <code>undef</code>.</p>

<p>Furthermore, the documentation for each function should contain at least one of the <i>Usage</i> or <i>Examples</i> fields. Depending on the calling conventions for the function under consideration presence of both fields may be warranted.</p>

<p>If a function has options that should be given as a hash reference in the form</p>

<pre>   {Option =&#62; Value, ...}</pre>

<p>then the possible options (and aproppriate values) should be explained in the textblock following the <code>=for Opt</code> directive (see example above and, e.g., PDL::IO::Pic).</p>

<p>It is well possible that some of these conventions appear to be clumsy at times and the author is keen to hear of any suggestions for better alternatives.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="INSTANCE_METHODS"
>INSTANCE METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new"
>new</a></h2>

<pre>  $onlinedc = new PDL::Doc (&#39;file.pdl&#39;,[more files]);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="addfiles"
>addfiles</a></h2>

<p>add another file to the online database associated with this object.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="outfile"
>outfile</a></h2>

<p>set the name of the output file for this online db</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ensuredb"
>ensuredb</a></h2>

<p>Make sure that the database is slurped in</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="savedb"
>savedb</a></h2>

<p>save the database (i.e., the hash of PDL symbols) to the file associated with this object.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="gethash"
>gethash</a></h2>

<p>Return the PDL symhash (e.g. for custom search operations)</p>

<p>The symhash is a multiply nested hash with the following structure:</p>

<pre> $symhash = {
     function_name =&#62; {
             Module =&#62; &#39;module::name&#39;,
             Sig    =&#62; &#39;signature string&#39;,
             Bad    =&#62; &#39;bad documentation string&#39;,
             ...
         },
     function_name =&#62; {
             Module =&#62; &#39;module::name&#39;,
             Sig    =&#62; &#39;signature string&#39;,
             Bad    =&#62; &#39;bad documentation string&#39;,
             ...
         },
     };</pre>

<p>The possible keys for each function include:</p>

<pre> Module   - module name
 Sig      - signature
 Crossref - the function name for the documentation, if it has multiple
            names (ex: the documentation for zeros is under zeroes)
 Names    - a comma-separated string of the all the function&#39;s names
 Example  - example text (optional)
 Ref      - one-line reference string
 Opt      - options
 Usage    - short usage explanation
 Bad      - explanation of behavior when it encounters bad values</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="search"
>search</a></h2>

<p>Search a PDL symhash</p>

<pre>  $onldc-&#62;search($regex, $fields [, $sort])</pre>

<p>Searching is by default case insensitive. Other flags can be given by specifying the regexp in the form <code>m/regex/ismx</code> where <code>/</code> can be replaced with any other non-alphanumeric character. $fields is an array reference for all hash fields (or simply a string if you only want to search one field) that should be matched against the regex. Valid fields are</p>

<pre>  Name,    # name of the function
  Module,  # module the function belongs to
  Ref,     # the one-line reference description
  Example, # the example for this function
  Opt,     # options
  File,    # the path to the source file this docs have been extracted from</pre>

<p>If you wish to have your results sorted by function name, pass a true value for <code>$sort</code>.</p>

<p>The results will be returned as an array of pairs in the form</p>

<pre> @results = (
  [funcname, {SYMHASH_ENTRY}],
  [funcname, {SYMHASH_ENTRY}],
  ...
 );</pre>

<p>See the example at the end of the documentation to see how you might use this.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="scan"
>scan</a></h2>

<p>Scan a source file using the PDL podparser to extract information for online documentation</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="scantree"
>scantree</a></h2>

<p>Scan whole directory trees for online documentation in <code>.pm</code> (module definition) and <code>*.pod</code> (general documentation) files (using the File::Find module).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="funcdocs"
>funcdocs</a></h2>

<p>extract the complete documentation about a function from its source file using the PDL::Pod::Parser filter.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FUNCTIONS"
>FUNCTIONS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="add_module"
>add_module</a></h2>

<pre> use PDL::Doc; PDL::Doc::add_module(&#34;my::module&#34;);</pre>

<p>The <code>add_module</code> function allows you to add POD from a particular Perl module that you&#39;ve installed somewhere in @INC. It searches for the active PDL document database and the module&#39;s .pod and .pm files, and scans and indexes the module into the database.</p>

<p><code>add_module</code> is meant to be added to your module&#39;s Makefile as part of the installation script.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PDL::DOC_EXAMPLE"
>PDL::DOC EXAMPLE</a></h1>

<p>Here&#39;s an example of how you might use the PDL Doc database in your own code.</p>

<pre> use PDL::Doc;
 # Find the pdl documentation
 my ($dir,$file,$pdldoc);
 DIRECTORY: for $dir (@INC) {
     $file = $dir.&#34;/PDL/pdldoc.db&#34;;
     if (-f $file) {
         print &#34;Found docs database $file\n&#34;;
         $pdldoc = new PDL::Doc ($file);
         last DIRECTORY;
     }
 }
 
 die (&#34;Unable to find docs database!\n&#34;) unless $pdldoc;
 
 # Print the reference line for zeroes:
 print $pdldoc-&#62;gethash-&#62;{zeroes}-&#62;{Ref};
 
 # See which examples use zeroes
 $pdldoc-&#62;search(&#39;zeroes&#39;, &#39;Examples&#39;, 1);
 
 # All the functions that use zeroes in their example:
 my @entries = $pdldoc-&#62;search(&#39;zeroes&#39;, &#39;Example&#39;, 1);
 print &#34;Functions that use &#39;zeroes&#39; in their examples include:\n&#34;;
 foreach my $entry (@entries) {
     # Unpack the entry
     my ($func_name, $sym_hash) = @$entry;
     print &#34;$func_name\n&#34;;
 }
 
 print &#34;\n&#34;;
 
 # Let&#39;s look at the function &#39;mpdl&#39;
 @entries = $pdldoc-&#62;search(&#39;mpdl&#39;, &#39;Name&#39;);
 # I know there&#39;s only one:
 my $entry = $entries[0];
 my ($func_name, $sym_hash) = @$entry;
 print &#34;mpdl info:\n&#34;;
 foreach my $key (keys %$sym_hash) {
     # Unpack the entry
     print &#34;---$key---\n$sym_hash-&#62;{$key}\n&#34;;
 }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Finding_Modules"
>Finding Modules</a></h2>

<p>How can you tell if you&#39;ve gotten a module for one of your entries? The Ref entry will begin with &#39;Module:&#39; if it&#39;s a module. In code:</p>

<pre> # Prints:
 #  Module: fundamental PDL functionality
 my $sym_hash = $pdldoc-&#62;gethash;
 print $pdldoc-&#62;gethash-&#62;{&#39;PDL::Core&#39;}-&#62;{Ref}, &#34;\n&#34;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h1>

<p>Quite a few shortcomings which will hopefully be fixed following discussions on the pdl-porters mailing list.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Copyright 1997 Christian Soeller &#60;c.soeller@auckland.ac.nz&#62; and Karl Glazebrook &#60;kgb@aaoepp.aao.gov.au&#62;</p>

<p>Further contributions copyright 2010 David Mertens &#60;dcmertens.perl@gmail.com&#62;</p>

<p>All rights reserved. There is no warranty. You are allowed to redistribute this software / documentation under certain conditions. For details, see the file COPYING in the PDL distribution. If this file is separated from the PDL distribution, the copyright notice should be included in the file.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
