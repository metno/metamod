<html><head><title>Algorithm::C3</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:01 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#What_is_C3%3F'>What is C3?</a>
    <li class='indexItem indexItem2'><a href='#How_does_C3_work.'>How does C3 work.</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#FUNCTION'>FUNCTION</a>
  <li class='indexItem indexItem1'><a href='#CODE_COVERAGE'>CODE COVERAGE</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#The_original_Dylan_paper'>The original Dylan paper</a>
    <li class='indexItem indexItem2'><a href='#The_prototype_Perl_6_Object_Model_uses_C3'>The prototype Perl 6 Object Model uses C3</a>
    <li class='indexItem indexItem2'><a href='#Parrot_now_uses_C3'>Parrot now uses C3</a>
    <li class='indexItem indexItem2'><a href='#Python_2.3_MRO_related_links'>Python 2.3 MRO related links</a>
    <li class='indexItem indexItem2'><a href='#C3_for_TinyCLOS'>C3 for TinyCLOS</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHORS'>AUTHORS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Algorithm::C3 - A module for merging hierarchies using the C3 algorithm</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use Algorithm::C3;

  # merging a classic diamond
  # inheritance graph like this:
  #
  #    &#60;A&#62;
  #   /   \
  # &#60;B&#62;   &#60;C&#62;
  #   \   /
  #    &#60;D&#62;

  my @merged = Algorithm::C3::merge(
      &#39;D&#39;,
      sub {
          # extract the ISA array
          # from the package
          no strict &#39;refs&#39;;
          @{$_[0] . &#39;::ISA&#39;};
      }
  );

  print join &#34;, &#34; =&#62; @merged; # prints D, B, C, A</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module implements the C3 algorithm. I have broken this out into it&#39;s own module because I found myself copying and pasting it way too often for various needs. Most of the uses I have for C3 revolve around class building and metamodels, but it could also be used for things like dependency resolution as well since it tends to do such a nice job of preserving local precedence orderings.</p>

<p>Below is a brief explanation of C3 taken from the <a href="../Class/C3.html" class="podlinkpod"
>Class::C3</a> module. For more detailed information, see the <a href="#SEE_ALSO" class="podlinkpod"
>&#34;SEE ALSO&#34;</a> section and the links there.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="What_is_C3?"
>What is C3?</a></h2>

<p>C3 is the name of an algorithm which aims to provide a sane method resolution order under multiple inheritance. It was first introduced in the language Dylan (see links in the <a href="#SEE_ALSO" class="podlinkpod"
>&#34;SEE ALSO&#34;</a> section), and then later adopted as the preferred MRO (Method Resolution Order) for the new-style classes in Python 2.3. Most recently it has been adopted as the &#39;canonical&#39; MRO for Perl 6 classes, and the default MRO for Parrot objects as well.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_does_C3_work."
>How does C3 work.</a></h2>

<p>C3 works by always preserving local precedence ordering. This essentially means that no class will appear before any of it&#39;s subclasses. Take the classic diamond inheritance pattern for instance:</p>

<pre>     &#60;A&#62;
    /   \
  &#60;B&#62;   &#60;C&#62;
    \   /
     &#60;D&#62;</pre>

<p>The standard Perl 5 MRO would be (D, B, A, C). The result being that <b>A</b> appears before <b>C</b>, even though <b>C</b> is the subclass of <b>A</b>. The C3 MRO algorithm however, produces the following MRO (D, B, C, A), which does not have this same issue.</p>

<p>This example is fairly trivial, for more complex examples and a deeper explanation, see the links in the <a href="#SEE_ALSO" class="podlinkpod"
>&#34;SEE ALSO&#34;</a> section.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FUNCTION"
>FUNCTION</a></h1>

<dl>
<dt><a name="merge_($root,_$func_to_fetch_parent,_$cache)"
><b>merge ($root, $func_to_fetch_parent, $cache)</b></a></dt>

<dd>
<p>This takes a <code>$root</code> node, which can be anything really it is up to you. Then it takes a <code>$func_to_fetch_parent</code> which can be either a CODE reference (see <a href="../SYNOPSIS.html" class="podlinkpod"
>SYNOPSIS</a> above for an example), or a string containing a method name to be called on all the items being linearized. An example of how this might look is below:</p>

<pre>  {
      package A;

      sub supers {
          no strict &#39;refs&#39;;
          @{$_[0] . &#39;::ISA&#39;};
      }

      package C;
      our @ISA = (&#39;A&#39;);
      package B;
      our @ISA = (&#39;A&#39;);
      package D;
      our @ISA = (&#39;B&#39;, &#39;C&#39;);
  }

  print join &#34;, &#34; =&#62; Algorithm::C3::merge(&#39;D&#39;, &#39;supers&#39;);</pre>

<p>The purpose of <code>$func_to_fetch_parent</code> is to provide a way for <code>merge</code> to extract the parents of <code>$root</code>. This is needed for C3 to be able to do it&#39;s work.</p>

<p>The <code>$cache</code> parameter is an entirely optional performance measure, and should not change behavior.</p>

<p>If supplied, it should be a hashref that merge can use as a private cache between runs to speed things up. Generally speaking, if you will be calling merge many times on related things, and the parent fetching function will return constant results given the same arguments during all of these calls, you can and should reuse the same shared cache hash for all of the calls. Example:</p>

<pre>  sub do_some_merging {
      my %merge_cache;
      my @foo_mro = Algorithm::C3::Merge(&#39;Foo&#39;, \&#38;get_supers, \%merge_cache);
      my @bar_mro = Algorithm::C3::Merge(&#39;Bar&#39;, \&#38;get_supers, \%merge_cache);
      my @baz_mro = Algorithm::C3::Merge(&#39;Baz&#39;, \&#38;get_supers, \%merge_cache);
      my @quux_mro = Algorithm::C3::Merge(&#39;Quux&#39;, \&#38;get_supers, \%merge_cache);
      # ...
  }</pre>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CODE_COVERAGE"
>CODE COVERAGE</a></h1>

<p>I use <b>Devel::Cover</b> to test the code coverage of my tests, below is the <b>Devel::Cover</b> report on this module&#39;s test suite.</p>

<pre> ------------------------ ------ ------ ------ ------ ------ ------ ------
 File                       stmt   bran   cond    sub    pod   time  total
 ------------------------ ------ ------ ------ ------ ------ ------ ------
 Algorithm/C3.pm           100.0  100.0  100.0  100.0  100.0  100.0  100.0
 ------------------------ ------ ------ ------ ------ ------ ------ ------
 Total                     100.0  100.0  100.0  100.0  100.0  100.0  100.0
 ------------------------ ------ ------ ------ ------ ------ ------ ------</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_original_Dylan_paper"
>The original Dylan paper</a></h2>

<dl>
<dt><a name="http://www.webcom.com/haahr/dylan/linearization-oopsla96.html"
><a href="http://www.webcom.com/haahr/dylan/linearization-oopsla96.html" class="podlinkurl"
>http://www.webcom.com/haahr/dylan/linearization-oopsla96.html</a></a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_prototype_Perl_6_Object_Model_uses_C3"
>The prototype Perl 6 Object Model uses C3</a></h2>

<dl>
<dt><a name="http://svn.openfoundry.org/pugs/perl5/Perl6-MetaModel/"
><a href="http://svn.openfoundry.org/pugs/perl5/Perl6-MetaModel/" class="podlinkurl"
>http://svn.openfoundry.org/pugs/perl5/Perl6-MetaModel/</a></a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Parrot_now_uses_C3"
>Parrot now uses C3</a></h2>

<dl>
<dt><a name="http://aspn.activestate.com/ASPN/Mail/Message/perl6-internals/2746631"
><a href="http://aspn.activestate.com/ASPN/Mail/Message/perl6-internals/2746631" class="podlinkurl"
>http://aspn.activestate.com/ASPN/Mail/Message/perl6-internals/2746631</a></a></dt>

<dd>
<dt><a name="http://use.perl.org/~autrijus/journal/25768"
><a href="http://use.perl.org/~autrijus/journal/25768" class="podlinkurl"
>http://use.perl.org/~autrijus/journal/25768</a></a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Python_2.3_MRO_related_links"
>Python 2.3 MRO related links</a></h2>

<dl>
<dt><a name="http://www.python.org/2.3/mro.html"
><a href="http://www.python.org/2.3/mro.html" class="podlinkurl"
>http://www.python.org/2.3/mro.html</a></a></dt>

<dd>
<dt><a name="http://www.python.org/2.2.2/descrintro.html#mro"
><a href="http://www.python.org/2.2.2/descrintro.html#mro" class="podlinkurl"
>http://www.python.org/2.2.2/descrintro.html#mro</a></a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="C3_for_TinyCLOS"
>C3 for TinyCLOS</a></h2>

<dl>
<dt><a name="http://www.call-with-current-continuation.org/eggs/c3.html"
><a href="http://www.call-with-current-continuation.org/eggs/c3.html" class="podlinkurl"
>http://www.call-with-current-continuation.org/eggs/c3.html</a></a></dt>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS"
>AUTHORS</a></h1>

<p>Stevan Little, &#60;stevan@iinteractive.com&#62;</p>

<p>Brandon L. Black, &#60;blblack@gmail.com&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>Copyright 2006 by Infinity Interactive, Inc.</p>

<p><a href="http://www.iinteractive.com" class="podlinkurl"
>http://www.iinteractive.com</a></p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
