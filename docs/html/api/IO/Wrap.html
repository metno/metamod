<html><head><title>IO::Wrap</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:19 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#NOTES'>NOTES</a>
  <li class='indexItem indexItem1'><a href='#WARNINGS'>WARNINGS</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#POD_ERRORS'>POD ERRORS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>IO::Wrap - wrap raw filehandles in IO::Handle interface</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>   use IO::Wrap;
       
   ### Do stuff with any kind of filehandle (including a bare globref), or 
   ### any kind of blessed object that responds to a print() message.
   ###
   sub do_stuff {
       my $fh = shift;         
       
       ### At this point, we have no idea what the user gave us... 
       ### a globref? a FileHandle? a scalar filehandle name?
       
       $fh = wraphandle($fh);  
        
       ### At this point, we know we have an IO::Handle-like object!
       
       $fh-&#62;print(&#34;Hey there!&#34;);
       ...
   }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Let&#39;s say you want to write some code which does I/O, but you don&#39;t want to force the caller to provide you with a FileHandle or IO::Handle object. You want them to be able to say:</p>

<pre>    do_stuff(\*STDOUT);
    do_stuff(&#39;STDERR&#39;);
    do_stuff($some_FileHandle_object);
    do_stuff($some_IO_Handle_object);</pre>

<p>And even:</p>

<pre>    do_stuff($any_object_with_a_print_method);</pre>

<p>Sure, one way to do it is to force the caller to use tiehandle(). But that puts the burden on them. Another way to do it is to use <b>IO::Wrap</b>, which provides you with the following functions:</p>

<dl>
<dt><a name="wraphandle_SCALAR"
>wraphandle SCALAR</a></dt>

<dd>
<p>This function will take a single argument, and &#34;wrap&#34; it based on what it seems to be...</p>

<ul>
<li><b>A raw scalar filehandle name,</b> like <code>&#34;STDOUT&#34;</code> or <code>&#34;Class::HANDLE&#34;</code>. In this case, the filehandle name is wrapped in an IO::Wrap object, which is returned.</li>

<li><b>A raw filehandle glob,</b> like <code>\*STDOUT</code>. In this case, the filehandle glob is wrapped in an IO::Wrap object, which is returned.</li>

<li><b>A blessed FileHandle object.</b> In this case, the FileHandle is wrapped in an IO::Wrap object if and only if your FileHandle class does not support the <code>read()</code> method.</li>

<li><b>Any other kind of blessed object,</b> which is assumed to be already conformant to the IO::Handle interface. In this case, you just get back that object.</li>
</ul>
</dd>
</dl>

<p>If you get back an IO::Wrap object, it will obey a basic subset of the IO:: interface. That is, the following methods (note: I said <i>methods</i>, not named operators) should work on the thing you get back:</p>

<pre>    close 
    getline 
    getlines 
    print ARGS...
    read BUFFER,NBYTES
    seek POS,WHENCE
    tell </pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NOTES"
>NOTES</a></h1>

<p>Clearly, when wrapping a raw external filehandle (like \*STDOUT), I didn&#39;t want to close the file descriptor when the &#34;wrapper&#34; object is destroyed... since the user might not appreciate that! Hence, there&#39;s no DESTROY method in this class.</p>

<p>When wrapping a FileHandle object, however, I believe that Perl will invoke the FileHandle::DESTROY when the last reference goes away, so in that case, the filehandle is closed if the wrapped FileHandle really was the last reference to it.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="WARNINGS"
>WARNINGS</a></h1>

<p>This module does not allow you to wrap filehandle names which are given as strings that lack the package they were opened in. That is, if a user opens FOO in package Foo, they must pass it to you either as <code>\*FOO</code> or as <code>&#34;Foo::FOO&#34;</code>. However, <code>&#34;STDIN&#34;</code> and friends will work just fine.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>$Id: Wrap.pm,v 1.2 2005/02/10 21:21:53 dfs Exp $</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<dl>
<dt><a name="Primary_Maintainer"
>Primary Maintainer</a></dt>

<dd>
<p>David F. Skoll (<em>dfs@roaringpenguin.com</em>).</p>

<dt><a name="Original_Author"
>Original Author</a></dt>

<dd>
<p>Eryq (<em>eryq@zeegee.com</em>). President, ZeeGee Software Inc (<em>http://www.zeegee.com</em>).</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="POD_ERRORS"
>POD ERRORS</a></h1>

<p>Hey! <b>The above document had some coding errors, which are explained below:</b></p>

<dl>
<dt><a name="Around_line_212:"
>Around line 212:</a></dt>

<dd>
<p>&#39;=item&#39; outside of any &#39;=over&#39;</p>
</dd>
</dl>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
