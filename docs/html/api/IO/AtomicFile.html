<html><head><title>IO::AtomicFile</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:19 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Primary_Maintainer'>Primary Maintainer</a>
    <li class='indexItem indexItem2'><a href='#Original_Author'>Original Author</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#REVISION'>REVISION</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>IO::AtomicFile - write a file which is updated atomically</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use IO::AtomicFile;

    ### Write a temp file, and have it install itself when closed:
    my $FH = IO::AtomicFile-&#62;open(&#34;bar.dat&#34;, &#34;w&#34;);
    print $FH &#34;Hello!\n&#34;;
    $FH-&#62;close || die &#34;couldn&#39;t install atomic file: $!&#34;;    

    ### Write a temp file, but delete it before it gets installed:
    my $FH = IO::AtomicFile-&#62;open(&#34;bar.dat&#34;, &#34;w&#34;);
    print $FH &#34;Hello!\n&#34;;
    $FH-&#62;delete; 

    ### Write a temp file, but neither install it nor delete it:
    my $FH = IO::AtomicFile-&#62;open(&#34;bar.dat&#34;, &#34;w&#34;);
    print $FH &#34;Hello!\n&#34;;
    $FH-&#62;detach;   </pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module is intended for people who need to update files reliably in the face of unexpected program termination.</p>

<p>For example, you generally don&#39;t want to be halfway in the middle of writing <i>/etc/passwd</i> and have your program terminate! Even the act of writing a single scalar to a filehandle is <i>not</i> atomic.</p>

<p>But this module gives you true atomic updates, via rename(). When you open a file <i>/foo/bar.dat</i> via this module, you are <i>actually</i> opening a temporary file <i>/foo/bar.dat..TMP</i>, and writing your output there. The act of closing this file (either explicitly via close(), or implicitly via the destruction of the object) will cause rename() to be called... therefore, from the point of view of the outside world, the file&#39;s contents are updated in a single time quantum.</p>

<p>To ensure that problems do not go undetected, the &#34;close&#34; method done by the destructor will raise a fatal exception if the rename() fails. The explicit close() just returns undef.</p>

<p>You can also decide at any point to trash the file you&#39;ve been building.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Primary_Maintainer"
>Primary Maintainer</a></h2>

<p>David F. Skoll (<em>dfs@roaringpenguin.com</em>).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Original_Author"
>Original Author</a></h2>

<p>Eryq (<em>eryq@zeegee.com</em>). President, ZeeGee Software Inc (<em>http://www.zeegee.com</em>).</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="REVISION"
>REVISION</a></h1>

<p>$Revision: 1.2 $</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
