<html><head><title>MooseX::Params::Validate</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:22 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CAVEATS'>CAVEATS</a>
  <li class='indexItem indexItem1'><a href='#EXPORTS'>EXPORTS</a>
  <li class='indexItem indexItem1'><a href='#ALLOWING_EXTRA_PARAMETERS'>ALLOWING EXTRA PARAMETERS</a>
  <li class='indexItem indexItem1'><a href='#EXPORTS'>EXPORTS</a>
  <li class='indexItem indexItem1'><a href='#IMPORTANT_NOTE_ON_CACHING'>IMPORTANT NOTE ON CACHING</a>
  <li class='indexItem indexItem1'><a href='#MAINTAINER'>MAINTAINER</a>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
  <li class='indexItem indexItem1'><a href='#AUTHORS'>AUTHORS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>MooseX::Params::Validate - an extension of Params::Validate using Moose&#39;s types</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 0.18</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  package Foo;
  use Moose;
  use MooseX::Params::Validate;

  sub foo {
      my ( $self, %params ) = validated_hash(
          \@_,
          bar =&#62; { isa =&#62; &#39;Str&#39;, default =&#62; &#39;Moose&#39; },
      );
      return &#34;Hooray for $params{bar}!&#34;;
  }

  sub bar {
      my $self = shift;
      my ( $foo, $baz, $gorch ) = validated_list(
          \@_,
          foo   =&#62; { isa =&#62; &#39;Foo&#39; },
          baz   =&#62; { isa =&#62; &#39;ArrayRef | HashRef&#39;, optional =&#62; 1 },
          gorch =&#62; { isa =&#62; &#39;ArrayRef[Int]&#39;, optional =&#62; 1 }
      );
      [ $foo, $baz, $gorch ];
  }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module fills a gap in Moose by adding method parameter validation to Moose. This is just one of many developing options, it should not be considered the &#34;official&#34; one by any means though.</p>

<p>You might also want to explore <code>MooseX::Method::Signatures</code> and <code>MooseX::Declare</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAVEATS"
>CAVEATS</a></h1>

<p>It is not possible to introspect the method parameter specs; they are created as needed when the method is called and cached for subsequent calls.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXPORTS"
>EXPORTS</a></h1>

<dl>
<dt><a name="validated_hash(_\@_,_%parameter_spec_)"
><b>validated_hash( \@_, %parameter_spec )</b></a></dt>

<dd>
<p>This behaves similarly to the standard Params::Validate <code>validate</code> function and returns the captured values in a HASH. The one exception is where if it spots an instance in the <code>@_</code>, then it will handle it appropriately (unlike Params::Validate which forces you to shift you <code>$self</code> first).</p>

<p>The values in <code>@_</code> can either be a set of name-value pairs or a single hash reference.</p>

<p>The <code>%parameter_spec</code> accepts the following options:</p>

<dl>
<dt><a name="isa"
><i>isa</i></a></dt>

<dd>
<p>The <code>isa</code> option can be either; class name, Moose type constraint name or an anon Moose type constraint.</p>

<dt><a name="does"
><i>does</i></a></dt>

<dd>
<p>The <code>does</code> option can be either; role name or an anon Moose type constraint.</p>

<dt><a name="default"
><i>default</i></a></dt>

<dd>
<p>This is the default value to be used if the value is not supplied.</p>

<dt><a name="optional"
><i>optional</i></a></dt>

<dd>
<p>As with Params::Validate, all options are considered required unless otherwise specified. This option is passed directly to Params::Validate.</p>

<dt><a name="coerce"
><i>coerce</i></a></dt>

<dd>
<p>If this is true and the parameter has a type constraint which has coercions, then the coercion will be called for this parameter. If the type does have coercions, then this parameter is ignored.</p>
</dd>
</dl>

<p>This function is also available under its old name, <code>validate</code>.</p>

<dt><a name="validated_list(_\@_,_%parameter_spec_)"
><b>validated_list( \@_, %parameter_spec )</b></a></dt>

<dd>
<p>The <code>%parameter_spec</code> accepts the same options as above, but returns the parameters as positional values instead of a HASH. This is best explained by example:</p>

<pre>  sub foo {
      my ( $self, $foo, $bar ) = validated_list(
          \@_,
          foo =&#62; { isa =&#62; &#39;Foo&#39; },
          bar =&#62; { isa =&#62; &#39;Bar&#39; },
      );
      $foo-&#62;baz($bar);
  }</pre>

<p>We capture the order in which you defined the parameters and then return them as a list in the same order. If a param is marked optional and not included, then it will be set to <code>undef</code>.</p>

<p>The values in <code>@_</code> can either be a set of name-value pairs or a single hash reference.</p>

<p>Like <code>validated_hash</code>, if it spots an object instance as the first parameter of <code>@_</code>, it will handle it appropriately, returning it as the first argument.</p>

<p>This function is also available under its old name, <code>validatep</code>.</p>

<dt><a name="pos_validated_list(_\@_,_$spec,_$spec,_..._)"
><b>pos_validated_list( \@_, $spec, $spec, ... )</b></a></dt>

<dd>
<p>This function validates a list of positional parameters. Each <code>$spec</code> should validate one of the parameters in the list:</p>

<pre>  sub foo {
      my $self = shift;
      my ( $foo, $bar ) = pos_validated_list(
          \@_,
          { isa =&#62; &#39;Foo&#39; },
          { isa =&#62; &#39;Bar&#39; },
      );

      ...
  }</pre>

<p>Unlike the other functions, this function <i>cannot</i> find <code>$self</code> in the argument list. Make sure to shift it off yourself before doing validation.</p>

<p>The values in <code>@_</code> must be a list of values. You cannot pass the values as an array reference, because this cannot be distinguished from passing one value which is itself an array reference.</p>

<p>If a parameter is marked as optional and is not present, it will simply not be returned.</p>

<p>If you want to pass in any of the cache control parameters described below, simply pass them after the list of parameter validation specs:</p>

<pre>  sub foo {
      my $self = shift;
      my ( $foo, $bar ) = pos_validated_list(
          \@_,
          { isa =&#62; &#39;Foo&#39; },
          { isa =&#62; &#39;Bar&#39; },
          MX_PARAMS_VALIDATE_NO_CACHE =&#62; 1,
      );

      ...
  }</pre>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ALLOWING_EXTRA_PARAMETERS"
>ALLOWING EXTRA PARAMETERS</a></h1>

<p>By default, any parameters not mentioned in the parameter spec cause this module to throw an error. However, you can have have this module simply ignore them by setting <code>MX_PARAMS_VALIDATE_ALLOW_EXTRA</code> to a true value when calling a validation subroutine.</p>

<p>When calling <code>validated_hash</code> or <code>pos_validated_list</code> the extra parameters are simply returned in the hash or list as appropriate. However, when you call <code>validated_list</code> the extra parameters will not be returned at all. You can get them by looking at the original value of <code>@_</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXPORTS"
>EXPORTS</a></h1>

<p>By default, this module exports the <code>validated_hash</code>, <code>validated_list</code>, and <code>pos_validated_list</code>.</p>

<p>If you would prefer to import the now deprecated functions <code>validate</code> and <code>validatep</code> instead, you can use the <code>:deprecated</code> tag to import them.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="IMPORTANT_NOTE_ON_CACHING"
>IMPORTANT NOTE ON CACHING</a></h1>

<p>When a validation subroutine is called the first time, the parameter spec is prepared and cached to avoid unnecessary regeneration. It uses the fully qualified name of the subroutine (package + subname) as the cache key. In 99.999% of the use cases for this module, that will be the right thing to do.</p>

<p>However, I have (ab)used this module occasionally to handle dynamic sets of parameters. In this special use case you can do a couple things to better control the caching behavior.</p>

<ul>
<li>Passing in the <code>MX_PARAMS_VALIDATE_NO_CACHE</code> flag in the parameter spec this will prevent the parameter spec from being cached.
<pre>  sub foo {
      my ( $self, %params ) = validated_hash(
          \@_,
          foo                         =&#62; { isa =&#62; &#39;Foo&#39; },
          MX_PARAMS_VALIDATE_NO_CACHE =&#62; 1,
      );

  }</pre>
</li>

<li>Passing in <code>MX_PARAMS_VALIDATE_CACHE_KEY</code> with a value to be used as the cache key will bypass the normal cache key generation.
<pre>  sub foo {
      my ( $self, %params ) = validated_hash(
          \@_,
          foo                          =&#62; { isa =&#62; &#39;Foo&#39; },
          MX_PARAMS_VALIDATE_CACHE_KEY =&#62; &#39;foo-42&#39;,
      );

  }</pre>
</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="MAINTAINER"
>MAINTAINER</a></h1>

<p>Dave Rolsky &#60;autarch@urth.org&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h1>

<p>Please submit bugs to the CPAN RT system at http://rt.cpan.org/NoAuth/ReportBug.html?Queue=moosex-params-validate or via email at bug-moosex-params-validate@rt.cpan.org.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS"
>AUTHORS</a></h1>

<ul>
<li>Stevan Little &#60;stevan.little@iinteractive.com&#62;</li>

<li>Dave Rolsky &#60;autarch@urth.org&#62;</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2013 by Stevan Little &#60;stevan.little@iinteractive.com&#62;.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
