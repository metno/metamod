<html><head><title>MooseX::Getopt</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:22 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Supported_Type_Constraints'>Supported Type Constraints</a>
    <li class='indexItem indexItem2'><a href='#Custom_Type_Constraints'>Custom Type Constraints</a>
    <li class='indexItem indexItem2'><a href='#Inferred_Type_Constraints'>Inferred Type Constraints</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new_with_options_(%25params)'>new_with_options (%params)</a>
    <li class='indexItem indexItem2'><a href='#ARGV'>ARGV</a>
    <li class='indexItem indexItem2'><a href='#extra_argv'>extra_argv</a>
    <li class='indexItem indexItem2'><a href='#usage'>usage</a>
    <li class='indexItem indexItem2'><a href='#help_flag'>help_flag</a>
    <li class='indexItem indexItem2'><a href='#print_usage_text'>print_usage_text</a>
    <li class='indexItem indexItem2'><a href='#meta'>meta</a>
    <li class='indexItem indexItem2'><a href='#process_argv_(%25params)'>process_argv (%params)</a>
    <li class='indexItem indexItem2'><a href='#More_Customization_Options'>More Customization Options</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
  <li class='indexItem indexItem1'><a href='#CONTRIBUTORS'>CONTRIBUTORS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>MooseX::Getopt - A Moose role for processing command line options</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 0.58</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  ## In your class
  package My::App;
  use Moose;

  with &#39;MooseX::Getopt&#39;;

  has &#39;out&#39; =&#62; (is =&#62; &#39;rw&#39;, isa =&#62; &#39;Str&#39;, required =&#62; 1);
  has &#39;in&#39;  =&#62; (is =&#62; &#39;rw&#39;, isa =&#62; &#39;Str&#39;, required =&#62; 1);

  # ... rest of the class here

  ## in your script
  #!/usr/bin/perl

  use My::App;

  my $app = My::App-&#62;new_with_options();
  # ... rest of the script here

  ## on the command line
  % perl my_app_script.pl -in file.input -out file.dump</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This is a role which provides an alternate constructor for creating objects using parameters passed in from the command line.</p>

<p>This module attempts to DWIM as much as possible with the command line params by introspecting your class&#39;s attributes. It will use the name of your attribute as the command line option, and if there is a type constraint defined, it will configure Getopt::Long to handle the option accordingly.</p>

<p>You can use the trait <a href="../MooseX/Getopt/Meta/Attribute/Trait.html" class="podlinkpod"
>MooseX::Getopt::Meta::Attribute::Trait</a> or the attribute metaclass <a href="../MooseX/Getopt/Meta/Attribute.html" class="podlinkpod"
>MooseX::Getopt::Meta::Attribute</a> to get non-default commandline option names and aliases.</p>

<p>You can use the trait <a href="../MooseX/Getopt/Meta/Attribute/Trait/NoGetopt.html" class="podlinkpod"
>MooseX::Getopt::Meta::Attribute::Trait::NoGetopt</a> or the attribute metaclass <a href="../MooseX/Getopt/Meta/Attribute/NoGetopt.html" class="podlinkpod"
>MooseX::Getopt::Meta::Attribute::NoGetopt</a> to have <code>MooseX::Getopt</code> ignore your attribute in the commandline options.</p>

<p>By default, attributes which start with an underscore are not given commandline argument support, unless the attribute&#39;s metaclass is set to <a href="../MooseX/Getopt/Meta/Attribute.html" class="podlinkpod"
>MooseX::Getopt::Meta::Attribute</a>. If you don&#39;t want your accessors to have the leading underscore in their name, you can do this:</p>

<pre>  # for read/write attributes
  has &#39;_foo&#39; =&#62; (accessor =&#62; &#39;foo&#39;, ...);

  # or for read-only attributes
  has &#39;_bar&#39; =&#62; (reader =&#62; &#39;bar&#39;, ...);</pre>

<p>This will mean that Getopt will not handle a --foo param, but your code can still call the <code>foo</code> method.</p>

<p>If your class also uses a configfile-loading role based on <a href="../MooseX/ConfigFromFile.html" class="podlinkpod"
>MooseX::ConfigFromFile</a>, such as <a href="../MooseX/SimpleConfig.html" class="podlinkpod"
>MooseX::SimpleConfig</a>, <a href="../MooseX/Getopt.html" class="podlinkpod"
>MooseX::Getopt</a>&#39;s <code>new_with_options</code> will load the configfile specified by the <code>--configfile</code> option (or the default you&#39;ve given for the configfile attribute) for you.</p>

<p>Options specified in multiple places follow the following precedence order: commandline overrides configfile, which overrides explicit new_with_options parameters.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Supported_Type_Constraints"
>Supported Type Constraints</a></h2>

<dl>
<dt><a name="Bool"
><i>Bool</i></a></dt>

<dd>
<p>A <i>Bool</i> type constraint is set up as a boolean option with Getopt::Long. So that this attribute description:</p>

<pre>  has &#39;verbose&#39; =&#62; (is =&#62; &#39;rw&#39;, isa =&#62; &#39;Bool&#39;);</pre>

<p>would translate into <code>verbose!</code> as a Getopt::Long option descriptor, which would enable the following command line options:</p>

<pre>  % my_script.pl --verbose
  % my_script.pl --noverbose</pre>

<dt><a name="Int,_Float,_Str"
><i>Int</i>, <i>Float</i>, <i>Str</i></a></dt>

<dd>
<p>These type constraints are set up as properly typed options with Getopt::Long, using the <code>=i</code>, <code>=f</code> and <code>=s</code> modifiers as appropriate.</p>

<dt><a name="ArrayRef"
><i>ArrayRef</i></a></dt>

<dd>
<p>An <i>ArrayRef</i> type constraint is set up as a multiple value option in Getopt::Long. So that this attribute description:</p>

<pre>  has &#39;include&#39; =&#62; (
      is      =&#62; &#39;rw&#39;,
      isa     =&#62; &#39;ArrayRef&#39;,
      default =&#62; sub { [] }
  );</pre>

<p>would translate into <code>includes=s@</code> as a Getopt::Long option descriptor, which would enable the following command line options:</p>

<pre>  % my_script.pl --include /usr/lib --include /usr/local/lib</pre>

<dt><a name="HashRef"
><i>HashRef</i></a></dt>

<dd>
<p>A <i>HashRef</i> type constraint is set up as a hash value option in Getopt::Long. So that this attribute description:</p>

<pre>  has &#39;define&#39; =&#62; (
      is      =&#62; &#39;rw&#39;,
      isa     =&#62; &#39;HashRef&#39;,
      default =&#62; sub { {} }
  );</pre>

<p>would translate into <code>define=s%</code> as a Getopt::Long option descriptor, which would enable the following command line options:</p>

<pre>  % my_script.pl --define os=linux --define vendor=debian</pre>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Custom_Type_Constraints"
>Custom Type Constraints</a></h2>

<p>It is possible to create custom type constraint to option spec mappings if you need them. The process is fairly simple (but a little verbose maybe). First you create a custom subtype, like so:</p>

<pre>  subtype &#39;ArrayOfInts&#39;
      =&#62; as &#39;ArrayRef&#39;
      =&#62; where { scalar (grep { looks_like_number($_) } @$_)  };</pre>

<p>Then you register the mapping, like so:</p>

<pre>  MooseX::Getopt::OptionTypeMap-&#62;add_option_type_to_map(
      &#39;ArrayOfInts&#39; =&#62; &#39;=i@&#39;
  );</pre>

<p>Now any attribute declarations using this type constraint will get the custom option spec. So that, this:</p>

<pre>  has &#39;nums&#39; =&#62; (
      is      =&#62; &#39;ro&#39;,
      isa     =&#62; &#39;ArrayOfInts&#39;,
      default =&#62; sub { [0] }
  );</pre>

<p>Will translate to the following on the command line:</p>

<pre>  % my_script.pl --nums 5 --nums 88 --nums 199</pre>

<p>This example is fairly trivial, but more complex validations are easily possible with a little creativity. The trick is balancing the type constraint validations with the Getopt::Long validations.</p>

<p>Better examples are certainly welcome :)</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Inferred_Type_Constraints"
>Inferred Type Constraints</a></h2>

<p>If you define a custom subtype which is a subtype of one of the standard <a href="#Supported_Type_Constraints" class="podlinkpod"
>&#34;Supported Type Constraints&#34;</a> above, and do not explicitly provide custom support as in <a href="#Custom_Type_Constraints" class="podlinkpod"
>&#34;Custom Type Constraints&#34;</a> above, MooseX::Getopt will treat it like the parent type for Getopt purposes.</p>

<p>For example, if you had the same custom <code>ArrayOfInts</code> subtype from the examples above, but did not add a new custom option type for it to the <code>OptionTypeMap</code>, it would be treated just like a normal <code>ArrayRef</code> type for Getopt purposes (that is, <code>=s@</code>).</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new_with_options_(%params)"
><b>new_with_options (%params)</b></a></h2>

<p>This method will take a set of default <code>%params</code> and then collect params from the command line (possibly overriding those in <code>%params</code>) and then return a newly constructed object.</p>

<p>The special parameter <code>argv</code>, if specified should point to an array reference with an array to use instead of <code>@ARGV</code>.</p>

<p>If <a href="../Getopt/Long.html#GetOptions" class="podlinkpod"
>&#34;GetOptions&#34; in Getopt::Long</a> fails (due to invalid arguments), <code>new_with_options</code> will throw an exception.</p>

<p>If <a href="../Getopt/Long/Descriptive.html" class="podlinkpod"
>Getopt::Long::Descriptive</a> is installed and any of the following command line params are passed, the program will exit with usage information (and the option&#39;s state will be stored in the help_flag attribute). You can add descriptions for each option by including a <b>documentation</b> option for each attribute to document.</p>

<pre>  -?
  --?
  -h
  --help
  --usage</pre>

<p>If you have <a href="../Getopt/Long/Descriptive.html" class="podlinkpod"
>Getopt::Long::Descriptive</a> the <code>usage</code> param is also passed to <code>new</code> as the usage option.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ARGV"
><b>ARGV</b></a></h2>

<p>This accessor contains a reference to a copy of the <code>@ARGV</code> array as it originally existed at the time of <code>new_with_options</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="extra_argv"
><b>extra_argv</b></a></h2>

<p>This accessor contains an arrayref of leftover <code>@ARGV</code> elements that <a href="../Getopt/Long.html" class="podlinkpod"
>Getopt::Long</a> did not parse. Note that the real <code>@ARGV</code> is left un-mangled.</p>

<p><b>Important</b>: By default, <a href="../Getopt/Long.html" class="podlinkpod"
>Getopt::Long</a> will reject unrecognized <i>options</i> (that is, options that do not correspond with attributes using the Getopt trait). To disable this, and allow options to also be saved in <code>extra_argv</code> (for example to pass along to another class&#39;s <code>new_with_options</code>), you can either enable the <code>pass_through</code> option of <a href="../Getopt/Long.html" class="podlinkpod"
>Getopt::Long</a> for your class: <code>use Getopt::Long qw(:config pass_through);</code> or specify a value for <a href="../MooseX/Getopt/GLD.html" class="podlinkpod"
>MooseX::Getopt::GLD</a>&#39;s <code>getopt_conf</code> parameter.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="usage"
><b>usage</b></a></h2>

<p>This accessor contains the <a href="../Getopt/Long/Descriptive/Usage.html" class="podlinkpod"
>Getopt::Long::Descriptive::Usage</a> object (if <a href="../Getopt/Long/Descriptive.html" class="podlinkpod"
>Getopt::Long::Descriptive</a> is used).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="help_flag"
><b>help_flag</b></a></h2>

<p>This accessor contains the boolean state of the --help, --usage and --? options (true if any of these options were passed on the command line).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="print_usage_text"
><b>print_usage_text</b></a></h2>

<p>This method is called internally when the <code>help_flag</code> state is true. It prints the text from the <code>usage</code> object (see above) to stdout and then the program terminates normally. You can apply a method modification (see <a href="../Moose/Manual/MethodModifiers.html" class="podlinkpod"
>Moose::Manual::MethodModifiers</a>) if different behaviour is desired, for example to include additional text.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="meta"
><b>meta</b></a></h2>

<p>This returns the role meta object.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="process_argv_(%params)"
><b>process_argv (%params)</b></a></h2>

<p>This does most of the work of <code>new_with_options</code>, analyzing the parameters and argv, except for actually calling the constructor. It returns a <a href="../MooseX/Getopt/ProcessedArgv.html" class="podlinkpod"
>MooseX::Getopt::ProcessedArgv</a> object. <code>new_with_options</code> uses this method internally, so modifying this method via subclasses/roles will affect <code>new_with_options</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="More_Customization_Options"
>More Customization Options</a></h2>

<p>See <a href="../Getopt/Long.html#Configuring_Getopt%3A%3ALong" class="podlinkpod"
>&#34;Configuring Getopt::Long&#34; in Getopt::Long</a> for many other customizations you can make to how options are parsed. Simply <code>use Getopt::Long qw(:config other_options...)</code> in your class to set these.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../MooseX/Getopt/Usage.html" class="podlinkpod"
>MooseX::Getopt::Usage</a>, an extension to generate man pages, with colour</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Stevan Little &#60;stevan@iinteractive.com&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2013 by Infinity Interactive, Inc.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONTRIBUTORS"
>CONTRIBUTORS</a></h1>

<ul>
<li>Brandon L Black &#60;blblack@gmail.com&#62;</li>

<li>Chris Prather &#60;chris@prather.org&#62;</li>

<li>Dagfinn Ilmari Manns&#65533;ker &#60;ilmari@ilmari.org&#62;</li>

<li>Damien Krotkine &#60;dkrotkine@weborama.com&#62;</li>

<li>Devin Austin &#60;devin@devin-laptop.(none)&#62;</li>

<li>Drew Taylor &#60;drew@drewtaylor.com&#62;</li>

<li>Florian Ragwitz &#60;rafl@debian.org&#62;</li>

<li>Gordon Irving &#60;goraxe@goraxe.me.uk&#62;</li>

<li>Hans Dieter Pearcey &#60;hdp@weftsoar.net&#62;</li>

<li>Hinrik &#65533;rn Sigur&#65533;sson &#60;hinrik.sig@gmail.com&#62;</li>

<li>Jesse Luehrs &#60;doy@tozt.net&#62;</li>

<li>John Goulah &#60;jgoulah@cpan.org&#62;</li>

<li>Jonathan Swartz &#60;swartz@pobox.com&#62;</li>

<li>Justin Hunter &#60;justin.d.hunter@gmail.com&#62;</li>

<li>Karen Etheridge &#60;ether@cpan.org&#62;</li>

<li>Nelo Onyiah &#60;nelo.onyiah@gmail.com&#62;</li>

<li>Ricardo SIGNES &#60;rjbs@cpan.org&#62;</li>

<li>Ryan D Johnson &#60;ryan@innerfence.com&#62;</li>

<li>Shlomi Fish &#60;shlomif@iglu.org.il&#62;</li>

<li>Stevan Little &#60;stevan.little@iinteractive.com&#62;</li>

<li>Todd Hepler &#60;thepler@employees.org&#62;</li>

<li>Tomas Doran &#60;bobtfish@bobtfish.net&#62;</li>

<li>Yuval Kogman &#60;nothingmuch@woobling.org&#62;</li>

<li>t0m &#60;bobtfish@bobtfish.net&#62;</li>

<li>&#65533;var Arnfj&#65533;r&#65533; Bjarmason &#60;avarab@gmail.com&#62;</li>
</ul>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
