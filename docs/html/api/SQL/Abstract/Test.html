<html><head><title>SQL::Abstract::Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:26 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#FUNCTIONS'>FUNCTIONS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#is_same_sql_bind'>is_same_sql_bind</a>
    <li class='indexItem indexItem2'><a href='#is_same_sql'>is_same_sql</a>
    <li class='indexItem indexItem2'><a href='#is_same_bind'>is_same_bind</a>
    <li class='indexItem indexItem2'><a href='#eq_sql_bind'>eq_sql_bind</a>
    <li class='indexItem indexItem2'><a href='#eq_sql'>eq_sql</a>
    <li class='indexItem indexItem2'><a href='#eq_bind'>eq_bind</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#GLOBAL_VARIABLES'>GLOBAL VARIABLES</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#%24case_sensitive'>$case_sensitive</a>
    <li class='indexItem indexItem2'><a href='#%24parenthesis_significant'>$parenthesis_significant</a>
    <li class='indexItem indexItem2'><a href='#%24sql_differ'>$sql_differ</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#AUTHORS'>AUTHORS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>SQL::Abstract::Test - Helper function for testing SQL::Abstract</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use SQL::Abstract;
  use Test::More;
  use SQL::Abstract::Test import =&#62; [qw/
    is_same_sql_bind is_same_sql is_same_bind
    eq_sql_bind eq_sql eq_bind
  /];

  my ($sql, @bind) = SQL::Abstract-&#62;new-&#62;select(%args);

  is_same_sql_bind($given_sql,    \@given_bind,
                   $expected_sql, \@expected_bind, $test_msg);

  is_same_sql($given_sql, $expected_sql, $test_msg);
  is_same_bind(\@given_bind, \@expected_bind, $test_msg);

  my $is_same = eq_sql_bind($given_sql,    \@given_bind,
                            $expected_sql, \@expected_bind);

  my $sql_same = eq_sql($given_sql, $expected_sql);
  my $bind_same = eq_bind(\@given_bind, \@expected_bind);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module is only intended for authors of tests on <a href="../../SQL/Abstract.html" class="podlinkpod"
>SQL::Abstract</a> and related modules; it exports functions for comparing two SQL statements and their bound values.</p>

<p>The SQL comparison is performed on <i>abstract syntax</i>, ignoring differences in spaces or in levels of parentheses. Therefore the tests will pass as long as the semantics is preserved, even if the surface syntax has changed.</p>

<p><b>Disclaimer</b> : the semantic equivalence handling is pretty limited. A lot of effort goes into distinguishing significant from non-significant parenthesis, including AND/OR operator associativity. Currently this module does not support commutativity and more intelligent transformations like Morgan laws, etc.</p>

<p>For a good overview of what this test framework is capable of refer to <code>t/10test.t</code></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FUNCTIONS"
>FUNCTIONS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="is_same_sql_bind"
>is_same_sql_bind</a></h2>

<pre>  is_same_sql_bind($given_sql,    \@given_bind,
                   $expected_sql, \@expected_bind, $test_msg);</pre>

<p>Compares given and expected pairs of <code>($sql, \@bind)</code>, and calls <a href="../../Test/Builder.html#ok" class="podlinkpod"
>&#34;ok&#34; in Test::Builder</a> on the result, with <code>$test_msg</code> as message. If the test fails, a detailed diagnostic is printed. For clients which use <a href="../../Test/More.html" class="podlinkpod"
>Test::More</a>, this is the one of the three functions (<a href="#is_same_sql_bind" class="podlinkpod"
>&#34;is_same_sql_bind&#34;</a>, <a href="#is_same_sql" class="podlinkpod"
>&#34;is_same_sql&#34;</a>, <a href="#is_same_bind" class="podlinkpod"
>&#34;is_same_bind&#34;</a>) that needs to be imported.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="is_same_sql"
>is_same_sql</a></h2>

<pre>  is_same_sql($given_sql, $expected_sql, $test_msg);</pre>

<p>Compares given and expected SQL statements, and calls <a href="../../Test/Builder.html#ok" class="podlinkpod"
>&#34;ok&#34; in Test::Builder</a> on the result, with <code>$test_msg</code> as message. If the test fails, a detailed diagnostic is printed. For clients which use <a href="../../Test/More.html" class="podlinkpod"
>Test::More</a>, this is the one of the three functions (<a href="#is_same_sql_bind" class="podlinkpod"
>&#34;is_same_sql_bind&#34;</a>, <a href="#is_same_sql" class="podlinkpod"
>&#34;is_same_sql&#34;</a>, <a href="#is_same_bind" class="podlinkpod"
>&#34;is_same_bind&#34;</a>) that needs to be imported.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="is_same_bind"
>is_same_bind</a></h2>

<pre>  is_same_bind(\@given_bind, \@expected_bind, $test_msg);</pre>

<p>Compares given and expected bind values, and calls <a href="../../Test/Builder.html#ok" class="podlinkpod"
>&#34;ok&#34; in Test::Builder</a> on the result, with <code>$test_msg</code> as message. If the test fails, a detailed diagnostic is printed. For clients which use <a href="../../Test/More.html" class="podlinkpod"
>Test::More</a>, this is the one of the three functions (<a href="#is_same_sql_bind" class="podlinkpod"
>&#34;is_same_sql_bind&#34;</a>, <a href="#is_same_sql" class="podlinkpod"
>&#34;is_same_sql&#34;</a>, <a href="#is_same_bind" class="podlinkpod"
>&#34;is_same_bind&#34;</a>) that needs to be imported.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="eq_sql_bind"
>eq_sql_bind</a></h2>

<pre>  my $is_same = eq_sql_bind($given_sql,    \@given_bind,
                            $expected_sql, \@expected_bind);</pre>

<p>Compares given and expected pairs of <code>($sql, \@bind)</code>. Similar to <a href="#is_same_sql_bind" class="podlinkpod"
>&#34;is_same_sql_bind&#34;</a>, but it just returns a boolean value and does not print diagnostics or talk to <a href="../../Test/Builder.html" class="podlinkpod"
>Test::Builder</a>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="eq_sql"
>eq_sql</a></h2>

<pre>  my $is_same = eq_sql($given_sql, $expected_sql);</pre>

<p>Compares the abstract syntax of two SQL statements. Similar to <a href="#is_same_sql" class="podlinkpod"
>&#34;is_same_sql&#34;</a>, but it just returns a boolean value and does not print diagnostics or talk to <a href="../../Test/Builder.html" class="podlinkpod"
>Test::Builder</a>. If the result is false, the global variable <a href="#%24sql_differ" class="podlinkpod"
>&#34;$sql_differ&#34;</a> will contain the SQL portion where a difference was encountered; this is useful for printing diagnostics.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="eq_bind"
>eq_bind</a></h2>

<pre>  my $is_same = eq_sql(\@given_bind, \@expected_bind);</pre>

<p>Compares two lists of bind values, taking into account the fact that some of the values may be arrayrefs (see <a href="../../SQL/Abstract.html#bindtype" class="podlinkpod"
>&#34;bindtype&#34; in SQL::Abstract</a>). Similar to <a href="#is_same_bind" class="podlinkpod"
>&#34;is_same_bind&#34;</a>, but it just returns a boolean value and does not print diagnostics or talk to <a href="../../Test/Builder.html" class="podlinkpod"
>Test::Builder</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="GLOBAL_VARIABLES"
>GLOBAL VARIABLES</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$case_sensitive"
>$case_sensitive</a></h2>

<p>If true, SQL comparisons will be case-sensitive. Default is false;</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$parenthesis_significant"
>$parenthesis_significant</a></h2>

<p>If true, SQL comparison will preserve and report difference in nested parenthesis. Useful while testing <code>IN (( x ))</code> vs <code>IN ( x )</code>. Defaults to false;</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$sql_differ"
>$sql_differ</a></h2>

<p>When <a href="#eq_sql" class="podlinkpod"
>&#34;eq_sql&#34;</a> returns false, the global variable <code>$sql_differ</code> contains the SQL portion where a difference was encountered.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../SQL/Abstract.html" class="podlinkpod"
>SQL::Abstract</a>, <a href="../../Test/More.html" class="podlinkpod"
>Test::More</a>, <a href="../../Test/Builder.html" class="podlinkpod"
>Test::Builder</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS"
>AUTHORS</a></h1>

<p>Laurent Dami, &#60;laurent.dami AT etat geneve ch&#62;</p>

<p>Norbert Buchmuller &#60;norbi@nix.hu&#62;</p>

<p>Peter Rabbitson &#60;ribasushi@cpan.org&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>Copyright 2008 by Laurent Dami.</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
