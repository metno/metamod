<html><head><title>SQL::Translator::Producer::Oracle</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:26 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#producer_args'>producer_args</a>
  <li class='indexItem indexItem1'><a href='#NOTES'>NOTES</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Autoincremental_primary_keys'>Autoincremental primary keys</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#CREDITS'>CREDITS</a>
  <li class='indexItem indexItem1'><a href='#AUTHORS'>AUTHORS</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>SQL::Translator::Producer::Oracle - Oracle SQL producer</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use SQL::Translator;

  my $t = SQL::Translator-&#62;new( parser =&#62; &#39;...&#39;, producer =&#62; &#39;Oracle&#39; );
  print $translator-&#62;translate( $file );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Creates an SQL DDL suitable for Oracle.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="producer_args"
>producer_args</a></h1>

<dl>
<dt><a name="delay_constraints"
>delay_constraints</a></dt>

<dd>
<p>This option remove the primary key and other key constraints from the CREATE TABLE statement and adds ALTER TABLEs at the end with it.</p>

<dt><a name="quote_field_names"
>quote_field_names</a></dt>

<dd>
<p>Controls whether quotes are being used around column names in generated DDL.</p>

<dt><a name="quote_table_names"
>quote_table_names</a></dt>

<dd>
<p>Controls whether quotes are being used around table, sequence and trigger names in generated DDL.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NOTES"
>NOTES</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Autoincremental_primary_keys"
>Autoincremental primary keys</a></h2>

<p>This producer uses sequences and triggers to autoincrement primary key columns, if necessary. SQLPlus and DBI expect a slightly different syntax of CREATE TRIGGER statement. You might have noticed that this producer returns a scalar containing all statements concatenated by newlines or an array of single statements depending on the context (scalar, array) it has been called in.</p>

<p>SQLPlus expects following trigger syntax:</p>

<pre>    CREATE OR REPLACE TRIGGER ai_person_id
    BEFORE INSERT ON person
    FOR EACH ROW WHEN (
     new.id IS NULL OR new.id = 0
    )
    BEGIN
     SELECT sq_person_id.nextval
     INTO :new.id
     FROM dual;
    END;
    /</pre>

<p>Whereas if you want to create the same trigger using <a href="../../../DBI.html#do" class="podlinkpod"
>&#34;do&#34; in DBI</a>, you need to omit the last slash:</p>

<pre>    my $dbh = DBI-&#62;connect(&#39;dbi:Oracle:mysid&#39;, &#39;scott&#39;, &#39;tiger&#39;);
    $dbh-&#62;do(&#34;
        CREATE OR REPLACE TRIGGER ai_person_id
        BEFORE INSERT ON person
        FOR EACH ROW WHEN (
         new.id IS NULL OR new.id = 0
        )
        BEGIN
         SELECT sq_person_id.nextval
         INTO :new.id
         FROM dual;
        END;
    &#34;);</pre>

<p>If you call this producer in array context, we expect you want to process the returned array of statements using <a href="../../../DBI.html" class="podlinkpod"
>DBI</a> like <a href="../../../DBIx/Class/Schema.html#deploy" class="podlinkpod"
>&#34;deploy&#34; in DBIx::Class::Schema</a> does.</p>

<p>To get this working we removed the slash in those statements in version 0.09002 of <a href="../../../SQL/Translator.html" class="podlinkpod"
>SQL::Translator</a> when called in array context. In scalar context the slash will be still there to ensure compatibility with SQLPlus.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CREDITS"
>CREDITS</a></h1>

<p>Mad props to Tim Bunce for much of the logic stolen from his &#34;mysql2ora&#34; script.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS"
>AUTHORS</a></h1>

<p>Ken Youens-Clark &#60;kclark@cpan.org&#62;, Alexander Hartmaier &#60;abraxxa@cpan.org&#62;, Fabien Wernli &#60;faxmodem@cpan.org&#62;.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>SQL::Translator, DDL::Oracle, mysql2ora.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
