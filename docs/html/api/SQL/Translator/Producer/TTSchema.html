<html><head><title>SQL::Translator::Producer::TTSchema</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:26 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Producer_Args'>Producer Args</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#TODO'>TODO</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>SQL::Translator::Producer::TTSchema - Produces output using the Template Toolkit from a SQL schema</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use SQL::Translator;
  my $translator     = SQL::Translator-&#62;new(
      from           =&#62; &#39;MySQL&#39;,
      filename       =&#62; &#39;foo_schema.sql&#39;,
      to             =&#62; &#39;TTSchema&#39;,
      producer_args  =&#62; {
          ttfile     =&#62; &#39;foo_template.tt&#39;,  # Template file to use

          # Extra template variables
          ttargs     =&#62; {
              author =&#62; &#34;Mr Foo&#34;,
          },

          # Template config options
          ttargs     =&#62; {
              INCLUDE_PATH =&#62; &#39;/foo/templates&#39;,
          },
      },
  );
  print $translator-&#62;translate;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Produces schema output using a given Template Tookit template.</p>

<p>It needs one additional producer_arg of <code>ttfile</code> which is the file name of the template to use. This template will be passed a variable called <code>schema</code>, which is the <code>SQL::Translator::Producer::Schema</code> object created by the parser. You can then use it to walk the schema via the methods documented in that module.</p>

<p>Here&#39;s a brief example of what the template could look like:</p>

<pre>  database: [% schema.database %]
  tables:
  [% FOREACH table = schema.get_tables %]
      [% table.name %]
      ================
      [% FOREACH field = table.get_fields %]
          [% field.name %]   [% field.data_type %]([% field.size %])
      [% END -%]
  [% END %]</pre>

<p>See <em>t/data/template/basic.tt</em> for a more complete example.</p>

<p>The template will also get the set of extra variables given as a hashref via the <code>tt_vars</code> producer arg.</p>

<p>You can set any of the options used to initiallize the Template object by adding a tt_conf producer_arg. See Template Toolkit docs for details of the options. (Note that the old style of passing this config directly in the producer args has been deprecated).</p>

<pre>  $translator          = SQL::Translator-&#62;new(
      to               =&#62; &#39;TT&#39;,
      producer_args    =&#62; {
          ttfile       =&#62; &#39;foo_template.tt&#39;,
          ttargs       =&#62; {},
          tt_conf      = {
            INCLUDE_PATH =&#62; &#39;/foo/templates/tt&#39;,
            INTERPOLATE  =&#62; 1,
          }
      },
  );</pre>

<p>You can use this producer to create any type of text output you like, even using it to create your own versions of what the other producers make. For example, you could create a template that translates the schema into MySQL&#39;s syntax, your own HTML documentation, your own Class::DBI classes (or some other code) -- the opportunities are limitless!</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Producer_Args"
>Producer Args</a></h2>

<dl>
<dt><a name="ttfile"
>ttfile</a></dt>

<dd>
<p>The template file to generate the output with.</p>

<dt><a name="tt_vars"
>tt_vars</a></dt>

<dd>
<p>A hash ref of extra variables you want to add to the template.</p>

<dt><a name="tt_conf"
>tt_conf</a></dt>

<dd>
<p>A hash ref of configuration options to pass to the <a href="../../../Template.html" class="podlinkpod"
>Template</a> object&#39;s constructor.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Mark Addison &#60;grommit@users.sourceforge.net&#62;.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TODO"
>TODO</a></h1>

<p><b>More template vars?</b> e.g. [% tables %] as a shortcut for [% schema.get_tables %].</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>SQL::Translator.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
