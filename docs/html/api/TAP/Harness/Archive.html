<html><head><title>TAP::Harness::Archive</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:27 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new'>new</a>
    <li class='indexItem indexItem2'><a href='#runtests'>runtests</a>
    <li class='indexItem indexItem2'><a href='#aggregator_from_archive'>aggregator_from_archive</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
  <li class='indexItem indexItem1'><a href='#SUPPORT'>SUPPORT</a>
  <li class='indexItem indexItem1'><a href='#ACKNOWLEDGEMENTS'>ACKNOWLEDGEMENTS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_%26_LICENSE'>COPYRIGHT &#38; LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>TAP::Harness::Archive - Create an archive of TAP test results</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use TAP::Harness::Archive;
    my $harness = TAP::Harness::Archive-&#62;new(\%args);
    $harness-&#62;runtests(@tests);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module is a direct subclass of <a href="../../TAP/Harness.html" class="podlinkpod"
>TAP::Harness</a> and behaves in exactly the same way except for one detail. In addition to outputting a running progress of the tests and an ending summary it can also capture all of the raw TAP from the individual test files or streams into an archive file (<code>.tar</code> or <code>.tar.gz</code>).</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<p>All methods are exactly the same as our base <a href="../../TAP/Harness.html" class="podlinkpod"
>TAP::Harness</a> except for the following.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new"
>new</a></h2>

<p>In addition to the options that <a href="../../TAP/Harness.html" class="podlinkpod"
>TAP::Harness</a> allow to this method, we also allow the following:</p>

<dl>
<dt><a name="archive"
>archive</a></dt>

<dd>
<p>This is the name of the archive file to generate. We use <a href="../../Archive/Tar.html" class="podlinkpod"
>Archive::Tar</a> in the background so we only support <code>.tar</code> and <code>.tar.gz</code> archive file formats. This can optionally be an existing directory that will have the TAP archive&#39;s contents deposited therein without any file archiving (no <a href="../../Archive/Tar.html" class="podlinkpod"
>Archive::Tar</a> involved).</p>

<dt><a name="extra_files"
>extra_files</a></dt>

<dd>
<p>This is an array reference to extra files that you want to include in the TAP archive but which are not TAP files themselves. This is useful if you want to include some log files that contain useful information about the test run.</p>

<dt><a name="extra_properties"
>extra_properties</a></dt>

<dd>
<p>This is a hash reference of extra properties that you&#39;ve collected during your test run. Some things you might want to include are the Perl version, the system&#39;s architecture, the operating system, etc.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="runtests"
>runtests</a></h2>

<p>Takes the same arguments as <a href="../../TAP/Harness.html" class="podlinkpod"
>TAP::Harness</a>&#39;s version and returns the same thing (a <a href="../../TAP/Parser/Aggregator.html" class="podlinkpod"
>TAP::Parser::Aggregator</a> object). The only difference is that in addition to the normal test running and progress output we also create the TAP Archive when it&#39;s all done.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="aggregator_from_archive"
>aggregator_from_archive</a></h2>

<p>This class method will return a <a href="../../TAP/Parser/Aggregator.html" class="podlinkpod"
>TAP::Parser::Aggregator</a> object when given a TAP Archive to open and parse. It&#39;s pretty much the reverse of creating a TAP Archive from using <code>new</code> and <code>runtests</code>.</p>

<p>It takes a hash of arguments which are as follows:</p>

<dl>
<dt><a name="archive"
>archive</a></dt>

<dd>
<p>The path to the archive file. This can also be a directory if you created the archive as a directory. This is required.</p>

<dt><a name="parser_callbacks"
>parser_callbacks</a></dt>

<dd>
<p>This is a hash ref containing callbacks for the <a href="../../TAP/Parser.html" class="podlinkpod"
>TAP::Parser</a> objects that are created while parsing the TAP files. See the <a href="../../TAP/Parser.html" class="podlinkpod"
>TAP::Parser</a> documentation for details about these callbacks.</p>

<dt><a name="made_parser_callback"
>made_parser_callback</a></dt>

<dd>
<p>This callback is executed every time a new <a href="../../TAP/Parser.html" class="podlinkpod"
>TAP::Parser</a> object is created. It will be passed the new parser object, the name of the file to be parsed, and also the full (temporary) path of that file.</p>

<dt><a name="meta_yaml_callback"
>meta_yaml_callback</a></dt>

<dd>
<p>This is a subroutine that will be called if we find and parse a YAML file containing meta information about the test run in the archive. The structure of the YAML file will be passed in as an argument.</p>
</dd>
</dl>

<pre>    my $aggregator = TAP::Harness::Archive-&#62;aggregator_from_archive(
        {
            archive          =&#62; &#39;my_tests.tar.gz&#39;,
            parser_callbacks =&#62; {
                plan    =&#62; sub { warn &#34;Nice to see you plan ahead...&#34; },
                unknown =&#62; sub { warn &#34;Your TAP is bad!&#34; },
            },
            made_parser_callback =&#62; sub {
                my ($parser, $file, $full_path) = @_;
                warn &#34;$file is temporarily located at $full_path\n&#34;;
            }
            
        }
    );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Michael Peters, <code>&#60;mpeters at plusthree.com&#62;</code></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h1>

<p>Please report any bugs or feature requests to <code>bug-tap-harness-archive at rt.cpan.org</code>, or through the web interface at <a href="http://rt.cpan.org/NoAuth/ReportBug.html?Queue=TAP-Harness-Archive" class="podlinkurl"
>http://rt.cpan.org/NoAuth/ReportBug.html?Queue=TAP-Harness-Archive</a>. I will be notified, and then you&#39;ll automatically be notified of progress on your bug as I make changes.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SUPPORT"
>SUPPORT</a></h1>

<p>You can find documentation for this module with the perldoc command.</p>

<pre>    perldoc TAP::Harness::Archive</pre>

<p>You can also look for information at:</p>

<ul>
<li>AnnoCPAN: Annotated CPAN documentation
<p><a href="http://annocpan.org/dist/TAP-Harness-Archive" class="podlinkurl"
>http://annocpan.org/dist/TAP-Harness-Archive</a></p>
</li>

<li>CPAN Ratings
<p><a href="http://cpanratings.perl.org/d/TAP-Harness-Archive" class="podlinkurl"
>http://cpanratings.perl.org/d/TAP-Harness-Archive</a></p>
</li>

<li>RT: CPAN&#39;s request tracker
<p><a href="http://rt.cpan.org/NoAuth/Bugs.html?Dist=TAP-Harness-Archive" class="podlinkurl"
>http://rt.cpan.org/NoAuth/Bugs.html?Dist=TAP-Harness-Archive</a></p>
</li>

<li>Search CPAN
<p><a href="http://search.cpan.org/dist/TAP-Harness-Archive" class="podlinkurl"
>http://search.cpan.org/dist/TAP-Harness-Archive</a></p>
</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ACKNOWLEDGEMENTS"
>ACKNOWLEDGEMENTS</a></h1>

<ul>
<li>A big thanks to Plus Three, LP (<a href="http://www.plusthree.com" class="podlinkurl"
>http://www.plusthree.com</a>) for sponsoring my work on this module and other open source pursuits.</li>

<li>Andy Armstrong</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_&#38;_LICENSE"
>COPYRIGHT &#38; LICENSE</a></h1>

<p>Copyright 2007 Michael Peters, all rights reserved.</p>

<p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
