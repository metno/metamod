<html><head><title>AppConfig</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="_grygrnw.css" media="all" >

<script type="text/javascript" src="_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:01 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#OVERVIEW'>OVERVIEW</a>
  <li class='indexItem indexItem1'><a href='#PREREQUISITES'>PREREQUISITES</a>
  <li class='indexItem indexItem1'><a href='#OBTAINING_AND_INSTALLING_THE_AppConfig_MODULE_BUNDLE'>OBTAINING AND INSTALLING THE AppConfig MODULE BUNDLE</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#USING_THE_AppConfig_MODULE'>USING THE AppConfig MODULE</a>
    <li class='indexItem indexItem2'><a href='#DEFINING_VARIABLES'>DEFINING VARIABLES</a>
    <li class='indexItem indexItem2'><a href='#COMPACT_FORMAT_DEFINITION'>COMPACT FORMAT DEFINITION</a>
    <li class='indexItem indexItem2'><a href='#READING_AND_MODIFYING_VARIABLE_VALUES'>READING AND MODIFYING VARIABLE VALUES</a>
    <li class='indexItem indexItem2'><a href='#READING_CONFIGURATION_FILES'>READING CONFIGURATION FILES</a>
    <li class='indexItem indexItem2'><a href='#VARIABLE_EXPANSION'>VARIABLE EXPANSION</a>
    <li class='indexItem indexItem2'><a href='#PARSING_COMMAND_LINE_OPTIONS'>PARSING COMMAND LINE OPTIONS</a>
    <li class='indexItem indexItem2'><a href='#PARSING_CGI_PARAMETERS'>PARSING CGI PARAMETERS</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#CONSTANT_DEFINITIONS'>CONSTANT DEFINITIONS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>AppConfig - Perl5 module for reading configuration files and parsing command line arguments.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use AppConfig;
    
    # create a new AppConfig object
    my $config = AppConfig-&#62;new( \%cfg );
    
    # define a new variable
    $config-&#62;define( $varname =&#62; \%varopts );
    
    # create/define combined
    my $config = AppConfig-&#62;new( \%cfg, 
        $varname =&#62; \%varopts,
        $varname =&#62; \%varopts,
        ...
    );
    
    # set/get the value
    $config-&#62;set( $varname, $value );
    $config-&#62;get($varname);
    
    # shortcut form
    $config-&#62;varname($value);
    $config-&#62;varname;
    
    # read configuration file
    $config-&#62;file($file);
    
    # parse command line options
    $config-&#62;args(\@args);      # default to \@ARGV
    
    # advanced command line options with Getopt::Long
    $config-&#62;getopt(\@args);    # default to \@ARGV
    
    # parse CGI parameters (GET method)
    $config-&#62;cgi($query);       # default to $ENV{ QUERY_STRING }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OVERVIEW"
>OVERVIEW</a></h1>

<p>AppConfig is a Perl5 module for managing application configuration information. It maintains the state of any number of variables and provides methods for parsing configuration files, command line arguments and CGI script parameters.</p>

<p>Variables values may be set via configuration files. Variables may be flags (On/Off), take a single value, or take multiple values stored as a list or hash. The number of arguments a variable expects is determined by its configuration when defined.</p>

<pre>    # flags
    verbose 
    nohelp
    debug = On
    
    # single value
    home  = /home/abw/
    
    # multiple list value
    file = /tmp/file1
    file = /tmp/file2
    
    # multiple hash value
    book  camel = Programming Perl
    book  llama = Learning Perl</pre>

<p>The &#39;-&#39; prefix can be used to reset a variable to its default value and the &#39;+&#39; prefix can be used to set it to 1</p>

<pre>    -verbose
    +debug</pre>

<p>Variable, environment variable and tilde (home directory) expansions can be applied (selectively, if necessary) to the values read from configuration files:</p>

<pre>    home = ~                    # home directory
    nntp = ${NNTPSERVER}        # environment variable
    html = $home/html           # internal variables
    img  = $html/images</pre>

<p>Configuration files may be arranged in blocks as per the style of Win32 &#34;INI&#34; files.</p>

<pre>    [file]
    site = kfs
    src  = ~/websrc/docs/$site
    lib  = ~/websrc/lib
    dest = ~/public_html/$site
    
    [page]
    header = $lib/header
    footer = $lib/footer</pre>

<p>You can also use Perl&#39;s &#34;heredoc&#34; syntax to define a large block of text in a configuration file.</p>

<pre>    multiline = &#60;&#60;FOOBAR
    line 1
    line 2
    FOOBAR
    
    paths  exe  = &#34;${PATH}:${HOME}/.bin&#34;
    paths  link = &#60;&#60;&#39;FOO&#39;
    ${LD_LIBARRAY_PATH}:${HOME}/lib
    FOO</pre>

<p>Variables may also be set by parsing command line arguments.</p>

<pre>    myapp -verbose -site kfs -file f1 -file f2</pre>

<p>AppConfig provides a simple method (args()) for parsing command line arguments. A second method (getopt()) allows more complex argument processing by delegation to Johan Vroman&#39;s Getopt::Long module.</p>

<p>AppConfig also allows variables to be set by parameters passed to a CGI script via the URL (GET method).</p>

<pre>    http://www.nowhere.com/cgi-bin/myapp?verbose&#38;site=kfs</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PREREQUISITES"
>PREREQUISITES</a></h1>

<p>AppConfig requires Perl 5.005 or later.</p>

<p>The <a href="./Getopt/Long.html" class="podlinkpod"
>Getopt::Long</a> and <a href="./Test/More.html" class="podlinkpod"
>Test::More</a> modules should be installed. If you are using a recent version of Perl (e.g. 5.8.0) then these should already be installed.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OBTAINING_AND_INSTALLING_THE_AppConfig_MODULE_BUNDLE"
>OBTAINING AND INSTALLING THE AppConfig MODULE BUNDLE</a></h1>

<p>The AppConfig module bundle is available from CPAN. As the &#39;perlmod&#39; manual page explains:</p>

<pre>    CPAN stands for the Comprehensive Perl Archive Network.
    This is a globally replicated collection of all known Perl
    materials, including hundreds of unbundled modules.  
    
    [...]
    
    For an up-to-date listing of CPAN sites, see
    http://www.perl.com/perl/ or ftp://ftp.perl.com/perl/ .</pre>

<p>Within the CPAN archive, AppConfig is in the category:</p>

<pre>    12) Option, Argument, Parameter and Configuration File Processing</pre>

<p>The module is available in the following directories:</p>

<pre>    /modules/by-module/AppConfig/AppConfig-&#60;version&#62;.tar.gz
    /authors/id/ABW/AppConfig-&#60;version&#62;.tar.gz</pre>

<p>AppConfig is distributed as a single gzipped tar archive file:</p>

<pre>    AppConfig-&#60;version&#62;.tar.gz</pre>

<p>Note that &#34;&#60;version&#62;&#34; represents the current AppConfig version number, of the form &#34;n.nn&#34;, e.g. &#34;3.14&#34;. See the REVISION section below to determine the current version number for AppConfig.</p>

<p>Unpack the archive to create a AppConfig installation directory:</p>

<pre>    gunzip AppConfig-&#60;version&#62;.tar.gz
    tar xvf AppConfig-&#60;version&#62;.tar</pre>

<p>&#39;cd&#39; into that directory, make, test and install the modules:</p>

<pre>    cd AppConfig-&#60;version&#62;
    perl Makefile.PL
    make
    make test
    make install</pre>

<p>The &#39;t&#39; sub-directory contains a number of test scripts that are run when a &#39;make test&#39; is run.</p>

<p>The &#39;make install&#39; will install the module on your system. You may need administrator privileges to perform this task. If you install the module in a local directory (for example, by executing &#34;perl Makefile.PL LIB=~/lib&#34; in the above - see <code>perldoc MakeMaker</code> for full details), you will need to ensure that the PERL5LIB environment variable is set to include the location, or add a line to your scripts explicitly naming the library location:</p>

<pre>    use lib &#39;/local/path/to/lib&#39;;</pre>

<p>The &#39;examples&#39; sub-directory contains some simple examples of using the AppConfig modules.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="USING_THE_AppConfig_MODULE"
>USING THE AppConfig MODULE</a></h2>

<p>To import and use the <a href="./AppConfig.html" class="podlinkpod"
>AppConfig</a> module the following line should appear in your Perl script:</p>

<pre>     use AppConfig;</pre>

<p>To import constants defined by the AppConfig module, specify the name of one or more of the constant or tag sets as parameters to <code>use</code>:</p>

<pre>    use AppConfig qw(:expand :argcount);</pre>

<p>See <a href="#CONSTANT_DEFINITIONS" class="podlinkpod"
>&#34;CONSTANT DEFINITIONS&#34;</a> below for more information on the constant tagsets defined by AppConfig.</p>

<p>AppConfig is implemented using object-oriented methods. A new AppConfig object is created and initialised using the new() method. This returns a reference to a new AppConfig object.</p>

<pre>    my $config = AppConfig-&#62;new();</pre>

<p>This will create and return a reference to a new AppConfig object.</p>

<p>In doing so, the AppConfig object also creates an internal reference to an AppConfig::State object in which to store variable state. All arguments passed into the AppConfig constructor are passed directly to the AppConfig::State constructor.</p>

<p>The first (optional) parameter may be a reference to a hash array containing configuration information.</p>

<pre>    my $config = AppConfig-&#62;new( {
            CASE   =&#62; 1,
            ERROR  =&#62; \&#38;my_error,
            GLOBAL =&#62; { 
                    DEFAULT  =&#62; &#34;&#60;unset&#62;&#34;, 
                    ARGCOUNT =&#62; ARGCOUNT_ONE,
                },
        } );</pre>

<p>See <a href="./AppConfig/State.html" class="podlinkpod"
>AppConfig::State</a> for full details of the configuration options available. These are, in brief:</p>

<dl>
<dt><a name="CASE"
>CASE</a></dt>

<dd>
<p>Used to set case sensitivity for variable names (default: off).</p>

<dt><a name="CREATE"
>CREATE</a></dt>

<dd>
<p>Used to indicate that undefined variables should be created automatically (default: off).</p>

<dt><a name="GLOBAL"
>GLOBAL</a></dt>

<dd>
<p>Reference to a hash array of global values used by default when defining variables. Valid global values are DEFAULT, ARGCOUNT, EXPAND, VALIDATE and ACTION.</p>

<dt><a name="PEDANTIC"
>PEDANTIC</a></dt>

<dd>
<p>Used to indicate that command line and configuration file parsing routines should return immediately on encountering an error.</p>

<dt><a name="ERROR"
>ERROR</a></dt>

<dd>
<p>Used to provide a error handling routine. Arguments as per printf().</p>
</dd>
</dl>

<p>Subsequent parameters may be variable definitions. These are passed to the define() method, described below in <a href="#DEFINING_VARIABLES" class="podlinkpod"
>&#34;DEFINING VARIABLES&#34;</a>.</p>

<pre>    my $config = AppConfig-&#62;new(&#34;foo&#34;, &#34;bar&#34;, &#34;baz&#34;);
    my $config = AppConfig-&#62;new( { CASE =&#62; 1 }, qw(foo bar baz) );</pre>

<p>Note that any unresolved method calls to AppConfig are automatically delegated to the AppConfig::State object. In practice, it means that it is possible to treat the AppConfig object as if it were an AppConfig::State object:</p>

<pre>    # create AppConfig
    my $config = AppConfig-&#62;new(&#39;foo&#39;, &#39;bar&#39;);
    
    # methods get passed through to internal AppConfig::State
    $config-&#62;foo(100);
    $config-&#62;set(&#39;bar&#39;, 200);
    $config-&#62;define(&#39;baz&#39;);
    $config-&#62;baz(300);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DEFINING_VARIABLES"
>DEFINING VARIABLES</a></h2>

<p>The <code>define()</code> method (delegated to AppConfig::State) is used to pre-declare a variable and specify its configuration.</p>

<pre>    $config-&#62;define(&#34;foo&#34;);</pre>

<p>Variables may also be defined directly from the AppConfig new() constructor.</p>

<pre>    my $config = AppConfig-&#62;new(&#34;foo&#34;);</pre>

<p>In both simple examples above, a new variable called &#34;foo&#34; is defined. A reference to a hash array may also be passed to specify configuration information for the variable:</p>

<pre>    $config-&#62;define(&#34;foo&#34;, {
            DEFAULT   =&#62; 99,
            ALIAS     =&#62; &#39;metavar1&#39;,
        });</pre>

<p>Configuration items specified in the GLOBAL option to the module constructor are applied by default when variables are created. e.g.</p>

<pre>    my $config = AppConfig-&#62;new( { 
        GLOBAL =&#62; {
            DEFAULT  =&#62; &#34;&#60;undef&#62;&#34;,
            ARGCOUNT =&#62; ARGCOUNT_ONE,
        }
    } );
    
    $config-&#62;define(&#34;foo&#34;);
    $config-&#62;define(&#34;bar&#34;, { ARGCOUNT =&#62; ARGCOUNT_NONE } );</pre>

<p>is equivalent to:</p>

<pre>    my $config = AppConfig-&#62;new();
    
    $config-&#62;define( &#34;foo&#34;, {
        DEFAULT  =&#62; &#34;&#60;undef&#62;&#34;,
        ARGCOUNT =&#62; ARGCOUNT_ONE,
    } );
    
    $config-&#62;define( &#34;bar&#34;, 
        DEFAULT  =&#62; &#34;&#60;undef&#62;&#34;,
        ARGCOUNT =&#62; ARGCOUNT_NONE,
    } );</pre>

<p>Multiple variables may be defined in the same call to define(). Configuration hashes for variables can be omitted.</p>

<pre>    $config-&#62;define(&#34;foo&#34;, &#34;bar&#34; =&#62; { ALIAS = &#34;boozer&#34; }, &#34;baz&#34;);</pre>

<p>See <a href="./AppConfig/State.html" class="podlinkpod"
>AppConfig::State</a> for full details of the configuration options available when defining variables. These are, in brief:</p>

<dl>
<dt><a name="DEFAULT"
>DEFAULT</a></dt>

<dd>
<p>The default value for the variable (default: undef).</p>

<dt><a name="ALIAS"
>ALIAS</a></dt>

<dd>
<p>One or more (list reference or &#34;list|like|this&#34;) alternative names for the variable.</p>

<dt><a name="ARGCOUNT"
>ARGCOUNT</a></dt>

<dd>
<p>Specifies the number and type of arguments that the variable expects. Constants in <code>:expand</code> tag set define ARGCOUNT_NONE - simple on/off flag (default), ARGCOUNT_ONE - single value, ARGCOUNT_LIST - multiple values accessed via list reference, ARGCOUNT_HASH - hash table, &#34;key=value&#34;, accessed via hash reference.</p>

<dt><a name="ARGS"
>ARGS</a></dt>

<dd>
<p>Used to provide an argument specification string to pass to Getopt::Long via AppConfig::Getopt. E.g. &#34;=i&#34;, &#34;:s&#34;, &#34;=s@&#34;. This can also be used to implicitly set the ARGCOUNT value (<code>/^!/</code> = ARGCOUNT_NONE, <code>/@/</code> = ARGCOUNT_LIST, <code>/%/</code> = ARGCOUNT_HASH, <code>/[=:].*/</code> = ARGCOUNT_ONE)</p>

<dt><a name="EXPAND"
>EXPAND</a></dt>

<dd>
<p>Specifies which variable expansion policies should be used when parsing configuration files. Constants in <code>:expand</code> tag set define:</p>

<pre>    EXPAND_NONE - no expansion (default) 
    EXPAND_VAR  - expand C&#60;$var&#62; or C&#60;$(var)&#62; as other variables
    EXPAND_UID  - expand C&#60;~&#62; and C&#60;~uid&#62; as user&#39;s home directory 
    EXPAND_ENV - expand C&#60;${var}&#62; as environment variable
    EXPAND_ALL - do all expansions. </pre>

<dt><a name="VALIDATE"
>VALIDATE</a></dt>

<dd>
<p>Regex which the intended variable value should match or code reference which returns 1 to indicate successful validaton (variable may now be set).</p>

<dt><a name="ACTION"
>ACTION</a></dt>

<dd>
<p>Code reference to be called whenever variable value changes.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="COMPACT_FORMAT_DEFINITION"
>COMPACT FORMAT DEFINITION</a></h2>

<p>Variables can be specified using a compact format. This is identical to the specification format of Getopt::Long and is of the form:</p>

<pre>    &#34;name|alias|alias&#60;argopts&#62;&#34;</pre>

<p>The first element indicates the variable name and subsequent ALIAS values may be added, each separated by a vertical bar &#39;|&#39;.</p>

<p>The &#60;argopts&#62; element indicates the ARGCOUNT value and may be one of the following;</p>

<pre>    !                  ARGCOUNT_NONE
    =s                 ARGCOUNT_ONE
    =s@                ARGCOUNT_LIST
    =s%                ARGCOUNT_HASH</pre>

<p>Additional constructs supported by Getopt::Long may be specified instead of the &#34;=s&#34; element (e.g. &#34;=f&#34;). The entire &#60;argopts&#62; element is stored in the ARGS parameter for the variable and is passed intact to Getopt::Long when the getopt() method is called.</p>

<p>The following examples demonstrate use of the comapct format, with their equivalent full specifications:</p>

<pre>    $config-&#62;define(&#34;foo|bar|baz!&#34;);
    
    $config-&#62;define(
            &#34;foo&#34; =&#62; { 
                ALIAS    =&#62; &#34;bar|baz&#34;, 
                ARGCOUNT =&#62; ARGCOUNT_NONE,
            });
    
    $config-&#62;define(&#34;name=s&#34;);
    
    $config-&#62;define(
            &#34;name&#34; =&#62; { 
                ARGCOUNT =&#62; ARGCOUNT_ONE,
            });
    
    $config-&#62;define(&#34;file|filelist|f=s@&#34;);
    
    $config-&#62;define(
            &#34;file&#34; =&#62; { 
                ALIAS    =&#62; &#34;filelist|f&#34;, 
                ARGCOUNT =&#62; ARGCOUNT_LIST,
            });
    
    $config-&#62;define(&#34;user|u=s%&#34;);
    
    $config-&#62;define(
            &#34;user&#34; =&#62; { 
                ALIAS    =&#62; &#34;u&#34;, 
                ARGCOUNT =&#62; ARGCOUNT_HASH,
            });</pre>

<p>Additional configuration options may be specified by hash reference, as per normal. The compact definition format will override any configuration values provided for ARGS and ARGCOUNT.</p>

<pre>    $config-&#62;define(&#34;file|filelist|f=s@&#34;, { VALIDATE = \&#38;check_file() } );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="READING_AND_MODIFYING_VARIABLE_VALUES"
>READING AND MODIFYING VARIABLE VALUES</a></h2>

<p>AppConfig defines two methods (via AppConfig::State) to manipulate variable values</p>

<pre>    set($variable, $value);
    get($variable);</pre>

<p>Once defined, variables may be accessed directly as object methods where the method name is the same as the variable name. i.e.</p>

<pre>    $config-&#62;set(&#34;verbose&#34;, 1);</pre>

<p>is equivalent to</p>

<pre>    $config-&#62;verbose(1); </pre>

<p>Note that AppConfig defines the following methods:</p>

<pre>    new();
    file();
    args();
    getopt();</pre>

<p>And also, through delegation to AppConfig::State:</p>

<pre>    define()
    get()
    set()
    varlist()</pre>

<p>If you define a variable with one of the above names, you will not be able to access it directly as an object method. i.e.</p>

<pre>    $config-&#62;file();</pre>

<p>This will call the file() method, instead of returning the value of the &#39;file&#39; variable. You can work around this by explicitly calling get() and set() on a variable whose name conflicts:</p>

<pre>    $config-&#62;get(&#39;file&#39;);</pre>

<p>or by defining a &#34;safe&#34; alias by which the variable can be accessed:</p>

<pre>    $config-&#62;define(&#34;file&#34;, { ALIAS =&#62; &#34;fileopt&#34; });
or
    $config-&#62;define(&#34;file|fileopt&#34;);

    ...
    $config-&#62;fileopt();</pre>

<p>Without parameters, the current value of the variable is returned. If a parameter is specified, the variable is set to that value and the result of the set() operation is returned.</p>

<pre>    $config-&#62;age(29);        # sets &#39;age&#39; to 29, returns 1 (ok)
    print $config-&#62;age();    # prints &#34;29&#34;</pre>

<p>The varlist() method can be used to extract a number of variables into a hash array. The first parameter should be a regular expression used for matching against the variable names.</p>

<pre>    my %vars = $config-&#62;varlist(&#34;^file&#34;);   # all &#34;file*&#34; variables</pre>

<p>A second parameter may be specified (any true value) to indicate that the part of the variable name matching the regex should be removed when copied to the target hash.</p>

<pre>    $config-&#62;file_name(&#34;/tmp/file&#34;);
    $config-&#62;file_path(&#34;/foo:/bar:/baz&#34;);

    my %vars = $config-&#62;varlist(&#34;^file_&#34;, 1);

    # %vars:
    #    name =&#62; /tmp/file
    #    path =&#62; &#34;/foo:/bar:/baz&#34;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="READING_CONFIGURATION_FILES"
>READING CONFIGURATION FILES</a></h2>

<p>The AppConfig module provides a streamlined interface for reading configuration files with the AppConfig::File module. The file() method automatically loads the AppConfig::File module and creates an object to process the configuration file or files. Variables stored in the internal AppConfig::State are automatically updated with values specified in the configuration file.</p>

<pre>    $config-&#62;file($filename);</pre>

<p>Multiple files may be passed to file() and should indicate the file name or be a reference to an open file handle or glob.</p>

<pre>    $config-&#62;file($filename, $filehandle, \*STDIN, ...);</pre>

<p>The file may contain blank lines and comments (prefixed by &#39;#&#39;) which are ignored. Continutation lines may be marked by ending the line with a &#39;\&#39;.</p>

<pre>    # this is a comment
    callsign = alpha bravo camel delta echo foxtrot golf hipowls \
               india juliet kilo llama mike november oscar papa  \
               quebec romeo sierra tango umbrella victor whiskey \
               x-ray yankee zebra</pre>

<p>Variables that are simple flags and do not expect an argument (ARGCOUNT = ARGCOUNT_NONE) can be specified without any value. They will be set with the value 1, with any value explicitly specified (except &#34;0&#34; and &#34;off&#34;) being ignored. The variable may also be specified with a &#34;no&#34; prefix to implicitly set the variable to 0.</p>

<pre>    verbose                              # on  (1)
    verbose = 1                          # on  (1)
    verbose = 0                          # off (0)
    verbose off                          # off (0)
    verbose on                           # on  (1)
    verbose mumble                       # on  (1)
    noverbose                            # off (0)</pre>

<p>Variables that expect an argument (ARGCOUNT = ARGCOUNT_ONE) will be set to whatever follows the variable name, up to the end of the current line (including any continuation lines). An optional equals sign may be inserted between the variable and value for clarity.</p>

<pre>    room = /home/kitchen     
    room   /home/bedroom</pre>

<p>Each subsequent re-definition of the variable value overwrites the previous value.</p>

<pre>    print $config-&#62;room();               # prints &#34;/home/bedroom&#34;</pre>

<p>Variables may be defined to accept multiple values (ARGCOUNT = ARGCOUNT_LIST). Each subsequent definition of the variable adds the value to the list of previously set values for the variable.</p>

<pre>    drink = coffee
    drink = tea</pre>

<p>A reference to a list of values is returned when the variable is requested.</p>

<pre>    my $beverages = $config-&#62;drinks();
    print join(&#34;, &#34;, @$beverages);      # prints &#34;coffee, tea&#34;</pre>

<p>Variables may also be defined as hash lists (ARGCOUNT = ARGCOUNT_HASH). Each subsequent definition creates a new key and value in the hash array.</p>

<pre>    alias l=&#34;ls -CF&#34;
    alias e=&#34;emacs&#34;</pre>

<p>A reference to the hash is returned when the variable is requested.</p>

<pre>    my $aliases = $config-&#62;alias();
    foreach my $k (keys %$aliases) {
        print &#34;$k =&#62; $aliases-&#62;{ $k }\n&#34;;
    }</pre>

<p>The &#39;-&#39; prefix can be used to reset a variable to its default value and the &#39;+&#39; prefix can be used to set it to 1</p>

<pre>    -verbose
    +debug</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="VARIABLE_EXPANSION"
>VARIABLE EXPANSION</a></h2>

<p>Variable values may contain references to other AppConfig variables, environment variables and/or users&#39; home directories. These will be expanded depending on the EXPAND value for each variable or the GLOBAL EXPAND value.</p>

<p>Three different expansion types may be applied:</p>

<pre>    bin = ~/bin          # expand &#39;~&#39; to home dir if EXPAND_UID
    tmp = ~abw/tmp       # as above, but home dir for user &#39;abw&#39;
    
    perl = $bin/perl     # expand value of &#39;bin&#39; variable if EXPAND_VAR
    ripl = $(bin)/ripl   # as above with explicit parens
    
    home = ${HOME}       # expand HOME environment var if EXPAND_ENV</pre>

<p>See <a href="./AppConfig/State.html" class="podlinkpod"
>AppConfig::State</a> for more information on expanding variable values.</p>

<p>The configuration files may have variables arranged in blocks. A block header, consisting of the block name in square brackets, introduces a configuration block. The block name and an underscore are then prefixed to the names of all variables subsequently referenced in that block. The block continues until the next block definition or to the end of the current file.</p>

<pre>    [block1]
    foo = 10             # block1_foo = 10
    
    [block2]
    foo = 20             # block2_foo = 20</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PARSING_COMMAND_LINE_OPTIONS"
>PARSING COMMAND LINE OPTIONS</a></h2>

<p>There are two methods for processing command line options. The first, args(), is a small and efficient implementation which offers basic functionality. The second, getopt(), offers a more powerful and complete facility by delegating the task to Johan Vroman&#39;s Getopt::Long module. The trade-off between args() and getopt() is essentially one of speed/size against flexibility. Use as appropriate. Both implement on-demand loading of modules and incur no overhead until used.</p>

<p>The args() method is used to parse simple command line options. It automatically loads the AppConfig::Args module and creates an object to process the command line arguments. Variables stored in the internal AppConfig::State are automatically updated with values specified in the arguments.</p>

<p>The method should be passed a reference to a list of arguments to parse. The @ARGV array is used if args() is called without parameters.</p>

<pre>    $config-&#62;args(\@myargs);
    $config-&#62;args();               # uses @ARGV</pre>

<p>Arguments are read and shifted from the array until the first is encountered that is not prefixed by &#39;-&#39; or &#39;--&#39;. At that point, the method returns 1 to indicate success, leaving any unprocessed arguments remaining in the list.</p>

<p>Each argument should be the name or alias of a variable prefixed by &#39;-&#39; or &#39;--&#39;. Arguments that are not prefixed as such (and are not an additional parameter to a previous argument) will cause a warning to be raised. If the PEDANTIC option is set, the method will return 0 immediately. With PEDANTIC unset (default), the method will continue to parse the rest of the arguments, returning 0 when done.</p>

<p>If the variable is a simple flag (ARGCOUNT = ARGCOUNT_NONE) then it is set to the value 1. The variable may be prefixed by &#34;no&#34; to set its value to 0.</p>

<pre>    myprog -verbose --debug -notaste     # $config-&#62;verbose(1)
                                         # $config-&#62;debug(1)
                                         # $config-&#62;taste(0)</pre>

<p>Variables that expect an additional argument (ARGCOUNT != 0) will be set to the value of the argument following it.</p>

<pre>    myprog -f /tmp/myfile                # $config-&#62;file(&#39;/tmp/file&#39;);</pre>

<p>Variables that expect multiple values (ARGCOUNT = ARGCOUNT_LIST or ARGCOUNT_HASH) will have sucessive values added each time the option is encountered.</p>

<pre>    myprog -file /tmp/foo -file /tmp/bar # $config-&#62;file(&#39;/tmp/foo&#39;)
                                         # $config-&#62;file(&#39;/tmp/bar&#39;)
    
    # file =&#62; [ &#39;/tmp/foo&#39;, &#39;/tmp/bar&#39; ]
    
    myprog -door &#34;jim=Jim Morrison&#34; -door &#34;ray=Ray Manzarek&#34;
                                    # $config-&#62;door(&#34;jim=Jim Morrison&#34;);
                                    # $config-&#62;door(&#34;ray=Ray Manzarek&#34;);
    
    # door =&#62; { &#39;jim&#39; =&#62; &#39;Jim Morrison&#39;, &#39;ray&#39; =&#62; &#39;Ray Manzarek&#39; }</pre>

<p>See <a href="./AppConfig/Args.html" class="podlinkpod"
>AppConfig::Args</a> for further details on parsing command line arguments.</p>

<p>The getopt() method provides a way to use the power and flexibility of the Getopt::Long module to parse command line arguments and have the internal values of the AppConfig object updates automatically.</p>

<p>The first (non-list reference) parameters may contain a number of configuration string to pass to Getopt::Long::Configure. A reference to a list of arguments may additionally be passed or @ARGV is used by default.</p>

<pre>    $config-&#62;getopt();                       # uses @ARGV
    $config-&#62;getopt(\@myargs);
    $config-&#62;getopt(qw(auto_abbrev debug));  # uses @ARGV
    $config-&#62;getopt(qw(debug), \@myargs);</pre>

<p>See Getopt::Long for details of the configuration options available.</p>

<p>The getopt() method constructs a specification string for each internal variable and then initialises Getopt::Long with these values. The specification string is constructed from the name, any aliases (delimited by a vertical bar &#39;|&#39;) and the value of the ARGS parameter.</p>

<pre>    $config-&#62;define(&#34;foo&#34;, {
        ARGS  =&#62; &#34;=i&#34;,
        ALIAS =&#62; &#34;bar|baz&#34;,
    });
    
    # Getopt::Long specification: &#34;foo|bar|baz=i&#34;</pre>

<p>Errors and warning generated by the Getopt::Long module are trapped and handled by the AppConfig error handler. This may be a user-defined routine installed with the ERROR configuration option.</p>

<p>Please note that the AppConfig::Getopt interface is still experimental and may not be 100% operational. This is almost undoubtedly due to problems in AppConfig::Getopt rather than Getopt::Long.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PARSING_CGI_PARAMETERS"
>PARSING CGI PARAMETERS</a></h2>

<p>The cgi() method provides an interface to the AppConfig::CGI module for updating variable values based on the parameters appended to the URL for a CGI script. This is commonly known as the CGI &#34;GET&#34; method. The CGI &#34;POST&#34; method is currently not supported.</p>

<p>Parameter definitions are separated from the CGI script name by a question mark and from each other by ampersands. Where variables have specific values, these are appended to the variable with an equals sign:</p>

<pre>    http://www.here.com/cgi-bin/myscript?foo=bar&#38;baz=qux&#38;verbose

        # $config-&#62;foo(&#39;bar&#39;);
        # $config-&#62;baz(&#39;qux&#39;);
        # $config-&#62;verbose(1);</pre>

<p>Certain values specified in a URL must be escaped in the appropriate manner (see CGI specifications at http://www.w3c.org/ for full details). The AppConfig::CGI module automatically unescapes the CGI query string to restore the parameters to their intended values.</p>

<pre>    http://where.com/mycgi?title=%22The+Wrong+Trousers%22
    
    # $config-&#62;title(&#39;&#34;The Wrong Trousers&#34;&#39;);</pre>

<p>Please be considerate of the security implications of providing writeable access to script variables via CGI.</p>

<pre>    http://rebel.alliance.com/cgi-bin/...
        .../send_report?file=%2Fetc%2Fpasswd&#38;email=darth%40empire.com</pre>

<p>To avoid any accidental or malicious changing of &#34;private&#34; variables, define only the &#34;public&#34; variables before calling the cgi() (or any other) method. Further variables can subequently be defined which can not be influenced by the CGI parameters.</p>

<pre>    $config-&#62;define(&#39;verbose&#39;, &#39;debug&#39;)
    $config-&#62;cgi();             # can only set verbose and debug

    $config-&#62;define(&#39;email&#39;, &#39;file&#39;);
    $config-&#62;file($cfgfile);    # can set verbose, debug, email + file</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONSTANT_DEFINITIONS"
>CONSTANT DEFINITIONS</a></h1>

<p>A number of constants are defined by the AppConfig module. These may be accessed directly (e.g. AppConfig::EXPAND_VARS) or by first importing them into the caller&#39;s package. Constants are imported by specifying their names as arguments to <code>use AppConfig</code> or by importing a set of constants identified by its &#34;tag set&#34; name.</p>

<pre>    use AppConfig qw(ARGCOUNT_NONE ARGCOUNT_ONE);

    use AppConfig qw(:argcount);</pre>

<p>The following tag sets are defined:</p>

<dl>
<dt><a name=":expand"
>:expand</a></dt>

<dd>
<p>The &#39;:expand&#39; tagset defines the following constants:</p>

<pre>    EXPAND_NONE
    EXPAND_VAR
    EXPAND_UID 
    EXPAND_ENV
    EXPAND_ALL       # EXPAND_VAR | EXPAND_UID | EXPAND_ENV
    EXPAND_WARN</pre>

<p>See AppConfig::File for full details of the use of these constants.</p>

<dt><a name=":argcount"
>:argcount</a></dt>

<dd>
<p>The &#39;:argcount&#39; tagset defines the following constants:</p>

<pre>    ARGCOUNT_NONE
    ARGCOUNT_ONE
    ARGCOUNT_LIST 
    ARGCOUNT_HASH</pre>

<p>See AppConfig::State for full details of the use of these constants.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Andy Wardley, &#60;abw@wardley.org&#62;</p>

<p>With contributions from Dave Viner, Ijon Tichy, Axel Gerstmair and many others whose names have been lost to the sands of time (reminders welcome).</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (C) 1997-2007 Andy Wardley. All Rights Reserved.</p>

<p>Copyright (C) 1997,1998 Canon Research Centre Europe Ltd.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>AppConfig::State, AppConfig::File, AppConfig::Args, AppConfig::Getopt, AppConfig::CGI, Getopt::Long</p>
<p class="backlinkbottom"><b><a name="___bottom" href="index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
