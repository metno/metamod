<html><head><title>HTTP::Config</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:18 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Matching'>Matching</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>HTTP::Config - Configuration for request and response objects</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre> use HTTP::Config;
 my $c = HTTP::Config-&#62;new;
 $c-&#62;add(m_domain =&#62; &#34;.example.com&#34;, m_scheme =&#62; &#34;http&#34;, verbose =&#62; 1);
 
 use HTTP::Request;
 my $request = HTTP::Request-&#62;new(GET =&#62; &#34;http://www.example.com&#34;);
 
 if (my @m = $c-&#62;matching($request)) {
    print &#34;Yadayada\n&#34; if $m[0]-&#62;{verbose};
 }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>An <code>HTTP::Config</code> object is a list of entries that can be matched against request or request/response pairs. Its purpose is to hold configuration data that can be looked up given a request or response object.</p>

<p>Each configuration entry is a hash. Some keys specify matching to occur against attributes of request/response objects. Other keys can be used to hold user data.</p>

<p>The following methods are provided:</p>

<dl>
<dt><a name="$conf_=_HTTP::Config-&#62;new"
>$conf = HTTP::Config-&#62;new</a></dt>

<dd>
<p>Constructs a new empty <code>HTTP::Config</code> object and returns it.</p>

<dt><a name="$conf-&#62;entries"
>$conf-&#62;entries</a></dt>

<dd>
<p>Returns the list of entries in the configuration object. In scalar context returns the number of entries.</p>

<dt><a name="$conf-&#62;empty"
>$conf-&#62;empty</a></dt>

<dd>
<p>Return true if there are no entries in the configuration object. This is just a shorthand for <code>not $conf-&#62;entries</code>.</p>

<dt><a name="$conf-&#62;add(_%matchspec,_%other_)"
>$conf-&#62;add( %matchspec, %other )</a></dt>

<dd>
<dt><a name="$conf-&#62;add(_\%entry_)"
>$conf-&#62;add( \%entry )</a></dt>

<dd>
<p>Adds a new entry to the configuration. You can either pass separate key/value pairs or a hash reference.</p>

<dt><a name="$conf-&#62;remove(_%spec_)"
>$conf-&#62;remove( %spec )</a></dt>

<dd>
<p>Removes (and returns) the entries that have matches for all the key/value pairs in %spec. If %spec is empty this will match all entries; so it will empty the configuation object.</p>

<dt><a name="$conf-&#62;matching(_$uri,_$request,_$response_)"
>$conf-&#62;matching( $uri, $request, $response )</a></dt>

<dd>
<dt><a name="$conf-&#62;matching(_$uri_)"
>$conf-&#62;matching( $uri )</a></dt>

<dd>
<dt><a name="$conf-&#62;matching(_$request_)"
>$conf-&#62;matching( $request )</a></dt>

<dd>
<dt><a name="$conf-&#62;matching(_$response_)"
>$conf-&#62;matching( $response )</a></dt>

<dd>
<p>Returns the entries that match the given $uri, $request and $response triplet.</p>

<p>If called with a single $request object then the $uri is obtained by calling its &#39;uri_canonical&#39; method. If called with a single $response object, then the request object is obtained by calling its &#39;request&#39; method; and then the $uri is obtained as if a single $request was provided.</p>

<p>The entries are returned with the most specific matches first. In scalar context returns the most specific match or <code>undef</code> in none match.</p>

<dt><a name="$conf-&#62;add_item(_$item,_%matchspec_)"
>$conf-&#62;add_item( $item, %matchspec )</a></dt>

<dd>
<dt><a name="$conf-&#62;remove_items(_%spec_)"
>$conf-&#62;remove_items( %spec )</a></dt>

<dd>
<dt><a name="$conf-&#62;matching_items(_$uri,_$request,_$response_)"
>$conf-&#62;matching_items( $uri, $request, $response )</a></dt>

<dd>
<p>Wrappers that hides the entries themselves.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Matching"
>Matching</a></h2>

<p>The following keys on a configuration entry specify matching. For all of these you can provide an array of values instead of a single value. The entry matches if at least one of the values in the array matches.</p>

<p>Entries that require match against a response object attribute will never match unless a response object was provided.</p>

<dl>
<dt><a name="m_scheme_=&#62;_$scheme"
>m_scheme =&#62; $scheme</a></dt>

<dd>
<p>Matches if the URI uses the specified scheme; e.g. &#34;http&#34;.</p>

<dt><a name="m_secure_=&#62;_$bool"
>m_secure =&#62; $bool</a></dt>

<dd>
<p>If $bool is TRUE; matches if the URI uses a secure scheme. If $bool is FALSE; matches if the URI does not use a secure scheme. An example of a secure scheme is &#34;https&#34;.</p>

<dt><a name="m_host_port_=&#62;_&#34;$hostname:$port&#34;"
>m_host_port =&#62; &#34;$hostname:$port&#34;</a></dt>

<dd>
<p>Matches if the URI&#39;s host_port method return the specified value.</p>

<dt><a name="m_host_=&#62;_$hostname"
>m_host =&#62; $hostname</a></dt>

<dd>
<p>Matches if the URI&#39;s host method returns the specified value.</p>

<dt><a name="m_port_=&#62;_$port"
>m_port =&#62; $port</a></dt>

<dd>
<p>Matches if the URI&#39;s port method returns the specified value.</p>

<dt><a name="m_domain_=&#62;_&#34;.$domain&#34;"
>m_domain =&#62; &#34;.$domain&#34;</a></dt>

<dd>
<p>Matches if the URI&#39;s host method return a value that within the given domain. The hostname &#34;www.example.com&#34; will for instance match the domain &#34;.com&#34;.</p>

<dt><a name="m_path_=&#62;_$path"
>m_path =&#62; $path</a></dt>

<dd>
<p>Matches if the URI&#39;s path method returns the specified value.</p>

<dt><a name="m_path_prefix_=&#62;_$path"
>m_path_prefix =&#62; $path</a></dt>

<dd>
<p>Matches if the URI&#39;s path is the specified path or has the specified path as prefix.</p>

<dt><a name="m_path_match_=&#62;_$Regexp"
>m_path_match =&#62; $Regexp</a></dt>

<dd>
<p>Matches if the regular expression matches the URI&#39;s path. Eg. qr/\.html$/.</p>

<dt><a name="m_method_=&#62;_$method"
>m_method =&#62; $method</a></dt>

<dd>
<p>Matches if the request method matches the specified value. Eg. &#34;GET&#34; or &#34;POST&#34;.</p>

<dt><a name="m_code_=&#62;_$digit"
>m_code =&#62; $digit</a></dt>

<dd>
<dt><a name="m_code_=&#62;_$status_code"
>m_code =&#62; $status_code</a></dt>

<dd>
<p>Matches if the response status code matches. If a single digit is specified; matches for all response status codes beginning with that digit.</p>

<dt><a name="m_proxy_=&#62;_$url"
>m_proxy =&#62; $url</a></dt>

<dd>
<p>Matches if the request is to be sent to the given Proxy server.</p>

<dt><a name="m_media_type_=&#62;_&#34;*/*&#34;"
>m_media_type =&#62; &#34;*/*&#34;</a></dt>

<dd>
<dt><a name="m_media_type_=&#62;_&#34;text/*&#34;"
>m_media_type =&#62; &#34;text/*&#34;</a></dt>

<dd>
<dt><a name="m_media_type_=&#62;_&#34;html&#34;"
>m_media_type =&#62; &#34;html&#34;</a></dt>

<dd>
<dt><a name="m_media_type_=&#62;_&#34;xhtml&#34;"
>m_media_type =&#62; &#34;xhtml&#34;</a></dt>

<dd>
<dt><a name="m_media_type_=&#62;_&#34;text/html&#34;"
>m_media_type =&#62; &#34;text/html&#34;</a></dt>

<dd>
<p>Matches if the response media type matches.</p>

<p>With a value of &#34;html&#34; matches if $response-&#62;content_is_html returns TRUE. With a value of &#34;xhtml&#34; matches if $response-&#62;content_is_xhtml returns TRUE.</p>

<dt><a name="m_uri__$method_=&#62;_undef"
>m_uri__<i>$method</i> =&#62; undef</a></dt>

<dd>
<p>Matches if the URI object provides the method.</p>

<dt><a name="m_uri__$method_=&#62;_$string"
>m_uri__<i>$method</i> =&#62; $string</a></dt>

<dd>
<p>Matches if the URI&#39;s $method method returns the given value.</p>

<dt><a name="m_header__$field_=&#62;_$string"
>m_header__<i>$field</i> =&#62; $string</a></dt>

<dd>
<p>Matches if either the request or the response have a header $field with the given value.</p>

<dt><a name="m_response_attr__$key_=&#62;_undef"
>m_response_attr__<i>$key</i> =&#62; undef</a></dt>

<dd>
<dt><a name="m_response_attr__$key_=&#62;_$string"
>m_response_attr__<i>$key</i> =&#62; $string</a></dt>

<dd>
<p>Matches if the response object has that key, or the entry has the given value.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../URI.html" class="podlinkpod"
>URI</a>, <a href="../HTTP/Request.html" class="podlinkpod"
>HTTP::Request</a>, <a href="../HTTP/Response.html" class="podlinkpod"
>HTTP::Response</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright 2008, Gisle Aas</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
