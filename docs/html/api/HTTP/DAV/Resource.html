<html><head><title>HTTP::DAV::Resource</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:18 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CONSTRUCTORS'>CONSTRUCTORS</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <li class='indexItem indexItem1'><a href='#ACCESSOR_METHODS_(get%2C_set_and_is)'>ACCESSOR METHODS (get, set and is)</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>HTTP::DAV::Resource - Represents and interfaces with WebDAV Resources</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>Sample</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Description here</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONSTRUCTORS"
>CONSTRUCTORS</a></h1>

<dl>
<dt><a name="new"
><b>new</b></a></dt>

<dd>
<p>Returns a new resource represented by the URI.</p>

<p>$r = HTTP::DAV::Resource-&#62;new( -uri =&#62; $uri,
-LockedResourceList =&#62; $locks,
-Comms =&#62; $comms -Client =&#62; $dav_client );</p>

<p>On creation a Resource object needs 2 other objects passed in:</p>

<p>1.
a <code>ResourceList</code> Object.
This list will be added to if you lock this Resource.</p>

<p>2.
a <code>Comms</code> Object.
This object will be used for HTTP communication.</p>

<p>2.
a <code>HTTP::DAV</code> Object.
This object is where all locks are stored</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<dl>
<dt><a name="get/GET"
><b>get/GET</b></a></dt>

<dd>
<p>Performs an HTTP GET and returns a DAV::Response object.</p>

<pre> $response = $resource-&#62;get;
 print $resource-&#62;get_content if ($response-&#62;is_success);</pre>

<dt><a name="put/PUT"
><b>put/PUT</b></a></dt>

<dd>
<p>Performs an HTTP PUT and returns a DAV::Response object.</p>

<p>$response = $resource-&#62;put( $string );</p>

<p>$string is be passed as the body.</p>

<pre> e.g.
 $response = $resource-&#62;put($string);
 print $resource-&#62;get_content if ($response-&#62;is_success);</pre>

<p>Will use a Lock header if this resource was previously locked.</p>

<dt><a name="copy"
><b>copy</b></a></dt>

<dd>
<p>Not implemented</p>

<dt><a name="move"
><b>move</b></a></dt>

<dd>
<p>Not implemented</p>

<dt><a name="delete"
><b>delete</b></a></dt>

<dd>
<p>Performs an HTTP DELETE and returns a DAV::Response object.</p>

<pre> $response = $resource-&#62;delete;
 print &#34;Delete successful&#34; if ($response-&#62;is_success);</pre>

<p>Will use a Lock header if this resource was previously locked.</p>

<dt><a name="options"
><b>options</b></a></dt>

<dd>
<p>Performs an HTTP OPTIONS and returns a DAV::Response object.</p>

<pre> $response = $resource-&#62;options;
 print &#34;Yay for PUT!&#34; if $resource-&#62;is_option(&#34;PUT&#34;);</pre>

<dt><a name="mkcol"
><b>mkcol</b></a></dt>

<dd>
<p>Performs a WebDAV MKCOL request and returns a DAV::Response object.</p>

<pre> $response = $resource-&#62;mkcol;
 print &#34;MKCOL successful&#34; if ($response-&#62;is_success);</pre>

<p>Will use a Lock header if this resource was previously locked.</p>

<dt><a name="proppatch"
><b>proppatch</b></a></dt>

<dd>
<p>xxx</p>

<dt><a name="propfind"
><b>propfind</b></a></dt>

<dd>
<p>Performs a WebDAV PROPFIND request and returns a DAV::Response object.</p>

<pre> $response = $resource-&#62;propfind;
 if ($response-&#62;is_success) {
    print &#34;PROPFIND successful\n&#34;;
    print $resource-&#62;get_property(&#34;displayname&#34;) . &#34;\n&#34;;
 }</pre>

<p>A successful PROPFIND fills the object with much data about the Resource. Including: displayname ... TODO</p>

<dt><a name="lock"
><b>lock</b></a></dt>

<dd>
<p>Performs a WebDAV LOCK request and returns a DAV::Response object.</p>

<pre> $resource-&#62;lock(
        -owner   =&#62; &#34;Patrick Collins&#34;,
        -depth   =&#62; &#34;infinity&#34;
        -scope   =&#62; &#34;exclusive&#34;,
        -type    =&#62; &#34;write&#34; 
        -timeout =&#62; TIMEOUT&#39;,
     )</pre>

<p>lock takes the following arguments.</p>

<p><b>owner</b> - Indicates who locked this resource</p>

<p>The default value is: DAV.pm/v$DAV::VERSION ($$)</p>

<pre> e.g. DAV.pm/v0.1 (123)</pre>

<p>If you use a URL as the owner, the module will automatically indicate to the server that is is a URL (&#60;D:href&#62;http://...&#60;/D:href&#62;)</p>

<p><b>depth</b> - Indicates the depth of the lock.</p>

<p>Legal values are 0 or infinity. (1 is not allowed).</p>

<p>The default value is infinity.</p>

<p>A lock value of 0 on a collection will lock just the collection but not it&#39;s members, whereas a lock value of infinity will lock the collection and all of it&#39;s members.</p>

<p><b>scope</b> - Indicates the scope of the lock.</p>

<p>Legal DAV values are &#34;exclusive&#34; or &#34;shared&#34;.</p>

<p>The default value is exclusive.</p>

<p>See section 6.1 of RFC2518 for a description of shared vs. exclusive locks.</p>

<p><b>type</b> - Indicates the type of lock (read, write, etc)</p>

<p>The only legal DAV value currently is &#34;write&#34;.</p>

<p>The default value is write.</p>

<p><b>timeout</b> - Indicates when the lock will timeout</p>

<p>The timeout value may be one of, an Absolute Date, a Time Offset from now, or the word &#34;infinity&#34;.</p>

<p>The default value is &#34;infinity&#34;.</p>

<p>The following are all valid timeout values:</p>

<p>Time Offset: 30s 30 seconds from now 10m ten minutes from now 1h one hour from now 1d tomorrow 3M in three months 10y in ten years time</p>

<p>Absolute Date:</p>

<pre>    timeout at the indicated time &#38; date (UTC/GMT)
       2000-02-31 00:40:33   

    timeout at the indicated date (UTC/GMT)
       2000-02-31            </pre>

<p>You can use any of the Absolute Date formats specified in HTTP::Date (see perldoc HTTP::Date)</p>

<p>Note: the DAV server may choose to ignore your specified timeout.</p>

<dt><a name="unlock"
><b>unlock</b></a></dt>

<dd>
<p>Performs a WebDAV UNLOCK request and returns a DAV::Response object.</p>

<pre> $response = $resource-&#62;unlock()
 $response = $resource-&#62;unlock( -force =&#62; 1 )
 $response = $resource-&#62;unlock( 
    -token =&#62; &#34;opaquelocktoken:1342-21423-2323&#34; )</pre>

<p>This method will automatically use the correct locktoken If: header if this resource was previously locked.</p>

<p><b>force</b> - Synonymous to calling $resource-&#62;forcefully_unlock_all.</p>

<dt><a name="forcefully_unlock_all"
><b>forcefully_unlock_all</b></a></dt>

<dd>
<p>Remove all locks from a resource and return the last DAV::Response object. This method take no arguments.</p>

<p>$response = $resource-&#62;forcefully_unlock_all;</p>

<p>This method will perform a lockdiscovery against the resource to determine all of the current locks. Then it will UNLOCK them one by one. unlock( -token =&#62; locktoken ).</p>

<p>This unlock process is achievable because DAV does not enforce any security over locks.</p>

<p>Note: this method returns the LAST unlock response (this is sufficient to indicate the success of the sequence of unlocks). If an unlock fails, it will bail and return that response. For instance, In the event that there are 3 shared locks and the second unlock method fails, then you will get returned the unsuccessful second response. The 3rd unlock will not be attempted.</p>

<p>Don&#39;t run with this knife, you could hurt someone (or yourself).</p>

<dt><a name="steal_lock"
><b>steal_lock</b></a></dt>

<dd>
<p>Removes all locks from a resource, relocks it in your name and returns the DAV::Response object for the lock command. This method takes no arguments.</p>

<p>$response = $resource-&#62;steal_lock;</p>

<p>Synonymous to forcefully_unlock_all() and then lock().</p>

<dt><a name="lockdiscovery"
><b>lockdiscovery</b></a></dt>

<dd>
<p>Discover the locks held against this resource and return a DAV::Response object. This method take no arguments.</p>

<pre> $response = $resource-&#62;lockdiscovery;
 @locks = $resource-&#62;get_locks if $response-&#62;is_success;</pre>

<p>This method is in fact a simplified version of propfind().</p>

<dt><a name="as_string"
><b>as_string</b></a></dt>

<dd>
<p>Returns a string representation of the object. Mainly useful for debugging purposes. It takes no arguments.</p>

<p>print $resource-&#62;as_string</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ACCESSOR_METHODS_(get,_set_and_is)"
>ACCESSOR METHODS (get, set and is)</a></h1>

<dl>
<dt><a name="is_option"
><b>is_option</b></a></dt>

<dd>
<p>Returns a boolean indicating whether this resource supports the option passed in as a string. The option match is case insensitive so, PUT and Put are should both work.</p>

<pre> if ($resource-&#62;is_option( &#34;PUT&#34; ) ) {
    $resource-&#62;put( ... ) 
 }</pre>

<p>Note: this routine automatically calls the options() routine which makes the request to the server. Subsequent calls to is_option will use the cached option list. To force a rerequest to the server call options()</p>

<dt><a name="is_locked"
><b>is_locked</b></a></dt>

<dd>
<p>Returns a boolean indicating whether this resource is locked.</p>

<pre>  @lock = $resource-&#62;is_locked( -owned=&#62;[1|0] );</pre>

<p><b>owned</b> - this parameter is used to ask, is this resource locked by me?</p>

<p>Note: You must have already called propfind() or lockdiscovery()</p>

<p>e.g. Is the resource locked at all? print &#34;yes&#34; if $resource-&#62;is_locked();</p>

<p>Is the resource locked by me? print &#34;yes&#34; if $resource-&#62;is_locked( -owned=&#62;1 );</p>

<p>Is the resource locked by someone other than me? print &#34;yes&#34; if $resource-&#62;is_locked( -owned=&#62;0 );</p>

<dt><a name="is_collection"
><b>is_collection</b></a></dt>

<dd>
<p>Returns a boolean indicating whether this resource is a collection.</p>

<pre> print &#34;Directory&#34; if ( $resource-&#62;is_collection );</pre>

<p>You must first have performed a propfind.</p>

<dt><a name="get_uri"
><b>get_uri</b></a></dt>

<dd>
<p>Returns the URI object for this resource.</p>

<pre> print &#34;URL is: &#34; . $resource-&#62;get_uri()-&#62;as_string . &#34;\n&#34;;</pre>

<p>See the URI manpage from the LWP libraries (perldoc URI)</p>

<dt><a name="get_property"
><b>get_property</b></a></dt>

<dd>
<p>Returns a property value. Takes a string as an argument.</p>

<pre> print $resource-&#62;get_property( &#34;displayname&#34; );</pre>

<p>You must first have performed a propfind.</p>

<dt><a name="get_options"
><b>get_options</b></a></dt>

<dd>
<p>Returns an array of options allowed on this resource. Note: If $resource-&#62;options has not been called then it will return an empty array.</p>

<p>@options = $resource-&#62;get_options</p>

<dt><a name="get_content"
><b>get_content</b></a></dt>

<dd>
<p>Returns the resource&#39;s content/body as a string. The content is typically the result of a GET.</p>

<p>$content = $resource-&#62;get_content</p>

<dt><a name="get_content_ref"
><b>get_content_ref</b></a></dt>

<dd>
<p>Returns the resource&#39;s content/body as a reference to a string. This is useful and more efficient if the content is large.</p>

<p>${$resource-&#62;get_content_ref} =~ s/\bfoo\b/bar/g;</p>

<p>Note: You must have already called get()</p>

<dt><a name="get_lock"
><b>get_lock</b></a></dt>

<dd>
<p>Returns the DAV::Lock object if it exists. Requires opaquelocktoken passed as a parameter.</p>

<pre> $lock = $resource-&#62;get_lock( &#34;opaquelocktoken:234214--342-3444&#34; );</pre>

<dt><a name="get_locks"
><b>get_locks</b></a></dt>

<dd>
<p>Returns a list of any DAV::Lock objects held against the resource.</p>

<pre>  @lock = $resource-&#62;get_locks( -owned=&#62;[1|0] );</pre>

<p><b>owned</b> - this parameter indicates which locks you want. - &#39;1&#39;, requests any of my locks. (Locked by this DAV instance). - &#39;0&#39; ,requests any locks not owned by us. - any other value or no value, requests ALL locks.</p>

<p>Note: You must have already called propfind() or lockdiscovery()</p>

<p>e.g. Give me my locks @lock = $resource-&#62;get_locks( -owned=&#62;1 );</p>

<pre> Give me all locks
  @lock = $resource-&#62;get_locks();</pre>

<dt><a name="get_lockedresourcelist"
><b>get_lockedresourcelist</b></a></dt>

<dd>
<dt><a name="get_parentresourcelist"
><b>get_parentresourcelist</b></a></dt>

<dd>
<dt><a name="get_comms"
><b>get_comms</b></a></dt>

<dd>
<dt><a name="set_parent_resourcelist"
><b>set_parent_resourcelist</b></a></dt>

<dd>
<p>$resource-&#62;set_parent_resourcelist( $resourcelist )</p>

<p>Sets the parent resource list (ask the question, which collection am I a member of?). See <a href="../../HTTP/DAV/ResourceList.html" class="podlinkpod"
>HTTP::DAV::ResourceList</a>.</p>
</dd>
</dl>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
