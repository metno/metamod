<html><head><title>HTTP::Body</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:18 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#NOTES'>NOTES</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <li class='indexItem indexItem1'><a href='#SUPPORT'>SUPPORT</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#CONTRIBUTORS'>CONTRIBUTORS</a>
  <li class='indexItem indexItem1'><a href='#LICENSE'>LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>HTTP::Body - HTTP Body Parser</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use HTTP::Body;
    
    sub handler : method {
        my ( $class, $r ) = @_;

        my $content_type   = $r-&#62;headers_in-&#62;get(&#39;Content-Type&#39;);
        my $content_length = $r-&#62;headers_in-&#62;get(&#39;Content-Length&#39;);
        
        my $body   = HTTP::Body-&#62;new( $content_type, $content_length );
        my $length = $content_length;

        while ( $length ) {

            $r-&#62;read( my $buffer, ( $length &#60; 8192 ) ? $length : 8192 );

            $length -= length($buffer);
            
            $body-&#62;add($buffer);
        }
        
        my $uploads     = $body-&#62;upload;     # hashref
        my $params      = $body-&#62;param;      # hashref
        my $param_order = $body-&#62;param_order # arrayref
        my $body        = $body-&#62;body;       # IO::Handle
    }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>HTTP::Body parses chunks of HTTP POST data and supports application/octet-stream, application/json, application/x-www-form-urlencoded, and multipart/form-data.</p>

<p>Chunked bodies are supported by not passing a length value to new().</p>

<p>It is currently used by <a href="../Catalyst.html" class="podlinkpod"
>Catalyst</a> to parse POST bodies.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NOTES"
>NOTES</a></h1>

<p>When parsing multipart bodies, temporary files are created to store any uploaded files. You must delete these temporary files yourself after processing them, or set $body-&#62;cleanup(1) to automatically delete them at DESTROY-time.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<dl>
<dt><a name="new"
>new</a></dt>

<dd>
<p>Constructor. Takes content type and content length as parameters, returns a <a href="../HTTP/Body.html" class="podlinkpod"
>HTTP::Body</a> object.</p>

<dt><a name="add"
>add</a></dt>

<dd>
<p>Add string to internal buffer. Will call spin unless done. returns length before adding self.</p>

<dt><a name="body"
>body</a></dt>

<dd>
<p>accessor for the body.</p>

<dt><a name="chunked"
>chunked</a></dt>

<dd>
<p>Returns 1 if the request is chunked.</p>

<dt><a name="cleanup"
>cleanup</a></dt>

<dd>
<p>Set to 1 to enable automatic deletion of temporary files at DESTROY-time.</p>

<dt><a name="content_length"
>content_length</a></dt>

<dd>
<p>Returns the content-length for the body data if known. Returns -1 if the request is chunked.</p>

<dt><a name="content_type"
>content_type</a></dt>

<dd>
<p>Returns the content-type of the body data.</p>

<dt><a name="init"
>init</a></dt>

<dd>
<p>return self.</p>

<dt><a name="length"
>length</a></dt>

<dd>
<p>Returns the total length of data we expect to read if known. In the case of a chunked request, returns the amount of data read so far.</p>

<dt><a name="trailing_headers"
>trailing_headers</a></dt>

<dd>
<p>If a chunked request body had trailing headers, trailing_headers will return an HTTP::Headers object populated with those headers.</p>

<dt><a name="spin"
>spin</a></dt>

<dd>
<p>Abstract method to spin the io handle.</p>

<dt><a name="state"
>state</a></dt>

<dd>
<p>Returns the current state of the parser.</p>

<dt><a name="param"
>param</a></dt>

<dd>
<p>Get/set body parameters.</p>

<dt><a name="upload"
>upload</a></dt>

<dd>
<p>Get/set file uploads.</p>

<dt><a name="tmpdir"
>tmpdir</a></dt>

<dd>
<p>Specify a different path for temporary files. Defaults to the system temporary path.</p>

<dt><a name="param_order"
>param_order</a></dt>

<dd>
<p>Returns the array ref of the param keys in the order how they appeared on the body</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SUPPORT"
>SUPPORT</a></h1>

<p>Since its original creation this module has been taken over by the Catalyst development team. If you want to contribute patches, these will be your primary contact points:</p>

<p>IRC:</p>

<pre>    Join #catalyst-dev on irc.perl.org.</pre>

<p>Mailing Lists:</p>

<pre>    http://lists.scsys.co.uk/cgi-bin/mailman/listinfo/catalyst-dev</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Christian Hansen, <code>chansen@cpan.org</code></p>

<p>Sebastian Riedel, <code>sri@cpan.org</code></p>

<p>Andy Grundman, <code>andy@hybridized.org</code></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONTRIBUTORS"
>CONTRIBUTORS</a></h1>

<p>Simon Elliott <code>cpan@papercreatures.com</code></p>

<p>Kent Fredric &#60;kentnl@cpan.org&#62;</p>

<p>Christian Walde</p>

<p>Torsten Raudssus &#60;torsten@raudssus.de&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENSE"
>LICENSE</a></h1>

<p>This library is free software. You can redistribute it and/or modify it under the same terms as perl itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
