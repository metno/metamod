<html><head><title>Moose::Cookbook::Legacy::Debugging_BaseClassReplacement</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:21 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#USING_MyApp%3A%3AUseMyBase'>USING MyApp::UseMyBase</a>
  <li class='indexItem indexItem1'><a href='#CONCLUSION'>CONCLUSION</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Moose::Cookbook::Legacy::Debugging_BaseClassReplacement - Providing an alternate base object class</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 2.0604</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  package MyApp::Base;
  use Moose;

  extends &#39;Moose::Object&#39;;

  before &#39;new&#39; =&#62; sub { warn &#34;Making a new &#34; . $_[0] };

  no Moose;

  package MyApp::UseMyBase;
  use Moose ();
  use Moose::Exporter;

  Moose::Exporter-&#62;setup_import_methods( also =&#62; &#39;Moose&#39; );

  sub init_meta {
      shift;
      return Moose-&#62;init_meta( @_, base_class =&#62; &#39;MyApp::Base&#39; );
  }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p><b>WARNING: Replacing the base class entirely, as opposed to applying roles to the base class, is strongly discouraged. This recipe is provided solely for reference when encountering older code that does this.</b></p>

<p>A common extension is to provide an alternate base class. One way to do that is to make a <code>MyApp::Base</code> and add <code>extends&#160;&#39;MyApp::Base&#39;</code> to every class in your application. That&#39;s pretty tedious. Instead, you can create a Moose-alike module that sets the base object class to <code>MyApp::Base</code> for you.</p>

<p>Then, instead of writing <code>use&#160;Moose</code> you can write <code>use&#160;MyApp::UseMyBase</code>.</p>

<p>In this particular example, our base class issues some debugging output every time a new object is created, but you can think of some more interesting things to do with your own base class.</p>

<p>This uses the magic of <a href="../../../Moose/Exporter.html" class="podlinkpod"
>Moose::Exporter</a>. When we call <code>Moose::Exporter-&#62;setup_import_methods( also =&#62; &#39;Moose&#39; )</code> it builds <code>import</code> and <code>unimport</code> methods for you. The <code>also =&#62; &#39;Moose&#39;</code> bit says that we want to export everything that Moose does.</p>

<p>The <code>import</code> method that gets created will call our <code>init_meta</code> method, passing it <code>for_caller =&#62; $caller</code> as its arguments. The <code>$caller</code> is set to the class that actually imported us in the first place.</p>

<p>See the <a href="../../../Moose/Exporter.html" class="podlinkpod"
>Moose::Exporter</a> docs for more details on its API.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Moose::Cookbook::Extending::Recipe3 - Providing an alternate base object class</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 2.0402</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="USING_MyApp::UseMyBase"
>USING MyApp::UseMyBase</a></h1>

<p>To actually use our new base class, we simply use <code>MyApp::UseMyBase</code> <i>instead</i> of <code>Moose</code>. We get all the Moose sugar plus our new base class.</p>

<pre>  package Foo;

  use MyApp::UseMyBase;

  has &#39;size&#39; =&#62; ( is =&#62; &#39;rw&#39; );

  no MyApp::UseMyBase;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONCLUSION"
>CONCLUSION</a></h1>

<p>This is an awful lot of magic for a simple base class. You will often want to combine a metaclass trait with a base class extension, and that&#39;s when this technique is useful.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Moose is maintained by the Moose Cabal, along with the help of many contributors. See <a href="../../../Moose.html#CABAL" class="podlinkpod"
>&#34;CABAL&#34; in Moose</a> and <a href="../../../Moose.html#CONTRIBUTORS" class="podlinkpod"
>&#34;CONTRIBUTORS&#34; in Moose</a> for details.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2012 by Infinity Interactive, Inc..</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Moose is maintained by the Moose Cabal, along with the help of many contributors. See <a href="../../../Moose.html#CABAL" class="podlinkpod"
>&#34;CABAL&#34; in Moose</a> and <a href="../../../Moose.html#CONTRIBUTORS" class="podlinkpod"
>&#34;CONTRIBUTORS&#34; in Moose</a> for details.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2012 by Infinity Interactive, Inc..</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
