<html><head><title>CGI::Simple::Cookie</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:03 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#USING_CGI%3A%3ASimple%3A%3ACookie'>USING CGI::Simple::Cookie</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Creating_New_Cookies'>Creating New Cookies</a>
    <li class='indexItem indexItem2'><a href='#Sending_the_Cookie_to_the_Browser'>Sending the Cookie to the Browser</a>
    <li class='indexItem indexItem2'><a href='#Recovering_Previous_Cookies'>Recovering Previous Cookies</a>
    <li class='indexItem indexItem2'><a href='#Manipulating_Cookies'>Manipulating Cookies</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR_INFORMATION'>AUTHOR INFORMATION</a>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>CGI::Simple::Cookie - Interface to HTTP cookies</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use CGI::Simple::Standard qw(header);
    use CGI::Simple::Cookie;

    # Create new cookies and send them
    $cookie1 = CGI::Simple::Cookie-&#62;new( -name=&#62;&#39;ID&#39;, -value=&#62;123456 );
    $cookie2 = CGI::Simple::Cookie-&#62;new( -name=&#62;&#39;preferences&#39;,
                                        -value=&#62;{ font =&#62; Helvetica,
                                                  size =&#62; 12 }
                                      );
    print header( -cookie=&#62;[$cookie1,$cookie2] );

    # fetch existing cookies
    %cookies = CGI::Simple::Cookie-&#62;fetch;
    $id = $cookies{&#39;ID&#39;}-&#62;value;

    # create cookies returned from an external source
    %cookies = CGI::Simple::Cookie-&#62;parse($ENV{COOKIE});</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>CGI::Simple::Cookie is an interface to HTTP/1.1 cookies, a mechanism that allows Web servers to store persistent information on the browser&#39;s side of the connection. Although CGI::Simple::Cookie is intended to be used in conjunction with CGI::Simple (and is in fact used by it internally), you can use this module independently.</p>

<p>For full information on cookies see:</p>

<pre>        http://tools.ietf.org/html/rfc2109
        http://tools.ietf.org/html/rfc2965</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="USING_CGI::Simple::Cookie"
>USING CGI::Simple::Cookie</a></h1>

<p>CGI::Simple::Cookie is object oriented. Each cookie object has a name and a value. The name is any scalar value. The value is any scalar or array value (associative arrays are also allowed). Cookies also have several optional attributes, including:</p>

<dl>
<dt><a name="1._expiration_date"
><b>1. expiration date</b></a></dt>

<dd>
<p>The expiration date tells the browser how long to hang on to the cookie. If the cookie specifies an expiration date in the future, the browser will store the cookie information in a disk file and return it to the server every time the user reconnects (until the expiration date is reached). If the cookie species an expiration date in the past, the browser will remove the cookie from the disk file. If the expiration date is not specified, the cookie will persist only until the user quits the browser.</p>

<dt><a name="2._domain"
><b>2. domain</b></a></dt>

<dd>
<p>This is a partial or complete domain name for which the cookie is valid. The browser will return the cookie to any host that matches the partial domain name. For example, if you specify a domain name of &#34;.capricorn.com&#34;, then the browser will return the cookie to web servers running on any of the machines &#34;www.capricorn.com&#34;, &#34;ftp.capricorn.com&#34;, &#34;feckless.capricorn.com&#34;, etc. Domain names must contain at least two periods to prevent attempts to match on top level domains like &#34;.edu&#34;. If no domain is specified, then the browser will only return the cookie to servers on the host the cookie originated from.</p>

<dt><a name="3._path"
><b>3. path</b></a></dt>

<dd>
<p>If you provide a cookie path attribute, the browser will check it against your script&#39;s URL before returning the cookie. For example, if you specify the path &#34;/cgi-bin&#34;, then the cookie will be returned to each of the scripts &#34;/cgi-bin/tally.pl&#34;, &#34;/cgi-bin/order.pl&#34;, and &#34;/cgi-bin/customer_service/complain.pl&#34;, but not to the script &#34;/cgi-private/site_admin.pl&#34;. By default, the path is set to &#34;/&#34;, so that all scripts at your site will receive the cookie.</p>

<dt><a name="4._secure_flag"
><b>4. secure flag</b></a></dt>

<dd>
<p>If the &#34;secure&#34; attribute is set, the cookie will only be sent to your script if the CGI request is occurring on a secure channel, such as SSL.</p>

<dt><a name="4._HttpOnly_flag"
><b>4. HttpOnly flag</b></a></dt>

<dd>
<p>If the &#34;httponly&#34; attribute is set, the cookie will only be accessible through HTTP Requests. This cookie will be inaccessible via JavaScript (to prevent XSS attacks).</p>

<p>See this URL for more information including supported browsers:</p>

<p><a href="http://www.owasp.org/index.php/HTTPOnly" class="podlinkurl"
>http://www.owasp.org/index.php/HTTPOnly</a></p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Creating_New_Cookies"
>Creating New Cookies</a></h2>

<pre>    $c = CGI::Simple::Cookie-&#62;new( -name    =&#62;  &#39;foo&#39;,
                                  -value   =&#62;  &#39;bar&#39;,
                                  -expires =&#62;  &#39;+3M&#39;,
                                  -domain  =&#62;  &#39;.capricorn.com&#39;,
                                  -path    =&#62;  &#39;/cgi-bin/database&#39;,
                                  -secure  =&#62;  1
                                );</pre>

<p>Create cookies from scratch with the <b>new</b> method. The <b>-name</b> and <b>-value</b> parameters are required. The name must be a scalar value. The value can be a scalar, an array reference, or a hash reference. (At some point in the future cookies will support one of the Perl object serialization protocols for full generality).</p>

<p><b>-expires</b> accepts any of the relative or absolute date formats recognized by CGI::Simple, for example &#34;+3M&#34; for three months in the future. See CGI::Simple&#39;s documentation for details.</p>

<p><b>-max-age</b> accepts the same data formats as <b>-expires</b>, but sets a relative value instead of an absolute like <b>-expires</b>. This is intended to be more secure since a clock could be changed to fake an absolute time. In practice, as of 2011, <code>-max-age</code> still does not enjoy the widespread support that <code>-expires</code> has. You can set both, and browsers that support <code>-max-age</code> should ignore the <code>Expires</code> header. The drawback to this approach is the bit of bandwidth for sending an extra header on each cookie.</p>

<p><b>-domain</b> points to a domain name or to a fully qualified host name. If not specified, the cookie will be returned only to the Web server that created it.</p>

<p><b>-path</b> points to a partial URL on the current server. The cookie will be returned to all URLs beginning with the specified path. If not specified, it defaults to &#39;/&#39;, which returns the cookie to all pages at your site.</p>

<p><b>-secure</b> if set to a true value instructs the browser to return the cookie only when a cryptographic protocol is in use.</p>

<p><b>-httponly</b> if set to a true value, the cookie will not be accessible via JavaScript.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Sending_the_Cookie_to_the_Browser"
>Sending the Cookie to the Browser</a></h2>

<p>Within a CGI script you can send a cookie to the browser by creating one or more Set-Cookie: fields in the HTTP header. Here is a typical sequence:</p>

<pre>    $c = CGI::Simple::Cookie-&#62;new( -name    =&#62;  &#39;foo&#39;,
                                   -value   =&#62;  [&#39;bar&#39;,&#39;baz&#39;],
                                   -expires =&#62;  &#39;+3M&#39;
                                  );

    print &#34;Set-Cookie: $c\n&#34;;
    print &#34;Content-Type: text/html\n\n&#34;;</pre>

<p>To send more than one cookie, create several Set-Cookie: fields. Alternatively, you may concatenate the cookies together with &#34;; &#34; and send them in one field.</p>

<p>If you are using CGI::Simple, you send cookies by providing a -cookie argument to the header() method:</p>

<pre>  print header( -cookie=&#62;$c );</pre>

<p>Mod_perl users can set cookies using the request object&#39;s header_out() method:</p>

<pre>  $r-&#62;header_out(&#39;Set-Cookie&#39;,$c);</pre>

<p>Internally, Cookie overloads the &#34;&#34; operator to call its as_string() method when incorporated into the HTTP header. as_string() turns the Cookie&#39;s internal representation into an RFC-compliant text representation. You may call as_string() yourself if you prefer:</p>

<pre>    print &#34;Set-Cookie: &#34;,$c-&#62;as_string,&#34;\n&#34;;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Recovering_Previous_Cookies"
>Recovering Previous Cookies</a></h2>

<pre>    %cookies = CGI::Simple::Cookie-&#62;fetch;</pre>

<p><b>fetch</b> returns an associative array consisting of all cookies returned by the browser. The keys of the array are the cookie names. You can iterate through the cookies this way:</p>

<pre>    %cookies = CGI::Simple::Cookie-&#62;fetch;
    foreach (keys %cookies) {
        do_something($cookies{$_});
    }</pre>

<p>In a scalar context, fetch() returns a hash reference, which may be more efficient if you are manipulating multiple cookies.</p>

<p>CGI::Simple uses the URL escaping methods to save and restore reserved characters in its cookies. If you are trying to retrieve a cookie set by a foreign server, this escaping method may trip you up. Use raw_fetch() instead, which has the same semantics as fetch(), but performs no unescaping.</p>

<p>You may also retrieve cookies that were stored in some external form using the parse() class method:</p>

<pre>       $COOKIES = `cat /usr/tmp/Cookie_stash`;
       %cookies = CGI::Simple::Cookie-&#62;parse($COOKIES);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Manipulating_Cookies"
>Manipulating Cookies</a></h2>

<p>Cookie objects have a series of accessor methods to get and set cookie attributes. Each accessor has a similar syntax. Called without arguments, the accessor returns the current value of the attribute. Called with an argument, the accessor changes the attribute and returns its new value.</p>

<dl>
<dt><a name="name()"
><b>name()</b></a></dt>

<dd>
<p>Get or set the cookie&#39;s name. Example:</p>

<pre>    $name = $c-&#62;name;
    $new_name = $c-&#62;name(&#39;fred&#39;);</pre>

<dt><a name="value()"
><b>value()</b></a></dt>

<dd>
<p>Get or set the cookie&#39;s value. Example:</p>

<pre>    $value = $c-&#62;value;
    @new_value = $c-&#62;value([&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;]);</pre>

<p><b>value()</b> is context sensitive. In a list context it will return the current value of the cookie as an array. In a scalar context it will return the <b>first</b> value of a multivalued cookie.</p>

<dt><a name="domain()"
><b>domain()</b></a></dt>

<dd>
<p>Get or set the cookie&#39;s domain.</p>

<dt><a name="path()"
><b>path()</b></a></dt>

<dd>
<p>Get or set the cookie&#39;s path.</p>

<dt><a name="expires()"
><b>expires()</b></a></dt>

<dd>
<p>Get or set the cookie&#39;s expiration time.</p>

<dt><a name="max_age()"
><b>max_age()</b></a></dt>

<dd>
<p>Get or set the cookie&#39;s maximum age.</p>

<dt><a name="secure()"
><b>secure()</b></a></dt>

<dd>
<p>Get or set the cookie&#39;s secure flag.</p>

<dt><a name="httponly()"
><b>httponly()</b></a></dt>

<dd>
<p>Get or set the cookie&#39;s HttpOnly flag.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR_INFORMATION"
>AUTHOR INFORMATION</a></h1>

<p>Original version copyright 1997-1998, Lincoln D. Stein. All rights reserved. Originally copyright 2001 Dr James Freeman &#60;jfreeman@tassie.net.au&#62; This release by Andy Armstrong &#60;andy@hexten.net&#62;</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<p>Address bug reports and comments to: andy@hexten.net</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h1>

<p>This section intentionally left blank :-)</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../CGI/Carp.html" class="podlinkpod"
>CGI::Carp</a>, <a href="../../CGI/Simple.html" class="podlinkpod"
>CGI::Simple</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
