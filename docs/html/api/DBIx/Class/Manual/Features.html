<html><head><title>DBIx::Class::Manual::Features</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:15 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#META'>META</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Large_Community'>Large Community</a>
    <li class='indexItem indexItem2'><a href='#Active_Community'>Active Community</a>
    <li class='indexItem indexItem2'><a href='#Responsive_Community'>Responsive Community</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#General_ORM'>General ORM</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Cross_DB'>Cross DB</a>
    <li class='indexItem indexItem2'><a href='#Basic_CRUD'>Basic CRUD</a>
    <li class='indexItem indexItem2'><a href='#SQL%3A_Create'>SQL: Create</a>
    <li class='indexItem indexItem2'><a href='#DBIC%3A_Create'>DBIC: Create</a>
    <li class='indexItem indexItem2'><a href='#SQL%3A_Read'>SQL: Read</a>
    <li class='indexItem indexItem2'><a href='#DBIC%3A_Read'>DBIC: Read</a>
    <li class='indexItem indexItem2'><a href='#SQL%3A_Update'>SQL: Update</a>
    <li class='indexItem indexItem2'><a href='#DBIC%3A_Update'>DBIC: Update</a>
    <li class='indexItem indexItem2'><a href='#SQL%3A_Delete'>SQL: Delete</a>
    <li class='indexItem indexItem2'><a href='#DBIC%3A_Delete'>DBIC: Delete</a>
    <li class='indexItem indexItem2'><a href='#SQL%3A_Search'>SQL: Search</a>
    <li class='indexItem indexItem2'><a href='#DBIC%3A_Search'>DBIC: Search</a>
    <li class='indexItem indexItem2'><a href='#OO_Overridability'>OO Overridability</a>
    <li class='indexItem indexItem2'><a href='#Convenience_Methods'>Convenience Methods</a>
    <li class='indexItem indexItem2'><a href='#Non-column_methods'>Non-column methods</a>
    <li class='indexItem indexItem2'><a href='#RELATIONSHIPS'>RELATIONSHIPS</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#DBIx%3A%3AClass_Specific_Features'>DBIx::Class Specific Features</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#-%3Edeploy'>-&#62;deploy</a>
    <li class='indexItem indexItem2'><a href='#Schema%3A%3ALoader'>Schema::Loader</a>
    <li class='indexItem indexItem2'><a href='#Populate'>Populate</a>
    <li class='indexItem indexItem2'><a href='#Multicreate'>Multicreate</a>
    <li class='indexItem indexItem2'><a href='#Extensible'>Extensible</a>
    <li class='indexItem indexItem2'><a href='#Extensibility_example%3A_DBIx%3A%3AClass%3A%3AHelpers'>Extensibility example: DBIx::Class::Helpers</a>
    <li class='indexItem indexItem2'><a href='#Extensibility_example%3A_DBIx%3A%3AClass%3A%3ATimeStamp'>Extensibility example: DBIx::Class::TimeStamp</a>
    <li class='indexItem indexItem2'><a href='#Extensibility_example%3A_Kioku'>Extensibility example: Kioku</a>
    <li class='indexItem indexItem2'><a href='#Result_vs_ResultSet'>Result vs ResultSet</a>
    <li class='indexItem indexItem2'><a href='#ResultSet_methods'>ResultSet methods</a>
    <li class='indexItem indexItem2'><a href='#ResultSet_method_in_Action'>ResultSet method in Action</a>
    <li class='indexItem indexItem2'><a href='#ResultSet_Chaining'>ResultSet Chaining</a>
    <li class='indexItem indexItem2'><a href='#search_related'>search_related</a>
    <li class='indexItem indexItem2'><a href='#bonus_rel_methods'>bonus rel methods</a>
    <li class='indexItem indexItem2'><a href='#Excellent_Transaction_Support'>Excellent Transaction Support</a>
    <li class='indexItem indexItem2'><a href='#InflateColumn'>InflateColumn</a>
    <li class='indexItem indexItem2'><a href='#InflateColumn%3A_deflation'>InflateColumn: deflation</a>
    <li class='indexItem indexItem2'><a href='#InflateColumn%3A_inflation'>InflateColumn: inflation</a>
    <li class='indexItem indexItem2'><a href='#FilterColumn'>FilterColumn</a>
    <li class='indexItem indexItem2'><a href='#ResultSetColumn'>ResultSetColumn</a>
    <li class='indexItem indexItem2'><a href='#Aggregates'>Aggregates</a>
    <li class='indexItem indexItem2'><a href='#HRI'>HRI</a>
    <li class='indexItem indexItem2'><a href='#Subquery_Support'>Subquery Support</a>
    <li class='indexItem indexItem2'><a href='#Bare_SQL_w%2F_Placeholders'>Bare SQL w/ Placeholders</a>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>DBIx::Class::Manual::Features - A boatload of DBIx::Class features with links to respective documentation</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="META"
>META</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Large_Community"
>Large Community</a></h2>

<p>Currently there are 88 people listed as contributors to DBIC.
That ranges from documentation help,
to test help,
to added features,
to entire database support.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Active_Community"
>Active Community</a></h2>

<p>Currently (June 9,
2010) 6 active branches (committed to in the last two weeks) in git.
Last release (0.08122) had 14 new features,
and 16 bug fixes.
Of course that <a href="http://git.shadowcat.co.uk/gitweb/gitweb.cgi?p=dbsrgits/DBIx-Class.git;a=blob;f=Changes" class="podlinkurl"
>ebbs and flows</a>.)</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Responsive_Community"
>Responsive Community</a></h2>

<dl>
<dt><a name="I_needed_MSSQL_order-by_support;_the_community_helped_me_add_support"
>I needed MSSQL order-by support; the community helped me add support</a></dt>

<dd>
<dt><a name="generally_very_welcoming_of_people_willing_to_help"
>generally very welcoming of people willing to help</a></dt>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="General_ORM"
>General ORM</a></h1>

<p>These are things that are in most other ORMs,
but are still reasons to use DBIC over raw SQL.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Cross_DB"
>Cross DB</a></h2>

<p>The vast majority of code should run on all databases without needing tweaking</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Basic_CRUD"
>Basic CRUD</a></h2>

<dl>
<dt><a name="C_-_Create"
>C - Create</a></dt>

<dd>
<dt><a name="R_-_Retrieve"
>R - Retrieve</a></dt>

<dd>
<dt><a name="U_-_Update"
>U - Update</a></dt>

<dd>
<dt><a name="D_-_Delete"
>D - Delete</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="SQL:_Create"
>SQL: Create</a></h2>

<pre> my $sth = $dbh-&#62;prepare(&#39;
    INSERT INTO books
    (title, author_id)
    values (?,?)
 &#39;);

 $sth-&#62;execute( &#39;A book title&#39;, $author_id );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DBIC:_Create"
>DBIC: Create</a></h2>

<pre> my $book = $book_rs-&#62;create({
    title     =&#62; &#39;A book title&#39;,
    author_id =&#62; $author_id,
 });</pre>

<p>See <a href="../../../DBIx/Class/ResultSet.html#create" class="podlinkpod"
>&#34;create&#34; in DBIx::Class::ResultSet</a></p>

<dl>
<dt><a name="No_need_to_pair_placeholders_and_values"
>No need to pair placeholders and values</a></dt>

<dd>
<dt><a name="Automatically_gets_autoincremented_id_for_you"
>Automatically gets autoincremented id for you</a></dt>

<dd>
<dt><a name="Transparently_uses_INSERT_..._RETURNING_for_databases_that_support_it"
>Transparently uses INSERT ... RETURNING for databases that support it</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="SQL:_Read"
>SQL: Read</a></h2>

<pre> my $sth = $dbh-&#62;prepare(&#39;
    SELECT title,
    authors.name as author_name
    FROM books, authors
    WHERE books.author = authors.id
 &#39;);

 while ( my $book = $sth-&#62;fetchrow_hashref ) {
   say &#34;Author of $book-&#62;{title} is $book-&#62;{author_name}&#34;;
 }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DBIC:_Read"
>DBIC: Read</a></h2>

<pre> my $book = $book_rs-&#62;find($book_id);</pre>

<p>or</p>

<pre> my $book = $book_rs-&#62;search({ title =&#62; &#39;A book title&#39; }, { rows =&#62; 1 })-&#62;next;</pre>

<p>or</p>

<pre> my @books = $book_rs-&#62;search({ author =&#62; $author_id })-&#62;all;</pre>

<p>or</p>

<pre> while( my $book = $books_rs-&#62;next ) {
   printf &#34;Author of %s is %s\n&#34;, $book-&#62;title, $book-&#62;author-&#62;name;
 }</pre>

<p>See <a href="../../../DBIx/Class/ResultSet.html#find" class="podlinkpod"
>&#34;find&#34; in DBIx::Class::ResultSet</a>, <a href="../../../DBIx/Class/ResultSet.html#search" class="podlinkpod"
>&#34;search&#34; in DBIx::Class::ResultSet</a>, <a href="../../../DBIx/Class/ResultSet.html#next" class="podlinkpod"
>&#34;next&#34; in DBIx::Class::ResultSet</a>, and <a href="../../../DBIx/Class/ResultSet.html#all" class="podlinkpod"
>&#34;all&#34; in DBIx::Class::ResultSet</a></p>

<p><b>TMTOWTDI!</b></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="SQL:_Update"
>SQL: Update</a></h2>

<pre> my $update = $dbh-&#62;prepare(&#39;
    UPDATE books
    SET title = ?
    WHERE id = ?
 &#39;);

 $update-&#62;execute( &#39;New title&#39;, $book_id );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DBIC:_Update"
>DBIC: Update</a></h2>

<pre> $book-&#62;update({ title =&#62; &#39;New title&#39; });</pre>

<p>See <a href="../../../DBIx/Class/Row.html#update" class="podlinkpod"
>&#34;update&#34; in DBIx::Class::Row</a></p>

<p>Will not update unless value changes</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="SQL:_Delete"
>SQL: Delete</a></h2>

<pre> my $delete = $dbh-&#62;prepare(&#39;DELETE FROM books WHERE id = ?&#39;);

 $delete-&#62;execute($book_id);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DBIC:_Delete"
>DBIC: Delete</a></h2>

<pre> $book-&#62;delete</pre>

<p>See <a href="../../../DBIx/Class/Row.html#delete" class="podlinkpod"
>&#34;delete&#34; in DBIx::Class::Row</a></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="SQL:_Search"
>SQL: Search</a></h2>

<pre> my $sth = $dbh-&#62;prepare(&#39;
   SELECT title,
   authors.name as author_name
   FROM books
   WHERE books.name LIKE &#34;%monte cristo%&#34; AND
   books.topic = &#34;jailbreak&#34;
 &#39;);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DBIC:_Search"
>DBIC: Search</a></h2>

<pre> my $book = $book_rs-&#62;search({
    &#39;me.name&#39;  =&#62; { -like =&#62; &#39;%monte cristo%&#39; },
    &#39;me.topic&#39; =&#62; &#39;jailbreak&#39;,
 })-&#62;next;</pre>

<dl>
<dt><a name="See_SQL::Abstract,_&#34;next&#34;_in_DBIx::Class::ResultSet,_and_&#34;search&#34;_in_DBIx::Class::ResultSet"
>See <a href="../../../SQL/Abstract.html" class="podlinkpod"
>SQL::Abstract</a>, <a href="../../../DBIx/Class/ResultSet.html#next" class="podlinkpod"
>&#34;next&#34; in DBIx::Class::ResultSet</a>, and <a href="../../../DBIx/Class/ResultSet.html#search" class="podlinkpod"
>&#34;search&#34; in DBIx::Class::ResultSet</a></a></dt>

<dd>
<dt><a name="(kinda)_introspectible"
>(kinda) introspectible</a></dt>

<dd>
<dt><a name="Prettier_than_SQL"
>Prettier than SQL</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="OO_Overridability"
>OO Overridability</a></h2>

<dl>
<dt><a name="Override_new_if_you_want_to_do_validation"
>Override new if you want to do validation</a></dt>

<dd>
<dt><a name="Override_delete_if_you_want_to_disable_deletion"
>Override delete if you want to disable deletion</a></dt>

<dd>
<dt><a name="and_on_and_on"
>and on and on</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Convenience_Methods"
>Convenience Methods</a></h2>

<dl>
<dt><a name="&#34;find_or_create&#34;_in_DBIx::Class::ResultSet"
><a href="../../../DBIx/Class/ResultSet.html#find_or_create" class="podlinkpod"
>&#34;find_or_create&#34; in DBIx::Class::ResultSet</a></a></dt>

<dd>
<dt><a name="&#34;update_or_create&#34;_in_DBIx::Class::ResultSet"
><a href="../../../DBIx/Class/ResultSet.html#update_or_create" class="podlinkpod"
>&#34;update_or_create&#34; in DBIx::Class::ResultSet</a></a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Non-column_methods"
>Non-column methods</a></h2>

<p>Need a method to get a user&#39;s gravatar URL? Add a <code>gravatar_url</code> method to the Result class</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="RELATIONSHIPS"
>RELATIONSHIPS</a></h2>

<dl>
<dt><a name="&#34;belongs_to&#34;_in_DBIx::Class::Relationship"
><a href="../../../DBIx/Class/Relationship.html#belongs_to" class="podlinkpod"
>&#34;belongs_to&#34; in DBIx::Class::Relationship</a></a></dt>

<dd>
<dt><a name="&#34;has_many&#34;_in_DBIx::Class::Relationship"
><a href="../../../DBIx/Class/Relationship.html#has_many" class="podlinkpod"
>&#34;has_many&#34; in DBIx::Class::Relationship</a></a></dt>

<dd>
<dt><a name="&#34;might_have&#34;_in_DBIx::Class::Relationship"
><a href="../../../DBIx/Class/Relationship.html#might_have" class="podlinkpod"
>&#34;might_have&#34; in DBIx::Class::Relationship</a></a></dt>

<dd>
<dt><a name="&#34;has_one&#34;_in_DBIx::Class::Relationship"
><a href="../../../DBIx/Class/Relationship.html#has_one" class="podlinkpod"
>&#34;has_one&#34; in DBIx::Class::Relationship</a></a></dt>

<dd>
<dt><a name="&#34;many_to_many&#34;_in_DBIx::Class::Relationship"
><a href="../../../DBIx/Class/Relationship.html#many_to_many" class="podlinkpod"
>&#34;many_to_many&#34; in DBIx::Class::Relationship</a></a></dt>

<dd>
<dt><a name="SET_AND_FORGET"
>SET AND FORGET</a></dt>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DBIx::Class_Specific_Features"
>DBIx::Class Specific Features</a></h1>

<p>These things may be in other ORM&#39;s, but they are very specific, so doubtful</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="-&#62;deploy"
>-&#62;deploy</a></h2>

<p>Create a database from your DBIx::Class schema.</p>

<pre> my $schema = Frew::Schema-&#62;connect( $dsn, $user, $pass );

 $schema-&#62;deploy</pre>

<p>See <a href="../../../DBIx/Class/Schema.html#deploy" class="podlinkpod"
>&#34;deploy&#34; in DBIx::Class::Schema</a>.</p>

<p>See also: <a href="../../../DBIx/Class/DeploymentHandler.html" class="podlinkpod"
>DBIx::Class::DeploymentHandler</a></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Schema::Loader"
>Schema::Loader</a></h2>

<p>Create a DBIx::Class schema from your database.</p>

<pre> package Frew::Schema;

 use strict;
 use warnings;

 use base &#39;DBIx::Class::Schema::Loader&#39;;

 __PACKAGE__-&#62;loader_options({
    naming =&#62; &#39;v7&#39;,
    debug  =&#62; $ENV{DBIC_TRACE},
 });

 1;

 # elsewhere...

 my $schema = Frew::Schema-&#62;connect( $dsn, $user, $pass );</pre>

<p>See <a href="../../../DBIx/Class/Schema/Loader.html" class="podlinkpod"
>DBIx::Class::Schema::Loader</a> and <a href="../../../DBIx/Class/Schema/Loader/Base.html#CONSTRUCTOR_OPTIONS" class="podlinkpod"
>&#34;CONSTRUCTOR OPTIONS&#34; in DBIx::Class::Schema::Loader::Base</a>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Populate"
>Populate</a></h2>

<p>Made for inserting lots of rows very quicky into database</p>

<pre> $schema-&#62;populate([ Users =&#62;
    [qw( username password )],
    [qw( frew     &#62;=4char$ )],
    [qw(      ...          )],
    [qw(      ...          )],
 );</pre>

<p>See <a href="../../../DBIx/Class/Schema.html#populate" class="podlinkpod"
>&#34;populate&#34; in DBIx::Class::Schema</a></p>

<p>I use populate <a href="http://blog.afoolishmanifesto.com/archives/1255" class="podlinkurl"
>here</a> to export our whole (200M~) db to SQLite</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Multicreate"
>Multicreate</a></h2>

<p>Create an object and it&#39;s related objects all at once</p>

<pre> $schema-&#62;resultset(&#39;Author&#39;)-&#62;create({
    name =&#62; &#39;Stephen King&#39;,
    books =&#62; [{ title =&#62; &#39;The Dark Tower&#39; }],
    address =&#62; {
       street =&#62; &#39;123 Turtle Back Lane&#39;,
       state  =&#62; { abbreviation =&#62; &#39;ME&#39; },
       city   =&#62; { name =&#62; &#39;Lowell&#39;     },
    },
 });</pre>

<p>See <a href="../../../DBIx/Class/ResultSet.html#create" class="podlinkpod"
>&#34;create&#34; in DBIx::Class::ResultSet</a></p>

<dl>
<dt><a name="books_is_a_has_many"
>books is a has_many</a></dt>

<dd>
<dt><a name="address_is_a_belongs_to_which_in_turn_belongs_to_state_and_city_each"
>address is a belongs_to which in turn belongs to state and city each</a></dt>

<dd>
<dt><a name="for_this_to_work_right_state_and_city_must_mark_abbreviation_and_name_as_unique"
>for this to work right state and city must mark abbreviation and name as unique</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Extensible"
>Extensible</a></h2>

<p>DBIx::Class helped pioneer fast MI in Perl 5 with Class::C3, so it is made to allow extensions to nearly every part of it.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Extensibility_example:_DBIx::Class::Helpers"
>Extensibility example: DBIx::Class::Helpers</a></h2>

<dl>
<dt><a name="DBIx::Class::Helper::ResultSet::IgnoreWantarray"
><a href="../../../DBIx/Class/Helper/ResultSet/IgnoreWantarray.html" class="podlinkpod"
>DBIx::Class::Helper::ResultSet::IgnoreWantarray</a></a></dt>

<dd>
<dt><a name="DBIx::Class::Helper::ResultSet::Random"
><a href="../../../DBIx/Class/Helper/ResultSet/Random.html" class="podlinkpod"
>DBIx::Class::Helper::ResultSet::Random</a></a></dt>

<dd>
<dt><a name="DBIx::Class::Helper::ResultSet::SetOperations"
><a href="../../../DBIx/Class/Helper/ResultSet/SetOperations.html" class="podlinkpod"
>DBIx::Class::Helper::ResultSet::SetOperations</a></a></dt>

<dd>
<dt><a name="DBIx::Class::Helper::Row::JoinTable"
><a href="../../../DBIx/Class/Helper/Row/JoinTable.html" class="podlinkpod"
>DBIx::Class::Helper::Row::JoinTable</a></a></dt>

<dd>
<dt><a name="DBIx::Class::Helper::Row::NumifyGet"
><a href="../../../DBIx/Class/Helper/Row/NumifyGet.html" class="podlinkpod"
>DBIx::Class::Helper::Row::NumifyGet</a></a></dt>

<dd>
<dt><a name="DBIx::Class::Helper::Row::SubClass"
><a href="../../../DBIx/Class/Helper/Row/SubClass.html" class="podlinkpod"
>DBIx::Class::Helper::Row::SubClass</a></a></dt>

<dd>
<dt><a name="DBIx::Class::Helper::Row::ToJSON"
><a href="../../../DBIx/Class/Helper/Row/ToJSON.html" class="podlinkpod"
>DBIx::Class::Helper::Row::ToJSON</a></a></dt>

<dd>
<dt><a name="DBIx::Class::Helper::Row::StorageValues"
><a href="../../../DBIx/Class/Helper/Row/StorageValues.html" class="podlinkpod"
>DBIx::Class::Helper::Row::StorageValues</a></a></dt>

<dd>
<dt><a name="DBIx::Class::Helper::Row::OnColumnChange"
><a href="../../../DBIx/Class/Helper/Row/OnColumnChange.html" class="podlinkpod"
>DBIx::Class::Helper::Row::OnColumnChange</a></a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Extensibility_example:_DBIx::Class::TimeStamp"
>Extensibility example: DBIx::Class::TimeStamp</a></h2>

<dl>
<dt><a name="See_DBIx::Class::TimeStamp"
>See <a href="../../../DBIx/Class/TimeStamp.html" class="podlinkpod"
>DBIx::Class::TimeStamp</a></a></dt>

<dd>
<dt><a name="Cross_DB"
>Cross DB</a></dt>

<dd>
<dt><a name="set_on_create"
>set_on_create</a></dt>

<dd>
<dt><a name="set_on_update"
>set_on_update</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Extensibility_example:_Kioku"
>Extensibility example: Kioku</a></h2>

<dl>
<dt><a name="See_DBIx::Class::Schema::KiokuDB"
>See <a href="../../../DBIx/Class/Schema/KiokuDB.html" class="podlinkpod"
>DBIx::Class::Schema::KiokuDB</a></a></dt>

<dd>
<dt><a name="Kioku_is_the_new_hotness"
>Kioku is the new hotness</a></dt>

<dd>
<dt><a name="Mix_RDBMS_with_Object_DB"
>Mix RDBMS with Object DB</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Result_vs_ResultSet"
>Result vs ResultSet</a></h2>

<dl>
<dt><a name="Result_==_Row"
>Result == Row</a></dt>

<dd>
<dt><a name="ResultSet_==_Query_Plan"
>ResultSet == Query Plan</a></dt>

<dd>
<dl>
<dt><a name="Internal_Join_Optimizer_for_all_DB&#39;s_(!!!)"
>Internal Join Optimizer for all DB&#39;s (!!!)</a></dt>
</dl>

<dt><a name="(less_important_but...)"
>(less important but...)</a></dt>

<dd>
<dt><a name="ResultSource_==_Queryable_collection_of_rows_(Table,_View,_etc)"
>ResultSource == Queryable collection of rows (Table, View, etc)</a></dt>

<dd>
<dt><a name="Storage_==_Database"
>Storage == Database</a></dt>

<dd>
<dt><a name="Schema_==_associates_a_set_of_ResultSources_with_a_Storage"
>Schema == associates a set of ResultSources with a Storage</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ResultSet_methods"
>ResultSet methods</a></h2>

<pre> package MyApp::Schema::ResultSet::Book;

 use strict;
 use warnings;

 use base &#39;DBIx::Class::ResultSet&#39;;

 sub good {
    my $self = shift;
    $self-&#62;search({
       $self-&#62;current_source_alias . &#39;.rating&#39; =&#62; { &#39;&#62;=&#39; =&#62; 4 }
    })
 };

 sub cheap {
    my $self = shift;
    $self-&#62;search({
       $self-&#62;current_source_alias . &#39;.price&#39; =&#62; { &#39;&#60;=&#39; =&#62; 5}
    })
 };

 # ...

 1;</pre>

<p>See <a href="../../../DBIx/Class/Manual/Cookbook.html#Predefined_searches" class="podlinkpod"
>&#34;Predefined searches&#34; in DBIx::Class::Manual::Cookbook</a></p>

<dl>
<dt><a name="All_searches_should_be_ResultSet_methods"
>All searches should be ResultSet methods</a></dt>

<dd>
<dt><a name="Name_has_obvious_meaning"
>Name has obvious meaning</a></dt>

<dd>
<dt><a name="&#34;current_source_alias&#34;_in_DBIx::Class::ResultSet_helps_things_to_work_no_matter_what"
><a href="../../../DBIx/Class/ResultSet.html#current_source_alias" class="podlinkpod"
>&#34;current_source_alias&#34; in DBIx::Class::ResultSet</a> helps things to work no matter what</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ResultSet_method_in_Action"
>ResultSet method in Action</a></h2>

<pre> $schema-&#62;resultset(&#39;Book&#39;)-&#62;good</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ResultSet_Chaining"
>ResultSet Chaining</a></h2>

<pre> $schema-&#62;resultset(&#39;Book&#39;)
    -&#62;good
    -&#62;cheap
    -&#62;recent</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="search_related"
>search_related</a></h2>

<pre> my $score = $schema-&#62;resultset(&#39;User&#39;)
    -&#62;search({&#39;me.userid&#39; =&#62; &#39;frew&#39;})
    -&#62;related_resultset(&#39;access&#39;)
    -&#62;related_resultset(&#39;mgmt&#39;)
    -&#62;related_resultset(&#39;orders&#39;)
    -&#62;telephone
    -&#62;search_related( shops =&#62; {
       &#39;shops.datecompleted&#39; =&#62; {
          -between =&#62; [&#39;2009-10-01&#39;,&#39;2009-10-08&#39;]
       }
    })-&#62;completed
    -&#62;related_resultset(&#39;rpt_score&#39;)
    -&#62;search(undef, { rows =&#62; 1})
    -&#62;get_column(&#39;raw_scores&#39;)
    -&#62;next;</pre>

<p>The SQL that this produces (with placeholders filled in for clarity&#39;s sake) on our system (Microsoft SQL) is:</p>

<pre> SELECT raw_scores
   FROM (
     SELECT raw_scores, ROW_NUMBER() OVER (
         ORDER BY (
             SELECT (1)
           )
       ) AS rno__row__index
       FROM (
         SELECT rpt_score.raw_scores
           FROM users me
           JOIN access access
             ON access.userid = me.userid
           JOIN mgmt mgmt
             ON mgmt.mgmtid = access.mgmtid
           JOIN [order] orders
             ON orders.mgmtid = mgmt.mgmtid
           JOIN shop shops
             ON shops.orderno = orders.orderno
           JOIN rpt_scores rpt_score
             ON rpt_score.shopno = shops.shopno
         WHERE (
           datecompleted IS NOT NULL AND
           (
             (shops.datecompleted BETWEEN &#39;2009-10-01&#39; AND &#39;2009-10-08&#39;)  AND
             (type = &#39;1&#39; AND me.userid = &#39;frew&#39;)
           )
         )
       ) rpt_score
   ) rpt_score
 WHERE rno__row__index BETWEEN 1 AND 1</pre>

<p>See: <a href="../../../DBIx/Class/ResultSet.html#related_resultset" class="podlinkpod"
>&#34;related_resultset&#34; in DBIx::Class::ResultSet</a>, <a href="../../../DBIx/ClassResultSet.html#search_related" class="podlinkpod"
>&#34;search_related&#34; in DBIx::ClassResultSet</a>, and <a href="../../../DBIx/Class/ResultSet.html#get_column" class="podlinkpod"
>&#34;get_column&#34; in DBIx::Class::ResultSet</a>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="bonus_rel_methods"
>bonus rel methods</a></h2>

<pre> my $book = $author-&#62;create_related(
    books =&#62; {
       title =&#62; &#39;Another Discworld book&#39;,
    }
 );

 my $book2 = $pratchett-&#62;add_to_books({
    title =&#62; &#39;MOAR Discworld book&#39;,
 });</pre>

<p>See <a href="../../../DBIx/Class/Relationship/Base.html#create_related" class="podlinkpod"
>&#34;create_related&#34; in DBIx::Class::Relationship::Base</a> and <a href="../../../DBIx/Class/Relationship/Base.html#add_to_%24rel" class="podlinkpod"
>&#34;add_to_$rel&#34; in DBIx::Class::Relationship::Base</a></p>

<p>Note that it automatically fills in foreign key for you</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Excellent_Transaction_Support"
>Excellent Transaction Support</a></h2>

<pre> $schema-&#62;txn_do(sub {
    ...
 });

 $schema-&#62;txn_begin; # &#60;-- low level
 # ...
 $schema-&#62;txn_commit;</pre>

<p>See <a href="../../../DBIx/Class/Schema.html#txn_do" class="podlinkpod"
>&#34;txn_do&#34; in DBIx::Class::Schema</a>, <a href="../../../DBIx/Class/Schema.html#txn_begin" class="podlinkpod"
>&#34;txn_begin&#34; in DBIx::Class::Schema</a>, and <a href="../../../DBIx/Class/Schema.html#txn_commit" class="podlinkpod"
>&#34;txn_commit&#34; in DBIx::Class::Schema</a>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="InflateColumn"
>InflateColumn</a></h2>

<pre> package Frew::Schema::Result::Book;

 use strict;
 use warnings;

 use base &#39;DBIx::Class::Core&#39;;

 use DateTime::Format::MySQL;

 # Result code here

 __PACKAGE__-&#62;load_components(&#39;InflateColumn&#39;);

 __PACKAGE__-&#62;inflate_column(
    date_published =&#62; {
       inflate =&#62; sub { DateTime::Format::MySQL-&#62;parse_date( shift ) },
       deflate =&#62; sub { shift-&#62;ymd },
    },
 );</pre>

<p>See <a href="../../../DBIx/Class/InflateColumn.html" class="podlinkpod"
>DBIx::Class::InflateColumn</a>, <a href="../../../DBIx/Class/InflateColumn.html#inflate_column" class="podlinkpod"
>&#34;inflate_column&#34; in DBIx::Class::InflateColumn</a>, and <a href="../../../DBIx/Class/InflateColumn/DateTime.html" class="podlinkpod"
>DBIx::Class::InflateColumn::DateTime</a>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="InflateColumn:_deflation"
>InflateColumn: deflation</a></h2>

<pre> $book-&#62;date_published(DateTime-&#62;now);
 $book-&#62;update;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="InflateColumn:_inflation"
>InflateColumn: inflation</a></h2>

<pre> say $book-&#62;date_published-&#62;month_abbr; # Nov</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="FilterColumn"
>FilterColumn</a></h2>

<pre> package Frew::Schema::Result::Book;

 use strict;
 use warnings;

 use base &#39;DBIx::Class::Core&#39;;

 # Result code here

 __PACKAGE__-&#62;load_components(&#39;FilterColumn&#39;);

 __PACKAGE__-&#62;filter_column(
    length =&#62; {
       to_storage   =&#62; &#39;to_metric&#39;,
       from_storage =&#62; &#39;to_imperial&#39;,
    },
 );

 sub to_metric   { $_[1] * .305 }
 sub to_imperial { $_[1] * 3.28 }</pre>

<p>See <a href="../../../DBIx/Class/FilterColumn.html" class="podlinkpod"
>DBIx::Class::FilterColumn</a> and <a href="../../../DBIx/Class/FilterColumn.html#filter_column" class="podlinkpod"
>&#34;filter_column&#34; in DBIx::Class::FilterColumn</a></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ResultSetColumn"
>ResultSetColumn</a></h2>

<pre> my $rsc = $schema-&#62;resultset(&#39;Book&#39;)-&#62;get_column(&#39;price&#39;);
 $rsc-&#62;first;
 $rsc-&#62;all;
 $rsc-&#62;min;
 $rsc-&#62;max;
 $rsc-&#62;sum;</pre>

<p>See <a href="../../../DBIx/Class/ResultSetColumn.html" class="podlinkpod"
>DBIx::Class::ResultSetColumn</a></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Aggregates"
>Aggregates</a></h2>

<pre> my @res = $rs-&#62;search(undef, {
    select   =&#62; [
       &#39;price&#39;,
       &#39;genre&#39;,
       { max =&#62; price },
       { avg =&#62; price },
    ],
    as       =&#62; [
       qw(price genre max_price avg_price)
    ],
    group_by =&#62; [qw(price genre)],
 });
 for (@res) {
    say $_-&#62;price . &#39; &#39; . $_-&#62;genre;
    say $_-&#62;get_column(&#39;max_price&#39;);
    say $_-&#62;get_column(&#39;avg_price&#39;);
 }</pre>

<p>See <a href="../../../DBIx/Class/ResultSet.html#select" class="podlinkpod"
>&#34;select&#34; in DBIx::Class::ResultSet</a>, <a href="../../../DBIx/Class/ResultSet.html#as" class="podlinkpod"
>&#34;as&#34; in DBIx::Class::ResultSet</a>, and <a href="../../../DBIx/Class/ResultSet.html#group_by" class="podlinkpod"
>&#34;group_by&#34; in DBIx::Class::ResultSet</a></p>

<dl>
<dt><a name="Careful,_get_column_can_basicaly_mean_three_things"
>Careful, get_column can basicaly mean <b>three</b> things</a></dt>

<dd>
<dt><a name="private_in_which_case_you_should_use_an_accessor"
>private in which case you should use an accessor</a></dt>

<dd>
<dt><a name="public_for_what_there_is_no_accessor_for"
>public for what there is no accessor for</a></dt>

<dd>
<dt><a name="public_for_get_resultset_column_(prev_example)"
>public for get resultset column (prev example)</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="HRI"
>HRI</a></h2>

<pre> $rs-&#62;search(undef, {
   result_class =&#62; &#39;DBIx::Class::ResultClass::HashRefInflator&#39;,
 });</pre>

<p>See <a href="../../../DBIx/Class/ResultSet.html#result_class" class="podlinkpod"
>&#34;result_class&#34; in DBIx::Class::ResultSet</a> and <a href="../../../DBIx/Class/ResultClass/HashRefInflator.html" class="podlinkpod"
>DBIx::Class::ResultClass::HashRefInflator</a>.</p>

<dl>
<dt><a name="Easy_on_memory"
>Easy on memory</a></dt>

<dd>
<dt><a name="Mega_fast"
>Mega fast</a></dt>

<dd>
<dt><a name="Great_for_quick_debugging"
>Great for quick debugging</a></dt>

<dd>
<dt><a name="Great_for_performance_tuning_(we_went_from_2m_to_&#60;_3s)"
>Great for performance tuning (we went from 2m to &#60; 3s)</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Subquery_Support"
>Subquery Support</a></h2>

<pre> my $inner_query = $schema-&#62;resultset(&#39;Artist&#39;)
    -&#62;search({
     name =&#62; [ &#39;Billy Joel&#39;, &#39;Brittany Spears&#39; ],
 })-&#62;get_column(&#39;id&#39;)-&#62;as_query;

 my $rs = $schema-&#62;resultset(&#39;CD&#39;)-&#62;search({
     artist_id =&#62; { -in =&#62; $inner_query },
 });</pre>

<p>See <a href="../../../DBIx/Class/Manual/Cookbook.html#Subqueries" class="podlinkpod"
>&#34;Subqueries&#34; in DBIx::Class::Manual::Cookbook</a></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Bare_SQL_w/_Placeholders"
>Bare SQL w/ Placeholders</a></h2>

<pre> $rs-&#62;update({
    # !!! SQL INJECTION VECTOR
    price =&#62; \&#34;price + $inc&#34;, # DON&#39;T DO THIS
 });</pre>

<p>Better:</p>

<pre> $rs-&#62;update({
    price =&#62; \[&#39;price + ?&#39;, [inc =&#62; $inc]],
 });</pre>

<p>See <a href="../../../SQL/Abstract.html#Literal_SQL_with_placeholders_and_bind_values_(subqueries)" class="podlinkpod"
>&#34;Literal_SQL_with_placeholders_and_bind_values_(subqueries)&#34; in SQL::Abstract</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
