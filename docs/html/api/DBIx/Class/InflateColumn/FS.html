<html><head><title>DBIx::Class::InflateColumn::FS</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:15 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#inflate_result'>inflate_result</a>
    <li class='indexItem indexItem2'><a href='#register_column'>register_column</a>
    <li class='indexItem indexItem2'><a href='#fs_file_name'>fs_file_name</a>
    <li class='indexItem indexItem2'><a href='#_fs_column_dirs'>_fs_column_dirs</a>
    <li class='indexItem indexItem2'><a href='#copy'>copy</a>
    <li class='indexItem indexItem2'><a href='#delete'>delete</a>
    <li class='indexItem indexItem2'><a href='#set_column'>set_column</a>
    <li class='indexItem indexItem2'><a href='#set_inflated_column'>set_inflated_column</a>
    <li class='indexItem indexItem2'><a href='#_inflate_fs_column'>_inflate_fs_column</a>
    <li class='indexItem indexItem2'><a href='#_deflate_fs_column'>_deflate_fs_column</a>
    <li class='indexItem indexItem2'><a href='#table'>table</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#SUPPORT'>SUPPORT</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#CONTRIBUTORS'>CONTRIBUTORS</a>
  <li class='indexItem indexItem1'><a href='#LICENSE'>LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>DBIx::Class::InflateColumn::FS - Inflate/deflate columns to Path::Class::File objects</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  __PACKAGE__-&#62;load_components(qw/InflateColumn::FS Core/);
  __PACKAGE__-&#62;add_columns(
      id =&#62; {
          data_type         =&#62; &#39;INT&#39;,
          is_auto_increment =&#62; 1,
      },
      file =&#62; {
          data_type =&#62; &#39;TEXT&#39;,
          is_fs_column =&#62; 1,
          fs_column_path =&#62; &#39;/var/lib/myapp/myfiles&#39;,
      },
      file_2 =&#62; {
          data_type =&#62; &#39;TEXT&#39;,
          is_fs_column =&#62; 1,
          fs_column_path =&#62; &#39;/var/lib/myapp/myfiles&#39;,
          fs_new_on_update =&#62; 1
      },
  );
  __PACKAGE__-&#62;set_primary_key(&#39;id&#39;);

  # in application code
  $rs-&#62;create({ file =&#62; $file_handle });

  $row = $rs-&#62;find({ id =&#62; $id });
  my $fh = $row-&#62;file-&#62;open(&#39;r&#39;);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Provides inflation to a Path::Class::File object allowing file system storage of BLOBS.</p>

<p>The storage path is specified with <code>fs_column_path</code>. Each file receives a unique name, so the storage for all FS columns can share the same path.</p>

<p>Within the path specified by <code>fs_column_path</code>, files are stored in sub-directories based on the first 2 characters of the unique file names. Up to 256 sub-directories will be created, as needed. Override <code>_fs_column_dirs</code> in a derived class to change this behavior.</p>

<p><code>fs_new_on_update</code> will create a new file name if the file has been updated.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="inflate_result"
>inflate_result</a></h2>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="register_column"
>register_column</a></h2>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="fs_file_name"
>fs_file_name</a></h2>

<p>Provides the file naming algorithm. Override this method to change it.</p>

<p>This method is called with two parameters: The name of the column and the <code>column_info</code> object.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="_fs_column_dirs"
>_fs_column_dirs</a></h2>

<p>Returns the sub-directory components for a given file name. Override it to provide a deeper directory tree or change the algorithm.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="copy"
>copy</a></h2>

<p>Copies a row object, duplicating the files backing fs columns.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="delete"
>delete</a></h2>

<p>Deletes the associated file system storage when a row is deleted.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="set_column"
>set_column</a></h2>

<p>Deletes file storage when an fs_column is set to undef.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="set_inflated_column"
>set_inflated_column</a></h2>

<p>Re-inflates after setting an fs_column.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="_inflate_fs_column"
>_inflate_fs_column</a></h2>

<p>Inflates a file column to a Path::Class::File object.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="_deflate_fs_column"
>_deflate_fs_column</a></h2>

<p>Deflates a file column to its storage path name, relative to <code>fs_column_path</code>. In the database, a file column is just a place holder for inflation/deflation. The actual file lives in the file system.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="table"
>table</a></h2>

<p>Overridden to provide a hook for specifying the resultset_class. If you provide your own resultset_class, inherit from InflateColumn::FS::ResultSet.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SUPPORT"
>SUPPORT</a></h1>

<p>Community support can be found via:</p>

<pre>  Mailing list: http://lists.scsys.co.uk/mailman/listinfo/dbix-class/

  IRC: irc.perl.org#dbix-class</pre>

<p>The author is <code>semifor</code> on IRC and a member of the mailing list.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>semifor: Marc Mims &#60;marc@questright.com&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONTRIBUTORS"
>CONTRIBUTORS</a></h1>

<p>mst: Matt S. Trout &#60;mst@shadowcatsystems.co.uk&#62;</p>

<p>mo: Moritz Onken &#60;onken@netcubed.de&#62;</p>

<p>norbi: Norbert Buchmuller &#60;norbi@nix.hu&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENSE"
>LICENSE</a></h1>

<p>You may distribute this code under the same terms as Perl itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
