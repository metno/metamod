<html><head><title>DBIx::Class::InflateColumn::File</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:15 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Deprecation_Notice'>Deprecation Notice</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#_file_column_callback_(%24file%2C%24ret%2C%24target)'>_file_column_callback ($file,$ret,$target)</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#LICENSE'>LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>DBIx::Class::InflateColumn::File - DEPRECATED (superseded by DBIx::Class::InflateColumn::FS)</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Deprecation_Notice"
>Deprecation Notice</a></h2>

<pre> This component has a number of architectural deficiencies that can quickly
 drive your filesystem and database out of sync and is not recommended for
 further use. It will be retained for backwards compatibility, but no new
 functionality patches will be accepted. Please consider using the much more
 mature and actively supported DBIx::Class::InflateColumn::FS. You can set
 the environment variable DBIC_IC_FILE_NOWARN to a true value to disable
 this warning.</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>In your <a href="../../../DBIx/Class.html" class="podlinkpod"
>DBIx::Class</a> table class:</p>

<pre>    use base &#39;DBIx::Class::Core&#39;;

    __PACKAGE__-&#62;load_components(qw/InflateColumn::File/);

    # define your columns
    __PACKAGE__-&#62;add_columns(
        &#34;id&#34;,
        {
            data_type         =&#62; &#34;integer&#34;,
            is_auto_increment =&#62; 1,
            is_nullable       =&#62; 0,
            size              =&#62; 4,
        },
        &#34;filename&#34;,
        {
            data_type           =&#62; &#34;varchar&#34;,
            is_file_column      =&#62; 1,
            file_column_path    =&#62;&#39;/tmp/uploaded_files&#39;,
            # or for a Catalyst application
            # file_column_path  =&#62; MyApp-&#62;path_to(&#39;root&#39;,&#39;static&#39;,&#39;files&#39;),
            default_value       =&#62; undef,
            is_nullable         =&#62; 1,
            size                =&#62; 255,
        },
    );</pre>

<p>In your <a href="../../../Catalyst/Controller.html" class="podlinkpod"
>Catalyst::Controller</a> class:</p>

<p>FileColumn requires a hash that contains <a href="../../../IO/File.html" class="podlinkpod"
>IO::File</a> as handle and the file&#39;s name as name.</p>

<pre>    my $entry = $c-&#62;model(&#39;MyAppDB::Articles&#39;)-&#62;create({
        subject =&#62; &#39;blah&#39;,
        filename =&#62; {
            handle =&#62; $c-&#62;req-&#62;upload(&#39;myupload&#39;)-&#62;fh,
            filename =&#62; $c-&#62;req-&#62;upload(&#39;myupload&#39;)-&#62;basename
        },
        body =&#62; &#39;....&#39;
    });
    $c-&#62;stash-&#62;{entry}=$entry;</pre>

<p>And Place the following in your TT template</p>

<pre>    Article Subject: [% entry.subject %]
    Uploaded File:
    &#60;a href=&#34;/static/files/[% entry.id %]/[% entry.filename.filename %]&#34;&#62;File&#60;/a&#62;
    Body: [% entry.body %]</pre>

<p>The file will be stored on the filesystem for later retrieval. Calling delete on your resultset will delete the file from the filesystem. Retrevial of the record automatically inflates the column back to the set hash with the IO::File handle and filename.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>InflateColumn::File</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="_file_column_callback_($file,$ret,$target)"
>_file_column_callback ($file,$ret,$target)</a></h2>

<p>Method made to be overridden for callback purposes.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Victor Igumnov</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENSE"
>LICENSE</a></h1>

<p>This library is free software, you can redistribute it and/or modify it under the same terms as Perl itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
