<html><head><title>DBIx::Class::Admin</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:15 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#REQUIREMENTS'>REQUIREMENTS</a>
  <li class='indexItem indexItem1'><a href='#ATTRIBUTES'>ATTRIBUTES</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#schema_class'>schema_class</a>
    <li class='indexItem indexItem2'><a href='#schema'>schema</a>
    <li class='indexItem indexItem2'><a href='#resultset'>resultset</a>
    <li class='indexItem indexItem2'><a href='#where'>where</a>
    <li class='indexItem indexItem2'><a href='#set'>set</a>
    <li class='indexItem indexItem2'><a href='#attrs'>attrs</a>
    <li class='indexItem indexItem2'><a href='#connect_info'>connect_info</a>
    <li class='indexItem indexItem2'><a href='#config_file'>config_file</a>
    <li class='indexItem indexItem2'><a href='#config_stanza'>config_stanza</a>
    <li class='indexItem indexItem2'><a href='#config'>config</a>
    <li class='indexItem indexItem2'><a href='#sql_dir'>sql_dir</a>
    <li class='indexItem indexItem2'><a href='#sql_type'>sql_type</a>
    <li class='indexItem indexItem2'><a href='#version'>version</a>
    <li class='indexItem indexItem2'><a href='#preversion'>preversion</a>
    <li class='indexItem indexItem2'><a href='#force'>force</a>
    <li class='indexItem indexItem2'><a href='#quiet'>quiet</a>
    <li class='indexItem indexItem2'><a href='#trace'>trace</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#create'>create</a>
    <li class='indexItem indexItem2'><a href='#upgrade'>upgrade</a>
    <li class='indexItem indexItem2'><a href='#install'>install</a>
    <li class='indexItem indexItem2'><a href='#deploy'>deploy</a>
    <li class='indexItem indexItem2'><a href='#insert'>insert</a>
    <li class='indexItem indexItem2'><a href='#update'>update</a>
    <li class='indexItem indexItem2'><a href='#delete'>delete</a>
    <li class='indexItem indexItem2'><a href='#select'>select</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#LICENSE'>LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>DBIx::Class::Admin - Administration object for schemas</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  $ dbicadmin --help

  $ dbicadmin --schema=MyApp::Schema \
    --connect=&#39;[&#34;dbi:SQLite:my.db&#34;, &#34;&#34;, &#34;&#34;]&#39; \
    --deploy

  $ dbicadmin --schema=MyApp::Schema --class=Employee \
    --connect=&#39;[&#34;dbi:SQLite:my.db&#34;, &#34;&#34;, &#34;&#34;]&#39; \
    --op=update --set=&#39;{ &#34;name&#34;: &#34;New_Employee&#34; }&#39;

  use DBIx::Class::Admin;

  # ddl manipulation
  my $admin = DBIx::Class::Admin-&#62;new(
    schema_class=&#62; &#39;MY::Schema&#39;,
    sql_dir=&#62; $sql_dir,
    connect_info =&#62; { dsn =&#62; $dsn, user =&#62; $user, password =&#62; $pass },
  );

  # create SQLite sql
  $admin-&#62;create(&#39;SQLite&#39;);

  # create SQL diff for an upgrade
  $admin-&#62;create(&#39;SQLite&#39;, {} , &#34;1.0&#34;);

  # upgrade a database
  $admin-&#62;upgrade();

  # install a version for an unversioned schema
  $admin-&#62;install(&#34;3.0&#34;);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="REQUIREMENTS"
>REQUIREMENTS</a></h1>

<p>The Admin interface has additional requirements not currently part of <a href="../../DBIx/Class.html" class="podlinkpod"
>DBIx::Class</a>. See <a href="../../DBIx/Class/Optional/Dependencies.html" class="podlinkpod"
>DBIx::Class::Optional::Dependencies</a> for more details.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ATTRIBUTES"
>ATTRIBUTES</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="schema_class"
>schema_class</a></h2>

<p>the class of the schema to load</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="schema"
>schema</a></h2>

<p>A pre-connected schema object can be provided for manipulation</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="resultset"
>resultset</a></h2>

<p>a resultset from the schema to operate on</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="where"
>where</a></h2>

<p>a hash ref or json string to be used for identifying data to manipulate</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="set"
>set</a></h2>

<p>a hash ref or json string to be used for inserting or updating data</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="attrs"
>attrs</a></h2>

<p>a hash ref or json string to be used for passing additional info to the -&#62;search call</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="connect_info"
>connect_info</a></h2>

<p>connect_info the arguments to provide to the connect call of the schema_class</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="config_file"
>config_file</a></h2>

<p>config_file provide a config_file to read connect_info from, if this is provided config_stanze should also be provided to locate where the connect_info is in the config The config file should be in a format readable by Config::Any.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="config_stanza"
>config_stanza</a></h2>

<p>config_stanza for use with config_file should be a &#39;::&#39; delimited &#39;path&#39; to the connection information designed for use with catalyst config files</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="config"
>config</a></h2>

<p>Instead of loading from a file the configuration can be provided directly as a hash ref. Please note config_stanza will still be required.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="sql_dir"
>sql_dir</a></h2>

<p>The location where sql ddl files should be created or found for an upgrade.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="sql_type"
>sql_type</a></h2>

<p>The type of sql dialect to use for creating sql files from schema</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="version"
>version</a></h2>

<p>Used for install, the version which will be &#39;installed&#39; in the schema</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="preversion"
>preversion</a></h2>

<p>Previous version of the schema to create an upgrade diff for, the full sql for that version of the sql must be in the sql_dir</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="force"
>force</a></h2>

<p>Try and force certain operations.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="quiet"
>quiet</a></h2>

<p>Be less verbose about actions</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="trace"
>trace</a></h2>

<p>Toggle DBIx::Class debug output</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="create"
>create</a></h2>

<dl>
<dt><a name="Arguments:_$sqlt_type,_\%sqlt_args,_$preversion"
>Arguments: $sqlt_type, \%sqlt_args, $preversion</a></dt>
</dl>

<p><code>create</code> will generate sql for the supplied schema_class in sql_dir. The flavour of sql to generate can be controlled by supplying a sqlt_type which should be a <a href="../../SQL/Translator.html" class="podlinkpod"
>SQL::Translator</a> name.</p>

<p>Arguments for <a href="../../SQL/Translator.html" class="podlinkpod"
>SQL::Translator</a> can be supplied in the sqlt_args hashref.</p>

<p>Optional preversion can be supplied to generate a diff to be used by upgrade.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="upgrade"
>upgrade</a></h2>

<dl>
<dt><a name="Arguments:_&#60;none&#62;"
>Arguments: &#60;none&#62;</a></dt>
</dl>

<p>upgrade will attempt to upgrade the connected database to the same version as the schema_class. <b>MAKE SURE YOU BACKUP YOUR DB FIRST</b></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="install"
>install</a></h2>

<dl>
<dt><a name="Arguments:_$version"
>Arguments: $version</a></dt>
</dl>

<p>install is here to help when you want to move to <a href="../../DBIx/Class/Schema/Versioned.html" class="podlinkpod"
>DBIx::Class::Schema::Versioned</a> and have an existing database. install will take a version and add the version tracking tables and &#39;install&#39; the version. No further ddl modification takes place. Setting the force attribute to a true value will allow overriding of already versioned databases.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="deploy"
>deploy</a></h2>

<dl>
<dt><a name="Arguments:_$args"
>Arguments: $args</a></dt>
</dl>

<p>deploy will create the schema at the connected database. <code>$args</code> are passed straight to <a href="../../DBIx/Class/Schema.html#deploy" class="podlinkpod"
>&#34;deploy&#34; in DBIx::Class::Schema</a>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="insert"
>insert</a></h2>

<dl>
<dt><a name="Arguments:_$rs,_$set"
>Arguments: $rs, $set</a></dt>
</dl>

<p>insert takes the name of a resultset from the schema_class and a hashref of data to insert into that resultset</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="update"
>update</a></h2>

<dl>
<dt><a name="Arguments:_$rs,_$set,_$where"
>Arguments: $rs, $set, $where</a></dt>
</dl>

<p>update takes the name of a resultset from the schema_class, a hashref of data to update and a where hash used to form the search for the rows to update.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="delete"
>delete</a></h2>

<dl>
<dt><a name="Arguments:_$rs,_$where,_$attrs"
>Arguments: $rs, $where, $attrs</a></dt>
</dl>

<p>delete takes the name of a resultset from the schema_class, a where hashref and a attrs to pass to -&#62;search. The found data is deleted and cannot be recovered.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="select"
>select</a></h2>

<dl>
<dt><a name="Arguments:_$rs,_$where,_$attrs"
>Arguments: $rs, $where, $attrs</a></dt>
</dl>

<p>select takes the name of a resultset from the schema_class, a where hashref and a attrs to pass to -&#62;search. The found data is returned in a array ref where the first row will be the columns list.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>See <a href="../../DBIx/Class.html#CONTRIBUTORS" class="podlinkpod"
>&#34;CONTRIBUTORS&#34; in DBIx::Class</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="LICENSE"
>LICENSE</a></h1>

<p>You may distribute this code under the same terms as Perl itself</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
