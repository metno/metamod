<html><head><title>HTML::FormHandler::Model::CDBI</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:18 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#item_class'>item_class</a>
    <li class='indexItem indexItem2'><a href='#init_item'>init_item</a>
    <li class='indexItem indexItem2'><a href='#guess_field_type'>guess_field_type</a>
    <li class='indexItem indexItem2'><a href='#lookup_options'>lookup_options</a>
    <li class='indexItem indexItem2'><a href='#init_value'>init_value</a>
    <li class='indexItem indexItem2'><a href='#validate_model'>validate_model</a>
    <li class='indexItem indexItem2'><a href='#validate_unique'>validate_unique</a>
    <li class='indexItem indexItem2'><a href='#items_same'>items_same</a>
    <li class='indexItem indexItem2'><a href='#obj_key'>obj_key</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>HTML::FormHandler::Model::CDBI - Class::DBI model class (non-functioning)</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 0.40028</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    package MyApplication::Form::User;
    use strict;
    use base &#39;HTML::FormHandler::Model::CDBI&#39;;


    # Associate this form with a CDBI class
    has &#39;+item_class&#39; =&#62; ( default =&#62; &#39;MyDB::User&#39; );

    # Define the fields that this form will operate on
    sub field_list {
        return {
            [
                name        =&#62; &#39;Text&#39;,
                age         =&#62; &#39;PosInteger&#39;,
                sex         =&#62; &#39;Select&#39;,
                birthdate   =&#62; &#39;DateTimeDMYHM&#39;,
            ]
        };
    }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>A Class::DBI database model for HTML::FormHandler</p>

<p>I don&#39;t use CDBI, so this module almost certainly doesn&#39;t work. It is only being left here as a starting point in case somebody is interested in getting it to work.</p>

<p>Patches and tests gratefully accepted.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="item_class"
>item_class</a></h2>

<p>The name of your database class.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="init_item"
>init_item</a></h2>

<p>This is called first time $form-&#62;item is called. It does the equivalent of:</p>

<pre>    return $self-&#62;item_class-&#62;retrieve( $self-&#62;item_id );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="guess_field_type"
>guess_field_type</a></h2>

<p>Pass in a column and assigns field types. Must set $self-&#62;item_class to return the related item class. Returns the type in scalar context, returns the type and maybe the related table in list context.</p>

<p>Currently returns:</p>

<pre>    DateTime        - for a has_a relationship that isa DateTime
    Select          - for a has_a relationship
    Multiple        - for a has_many
    DateTime        - if the field ends in _time
    Text            - otherwise</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="lookup_options"
>lookup_options</a></h2>

<p>Returns a array reference of key/value pairs for the column passed in. Calls $field-&#62;label_column to get the column name to use as the label. The default is &#34;name&#34;. The labels are sorted by Perl&#39;s cmp sort.</p>

<p>If there is an &#34;active&#34; column then only active are included, with the exception being if the form (item) has currently selected the inactive item. This allows existing records that reference inactive items to still have those as valid select options. The inactive labels are formatted with brackets to indicate in the select list that they are inactive.</p>

<p>The active column name is determined by calling:</p>

<pre>    $active_col = $form-&#62;can( &#39;active_column&#39; )
        ? $form-&#62;active_column
        : $field-&#62;active_column;</pre>

<p>Which allows setting the name of the active column globally if your tables are consistently named (all lookup tables have the same column name to indicate they are active), or on a per-field basis.</p>

<p>In addition, if the foreign class is the same as the item&#39;s class (or the class returned by item_class) then options pointing to item are excluded. The reason for this is for a table column that points to the same table (self referenced), such as a &#34;parent&#34; column. The assumption is that a record cannot be its own parent.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="init_value"
>init_value</a></h2>

<p>Populate $field-&#62;value with object ids from the CDBI object. If the column expands to more than one object then an array ref is set.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="validate_model"
>validate_model</a></h2>

<p>Validates fields that are dependent on the model. Currently, &#34;unique&#34; fields are checked to make sure they are unique.</p>

<p>This validation happens after other form validation. The form already has any field values entered in $field-&#62;value at this point.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="validate_unique"
>validate_unique</a></h2>

<p>Checks that the value for the field is not currently in the database.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="items_same"
>items_same</a></h2>

<p>Returns true if the two passed in cdbi objects are the same object. If both are undefined returns true.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="obj_key"
>obj_key</a></h2>

<p>returns a key for a given object, or undef if the object is undefined.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>FormHandler Contributors - see HTML::FormHandler</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2013 by Gerda Shank.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
