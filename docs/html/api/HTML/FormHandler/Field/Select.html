<html><head><title>HTML::FormHandler::Field::Select</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:17 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#options'>options</a>
    <li class='indexItem indexItem2'><a href='#Customizing_options'>Customizing options</a>
    <li class='indexItem indexItem2'><a href='#Reloading_options'>Reloading options</a>
    <li class='indexItem indexItem2'><a href='#Sorting_options'>Sorting options</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Attributes_and_Methods'>Attributes and Methods</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#options'>options</a>
    <li class='indexItem indexItem2'><a href='#options_method'>options_method</a>
    <li class='indexItem indexItem2'><a href='#multiple'>multiple</a>
    <li class='indexItem indexItem2'><a href='#size'>size</a>
    <li class='indexItem indexItem2'><a href='#empty_select'>empty_select</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#value_when_empty'>value_when_empty</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#label_column'>label_column</a>
    <li class='indexItem indexItem2'><a href='#localize_labels'>localize_labels</a>
    <li class='indexItem indexItem2'><a href='#active_column'>active_column</a>
    <li class='indexItem indexItem2'><a href='#auto_widget_size'>auto_widget_size</a>
    <li class='indexItem indexItem2'><a href='#sort_column'>sort_column</a>
    <li class='indexItem indexItem2'><a href='#select_widget'>select_widget</a>
    <li class='indexItem indexItem2'><a href='#as_label'>as_label</a>
    <li class='indexItem indexItem2'><a href='#no_option_validation'>no_option_validation</a>
    <li class='indexItem indexItem2'><a href='#error_messages'>error messages</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Rendering'>Rendering</a>
  <li class='indexItem indexItem1'><a href='#Database_relations'>Database relations</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>HTML::FormHandler::Field::Select - select fields</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 0.40028</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This is a field that includes a list of possible valid options.
This can be used for select and multiple-select fields.
Widget type is &#39;select&#39;.</p>

<p>Because select lists and checkbox_groups do not return an HTTP parameter when the entire list is unselected,
the Select field must assume that the lack of a param means unselection.
So to avoid setting a Select field,
it must be set to inactive,
not merely not included in the HTML for a form.</p>

<p>This field type can also be used for fields that use the &#39;radio_group&#39; widget,
and the &#39;checkbox_group&#39; widget (for selects with multiple flag turned on,
or that use the Multiple field).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="options"
>options</a></h2>

<p>The &#39;options&#39; array can come from a number of different places:</p>

<dl>
<dt><a name="From_a_field_declaration"
>From a field declaration</a></dt>

<dd>
<p>In a field declaration:</p>

<pre>   has_field &#39;opt_in&#39; =&#62; ( type =&#62; &#39;Select&#39;, widget =&#62; &#39;RadioGroup&#39;,
      options =&#62; [{ value =&#62; 0, label =&#62; &#39;No&#39;}, { value =&#62; 1, label =&#62; &#39;Yes&#39;} ] );</pre>

<dt><a name="From_a_field_class_&#39;build_options&#39;_method"
>From a field class &#39;build_options&#39; method</a></dt>

<dd>
<p>In a custom field class:</p>

<pre>   package MyApp::Field::WeekDay;
   use Moose;
   extends &#39;HTML::FormHandler::Field::Select&#39;;
   ....
   sub build_options {
       my $i = 0;
       my @days = (&#39;Sunday&#39;, &#39;Monday&#39;, &#39;Tuesday&#39;, &#39;Wednesday&#39;,
           &#39;Thursday&#39;, &#39;Friday&#39;, &#39;Saturday&#39; );
       return [
           map {
               {   value =&#62; $i++, label =&#62; $_ }
           } @days
       ];
   }</pre>

<dt><a name="From_a_coderef_supplied_to_the_field_definition"
>From a coderef supplied to the field definition</a></dt>

<dd>
<pre>   has_field &#39;flim&#39; =&#62; ( type =&#62; &#39;Select&#39;, options_method =&#62; \&#38;flim_options );
   sub flim_options {  &#60;return options array&#62; }</pre>

<dt><a name="From_a_form_&#39;options_&#60;field_name&#62;&#39;_method_or_attribute"
>From a form &#39;options_&#60;field_name&#62;&#39; method or attribute</a></dt>

<dd>
<pre>   has_field &#39;fruit&#39; =&#62; ( type =&#62; &#39;Select&#39; );
   sub options_fruit {
       return (
           1   =&#62; &#39;apples&#39;,
           2   =&#62; &#39;oranges&#39;,
           3   =&#62; &#39;kiwi&#39;,
       );
   }
   -- or --
   has &#39;options_fruit&#39; =&#62; ( is =&#62; &#39;rw&#39;, traits =&#62; [&#39;Array&#39;],
       default =&#62; sub { [1 =&#62; &#39;apples&#39;, 2 =&#62; &#39;oranges&#39;,
           3 =&#62; &#39;kiwi&#39;] } );</pre>

<p>Notice that, as a convenience, you can return a simple array (or arrayref) for the options array in the &#39;options_field_name&#39; method. The hashrefs with &#39;value&#39; and &#39;label&#39; keys will be constructed for you by FormHandler.</p>

<dt><a name="From_the_database"
>From the database</a></dt>

<dd>
<p>The final source of the options array is a database when the name of the accessor is a relation to the table holding the information used to construct the select list. The primary key is used as the value. The other columns used are:</p>

<pre>    label_column  --  Used for the labels in the options (default &#39;name&#39;)
    active_column --  The name of the column to be used in the query (default &#39;active&#39;)
                      that allows the rows retrieved to be restricted
    sort_column   --  The name or arrayref of names of the column(s) used to sort the options</pre>

<p>See also <a href="../../../HTML/FormHandler/Model/DBIC.html" class="podlinkpod"
>HTML::FormHandler::Model::DBIC</a>, the &#39;lookup_options&#39; method.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Customizing_options"
>Customizing options</a></h2>

<p>Additional attributes can be added in the options array hashref, by using the &#39;attributes&#39; key. If you have custom rendering code, you can add any additional key that you want, of course.</p>

<p>Note that you should *not* set &#39;checked&#39; or &#39;selected&#39; attributes in options. That is handled by setting a field default.</p>

<p>An options array with an extra &#39;note&#39; key:</p>

<pre>   sub options_license
   {
      my $self = shift;
      return unless $self-&#62;schema;
      my $licenses = $self-&#62;schema-&#62;resultset(&#39;License&#39;)-&#62;search({active =&#62; 1},
           {order_by =&#62; &#39;sequence&#39;});
      my @selections;
      while ( my $license = $licenses-&#62;next ) {
         push @selections, { value =&#62; $license-&#62;id, label =&#62; $license-&#62;label,
              note =&#62; $license-&#62;note };
      }
      return @selections;
   }</pre>

<p>Setting the select element to disabled:</p>

<pre>   sub options_license
   {
      my $self = shift;
      return unless $self-&#62;schema;
      my $licenses = $self-&#62;schema-&#62;resultset(&#39;License&#39;)-&#62;search(undef,
           {order_by =&#62; &#39;sequence&#39;});
      my @selections;
      while ( my $license = $licenses-&#62;next ) {
         push @selections, { value =&#62; $license-&#62;id, label =&#62; $license-&#62;label,
              attributes =&#62; { disabled =&#62; ($license-&#62;active == 0) ? 1 : 0 } };
      }
      return @selections;
   }</pre>

<p>You can also divide the options up into option groups. See the section on rendering.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Reloading_options"
>Reloading options</a></h2>

<p>If the options come from the options_&#60;fieldname&#62; method or the database, they will be reloaded every time the form is reloaded because the available options may have changed. To prevent this from happening when the available options are known to be static, set the &#39;do_not_reload&#39; flag, and the options will not be reloaded after the first time</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Sorting_options"
>Sorting options</a></h2>

<p>The sorting of the options may be changed using a &#39;sort_options&#39; method in a custom field class. The &#39;Multiple&#39; field uses this method to put the already selected options at the top of the list. Note that this won&#39;t work with option groups.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Attributes_and_Methods"
>Attributes and Methods</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="options"
>options</a></h2>

<p>This is an array of hashes for this field. Each has must have a label and value keys.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="options_method"
>options_method</a></h2>

<p>Coderef of method to return options</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="multiple"
>multiple</a></h2>

<p>If true allows multiple input values</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="size"
>size</a></h2>

<p>This can be used to store how many items should be offered in the UI at a given time. Defaults to 0.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="empty_select"
>empty_select</a></h2>

<p>Set to the string value of the select label if you want the renderer to create an empty select value. This only affects rendering - it does not add an entry to the list of options.</p>

<pre>   has_field &#39;fruit&#39; =&#62; ( type =&#62; &#39;Select&#39;,
        empty_select =&#62; &#39;---Choose a Fruit---&#39; );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="value_when_empty"
>value_when_empty</a></h1>

<p>Usually the empty value is an empty arrayref. This attribute allows changing that. Used by SelectCSV field.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="label_column"
>label_column</a></h2>

<p>Sets or returns the name of the method to call on the foreign class to fetch the text to use for the select list.</p>

<p>Refers to the method (or column) name to use in a related object class for the label for select lists.</p>

<p>Defaults to &#34;name&#34;.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="localize_labels"
>localize_labels</a></h2>

<p>For the renderers: whether or not to call the localize method on the select labels. Default is off.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="active_column"
>active_column</a></h2>

<p>Sets or returns the name of a boolean column that is used as a flag to indicate that a row is active or not. Rows that are not active are ignored.</p>

<p>The default is &#34;active&#34;.</p>

<p>If this column exists on the class then the list of options will included only rows that are marked &#34;active&#34;.</p>

<p>The exception is any columns that are marked inactive, but are also part of the input data will be included with brackets around the label. This allows updating records that might have data that is now considered inactive.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="auto_widget_size"
>auto_widget_size</a></h2>

<p>This is a way to provide a hint as to when to automatically select the widget to display for fields with a small number of options. For example, this can be used to decided to display a radio select for select lists smaller than the size specified.</p>

<p>See <a href="../../../select_widget.html" class="podlinkpod"
>select_widget</a> below.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="sort_column"
>sort_column</a></h2>

<p>Sets or returns the column or arrayref of columns used in the foreign class for sorting the options labels. Default is undefined.</p>

<p>If not defined the label_column is used as the sort condition.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="select_widget"
>select_widget</a></h2>

<p>If the widget is &#39;select&#39; for the field then will look if the field also has a <a href="../../../auto_widget_size.html" class="podlinkpod"
>auto_widget_size</a>. If the options list is less than or equal to the <a href="../../../auto_widget_size.html" class="podlinkpod"
>auto_widget_size</a> then will return <code>radio_group</code> if <a href="../../../multiple.html" class="podlinkpod"
>multiple</a> is false, otherwise will return <code>checkbox_group</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="as_label"
>as_label</a></h2>

<p>Returns the option label for the option value that matches the field&#39;s current value. Can be helpful for displaying information about the field in a more friendly format.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="no_option_validation"
>no_option_validation</a></h2>

<p>Set this flag to true if you don&#39;t want to validate the options that are submitted. This would generally only happen if the options are generated via javascript.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="error_messages"
>error messages</a></h2>

<p>Customize &#39;select_invalid_value&#39; and &#39;select_not_multiple&#39;. Though neither of these messages should really be seen by users in a properly constructed select.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Rendering"
>Rendering</a></h1>

<p>The &#39;select&#39; field can be rendered by the &#39;Select&#39;, &#39;RadioGroup&#39;, and &#39;CheckboxGroup&#39; widgets. &#39;RadioGroup&#39; is for a single select, and &#39;CheckboxGroup&#39; is for a multiple select.</p>

<p>Option groups can be rendered by providing an options arrays with &#39;group&#39; elements containing options:</p>

<pre>    sub options_testop { (
        {
            group =&#62; &#39;First Group&#39;,
            options =&#62; [
                { value =&#62; 1, label =&#62; &#39;One&#39; },
                { value =&#62; 2, label =&#62; &#39;Two&#39; },
                { value =&#62; 3, label =&#62; &#39;Three&#39; },
            ],
        },
        {
            group =&#62; &#39;Second Group&#39;,
            options =&#62; [
                { value =&#62; 4, label =&#62; &#39;Four&#39; },
                { value =&#62; 5, label =&#62; &#39;Five&#39; },
                { value =&#62; 6, label =&#62; &#39;Six&#39; },
            ],
        },
    ) }</pre>

<p>The select rendering widgets all have a &#39;render_option&#39; method, which may be useful for situations when you want to split up the rendering of a radio group or checkbox group.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Database_relations"
>Database relations</a></h1>

<p>Also see <a href="../../../HTML/FormHandler/TraitFor/Model/DBIC.html" class="podlinkpod"
>HTML::FormHandler::TraitFor::Model::DBIC</a>.</p>

<p>The single select is for a DBIC &#39;belongs_to&#39; relation. The multiple select is for a &#39;many_to_many&#39; relation.</p>

<p>There is very limited ability to do multiple select with &#39;has_many&#39; relations. It will only work in very specific circumstances, and requires setting the &#39;has_many&#39; attribute to the name of the primary key of the related table. This is a somewhat peculiar data structure for a relational database, and may not be what you really want. A &#39;has_many&#39; is usually represented with a Repeatable field, and may require custom code if the form structure doesn&#39;t match the database structure. See <a href="../../../HTML/FormHandler/Manual/Cookbook.html" class="podlinkpod"
>HTML::FormHandler::Manual::Cookbook</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>FormHandler Contributors - see HTML::FormHandler</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2013 by Gerda Shank.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
