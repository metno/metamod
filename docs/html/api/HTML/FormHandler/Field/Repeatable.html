<html><head><title>HTML::FormHandler::Field::Repeatable</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:17 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Complications'>Complications</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#ATTRIBUTES'>ATTRIBUTES</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>HTML::FormHandler::Field::Repeatable - repeatable (array) field</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 0.40028</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>In a form,
for an array of hashrefs,
equivalent to a &#39;has_many&#39; database relationship.</p>

<pre>  has_field &#39;addresses&#39; =&#62; ( type =&#62; &#39;Repeatable&#39; );
  has_field &#39;addresses.address_id&#39; =&#62; ( type =&#62; &#39;PrimaryKey&#39; );
  has_field &#39;addresses.street&#39;;
  has_field &#39;addresses.city&#39;;
  has_field &#39;addresses.state&#39;;</pre>

<p>In a form, for an array of single fields (not directly equivalent to a database relationship) use the &#39;contains&#39; pseudo field name:</p>

<pre>  has_field &#39;tags&#39; =&#62; ( type =&#62; &#39;Repeatable&#39; );
  has_field &#39;tags.contains&#39; =&#62; ( type =&#62; &#39;Text&#39;,
       apply =&#62; [ { check =&#62; [&#39;perl&#39;, &#39;programming&#39;, &#39;linux&#39;, &#39;internet&#39;],
                    message =&#62; &#39;Not a valid tag&#39; } ]
  );</pre>

<p>or use &#39;contains&#39; with single fields which are compound fields:</p>

<pre>  has_field &#39;addresses&#39; =&#62; ( type =&#62; &#39;Repeatable&#39; );
  has_field &#39;addresses.contains&#39; =&#62; ( type =&#62; &#39;+MyAddress&#39; );</pre>

<p>If the MyAddress field contains fields &#39;address_id&#39;, &#39;street&#39;, &#39;city&#39;, and &#39;state&#39;, then this syntax is functionally equivalent to the first method where the fields are declared with dots (&#39;addresses.city&#39;);</p>

<p>You can pass attributes to the &#39;contains&#39; field by supplying an &#39;init_contains&#39; hashref.</p>

<pre>    has_field &#39;addresses&#39; =&#62; ( type =&#62; &#39;Repeatable,
       init_contains =&#62; { wrapper_attr =&#62; { class =&#62; [&#39;hfh&#39;, &#39;repinst&#39;] } },
    );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This class represents an array. It can either be an array of hashrefs (compound fields) or an array of single fields.</p>

<p>The &#39;contains&#39; keyword is used for elements that do not have names because they are not hash elements.</p>

<p>This field node will build arrays of fields from the parameters or an initial object, or empty fields for an empty form.</p>

<p>The name of the element fields will be an array index, starting with 0. Therefore the first array element can be accessed with:</p>

<pre>   $form-&#62;field(&#39;tags&#39;)-&#62;field(&#39;0&#39;)
   $form-&#62;field(&#39;addresses&#39;)-&#62;field(&#39;0&#39;)-&#62;field(&#39;city&#39;)</pre>

<p>or using the shortcut form:</p>

<pre>   $form-&#62;field(&#39;tags.0&#39;)
   $form-&#62;field(&#39;addresses.0.city&#39;)</pre>

<p>The array of elements will be in <code>$form-&#62;field(&#39;addresses&#39;)-&#62;fields</code>. The subfields of the elements will be in a fields array in each element.</p>

<pre>   foreach my $element ( $form-&#62;field(&#39;addresses&#39;)-&#62;fields )
   {
      foreach my $field ( $element-&#62;fields )
      {
         # do something
      }
   }</pre>

<p>Every field that has a &#39;fields&#39; array will also have an &#39;error_fields&#39; array containing references to the fields that contain errors.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Complications"
>Complications</a></h2>

<p>When new elements are created by a Repeatable field in a database form an attempt is made to re-load the Repeatable field from the database, because otherwise the repeatable elements will not have primary keys. Although this works, if you have included other fields in your repeatable elements that do *not* come from the database, the defaults/values must be able to be loaded in a way that works when the form is initialized from the database item. This is only an issue if you re-present the form after the database update succeeds.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ATTRIBUTES"
>ATTRIBUTES</a></h1>

<dl>
<dt><a name="index"
>index</a></dt>

<dd>
<p>This attribute contains the next index number available to create an additional array element.</p>

<dt><a name="num_when_empty"
>num_when_empty</a></dt>

<dd>
<p>This attribute (default 1) indicates how many empty fields to present in an empty form which hasn&#39;t been filled from parameters or database rows.</p>

<dt><a name="num_extra"
>num_extra</a></dt>

<dd>
<p>When the field results are built from an existing object (item or init_object) an additional number of repeatable elements will be created equal to this number. Default is 0.</p>

<dt><a name="add_extra"
>add_extra</a></dt>

<dd>
<p>When a form is submitted and the field results are built from the input parameters, it&#39;s not clear when or if an additional repeatable element might be wanted. The method &#39;add_extra&#39; will add an empty repeatable element.</p>

<pre>    $form-&#62;process( params =&#62; {....} );
    $form-&#62;field(&#39;my_repeatable&#39;)-&#62;add_extra(1);</pre>

<p>This might be useful if the form is being re-presented to the user.</p>

<dt><a name="setup_for_js"
>setup_for_js</a></dt>

<dd>
<pre>    setup_for_js =&#62; 1</pre>

<p>Saves information in the form for javascript to use when adding repeatable elements. If using the example javascript, you also must set &#39;do_wrapper&#39; in the Repeatable field and use the Bootstrap widget wrapper (or wrap the repeatable elements in a &#39;controls&#39; div by setting tags =&#62; { controls_div =&#62; 1 }. See t/repeatable/js.t for an example. See also <a href="../../../HTML/FormHandler/Render/RepeatableJs.html" class="podlinkpod"
>HTML::FormHandler::Render::RepeatableJs</a> and <a href="../../../HTML/FormHandler/Field/AddElement.html" class="podlinkpod"
>HTML::FormHandler::Field::AddElement</a>.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>FormHandler Contributors - see HTML::FormHandler</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2013 by Gerda Shank.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
