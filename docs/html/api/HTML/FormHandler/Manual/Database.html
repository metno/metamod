<html><head><title>HTML::FormHandler::Manual::Database</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:18 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#Form_Models'>Form Models</a>
  <li class='indexItem indexItem1'><a href='#Fields_that_map_to_database_relationships'>Fields that map to database relationships</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Select'>Select</a>
    <li class='indexItem indexItem2'><a href='#Multiple_Select'>Multiple Select</a>
    <li class='indexItem indexItem2'><a href='#Compound_fields'>Compound fields</a>
    <li class='indexItem indexItem2'><a href='#Repeatable_fields'>Repeatable fields</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Flags'>Flags</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#writeonly'>writeonly</a>
    <li class='indexItem indexItem2'><a href='#noupdate'>noupdate</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Form_generator'>Form generator</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>HTML::FormHandler::Manual::Database - FormHandler use recipes</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 0.40028</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p><a href="../../../HTML/FormHandler/Manual.html" class="podlinkpod"
>Manual Index</a></p>

<p>Information on interfacing FormHandler forms and fields with a database.
Also see <a href="../../../HTML/FormHandler/TraitFor/Model/DBIC.html" class="podlinkpod"
>HTML::FormHandler::TraitFor::Model::DBIC</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Form_Models"
>Form Models</a></h1>

<p>For a database form,
use a model base class that interfaces with the database,
such as <a href="../../../HTML/FormHandler/Model/DBIC.html" class="podlinkpod"
>HTML::FormHandler::Model::DBIC</a>,
which needs to be installed as a separate package.
There&#39;s also a sample &#39;object&#39; model in <a href="../../../HTML/FormHandler/Model/Object.html" class="podlinkpod"
>HTML::FormHandler::Model::Object</a>,
which will update a simple object.</p>

<p>When using a database model,
form field values for the row are retrieved from the database using the field &#39;accessor&#39; attributes (defaults to field name) as database class accessors.</p>

<p>FormHandler will use relationships to populate single and multiple selection lists,
and validate input.
A &#39;single&#39; relationship is processed by <a href="../../../HTML/FormHandler/Field/Compound.html" class="podlinkpod"
>HTML::FormHandler::Field::Compound</a>.
A &#39;has_many&#39; relationship is processed by <a href="../../../HTML/FormHandler/Field/Repeatable.html" class="podlinkpod"
>HTML::FormHandler::Field::Repeatable</a>.</p>

<p>Do not use database row method names,
such as &#39;delete&#39;,
as field names in a database form.</p>

<p>You can pass in either the primary key or a row object to the form.
If a primary key (item_id) is passed in,
you must also provide the schema.
The model will use the item_class (DBIC source name) to fetch the row from the database.
If you pass in a row object (item),
the schema,
item_class,
and item_id will be set from the row.</p>

<p>Executing <code>$form-&#62;process( item =&#62; $row,
params =&#62; $params );</code> will validate the parameters and then update or create the database row object.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Fields_that_map_to_database_relationships"
>Fields that map to database relationships</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Select"
>Select</a></h2>

<p>A select field will automatically retrieve a select list from the database,
if the proper column names are provided.
Single selects handle &#39;belongs_to&#39; relationships,
where the related table is used to construct a selection list from the database.</p>

<p>See also <a href="../../../HTML/FormHandler/Field/Select.html" class="podlinkpod"
>HTML::FormHandler::Field::Select</a> and &#39;lookup_options&#39; in <a href="../../../HTML/FormHandler/TraitFor/Model/DBIC.html" class="podlinkpod"
>HTML::FormHandler::TraitFor::Model::DBIC</a>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Multiple_Select"
>Multiple Select</a></h2>

<p>A multiple select is either a &#39;Select&#39; with multiple =&#62; 1 set,
or a field of the &#39;Multiple&#39; type.
The name of a Multiple select which pulls options from the database automatically should be the name of the &#39;many_to_many&#39; relationship.
The &#39;value&#39; of the field is derived from the &#39;has_many&#39; part of the relationship.</p>

<p>The primary key is used for the &#39;id&#39; of the select.
The &#39;label&#39; column of the select is assumed to be &#39;name&#39;.
If the label column has a different name,
it must be specified with &#39;label_column&#39;.</p>

<p>Pertinent attributes:</p>

<pre>   label_column
   active_column
   sort_column</pre>

<p>See also <a href="../../../HTML/FormHandler/Field/Select.html" class="podlinkpod"
>HTML::FormHandler::Field::Select</a> and <a href="../../../HTML/FormHandler/Model/DBIC.html" class="podlinkpod"
>HTML::FormHandler::Model::DBIC</a>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Compound_fields"
>Compound fields</a></h2>

<p>A compound field represents a single relationship to another table. Although most compound relations can be handled without providing a primary key, in some circumstances you may need to provide a PrimaryKey field, or add extra values in update_model.</p>

<p>See also <a href="../../../HTML/FormHandler/Field/Compound.html" class="podlinkpod"
>HTML::FormHandler::Field::Compound</a>.</p>

<p>The default for compound fields is that if all subfields are empty, the value of the compound field is set to undef (null). For some types of relations, you may want to set the &#39;not_nullable&#39; flag to force the field to contain all subfields anyway, such as when the related rows are not deleted when empty. See test t/compound/empty.t for a demonstration of the difference in output.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Repeatable_fields"
>Repeatable fields</a></h2>

<p>The &#39;Repeatable&#39; field type allows you to update arrays of columns from related tables easily. You will need to provide a &#39;PrimaryKey&#39; hidden field in the compound field contained in the Repeatable.</p>

<pre>  has_field &#39;addresses&#39; =&#62; ( type =&#62; &#39;Repeatable&#39; );
  has_field &#39;addresses.address_id&#39; =&#62; ( type =&#62; &#39;PrimaryKey&#39; );
  has_field &#39;addresses.street&#39;;
  has_field &#39;addresses.city&#39;;
  has_field &#39;addresses.state&#39;;</pre>

<p>There are some complications with creating Repeatable elements (with the PrimaryKey field set to undef) in a database and re-presenting the form. See <a href="../../../HTML/FormHandler/Field/Repeatable.html" class="podlinkpod"
>HTML::FormHandler::Field::Repeatable</a> for more info.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Flags"
>Flags</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="writeonly"
>writeonly</a></h2>

<p>Do not read the value from the &#39;item&#39; when populating the form.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="noupdate"
>noupdate</a></h2>

<p>Do not update the database with this field, i.e. do not include it in <code>$form-&#62;value</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Form_generator"
>Form generator</a></h1>

<p>A DBIC form generator is installed with the <a href="../../../HTML/FormHandler/Model/DBIC.html" class="podlinkpod"
>HTML::FormHandler::Model::DBIC</a> package. See <a href="../../../HTML/FormHandler/Generator/DBIC.html" class="podlinkpod"
>HTML::FormHandler::Generator::DBIC</a>.</p>

<p>There&#39;s also a role, <a href="../../../HTML/FormHandler/TraitFor/DBICFields.html" class="podlinkpod"
>HTML::FormHandler::TraitFor::DBICFields</a>, that allows simple form fields to be auto-generated from a DBIC result class.</p>

<pre>    my $form = HTML::FormHandler::Model::DBIC-&#62;new_with_traits(
        traits =&#62; [&#39;HTML::FormHandler::TraitFor::DBICFields&#39;],
        includes =&#62; [&#39;title&#39;, &#39;author&#39; ],
        field_list =&#62; [ &#39;submit&#39; =&#62; { type =&#62; &#39;Submit&#39;, value =&#62; &#39;Save&#39;, order =&#62; 99 } ],
        item =&#62; $book );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>FormHandler Contributors - see HTML::FormHandler</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2013 by Gerda Shank.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
