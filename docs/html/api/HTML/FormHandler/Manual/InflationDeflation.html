<html><head><title>HTML::FormHandler::Manual::InflationDeflation</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:18 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#DESCRIPTION'>DESCRIPTION</a>
    <li class='indexItem indexItem2'><a href='#Standard_inflation%2Fdeflation'>Standard inflation/deflation</a>
    <li class='indexItem indexItem2'><a href='#DB_inflation%2Fdeflation'>DB inflation/deflation</a>
    <li class='indexItem indexItem2'><a href='#Attributes_used_in_deflation%2Finflation'>Attributes used in deflation/inflation</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Inflation_methods'>Inflation methods</a>
      <li class='indexItem indexItem3'><a href='#Deflation_methods'>Deflation methods</a>
      <li class='indexItem indexItem3'><a href='#fif_from_value'>fif_from_value</a>
      <li class='indexItem indexItem3'><a href='#deflate_to'>deflate_to</a>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>HTML::FormHandler::Manual::InflationDeflation - inflation and deflation of field values</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 0.40028</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p><a href="../../../HTML/FormHandler/Manual.html" class="podlinkpod"
>Manual Index</a></p>

<p>How to inflate and deflate field values.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h2>

<p>When working with the various ways that data can be transformed,
in and out,
the meaning of the terms &#39;inflate&#39; and &#39;deflate&#39; starts to feel kind of slippery.
The one constant is that values presented in an HTML form must be in a string format,
or presented with select elements or checkboxes.</p>

<p>There are two general types of inflation/deflation provided by FormHandler.
The first,
&#39;standard&#39; type inflates values in order to validate them,
and deflates them in order to present them in string format via HTML.
The other (&#39;DB&#39;) type takes values provided by defaults (usually a DB row,
or item,
but could also be a field default or an init_object) and munges the values coming in and changes them back going out.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Standard_inflation/deflation"
>Standard inflation/deflation</a></h2>

<p>The standard type of inflation/deflation is implemented by using some of the following options for inflation:</p>

<pre>    inflate_method
    transform (using &#39;apply&#39;)</pre>

<p>..and the following options for deflation:</p>

<pre>    deflate_method
    deflation (field attribute)</pre>

<p>When validation starts, the param input will be inflated by the inflate method, allowing validation to be performed on the inflated object.</p>

<p>When the &#39;fif&#39; fill-in-form value is returned for HTML generation, the deflation is used to flatten the object, usually into a string format.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DB_inflation/deflation"
>DB inflation/deflation</a></h2>

<p>The &#39;DB&#39; type of inflation/deflation uses &#39;inflate_default_method&#39; for inflation, and &#39;deflate_value_method&#39; for deflation. Deflation could also be handled by changing the value in one of the various validation methods.</p>

<p>This type of inflation/deflation is, logically, just a different way of providing data munging around the defaults (item/init_object/default) and &#39;value&#39; output. The same effect could be achieved by performing a transformation outside of FormHandler - if you were handling the database updates yourself. Since the DBIC model enables automatic database updates, this kind of inflation/deflation makes that easier.</p>

<p>One circumstance in which this type of inflation/deflation is useful is when there&#39;s a single field in the database row object which you want to expand into a compound field in the form.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Attributes_used_in_deflation/inflation"
>Attributes used in deflation/inflation</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Inflation_methods"
>Inflation methods</a></h3>

<p>The field &#39;input&#39; comes from the params that are passed in from the submission of the form, so the input will always be in string format if it comes from an HTTP request. It&#39;s also possible to pass in params in other formats, of course. Or the params could be pre-processed before passing in to FormHandler.</p>

<p>You should not normally be changing the &#39;input&#39; attribute of a field. If you want the changed field value to be used when re-presenting the form, such as when you&#39;re adopting a standard format for the field, you should set <code>fif_from_value =&#62; 1</code>.</p>

<p>There are three options for standard inflation, or transforming the field&#39;s &#39;input&#39; to the field&#39;s &#39;value&#39;:</p>

<dl>
<dt><a name="inflate_method"
>inflate_method</a></dt>

<dd>
<p>Provide a method on the field which inflates the field &#39;input&#39; (from params):</p>

<pre>   has_field &#39;futility&#39; =&#62; ( inflate_method =&#62; \&#38;inflate_field );
   sub inflate_field {
       my ( $self, $value ) = @_;
       ....
       return $value;
   }</pre>

<dt><a name="transform"
>transform</a></dt>

<dd>
<p>In a sequence of &#39;apply&#39; actions, changes the format of the &#39;value&#39; that is being validated. This might be useful if there are some validations that work on one format of the value, and some that work on another.</p>

<dt><a name="set_the_value_in_validation_methods"
>set the value in validation methods</a></dt>

<dd>
<p>In a validate method, you can change the format of the value, with $field-&#62;value(...);</p>
</dd>
</dl>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Deflation_methods"
>Deflation methods</a></h3>

<dl>
<dt><a name="deflate_method"
>deflate_method</a></dt>

<dd>
<p>Most general purpose deflation method. Provide a coderef which is a method on the field:</p>

<pre>   has_field =&#62; &#39;foo&#39; =&#62; ( deflate_method =&#62; \&#38;deflate_foo );
   sub deflate_foo {
       my ( $self, $value ) = @_;  # $self is the &#39;foo&#39; field
       &#60;perform conversion&#62;
       return $value;
   }</pre>

<dt><a name="deflation"
>deflation</a></dt>

<dd>
<p>This is a coderef that performs deflation.</p>

<pre>   has_field =&#62; &#39;bar&#39; =&#62; ( deflation =&#62; sub { shift $value; ... return $value } );</pre>

<dt><a name="set_the_value_in_validation_methods"
>set the value in validation methods</a></dt>

<dd>
<p>Just like for inflation, you can change the value in a validation method; however, it won&#39;t be used for fill-in-form unless you set the &#39;fif_from_value&#39; flag to true.</p>
</dd>
</dl>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="fif_from_value"
>fif_from_value</a></h3>

<p>Normally the fill-in-form value will be the param value that was submitted. If you want to change the format of the input when re-presenting the form, you can set &#39;fif_from_value&#39;.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="deflate_to"
>deflate_to</a></h3>

<p>Earlier versions of FormHandler provided a &#39;deflate_to&#39; attribute which allowed the deflation methods to be used for multiple, confusing purposes. This flag has been removed, since it made the process hard to understand and was mixing apples and oranges. The new inflation/deflation methods can handle all of the previous situations.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>FormHandler Contributors - see HTML::FormHandler</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2013 by Gerda Shank.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
