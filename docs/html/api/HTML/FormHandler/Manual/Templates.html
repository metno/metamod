<html><head><title>HTML::FormHandler::Manual::Templates</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:18 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#Using_templates'>Using templates</a>
  <li class='indexItem indexItem1'><a href='#Field_attributes'>Field attributes</a>
  <li class='indexItem indexItem1'><a href='#Sample_templates'>Sample templates</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>HTML::FormHandler::Manual::Templates - using templates</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 0.40028</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p><a href="../../../HTML/FormHandler/Manual.html" class="podlinkpod"
>Manual Index</a></p>

<p>Documentation on templates to use with <a href="../../../HTML/FormHandler.html" class="podlinkpod"
>HTML::FormHandler</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Using_templates"
>Using templates</a></h1>

<p>There is a FormHandler Template Toolkit rendering role at <a href="../../../HTML/FormHandler/Render/WithTT.html" class="podlinkpod"
>HTML::FormHandler::Render::WithTT</a>,
with a testcase in t/render_withtt.t.
Normally,
however,
it probably won&#39;t make much sense to use both a TT parser in FormHandler,
and a separate one for the &#34;complete&#34; templates,
so the TT renderer is mainly useful for tests,
or as an example of how to do TT rendering with HFH.
You should create a template to render your form and then pass the template name and a template variable containing your form object to your templating or view engine,
in whatever way you normally do that.
If you want to use the &#39;process_attrs&#39; function,
you need to set that in your template variables too.</p>

<p>A common way of using FormHandler with templates is to use the template for layout,
specifying the divs and spans and wrappers,
and then use the form object to render just the input fields.</p>

<p>In your form:</p>

<pre>    has &#39;+widget_wrapper&#39; =&#62; ( default =&#62; &#39;None&#39; );</pre>

<p>In your Catalyst controller:</p>

<pre>    $c-&#62;stash( form =&#62; $form, template =&#62; &#39;form.tt&#39; );</pre>

<p>..or do the equivalent for your web framework/view.</p>

<p>In a form template (form.tt in the previous controller example):</p>

<pre>    &#60;form id=&#34;myform&#34; action=&#34;/myaction&#34; method=&#34;post&#34;&#62;
        &#60;div class=&#34;span9&#34;&#62;
            &#60;span class=&#34;label&#34;&#62;My Foo&#60;/span&#62;
            [% form.field(&#39;foo&#39;).render %]
        &#60;/div&#62;
        &#60;div class=&#34;span7&#34;&#62;[% form.field(&#39;bar&#39;).render %]&#60;/div&#62;
        [% form.field(&#39;save&#39;).render %]
    &#60;/form&#62;</pre>

<p>However, you can also render entirely with templates. There are lots of different ways to set up templates. There are sample templates installed in FormHandler&#39;s &#39;share&#39; directory. These templates are now organized more-or-less similarly to the widget roles, with &#39;field&#39;, &#39;wrapper&#39;, and &#39;form&#39; directories, but many other organizations are possible.</p>

<p>There is also a template which combines the template rendering code into one file, &#39;share/templates/form/form_in_one.tt&#39;. You can copy this template into your own TT directories, perhaps as form.tt, and then specify it as the template for your Catalyst actions. You can customize it by adding additional widget and widget_wrapper blocks, and then setting those in your field definitions.</p>

<p>Note that widget names usually are camelcased, like the Moose roles that implement them in the Widget directory. You may want to use the non-camelcased widget/wrapper names in your TT templates, using the <code>$field-&#62;uwidget</code> (un-camelcased widget name) and <code>$field-&#62;twidget</code> (un-camelcased widget name + &#39;.tt&#39;) convenience methods. (&#39;MySpecialWidget&#39; is the equivalent of &#39;my_special_widget&#39;)</p>

<pre>   has_field &#39;my_field&#39; =&#62; ( widget =&#62; &#39;MySpecialWidget&#39; );
   has_field &#39;another_field&#39; =&#62; ( widget =&#62; &#39;YetAnotherWidget&#39; );</pre>

<p>And include them in a generic template:</p>

<pre>   [% PROCESS widget/form_start.tt %]

   [% FOREACH f IN form.sorted_fields %]
      [% PROCESS widget/${f.twidget} %]
   [% END %]

   [% PROCESS widget/form_end.tt %]</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Field_attributes"
>Field attributes</a></h1>

<p>If you want to use the &#39;process_attrs&#39; function to pull in HTML attributes for the input elements, wrappers, and labels, you would need to pass that function into your TT setup. See <a href="../../../HTML/FormHandler/Render/WithTT.html" class="podlinkpod"
>HTML::FormHandler::Render::WithTT</a> for an example:</p>

<pre>    use HTML::FormHandler::Render::Util (&#39;process_attrs&#39;);
    $c-&#62;stash( process_attrs =&#62; &#38;process_attrs ); # or add to TT vars in your view

    &#60;label [% process_attrs(f.label_attributes) %]for=&#34;[% f.html_name %]&#34;&#62;
    [% f.label %]: &#60;/label&#62;
    &#60;input type=&#34;[% f.input_type %]&#34; name=&#34;[% f.html_name %]&#34; id=&#34;[% f.id %]&#34;
    [% process_attrs(f.attributes) %] value=&#34;[% f.fif %]&#34;&#62;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Sample_templates"
>Sample templates</a></h1>

<p>The following is copied from the provided share/templates/form/form_in_one.tt file, as an example. Note that some fields, like form actions of &#39;submit&#39; &#38; &#39;reset&#39;, don&#39;t use the &#39;fif&#39; value, but just the plain field value.</p>

<pre>    [% PROCESS form_start -%]
    &#60;div class=&#34;form_messages&#34;&#62;
    [% FOREACH err IN form.form_errors -%]
      &#60;span class=&#34;error_message&#34;&#62;[% err %]&#60;/span&#62;
    [% END -%]
    &#60;/div&#62;
    [% FOREACH f IN form.sorted_fields -%]
      [% WRAPPER &#34;wrapper_${f.uwrapper}&#34; -%][% PROCESS &#34;${f.uwidget}&#34; -%][% END -%]
    [% END -%]
    [% PROCESS form_end -%]

    [% BLOCK form_start -%]
    &#60;form[% process_attrs(form.attributes) %]&#62;
    [% END -%]

    [% BLOCK form_end -%]
    &#60;/form&#62;
    [% END -%]

    [% BLOCK button -%]
    &#60;input type=&#34;button&#34; name=&#34;[% f.html_name %]&#34; id=&#34;[% f.id %]&#34;
        [% process_attrs(f.attributes) %] value=&#34;[% f.value %]&#34; /&#62;
    [% END -%]

    [% BLOCK checkbox -%]
    &#60;input type=&#34;checkbox&#34; name=&#34;[% f.html_name %]&#34; id=&#34;[% f.id %]&#34;
       [% process_attrs(f.attributes) %] value=&#34;[% f.checkbox_value -%]&#34;
       [% IF f.fif == f.checkbox_value -%] checked=&#34;checked&#34;[% END ~%] /&#62;[%~ ~%]
    [% END -%]

    [% BLOCK checkbox_group -%]
    [% FOR option IN f.options -%]
      &#60;label class=&#34;checkbox&#34; for=&#34;[% f.name %].[% loop.index %]&#34;&#62;
      &#60;input type=&#34;checkbox&#34; value=&#34;[% option.value %]&#34; name=&#34;[% f.name %]&#34;
         id=&#34;[% f.name %].[% loop.index %]&#34;
         [% FOREACH selval IN f.fif -%]
           [% IF selval == option.value %] checked=&#34;checked&#34;[% END -%]
         [% END -%]&#62;
      [% option.label | html %]
      &#60;/label&#62;
    [% END -%]
    [% END -%]

    [% BLOCK compound -%]
    [% FOREACH sf IN f.sorted_fields -%]
      [% outerf = f; f = sf; -%]
      [% WRAPPER &#34;wrapper_${f.uwrapper}&#34; %][% PROCESS &#34;${f.uwidget}&#34; -%][% END -%]
      [% f = outerf -%]
    [% END -%]
    [% END -%]

    [% BLOCK hidden -%]
    &#60;input type=&#34;hidden&#34; name=&#34;[% f.html_name %]&#34; id=&#34;[% f.id %]&#34;
        [% process_attrs(f.attributes) %] value=&#34;[% f.fif %]&#34; /&#62;
    [% END -%]

    [% BLOCK password -%]
    &#60;input type=&#34;password&#34; name=&#34;[% f.html_name %]&#34; id=&#34;[% f.id %]&#34;
        [% process_attrs(f.attributes) %] value=&#34;[% f.fif %]&#34; /&#62;
    [% END -%]

    [% BLOCK radio_group -%]
    [% FOR option IN f.options -%]
      &#60;label for=&#34;[% f.id %].[% loop.index %]&#34;&#62;
      &#60;input type=&#34;radio&#34; value=&#34;[% option.value %]&#34; name=&#34;[% f.name %]&#34;
        id=&#34;[% f.id %].[% loop.index %]&#34;
        [% IF option.value == f.fif %] checked=&#34;checked&#34;[% END %] /&#62;
      [% option.label %]
      &#60;/label&#62;
    [% END -%]
    [% END -%]

    [% BLOCK repeatable -%]
    [% FOREACH rf IN f.sorted_fields -%]
      [% outerrf = f; f = rf; -%]
      [% WRAPPER &#34;wrapper_${f.uwrapper}&#34; %][% PROCESS &#34;${f.uwidget}&#34; -%][% END -%]
      [% f = outerrf -%]
    [% END -%]
    [% END -%]

    [% BLOCK reset -%]
    &#60;input type=&#34;reset&#34; name=&#34;[% f.html_name %]&#34; id=&#34;[% f.id %]&#34;
        [% process_attrs(f.attributes) %] value=&#34;[% f.value %]&#34; /&#62;
    [% END -%]

    [% BLOCK select -%]
    &#60;select name=&#34;[% f.html_name %]&#34; id=&#34;[% f.id %]&#34;[% process_attrs(f.attributes) %]
      [% IF f.multiple %] multiple=&#34;multiple&#34; size=&#34;[% f.size %]&#34; [% END -%]&#62;
      [% FOR option IN f.options -%]
      &#60;option id=&#34;[% f.id %].[% loop.index %]&#34; value=&#34;[% option.value -%]&#34;
          [% FOREACH selval IN f.fif -%]
            [% IF selval == option.value %] selected=&#34;selected&#34;[% END -%]
          [% END -%]&#62;
          [% option.label | html %]
      &#60;/option&#62;
      [% END -%]
    &#60;/select&#62;
    [% END -%]

    [% BLOCK submit -%]
    &#60;input type=&#34;submit&#34; name=&#34;[% f.html_name %]&#34; id=&#34;[% f.id %]&#34;
        [% process_attrs(f.attributes) %] value=&#34;[% f.value %]&#34; /&#62;
    [% END -%]

    [% BLOCK text -%]
    &#60;input type=&#34;[% f.input_type %]&#34; name=&#34;[% f.html_name %]&#34; id=&#34;[% f.id %]&#34;
       [% process_attrs(f.attributes) %] value=&#34;[% f.fif %]&#34; /&#62;
    [% END -%]

    [% BLOCK textarea -%]
    &#60;textarea name=&#34;[% f.html_name %]&#34; id=&#34;[% f.id %]&#34; rows=&#34;[% f.rows %]&#34;
       cols=&#34;[% f.cols %]&#34; [% process_attrs(f.attributes) %]&#62;[% f.fif %]&#60;/textarea&#62;
    [% END -%]

    [% BLOCK upload -%]
    &#60;input type=&#34;file&#34; name=&#34;[% f.html_name %]&#34; id=&#34;[% f.html_name %]&#34;
        [% process_attrs(f.attributes) %] /&#62;
    [% END -%]

    [% BLOCK wrapper_simple -%]
    &#60;div[% process_attrs(f.wrapper_attributes) -%]&#62;
      [% IF f.do_label %][% PROCESS label %][% END -%]
      [% content -%]
    &#60;/div&#62;
    [% END -%]

    [% BLOCK label -%]
    &#60;label [% process_attrs(f.label_attributes) %]for=&#34;[% f.html_name %]&#34;&#62;[% f.label %]&#60;/label&#62;
    [% END -%]

    [% BLOCK wrapper_wrap_label -%]
    &#60;div[% process_attrs(f.wrapper_attributes) %]&#62;
        &#60;label[% process_attrs(f.label_attributes) %] for=&#34;[% f.html_name %]&#34;&#62;
           [%~ content ~%][%~ f.label %]
        &#60;/label&#62;
    &#60;/div&#62;
    [% END -%]

    [% BLOCK wrapper_none -%]
    [% content %]
    [% END -%]

    [% BLOCK wrapper_fieldset -%]
    &#60;fieldset[% process_attrs(f.wrapper_attributes)%]&#62;&#60;legend&#62;[% f.label %]&#60;/legend&#62;
    [% content -%]
    &#60;/fieldset&#62;
    [% END -%]</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>FormHandler Contributors - see HTML::FormHandler</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2013 by Gerda Shank.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
