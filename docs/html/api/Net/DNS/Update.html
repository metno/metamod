<html><head><title>Net::DNS::Update</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Tue Mar 25 17:14:22 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new'>new</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#EXAMPLES'>EXAMPLES</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Add_a_new_host'>Add a new host</a>
    <li class='indexItem indexItem2'><a href='#Add_an_MX_record_for_a_name_that_already_exists'>Add an MX record for a name that already exists</a>
    <li class='indexItem indexItem2'><a href='#Add_a_TXT_record_for_a_name_that_doesn%27t_exist'>Add a TXT record for a name that doesn&#39;t exist</a>
    <li class='indexItem indexItem2'><a href='#Delete_all_A_records_for_a_name'>Delete all A records for a name</a>
    <li class='indexItem indexItem2'><a href='#Delete_all_RRs_for_a_name'>Delete all RRs for a name</a>
    <li class='indexItem indexItem2'><a href='#Perform_a_signed_update'>Perform a signed update</a>
    <li class='indexItem indexItem2'><a href='#Another_way_to_perform_a_signed_update'>Another way to perform a signed update</a>
    <li class='indexItem indexItem2'><a href='#Perform_a_signed_update_with_a_customized_TSIG_record'>Perform a signed update with a customized TSIG record</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Net::DNS::Update - Create a DNS update packet</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use Net::DNS::Update;

    $update = Net::DNS::Update-&#62;new;
    $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;, &#39;IN&#39;);

    $update-&#62;push(prerequisite =&#62; nxrrset(&#39;foo.example.com. A&#39;));
    $update-&#62;push(update =&#62; rr_add(&#39;foo.example.com. 86400 A 192.168.1.2&#39;));</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p><code>Net::DNS::Update</code> is a subclass of <code>Net::DNS::Packet</code>, to be used for making DNS dynamic updates. Programmers should refer to RFC 2136 for the semantics of dynamic updates.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new"
>new</a></h2>

<pre>    $update = Net::DNS::Update-&#62;new;
    $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;, &#39;HS&#39;);</pre>

<p>Returns a <code>Net::DNS::Update</code> object used to perform a DNS dynamic update operation. Specifically, it creates a packet with the header opcode set to UPDATE and zone qtype to SOA (per RFC 2136, 2.3).</p>

<p>Programs must use the <code>push</code> method to add RRs to the prerequisite, update, and additional sections before performing the update.</p>

<p>Arguments are the zone name and the class. If the zone is omitted, the default domain will be taken from the resolver configuration. If the class is omitted, it defaults to IN.</p>

<p>Future versions of <code>Net::DNS</code> may provide a simpler interface for making dynamic updates.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The first example below shows a complete program; subsequent examples show only the creation of the update packet.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Add_a_new_host"
>Add a new host</a></h2>

<pre>    #!/usr/bin/perl -w

    use strict;
    use Net::DNS;

    # Create the update packet.
    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);

    # Prerequisite is that no A records exist for the name.
    $update-&#62;push(prerequisite =&#62; nxrrset(&#39;foo.example.com. A&#39;));

    # Add two A records for the name.
    $update-&#62;push(update =&#62; rr_add(&#39;foo.example.com. 86400 A 192.168.1.2&#39;));
    $update-&#62;push(update =&#62; rr_add(&#39;foo.example.com. 86400 A 172.16.3.4&#39;));

    # Send the update to the zone&#39;s primary master.
    my $res = Net::DNS::Resolver-&#62;new;
    $res-&#62;nameservers(&#39;primary-master.example.com&#39;);

    my $reply = $res-&#62;send($update);

    # Did it work?
    if ($reply) {
        my $rcode = $reply-&#62;header-&#62;rcode;
        print &#39;Update &#39;, $rcode eq &#39;NOERROR&#39; ? &#34;succeeded\n&#34; : &#34;failed: $rcode\n&#34;;
    } else {
        print &#39;Update failed: &#39;, $res-&#62;errorstring, &#34;\n&#34;;
    }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Add_an_MX_record_for_a_name_that_already_exists"
>Add an MX record for a name that already exists</a></h2>

<pre>    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(prerequisite =&#62; yxdomain(&#39;example.com&#39;));
    $update-&#62;push(update       =&#62; rr_add(&#39;example.com MX 10 mailhost.example.com&#39;));</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Add_a_TXT_record_for_a_name_that_doesn&#39;t_exist"
>Add a TXT record for a name that doesn&#39;t exist</a></h2>

<pre>    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(prerequisite =&#62; nxdomain(&#39;info.example.com&#39;));
    $update-&#62;push(update       =&#62; rr_add(&#39;info.example.com TXT &#34;yabba dabba doo&#34;&#39;));</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Delete_all_A_records_for_a_name"
>Delete all A records for a name</a></h2>

<pre>    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(prerequisite =&#62; yxrrset(&#39;foo.example.com A&#39;));
    $update-&#62;push(update       =&#62; rr_del(&#39;foo.example.com A&#39;));</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Delete_all_RRs_for_a_name"
>Delete all RRs for a name</a></h2>

<pre>    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(prerequisite =&#62; yxdomain(&#39;byebye.example.com&#39;));
    $update-&#62;push(update       =&#62; rr_del(&#39;byebye.example.com&#39;));</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Perform_a_signed_update"
>Perform a signed update</a></h2>

<pre>    my $key_name = &#39;tsig-key&#39;;
    my $key_data = &#39;awwLOtRfpGE+rRKF2+DEiw==&#39;;

    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(update =&#62; rr_add(&#39;foo.example.com A 10.1.2.3&#39;));
    $update-&#62;push(update =&#62; rr_add(&#39;bar.example.com A 10.4.5.6&#39;));
    $update-&#62;sign_tsig($key_name, $key_data);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Another_way_to_perform_a_signed_update"
>Another way to perform a signed update</a></h2>

<pre>    my $key_name = &#39;tsig-key&#39;;
    my $key_data = &#39;awwLOtRfpGE+rRKF2+DEiw==&#39;;

    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(update     =&#62; rr_add(&#39;foo.example.com A 10.1.2.3&#39;));
    $update-&#62;push(update     =&#62; rr_add(&#39;bar.example.com A 10.4.5.6&#39;));
    $update-&#62;push(additional =&#62; Net::DNS::RR-&#62;new(&#34;$key_name TSIG $key_data&#34;));</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Perform_a_signed_update_with_a_customized_TSIG_record"
>Perform a signed update with a customized TSIG record</a></h2>

<pre>    my $key_name = &#39;tsig-key&#39;;
    my $key_data = &#39;awwLOtRfpGE+rRKF2+DEiw==&#39;;

    my $tsig = Net::DNS::RR-&#62;new(&#34;$key_name TSIG $key_data&#34;);
    $tsig-&#62;fudge(60);

    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(update     =&#62; rr_add(&#39;foo.example.com A 10.1.2.3&#39;));
    $update-&#62;push(update     =&#62; rr_add(&#39;bar.example.com A 10.4.5.6&#39;));
    $update-&#62;push(additional =&#62; $tsig);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h1>

<p>WARNING: This code is still under development. Please use with caution on production nameservers.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright (c)1997-2002 Michael Fuhr.</p>

<p>Portions Copyright (c)2002-2004 Chris Reinhardt.</p>

<p>All rights reserved.</p>

<p>This program is free software; you may redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../../perl.html" class="podlinkpod"
>perl</a>, <a href="../../Net/DNS.html" class="podlinkpod"
>Net::DNS</a>, <a href="../../Net/DNS/Resolver.html" class="podlinkpod"
>Net::DNS::Resolver</a>, <a href="../../Net/DNS/Header.html" class="podlinkpod"
>Net::DNS::Header</a>, <a href="../../Net/DNS/Packet.html" class="podlinkpod"
>Net::DNS::Packet</a>, <a href="../../Net/DNS/Question.html" class="podlinkpod"
>Net::DNS::Question</a>, <a href="../../Net/DNS/RR.html" class="podlinkpod"
>Net::DNS::RR</a>, RFC 2136, RFC 2845</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
