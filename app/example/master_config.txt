#
# METAMOD example configuration
#
# This file contains the most frequently customized variables.
# Use this file as a starting point for your local configuration.
# Directives commented out means they are already defined as such by default.
# See app/default/default_confix.txt for a complete description of all variables.

# ============ Enabled modules ==============

# Uncomment any services you want to enable (all are disabled by default)
#
#METAMODBASE_DIRECTORY = dummy_true_value
#METAMODUPLOAD_DIRECTORY = dummy_true_value
#METAMODPMH_DIRECTORY = dummy_true_value
#METAMODHARVEST_DIRECTORY = dummy_true_value
#METAMODTHREDDS_DIRECTORY = dummy_true_value

# ============ General configuration ==============

# Change this to the fully qualified domain name of your server
SERVER = test.example.com

# Set this directive to enable Apache virtualhosts (requires separate DNS hostname)
#VIRTUAL_HOST = [==SERVER==]

# Initial part of local URLs (cannot be blank or slash):
LOCAL_URL = /metamod

# POSIX user for running Metamod services (including Catalyst)
# Normally same as Apache user, except for development where you may use your login user
# Must be same as owner of webrun directory
#APPLICATION_USER = www-data

# Application name:
APPLICATION_NAME = Example Application

# Application id (has to be short and unique among applications using the same
# database, use only capital characters A-Z)::
APPLICATION_ID = EXAMPLE

# Directory path for logfiles etc. generated by web applications:
#WEBRUN_DIRECTORY = [==CONFIG_DIR==]/webrun

# Mail address for person/group responsible for daily operation of the file
# repository. Used for automatically sent notifications when manual action is
# needed. Also used as login name for the Admin user added to the user
# database while this database is initialized:
OPERATOR_EMAIL = someuser@somedomain.com

# Institution set up for the Admin user during user database initialization:
OPERATOR_INSTITUTION = someinstitution

# Specify here if you want to use external SMTP relay instead of local MTA (sendmail
# or similar).
# Note that local sendmail normally must be configured to relay to external smtp
# server unless directly connected to the Internet (i.e. not behind a firewall).
# On the other hand Metamod SMTP_RELAY often fails due to a bug in Net::SMTP
# which doesn't send a FQDN in the sender address. See the installation manual
# for more info, and don't forget to test which method works for you.
SMTP_RELAY = smtp.example.com

# ============== Catalyst configuration =================

# lib for Catalyst and other dependencies
# (set this to blank if you've installed everything from CPAN instead)
#CATALYST_LIB =

# port used by the Catalyst server (default 3000)
# must be unique if running several Catalyst installations per server
#CATALYST_PORT = 3003

# ============== PostgreSQL configuration =================

# Hostname used for connecting to the PostgreSQL database:
PG_HOST = localhost
#PG_HOST = somedatabaseserver

# Name of the PostgreSQL databases (metadata and userbase):
DATABASE_NAME = metamod_example
USERBASE_NAME = metamod_example_userbase

# PG_ADMIN_USER is the PostgreSQL user who may freely create, modify and
# delete the metadata database.
PG_ADMIN_USER = admin
# you'll need an admin password if creating a new database on a remote server
# for local socket connection, change local ident to trust in pg_hba.conf (see install docs)
#PG_ADMIN_USER_PASSWORD = somethingsecret (optional)

# PG_WEB_USER is a PostgreSQL user who may read/write data in the metadata
# database. It usually also has a password.
PG_WEB_USER = webuser
PG_WEB_USER_PASSWORD = changethisasap

# PG_CONNECTSTRING_* are strings used to indicate hostname and port for
# connecting to the PostgreSQL database. They are found in various
# commands and script functions. These strings should be empty if hostname and
# port are not used:
#
# String used in shell commands psql, createdb and dropdb to connect to the
# database:
#PG_CONNECTSTRING_SHELL = --host [==PG_HOST==] --port [==PG_PORT==]
# do not use PG_CONNECTSTRING_SHELL for local connections (use sockets instead)
PG_CONNECTSTRING_SHELL =

# String used in Perl DBI->connect function to connect to the
# database:
#PG_CONNECTSTRING_PERL = ;host=[==PG_HOST==];port=[==PG_PORT==];password=something
PG_CONNECTSTRING_PERL = ;host=[==PG_HOST==];port=[==PG_PORT==]

# Directory for PostgreSQL contrib libs (e.g. tsearch2.sql, pgcrypto.sql and lwpostgis.sql)
# Note that installing the Debian packet for this will also pull in PostgreSQL server.
# For this reason these packets are not required dependencies of Metamod, but must
# be installed manually, e.g. from source
#
# For Hardy:
#PG_CONTRIB = /usr/share/postgresql/8.3/contrib
# For Lucid:
PG_CONTRIB = /usr/share/postgresql/8.4/contrib

# the location of the initialization sql-script for the full-text facilities
#PG_TSEARCH2_SCRIPT = [==PG_CONTRIB==]/tsearch2.sql

# the location of the initialization sql-script for postGIS
#PG_POSTGIS_SCRIPT = /usr/share/postgresql-8.3-postgis/lwpostgis.sql
PG_POSTGIS_SCRIPT = /usr/share/postgresql/8.4/contrib/postgis.sql

# the Coordinate System References
# For Hardy:
#PG_POSTGIS_SYSREF_SCRIPT = /usr/share/postgresql-8.3-postgis/spatial_ref_sys.sql
# For Lucid:
PG_POSTGIS_SYSREF_SCRIPT = /usr/share/postgresql/8.4/contrib/spatial_ref_sys.sql

# ============== Other configuration =================

# Main menu beneath the application header.Each line should start with
# an URL followed by a space and some text. The text will be shown in
# the application as a menu item, and the URL will be activated when the
# text is clicked.
# Note that standard sections in METAMOD are always displayed below this menu.
# You only need to configure any external links here.
APP_MENU =
# http://example.com Link description

# Comma-separated list of dataset tags accessible from this application:
DATASET_TAGS = 'MM'

# ============ WMS configuration =======================

# URL to background map server delivering coastlines and reticules
WMS_BACKGROUND_MAPSERVER = http://wms.met.no/maps/

# map names for different projections
WMS_NORTHPOLE_MAP = northpole.map
WMS_SOUTHPOLE_MAP = southpole.map
WMS_WORLD_MAP     = world.map

# ============ METAMODSEARCH configuration ==============

# Max number of rows displayed for second level datasets with same parent:
#SEARCH_APP_MAXROWS_SCNDLEV = 50

# Set of Metadata types to be shown as columns in search results.
# Each line below comprise at least two items (items with several words must be
# enclosed in apostophes). Item1 is MT_name in the Metadatatype database table.
# Item2 is the column heading.
# One optional item is "col=n" where n is a number (1,2,...) designating the
# default column number of the metadata in the result table. The optional item
# "cross=X" sets how a column is shown in a cross table. X="h" makes the
# column values define the horizontal axis of the cross table. X="v" will
# similarly define the vertical axis. X="no" excludes the column to be used in
# cross tables.
#SEARCH_APP_SHOW_COLUMNS =
# area 'Areas' col=3 cross=v
# institution 'Institutions' col=2
# variable 'Topics and variables'
# activity_type 'Activity types' col=4 cross=h
# abstract 'Abstract' col=5 cross=no
# datacollection_period 'Datacollection period'
# contact 'Contact (E-mail)'
# title 'Descriptive title for the dataset'
# keywords 'Keywords' cross=no
# Product_name 'Product name'
# references 'References' cross=no
# field_type 'Field type (frequency)'
# forecast_type 'Forecast type'
# Platform_name 'Platform name'
# PI_name 'Principal investigator'
# distribution_statement 'Distribution statement'
# spatial_resolution 'Spatial resolution'
# project_name 'Project name'

# Column used to sort the rows representing second level datasets. Given as
# MT_name in the Metadatatype table.
#SEARCH_APP_SORT_COLUMN = datacollection_period

# The sequence by which the search categories are visible in the search
# application. The numbers are keys in the SearchCategory database table.
# In addition to the numbers, the keyword FullText may be used.
#SEARCH_CATEGORY_SEQUENCE = topics_and_variables,activity_types,institutions,areas,map_search,datacollection_period,fulltext

# ============ METAMODUPLOAD configuration ==============

# If EXTERNAL_REPOSITORY = false (the default), METAMOD is the owner of the data
# repository (normal mode). Data will be uploaded through web-frontend or ftp
# and METAMOD will move data to its repository. Otherwise, METAMOD will only get
# information about new data in the external repository and harvest metadata
# there, without moving any data.
#
# In this case, METAMOD has no responsibilty for moving netCDF
# files into their final destination (i.e. the data repository).
# Files are already in the repository when METAMOD recieves them.
# The responsibility for METAMOD is only to extract metadata,
# check the files and eventually report any irregularities back
# to the data provider.
#EXTERNAL_REPOSITORY = true

# For unknown reasons, sometimes it is neccessary to convert all POST-data
# from UTF8 to latin-1. If this is the case, set the following variable to
# TRUE:
#DECODE_FROM_UTF8 = TRUE
# please change this to true/false or 1/0 - FIXME

# Schedule for FTP upload monitor
FTP_CRONTAB     = 30 04 * * *
CLEANUP_CRONTAB = 15 00 * * *

# Required minimum file age (number of minutes) for initiating processing
# of files uploaded through the WEB interface. Files less than this age will
# postpone processing (in the upload_monitor.pl script) of all files with
# the same dataset name. This will give the data provider time to upload
# all files in a batch.
#UPLOAD_AGE_THRESHOLD = 10

# Directory path for the top data repository directory. This will
# be a directory accessible through some OPeNDAP server (like THREDDS).
# If no OPeNDAP server is installed, links in the web interface pointing to
# data files may be faulty. This dependence on OPeNDAP will be corrected in
# a future version of the software.
#OPENDAP_BASEDIR = data
#OPENDAP_DIRECTORY = [==WEBRUN_DIRECTORY==]/[==OPENDAP_BASEDIR==]

# String (PREFIX below) used to build the URL pointing to the THREDDS dataset
# corresponding to a file (METAMOD dataset, level 2). This URL has a structure like
# "http://threddsserver/path_to_thredds_catalog?dataset=PREFIXinstitution/dir/file"
# The PREFIX can be empty. It depends on the THREDDS configuration.
#THREDDS_DATASET_PREFIX =

# URL of OPeNDAP server. If no OPeNDAP server is installed, use an URL that
# gives access to the data repository by HTTP download.
OPENDAP_URL = http://thredds.example.com:8081/thredds/catalog/data

# Ownertag for uploaded datasets:
UPLOAD_OWNERTAG = MM

# Initial content of the [==WEBRUN_DIRECTORY==]/ftp_events file. Note that
# this file can be edited and new events added while the application is in
# operation. An existing file will not be touched by an update of the of the
# METAMOD 2.x software. The initial content will only be used if no ftp_events
# file already exists.
FTP_EVENTS_INITIAL_CONTENT =
 dummy      100 0 00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23

# Institutions available in the new user registration form:
INSTITUTION_LIST =
 IXI International Example Institute
 ASI Another Similar Institute

# ============ Metamod HARVEST configuration

# Add your sources for OAI harvesting as a list of "key url" lines
#OAI_HARVEST_SOURCES =
 NP http://risapi.data.npolar.no/oai
 HI http://pegasus.nodc.no:8080/ipy_oai/oai.jsp

# use ordinary crontab syntax to determine times when harvester should run
HARVEST_CRONTAB = 30 04 * * *
# use "30 04 * * *" to run every night at 04:30
# use "*/10 * * * *" to run every ten minutes

# ============ Metamod OAI_PMH configuration

# The content-type the WWW-server delivers back. For debug-puposes,
# "text/plain" is easier to view. On a production site you should use
# "text/xml".
#PMH_CONTENT_TYPE = text/plain

# Repository name:
PMH_REPOSITORY_NAME = Test

# Repository Identifier
PMH_REPOSITORY_IDENTIFIER = met.no-TEST

# List of ownertags availabele for export:
PMH_EXPORT_TAGS = [==DATASET_TAGS==]

# The XML is validated before it is sent to the requester. Metadata
# records that do not validate are marked as deleted. To turn this validation
# off, set PMH_VALIDATION to off.
#PMH_VALIDATION = off
# please change this to true/false or 1/0 - FIXME

# ============ METAMODTHREDDS configuration ==============

# Name of the THREDDS catalog (the name attribute in the catalog element in
# the THREDDS catalog):
THREDDS_CATALOG_NAME = THREDDS catalog for EXAMPLE data

# Name of the topmost dataset (the name attribute in the topmost dataset
# element in the THREDDS catalog):
THREDDS_TOP_DATASET_NAME = EXAMPLE

# Path to THREDDS catalog directory:
THREDDS_CATALOG_DIR = /path/to/metamod/threddsContent

# File name of THREDDS catalog:
THREDDS_CATALOG_FILE = catalog.xml

# ============ Test configuration ==============
#
# TEST_IMPORT_* are used to set up a test environment for automatic importing
# of datasets into the database and data repository. This involves both the
# METAMODUPLOAD and the METAMODBASE modules.
#
# When testing, a virtual time is used which goes faster than ordinary time.
# The following speedup factor is the number of virtual seconds per real
# second. If set to 0, import testing is turned off.
#TEST_IMPORT_SPEEDUP = 100

# The virtual time starts at a specific point in real time. At this point
# the virtual date and time is the same as the real date and time. The
# following number represents this point of time as number of seconds since
# the epoch. (Use the show_time_now.pl utility to get a value for this number).
#
# *** WARNING *** THIS DATE MUST BE NO OLDER THAN 3 MONTHS OR YOU WILL GET AN
# INTEGER OVERFLOW!!! THIS WILL NEED TO BE PERIODICALLY UPDATED! ***
TEST_IMPORT_BASETIME = 1309258594

# Set this value to a '#' to activate sending E-mail regarding errors in
# uploaded files to actual users. It comments out setting the E-mail recipient
# to [==OPERATOR_EMAIL==].
#TEST_EMAIL_RECIPIENT = #

# ============ Subscription configuration ==============

# Configuration of the METAMOD subscription services

# The directory where SMS will look for new transfers to perform.
#SUBSCRIPTION_SMS_DIRECTORY = /path/to/some/dir

SUBSCRIPTION_ENABLED = ENABLED
# please change this to true/false or 1/0 - FIXME

# ============ Authentication configuration ============
#
# Configuration of METAMOD configuration

# The type of authentication to perform. The types DB (default) and LDAP are
# supported.
#AUTH_TYPE = LDAP

# LDAP server used for authentication + base DN
#LDAP_SERVER = ldaps://ldap.example.com
#LDAP_BASE_DN = ou=user,ou=internal,dc=example,dc=com

# ============== Distribution configuration =================

# A comma separated list of distribution statements that are interpreted as
# freely available and can be downloaded via the collection basket.
#COLLECTION_BASKET_DIST_STATEMENTS = free, something else
